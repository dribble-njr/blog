import{_ as o,c as i,e as p,a as s,d as t,b as e,r as c,o as l}from"./app-DeAcFSYJ.js";const r={},u={href:"https://github.com/clauderic/dnd-kit/issues/1204",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/clauderic/dnd-kit/issues/893",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/clauderic/dnd-kit/issues/122",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/clauderic/dnd-kit/pull/334",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/clauderic/dnd-kit/blob/master/stories/components/Draggable/DraggableOverlay.tsx",target:"_blank",rel:"noopener noreferrer"};function b(g,n){const a=c("ExternalLinkIcon");return l(),i("div",null,[n[6]||(n[6]=p(`<p>@dnd-kit - 用于 React 的轻量级、模块化、高性能、可访问和可扩展的拖放工具包。</p><h2 id="context-provider" tabindex="-1"><a class="header-anchor" href="#context-provider"><span>Context Provider</span></a></h2><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token function-variable function">SortableItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">itemRender</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactElement
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> attributes<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> setNodeRef<span class="token punctuation">,</span> transform<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> props<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    transform<span class="token operator">:</span> <span class="token constant">CSS</span><span class="token punctuation">.</span>Transform<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">,</span>
    transition<span class="token operator">:</span> transition<span class="token operator">!</span><span class="token punctuation">,</span>
    cursor<span class="token operator">:</span> <span class="token string">&#39;move&#39;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mr-2<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setNodeRef<span class="token punctuation">}</span></span>
      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token operator">...</span>style <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>attributes<span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>listeners<span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token function">itemRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="踩坑" tabindex="-1"><a class="header-anchor" href="#踩坑"><span>踩坑</span></a></h2><h3 id="dnd-kit-会将鼠标点击事件识别为拖拽事件" tabindex="-1"><a class="header-anchor" href="#dnd-kit-会将鼠标点击事件识别为拖拽事件"><span>dnd kit 会将鼠标点击事件识别为拖拽事件</span></a></h3>`,5)),s("p",null,[s("a",u,[n[0]||(n[0]=t("https://github.com/clauderic/dnd-kit/issues/1204")),e(a)])]),s("p",null,[s("a",d,[n[1]||(n[1]=t("https://github.com/clauderic/dnd-kit/issues/893")),e(a)])]),n[7]||(n[7]=p(`<p>需要注册一些传感器：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> sensor <span class="token operator">=</span> <span class="token function">useSensor</span><span class="token punctuation">(</span>PointerSensor<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">activationConstraint</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="条件拖拽" tabindex="-1"><a class="header-anchor" href="#条件拖拽"><span>条件拖拽</span></a></h3><p>让元素在某些条件下允许排序：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> attributes<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> setNodeRef<span class="token punctuation">,</span> transform<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token operator">=</span>
  <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> props<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> props<span class="token punctuation">.</span>disabled <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="video-元素无法被拖拽" tabindex="-1"><a class="header-anchor" href="#video-元素无法被拖拽"><span>video 元素无法被拖拽</span></a></h3><p>外层包裹一个 <code>div</code>。</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>videoItem<span class="token punctuation">}</span></span>
  <span class="token attr-name">onMouseEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    videoRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onMouseLeave</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    videoRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
    <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>videoRef<span class="token punctuation">}</span></span>
    <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>resource<span class="token punctuation">.</span>resourceUrl<span class="token punctuation">}</span></span>
    <span class="token attr-name">controls</span>
    <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>video<span class="token punctuation">}</span></span>
    <span class="token attr-name">muted</span>
    <span class="token attr-name">loop</span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>track</span> <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>captions<span class="token punctuation">&quot;</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="拖拽动画异常" tabindex="-1"><a class="header-anchor" href="#拖拽动画异常"><span>拖拽动画异常</span></a></h3><p>排序策略</p><p>需要选择默认</p><h3 id="无限拖拽出现滚动条" tabindex="-1"><a class="header-anchor" href="#无限拖拽出现滚动条"><span>无限拖拽出现滚动条</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>modifiers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>restrictToFirstScrollableAncestor<span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="鼠标跟手" tabindex="-1"><a class="header-anchor" href="#鼠标跟手"><span>鼠标跟手</span></a></h3>`,14)),s("p",null,[s("a",k,[n[2]||(n[2]=t("https://github.com/clauderic/dnd-kit/issues/122")),e(a)]),n[4]||(n[4]=s("br",null,null,-1)),s("a",v,[n[3]||(n[3]=t("https://github.com/clauderic/dnd-kit/pull/334")),e(a)])]),s("p",null,[s("a",m,[n[5]||(n[5]=t("https://github.com/clauderic/dnd-kit/blob/master/stories/components/Draggable/DraggableOverlay.tsx")),e(a)])])])}const f=o(r,[["render",b],["__file","001-dnd-kit.html.vue"]]),x=JSON.parse('{"path":"/frontend/practice/001-dnd-kit.html","title":"dnd-kit 踩坑","lang":"zh-CN","frontmatter":{"title":"dnd-kit 踩坑","date":"2023-11-23T00:00:00.000Z","icon":"tuozhuai","category":["practice"],"tag":["frontend","拖拽排序","dnd kit"],"description":"@dnd-kit - 用于 React 的轻量级、模块化、高性能、可访问和可扩展的拖放工具包。 Context Provider 踩坑 dnd kit 会将鼠标点击事件识别为拖拽事件 https://github.com/clauderic/dnd-kit/issues/1204 https://github.com/clauderic/dnd-kit...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/frontend/practice/001-dnd-kit.html"}],["meta",{"property":"og:title","content":"dnd-kit 踩坑"}],["meta",{"property":"og:description","content":"@dnd-kit - 用于 React 的轻量级、模块化、高性能、可访问和可扩展的拖放工具包。 Context Provider 踩坑 dnd kit 会将鼠标点击事件识别为拖拽事件 https://github.com/clauderic/dnd-kit/issues/1204 https://github.com/clauderic/dnd-kit..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-06T15:43:46.000Z"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:tag","content":"frontend"}],["meta",{"property":"article:tag","content":"拖拽排序"}],["meta",{"property":"article:tag","content":"dnd kit"}],["meta",{"property":"article:published_time","content":"2023-11-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-06T15:43:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"dnd-kit 踩坑\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-11-23T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-06T15:43:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[{"level":2,"title":"1 Context Provider","slug":"context-provider","link":"#context-provider","children":[]},{"level":2,"title":"2 踩坑","slug":"踩坑","link":"#踩坑","children":[{"level":3,"title":"2.1 dnd kit 会将鼠标点击事件识别为拖拽事件","slug":"dnd-kit-会将鼠标点击事件识别为拖拽事件","link":"#dnd-kit-会将鼠标点击事件识别为拖拽事件","children":[]},{"level":3,"title":"2.2 条件拖拽","slug":"条件拖拽","link":"#条件拖拽","children":[]},{"level":3,"title":"2.3 video 元素无法被拖拽","slug":"video-元素无法被拖拽","link":"#video-元素无法被拖拽","children":[]},{"level":3,"title":"2.4 拖拽动画异常","slug":"拖拽动画异常","link":"#拖拽动画异常","children":[]},{"level":3,"title":"2.5 无限拖拽出现滚动条","slug":"无限拖拽出现滚动条","link":"#无限拖拽出现滚动条","children":[]},{"level":3,"title":"2.6 鼠标跟手","slug":"鼠标跟手","link":"#鼠标跟手","children":[]}]}],"git":{"createdTime":1721293634000,"updatedTime":1730907826000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":2}]},"readingTime":{"minutes":0.81,"words":244},"filePathRelative":"frontend/practice/001-dnd-kit.md","localizedDate":"2023年11月23日","excerpt":"","autoDesc":true}');export{f as comp,x as data};
