import{_ as o,c as r,a,e as p,d as s,b as e,r as c,o as i}from"./app-DjBUyNfp.js";const l={},u={href:"https://api.highcharts.com/highcharts/exporting.fallbackToExportServer",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/canvg/canvg",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/yWorks/jsPDF",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/yWorks/svg2pdf.js",target:"_blank",rel:"noopener noreferrer"},g={href:"https://api.highcharts.com/highcharts/exporting.libURL",target:"_blank",rel:"noopener noreferrer"},m={href:"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/exporting/offline-download-demo/",target:"_blank",rel:"noopener noreferrer"};function v(f,n){const t=c("ExternalLinkIcon");return i(),r("div",null,[n[13]||(n[13]=a("p",null,"客户端导出指的是不需要提交数据到导出服务器，直接在浏览器上可以将图表导出为常见图片文件或 PDF 文档。以下情况非常适合使用客户端导出：",-1)),n[14]||(n[14]=a("ul",null,[a("li",null,"不希望将图表数据或图表配置发送到我们的导出服务器"),a("li",null,"希望省去自己配置导出服务器"),a("li",null,"不需要在低版本 IE （IE9 及以下）浏览器上使用导出功能")],-1)),n[15]||(n[15]=a("h2",{id:"客户端导出",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#客户端导出"},[a("span",null,"客户端导出")])],-1)),a("p",null,[n[1]||(n[1]=s("客户端导出功能模块使用现代浏览器技术来完成相关的功能，因此某些功能在低版本的浏览器上是无法正常使用的，对于不支持的浏览器，我们默认会回退到提交数据到导出服务器，可以通过 ")),a("a",u,[n[0]||(n[0]=s("exporting.fallbackToExportServer")),e(t)]),n[2]||(n[2]=s(" 来关闭行为，关于客户端导出在不同浏览器中的兼容详情请参考下方的表格。"))]),a("p",null,[n[7]||(n[7]=s("IE 浏览器导出 PNG 格式图片或包含图片的图表时需要额外的 ")),a("a",d,[n[3]||(n[3]=s("canvg")),e(t)]),n[8]||(n[8]=s(" 库；所有浏览器导出 PDF 文件都需要 ")),a("a",h,[n[4]||(n[4]=s("jsPDF")),e(t)]),n[9]||(n[9]=s(" 及 ")),a("a",k,[n[5]||(n[5]=s("svg2PDF")),e(t)]),n[10]||(n[10]=s(" 库，默认情况下，这些文件会根据需求从我们的服务器上加载，可以通过 ")),a("a",g,[n[6]||(n[6]=s("exporting.libURL")),e(t)]),n[11]||(n[11]=s(" 配置来指定加载这些文件的地址。如果页面中已经加载过这些文件，Highcharts 将不会再次加载。"))]),n[16]||(n[16]=p(`<p>PDF 不支持导出图像，会退回到导出服务器。</p><p>使用客户端导出很简单，只需要引入图表导出功能相关的文件即可，需要引入的文件如下所示：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://cdn.hcharts.cn/highcharts/highcharts.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://cdn.hcharts.cn/highcharts/modules/exporting.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://cdn.hcharts.cn/highcharts/modules/offline-exporting.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),a("p",null,[a("a",m,[n[12]||(n[12]=s("客户端导出官方 demo")),e(t)])]),n[17]||(n[17]=p(`<h2 id="react" tabindex="-1"><a class="header-anchor" href="#react"><span>React</span></a></h2><p>如果需要使用 React，需要使用模块导入，同时在使用之前对导出功能进行挂载。</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Highcharts <span class="token keyword">from</span> <span class="token string">&#39;highcharts&#39;</span>
<span class="token keyword">import</span> HighchartsReact <span class="token keyword">from</span> <span class="token string">&#39;highcharts-react-official&#39;</span>
<span class="token keyword">import</span> HcExporting <span class="token keyword">from</span> <span class="token string">&#39;highcharts/modules/exporting&#39;</span>
<span class="token keyword">import</span> OfflineExporting <span class="token keyword">from</span> <span class="token string">&#39;highcharts/modules/offline-exporting&#39;</span>

<span class="token function">HcExporting</span><span class="token punctuation">(</span>Highcharts<span class="token punctuation">)</span>
<span class="token function">OfflineExporting</span><span class="token punctuation">(</span>Highcharts<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>highcharts-react-official</code> 提供了对 React 的支持，可以使用 <code>ref</code> 获取生成的 <code>chart</code> 示例。</p><p><code>HcExporting(Highcharts)</code> 和 <code>OfflineExporting(Highcharts)</code> 会分别将 <code>exportChart()</code> 和 <code>exportChartLocal()</code> 两个方法挂载到实例对象中。</p></div><p>如果使用 <code>HighCharts</code> 自带的操作按钮进行导出，那么不需要手动调用导出方法。</p><p>如果需要自定义导出按钮，则需要使用 <code>exportChartLocal()</code> 方法。</p><div class="language-jsx line-numbers-mode" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChartOperationBar</span></span>
  <span class="token attr-name">chart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{chartState}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">leftInfoChildren</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{props.leftInfoChildren}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">rightInfoChildren</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{props.rightInfoChildren}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">exportChartTitle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{props.exportChartTitle}<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HighchartsReact</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>chartRef<span class="token punctuation">}</span></span> <span class="token attr-name">highcharts</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Highcharts<span class="token punctuation">}</span></span> <span class="token attr-name">options</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>options<span class="token punctuation">}</span></span>
<span class="token attr-name">callback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">chart</span><span class="token operator">:</span> Chart</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setChartState</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面这个代码使用 <code>callback</code> 在 <code>highcharts</code> 实例化后将实例设置为 <code>state</code>，保证自定义操作组件能够获取到实例对象，在该组件中使用 <code>exportChartLocal()</code> 方法即可实现客户端导出。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><ol><li>如果简单地传递 <code>chartRef.current.chart</code>，子组件不会重新渲染导致获取到 <code>chart</code> 实例为 <code>undefined</code>。</li><li>必须使用 <code>exportChartLocal()</code> 方法，若使用 <code>exportChart()</code> 方法仍然会使用服务器导出。</li></ol></div>`,9))])}const x=o(l,[["render",v],["__file","007-offline-export-in-highcharts.html.vue"]]),y=JSON.parse('{"path":"/frontend/practice/007-offline-export-in-highcharts.html","title":"HighCharts 客户端导出图片","lang":"zh-CN","frontmatter":{"title":"HighCharts 客户端导出图片","date":"2024-01-23T00:00:00.000Z","icon":"highcharts","category":["practice"],"tag":["highcharts"],"description":"客户端导出指的是不需要提交数据到导出服务器，直接在浏览器上可以将图表导出为常见图片文件或 PDF 文档。以下情况非常适合使用客户端导出： 不希望将图表数据或图表配置发送到我们的导出服务器 希望省去自己配置导出服务器 不需要在低版本 IE （IE9 及以下）浏览器上使用导出功能 客户端导出 客户端导出功能模块使用现代浏览器技术来完成相关的功能，因此某些功...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/frontend/practice/007-offline-export-in-highcharts.html"}],["meta",{"property":"og:title","content":"HighCharts 客户端导出图片"}],["meta",{"property":"og:description","content":"客户端导出指的是不需要提交数据到导出服务器，直接在浏览器上可以将图表导出为常见图片文件或 PDF 文档。以下情况非常适合使用客户端导出： 不希望将图表数据或图表配置发送到我们的导出服务器 希望省去自己配置导出服务器 不需要在低版本 IE （IE9 及以下）浏览器上使用导出功能 客户端导出 客户端导出功能模块使用现代浏览器技术来完成相关的功能，因此某些功..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-06T15:43:46.000Z"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:tag","content":"highcharts"}],["meta",{"property":"article:published_time","content":"2024-01-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-06T15:43:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HighCharts 客户端导出图片\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-23T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-06T15:43:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[{"level":2,"title":"1 客户端导出","slug":"客户端导出","link":"#客户端导出","children":[]},{"level":2,"title":"2 React","slug":"react","link":"#react","children":[]}],"git":{"createdTime":1706078137000,"updatedTime":1730907826000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":2}]},"readingTime":{"minutes":2.5,"words":751},"filePathRelative":"frontend/practice/007-offline-export-in-highcharts.md","localizedDate":"2024年1月23日","excerpt":"","autoDesc":true}');export{x as comp,y as data};
