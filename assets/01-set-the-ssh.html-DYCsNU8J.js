import{_ as i,c as r,e as n,a as t,d as a,b as l,r as o,o as p}from"./app-DeAcFSYJ.js";const c={},d={href:"https://help.aliyun.com/document_detail/51798.html#title-7je-5ba-sm2",target:"_blank",rel:"noopener noreferrer"};function m(h,e){const s=o("ExternalLinkIcon");return p(),r("div",null,[e[6]||(e[6]=n('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>使用密码登录服务器并不安全，因此我们需要设置密钥登录。</p></div><h2 id="创建密钥对" tabindex="-1"><a class="header-anchor" href="#创建密钥对"><span>创建密钥对</span></a></h2><p>登录阿里云控制台 -&gt; 云服务 ECS -&gt; 网络与安全 -&gt; 密钥对 -&gt; 创建密钥对。</p><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-create-ssh.png" alt="step1-create-ssh" tabindex="0" loading="lazy"><figcaption>step1-create-ssh</figcaption></figure><p>创建成功之后，浏览器会自动下载一个 <code>.pem</code> 私钥文件，记住这个文件的位置，之后要用。</p><h2 id="绑定密钥对" tabindex="-1"><a class="header-anchor" href="#绑定密钥对"><span>绑定密钥对</span></a></h2><p>选中刚才创建的密钥对，点击右侧<strong>绑定密钥对</strong>，将密钥对绑定到实例。</p><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step2-bind-ssh.png" alt="step2-bind-ssh" tabindex="0" loading="lazy"><figcaption>step2-bind-ssh</figcaption></figure><h2 id="添加安全组规则" tabindex="-1"><a class="header-anchor" href="#添加安全组规则"><span>添加安全组规则</span></a></h2><p>云服务 ECS -&gt; 网络与安全 -&gt; 安全组 -&gt; 入方向 -&gt; 手动添加。</p><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step3-add-port.png" alt="step3-add-port" tabindex="0" loading="lazy"><figcaption>step3-add-port</figcaption></figure><p>执行完后重启实例。</p><h2 id="密钥验证并禁用密码登录" tabindex="-1"><a class="header-anchor" href="#密钥验证并禁用密码登录"><span>密钥验证并禁用密码登录</span></a></h2>',13)),t("ol",null,[e[4]||(e[4]=t("li",null,[t("p",null,"安装 MobaXterm")],-1)),t("li",null,[t("p",null,[e[1]||(e[1]=a("在 MobaXterm 下输入命令（")),t("a",d,[e[0]||(e[0]=a("参考阿里云官网文档")),l(s)]),e[2]||(e[2]=a("）"))]),e[3]||(e[3]=n(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">400</span> <span class="token punctuation">[</span>.pem私钥文件在本地机上的存储路径<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>.pem私钥文件在本地机上的存储路径<span class="token punctuation">]</span> root@<span class="token punctuation">[</span>公网IP地址<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2))]),e[5]||(e[5]=n(`<li><p>输入以下命令修改 config 文件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/ssh/sshd_config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>按 <code>i</code> 进入编辑模式</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#禁用密码验证</span>
PasswordAuthentication no
<span class="token comment">#启用密钥验证</span>
PubkeyAuthentication <span class="token function">yes</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>重启 ssh 服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">service</span> sshd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,3))]),e[7]||(e[7]=t("p",null,"接下来在阿里云控制台使用 Workbench 远程连接，可以发现密码登录已经被禁用了，只能使用密钥登录。",-1)),e[8]||(e[8]=t("figure",null,[t("img",{src:"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step4-pw-fail.png",alt:"step4-pw-fail",tabindex:"0",loading:"lazy"}),t("figcaption",null,"step4-pw-fail")],-1))])}const g=i(c,[["render",m],["__file","01-set-the-ssh.html.vue"]]),b=JSON.parse('{"path":"/backend/linux/practice/01-set-the-ssh.html","title":"服务器设置 ssh 密钥登录","lang":"zh-CN","frontmatter":{"title":"服务器设置 ssh 密钥登录","date":"2021-05-12T00:00:00.000Z","icon":"key","category":["linux"],"tag":["centos","ssh"],"description":" 提示 使用密码登录服务器并不安全，因此我们需要设置密钥登录。 创建密钥对 登录阿里云控制台 -> 云服务 ECS -> 网络与安全 -> 密钥对 -> 创建密钥对。 step1-create-sshstep1-create-ssh 创建成功之后，浏览器会自动下载一个 .pem 私钥文件，记住这个文件的位置，之后要用。 绑定密钥对 选中刚才创建的密钥对...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/backend/linux/practice/01-set-the-ssh.html"}],["meta",{"property":"og:title","content":"服务器设置 ssh 密钥登录"}],["meta",{"property":"og:description","content":" 提示 使用密码登录服务器并不安全，因此我们需要设置密钥登录。 创建密钥对 登录阿里云控制台 -> 云服务 ECS -> 网络与安全 -> 密钥对 -> 创建密钥对。 step1-create-sshstep1-create-ssh 创建成功之后，浏览器会自动下载一个 .pem 私钥文件，记住这个文件的位置，之后要用。 绑定密钥对 选中刚才创建的密钥对..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-create-ssh.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-03T06:25:23.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"服务器设置 ssh 密钥登录"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:tag","content":"centos"}],["meta",{"property":"article:tag","content":"ssh"}],["meta",{"property":"article:published_time","content":"2021-05-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-03T06:25:23.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"服务器设置 ssh 密钥登录\\",\\"image\\":[\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-create-ssh.png\\",\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step2-bind-ssh.png\\",\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step3-add-port.png\\",\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step4-pw-fail.png\\"],\\"datePublished\\":\\"2021-05-12T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-03T06:25:23.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[{"level":2,"title":"1 创建密钥对","slug":"创建密钥对","link":"#创建密钥对","children":[]},{"level":2,"title":"2 绑定密钥对","slug":"绑定密钥对","link":"#绑定密钥对","children":[]},{"level":2,"title":"3 添加安全组规则","slug":"添加安全组规则","link":"#添加安全组规则","children":[]},{"level":2,"title":"4 密钥验证并禁用密码登录","slug":"密钥验证并禁用密码登录","link":"#密钥验证并禁用密码登录","children":[]}],"git":{"createdTime":1733207123000,"updatedTime":1733207123000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":1}]},"readingTime":{"minutes":1.28,"words":385},"filePathRelative":"backend/linux/practice/01-set-the-ssh.md","localizedDate":"2021年5月12日","excerpt":"","autoDesc":true}');export{g as comp,b as data};
