import{_ as s,c as a,e,o as t}from"./app-nKKmHBUX.js";const p={};function o(i,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> workspace mobile <span class="token function">add</span> i18next react-i18next expo-localization
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置 app.json</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;expo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;expo-localization&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="集成" tabindex="-1"><a class="header-anchor" href="#集成"><span>集成</span></a></h2><p><code>apps/mobile/locales/index.ts</code></p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">&#39;i18next&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initReactI18next <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-i18next&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Localization <span class="token keyword">from</span> <span class="token string">&#39;expo-localization&#39;</span>
<span class="token keyword">import</span> English <span class="token keyword">from</span> <span class="token string">&#39;./en&#39;</span>
<span class="token keyword">import</span> Chinese <span class="token keyword">from</span> <span class="token string">&#39;./zh&#39;</span>

<span class="token keyword">const</span> resources <span class="token operator">=</span> <span class="token punctuation">{</span>
  en<span class="token operator">:</span> <span class="token punctuation">{</span> translation<span class="token operator">:</span> English <span class="token punctuation">}</span><span class="token punctuation">,</span>
  zh<span class="token operator">:</span> <span class="token punctuation">{</span> translation<span class="token operator">:</span> Chinese <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserLanguage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> locales <span class="token operator">=</span> Localization<span class="token punctuation">.</span><span class="token function">getLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>locales<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> locales<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>languageCode <span class="token operator">??</span> <span class="token string">&#39;zh&#39;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&#39;zh&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.error(&#39;Error retrieving language preference:&#39;, error);</span>
    <span class="token keyword">return</span> <span class="token string">&#39;zh&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token function">getUserLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

i18n<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>initReactI18next<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  resources<span class="token punctuation">,</span>
  compatibilityJSON<span class="token operator">:</span> <span class="token string">&#39;v3&#39;</span><span class="token punctuation">,</span>
  lng<span class="token operator">:</span> language<span class="token punctuation">,</span>
  fallbackLng<span class="token operator">:</span> <span class="token string">&#39;zh&#39;</span><span class="token punctuation">,</span>
  interpolation<span class="token operator">:</span> <span class="token punctuation">{</span>
    escapeValue<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// react already safes from xss</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  react<span class="token operator">:</span> <span class="token punctuation">{</span>
    useSuspense<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// avoid suspense problem</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> i18n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7)]))}const l=s(p,[["render",o],["__file","04-i18n.html.vue"]]),r=JSON.parse('{"path":"/project/imperial-kitchen/04-i18n.html","title":"国际化","lang":"zh-CN","frontmatter":{"title":"国际化","date":"2024-09-29T00:00:00.000Z","icon":"api","category":["Project"],"tag":["imperial-kitchen","系统设计"],"description":"配置 配置 app.json 集成 apps/mobile/locales/index.ts ","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/04-i18n.html"}],["meta",{"property":"og:title","content":"国际化"}],["meta",{"property":"og:description","content":"配置 配置 app.json 集成 apps/mobile/locales/index.ts "}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-17T10:16:46.000Z"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:tag","content":"imperial-kitchen"}],["meta",{"property":"article:tag","content":"系统设计"}],["meta",{"property":"article:published_time","content":"2024-09-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-17T10:16:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"国际化\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-09-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-17T10:16:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[{"level":2,"title":"1 配置","slug":"配置","link":"#配置","children":[]},{"level":2,"title":"2 集成","slug":"集成","link":"#集成","children":[]}],"git":{"createdTime":1734428849000,"updatedTime":1734430606000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":2}]},"readingTime":{"minutes":0.45,"words":135},"filePathRelative":"project/imperial-kitchen/04-i18n.md","localizedDate":"2024年9月29日","excerpt":"","autoDesc":true}');export{l as comp,r as data};
