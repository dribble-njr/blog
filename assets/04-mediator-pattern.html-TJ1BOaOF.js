import{_ as t,r as e,o,c,b as p,w as l,a as n,d as s}from"./app-c2PwqoB5.js";const i={},u=n("p",null,"中介者模式使组件之间通过一个中心点（调解器）进行交互成为可能。它允许组件接收请求并将其发送出去，而不是彼此直接对话！在 JavaScript 中，中介者通常只是一个对象字面或函数。",-1),r=n("p",null,"你可以把这种模式比作空中交通管制员和飞行员之间的关系。飞行员与空中交通管制员之间的对话可能会导致混乱，而不是让飞行员直接对话。空中交通管制员确保所有飞机都能收到所需的信息，以便安全飞行，不撞击其他飞机。",-1),k=n("p",null,"虽然我们不希望在 JavaScript 中控制飞机，但我们经常需要处理对象之间的多向数据。如果组件数量较多，组件之间的通信可能会变得相当混乱。",-1),m=n("figure",null,[n("img",{src:"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170836.png",alt:"20240918170836",tabindex:"0",loading:"lazy"}),n("figcaption",null,"20240918170836")],-1),d=n("p",null,"与让每个对象直接与其他对象对话从而形成多对多的关系不同，对象的请求由调解器处理。调解器处理请求，并将其发送到需要的地方。",-1),b=n("figure",null,[n("img",{src:"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170920.png",alt:"20240918170920",tabindex:"0",loading:"lazy"}),n("figcaption",null,"20240918170920")],-1),v=n("p",null,"聊天室就是中间件模式的一个很好的用例！聊天室中的用户不会直接对话。聊天室只是用户之间的中介。",-1),g=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js","data-title":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Chatroom"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("users "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token comment"},"// 保存用户列表"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 注册用户到聊天室"),s(`
  `),n("span",{class:"token function"},"register"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"user"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("users"),n("span",{class:"token punctuation"},"["),s("user"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(` user
    user`),n("span",{class:"token punctuation"},"."),s("chatroom "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),s(),n("span",{class:"token comment"},"// 为每个用户设置聊天室中介者"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token comment"},"// 发送消息，userFrom 发送给 userTo"),s(`
  `),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("message"),n("span",{class:"token punctuation"},","),s(" userFrom"),n("span",{class:"token punctuation"},","),s(" userTo")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("userTo"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token comment"},"// 私聊消息"),s(`
      userTo`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"receive"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},","),s(" userFrom"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token comment"},"// 群聊消息"),s(`
      Object`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"keys"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("users"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("users"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"!=="),s(" userFrom"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
          `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("users"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"receive"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},","),s(" userFrom"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
      `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"User"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(` name
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("chatroom "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token comment"},"// 用户所属的聊天室中介者"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("message"),n("span",{class:"token punctuation"},","),s(" userTo")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("chatroom"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),s("message"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},","),s(" userTo"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token function"},"receive"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("message"),n("span",{class:"token punctuation"},","),s(" userFrom")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    console`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("userFrom"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," to "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},": "),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("message"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 示例"),s(`
`),n("span",{class:"token keyword"},"const"),s(" chatroom "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Chatroom"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"const"),s(" user1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"User"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Alice'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"const"),s(" user2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"User"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Bob'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"const"),s(" user3 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"User"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Charlie'"),n("span",{class:"token punctuation"},")"),s(`

chatroom`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"register"),n("span",{class:"token punctuation"},"("),s("user1"),n("span",{class:"token punctuation"},")"),s(`
chatroom`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"register"),n("span",{class:"token punctuation"},"("),s("user2"),n("span",{class:"token punctuation"},")"),s(`
chatroom`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"register"),n("span",{class:"token punctuation"},"("),s("user3"),n("span",{class:"token punctuation"},")"),s(`

user1`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Hello, Bob!'"),n("span",{class:"token punctuation"},","),s(" user2"),n("span",{class:"token punctuation"},")"),s(`
user3`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"send"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'Hi everyone!'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"提示"),n("p",null,"组件的封装也使用了中介者模式，子组件抛出事件在父组件中集中处理。")],-1);function y(w,f){const a=e("CodeDemo");return o(),c("div",null,[u,r,k,m,d,b,v,p(a,{id:"code-demo-21",type:"normal",title:"%E8%81%8A%E5%A4%A9%E5%AE%A4%E7%A4%BA%E4%BE%8B",code:"eJyFU11rE0EU/SuTUMgGypa2b4UIKopvvtQnW+h2vU22bnZgZlMpy0ICKtEWiiD4AQpCwCg0VQQNrcY/sx/xyb/g3JnMdoe09iXZvffcc+49925U3eXVtarrO5yTmy0nZJS2SbQREOLSgIes44aUWXUVIiRsedzucGCcNEgUk6Ulkvx+lx6/zl8Os/6PtP9q+mGI0HgjwD+Rz74N06eHOv9l2nueDj6lowGmGTQ9HgKzkPICkfv4awdOGzaFHr4ohAy7ut2GrJC9jE+zk6Nk/FnJTUeT/NeoUEzGx8nZwbT7xGwwPXrxp9vLvvez3snfn4fIfZsJWhXPz95IuXWKcA7BA6sNnDtNWJRxhKqndVpM4O0QOVIpJKXyjz3RjZLSYYWzGbjg7cE8eV0BYwI+B5NtMphju7u9C25oP4R9bp37WLd3KLvluC3LEpk6aVw7J1LdljwXiE1SaSi/ZQdlsLEehF7ZuexeP8Z6nNkO5BrU+d0TZfOnh8s3LwMjYuf4V4qWriHo+L70Rx5B9qybfn2fv3383zuYX2xpd4aAbUIxVxSUCC93RbPilNQH26dNa2sh0nk5X0xCShaiYt54TbzNqOItrSOlcNDBaTI5ED6ib6TsBDwqvmpLVCkAKi3Psmi6Vbvuey7UDMCKAbhBt830qpEWGsz3JIMAaaOMr3sZyy/MrFyaWZV8slq5XrsDvk8XiWinUlOWYrXEaoRHYA/YPg2ggv1U43+Ln+BF"},{default:l(()=>[g]),_:1}),h])}const j=t(i,[["render",y],["__file","04-mediator-pattern.html.vue"]]),T=JSON.parse('{"path":"/reading/patterns/vanilla/04-mediator-pattern.html","title":"中介者模式","lang":"zh-CN","frontmatter":{"title":"中介者模式","date":"2024-09-18T00:00:00.000Z","icon":"mediator","author":"patterns","category":["reading"],"tag":["design pattern","vanilla","mediator-pattern"],"description":"中介者模式使组件之间通过一个中心点（调解器）进行交互成为可能。它允许组件接收请求并将其发送出去，而不是彼此直接对话！在 JavaScript 中，中介者通常只是一个对象字面或函数。 你可以把这种模式比作空中交通管制员和飞行员之间的关系。飞行员与空中交通管制员之间的对话可能会导致混乱，而不是让飞行员直接对话。空中交通管制员确保所有飞机都能收到所需的信息，...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/04-mediator-pattern.html"}],["meta",{"property":"og:title","content":"中介者模式"}],["meta",{"property":"og:description","content":"中介者模式使组件之间通过一个中心点（调解器）进行交互成为可能。它允许组件接收请求并将其发送出去，而不是彼此直接对话！在 JavaScript 中，中介者通常只是一个对象字面或函数。 你可以把这种模式比作空中交通管制员和飞行员之间的关系。飞行员与空中交通管制员之间的对话可能会导致混乱，而不是让飞行员直接对话。空中交通管制员确保所有飞机都能收到所需的信息，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170836.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-20T05:17:54.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"中介者模式"}],["meta",{"property":"article:author","content":"patterns"}],["meta",{"property":"article:tag","content":"design pattern"}],["meta",{"property":"article:tag","content":"vanilla"}],["meta",{"property":"article:tag","content":"mediator-pattern"}],["meta",{"property":"article:published_time","content":"2024-09-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-20T05:17:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"中介者模式\\",\\"image\\":[\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170836.png\\",\\"https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170920.png\\"],\\"datePublished\\":\\"2024-09-18T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-20T05:17:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"patterns\\"}]}"]]},"headers":[],"git":{"createdTime":1726652941000,"updatedTime":1726809474000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":2}]},"readingTime":{"minutes":1.82,"words":547},"filePathRelative":"reading/patterns/vanilla/04-mediator-pattern.md","localizedDate":"2024年9月18日","excerpt":"","autoDesc":true}');export{j as comp,T as data};
