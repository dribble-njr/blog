import{_ as p,c as e,e as o,a as s,d as a,b as c,r as l,o as i}from"./app-CMUwc0b2.js";const u={},k={href:"https://react.dev/reference/react-dom/flushSync",target:"_blank",rel:"noopener noreferrer"};function r(d,n){const t=l("ExternalLinkIcon");return i(),e("div",null,[n[4]||(n[4]=o(`<p><code>flushSync</code> æ˜¯ React ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¼ºåˆ¶åŒæ­¥æ›´æ–°ã€‚</p><p>å¸®åŠ©ç”¨æˆ·å°†ç„¦ç‚¹ä¿æŒåœ¨æ­£ç¡®çš„ä½ç½®æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ã€‚è¿™å¯¹äºä¾èµ–å±å¹•é˜…è¯»å™¨æˆ–é”®ç›˜å¯¼èˆªçš„ç”¨æˆ·å°¤å…¶é‡è¦ã€‚ä½†å³ä½¿æ˜¯èƒ½å¤Ÿä½¿ç”¨é”®ç›˜çš„ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ç²¾å¿ƒè®¾è®¡çš„ç„¦ç‚¹ç®¡ç†ä½“éªŒä¸­å—ç›Šã€‚</p><p>æœ‰æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ åœ¨çŠ¶æ€æ›´æ–°åæ‰ä¼šå˜å¾—å¯ç”¨ã€‚ä¾‹å¦‚ï¼š</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Show</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡è®¾ç”¨æˆ·ç‚¹å‡»ã€Œæ˜¾ç¤ºã€åï¼Œä»–ä»¬æƒ³è¦åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›å†…å®¹ã€‚è‰¯å¥½çš„ç„¦ç‚¹ç®¡ç†ä¼šåœ¨å…ƒç´ å˜å¾—å¯è§åèšç„¦è¯¥å…ƒç´ ã€‚</p><p>React ä¸­çš„çŠ¶æ€æ›´æ–°æ˜¯æ‰¹é‡è¿›è¡Œçš„ã€‚å› æ­¤ï¼ŒçŠ¶æ€æ›´æ–°ä¸ä¸€å®šä¼šåœ¨è°ƒç”¨çŠ¶æ€æ›´æ–°å‡½æ•°æ—¶ç«‹å³å‘ç”Ÿã€‚</p><p>å› æ­¤ï¼Œå¦‚æœå°è¯•åœ¨çŠ¶æ€æ›´æ–°åç«‹å³èšç„¦å…ƒç´ ï¼Œå®ƒå¯èƒ½æ— æ³•æŒ‰é¢„æœŸå·¥ä½œã€‚è¿™æ˜¯å› ä¸ºæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ å¯èƒ½è¿˜ä¸å¯ç”¨ã€‚</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
				<span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
					inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This probably won&#39;t work</span>
				<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
			<span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Show
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯å¼ºåˆ¶ React åŒæ­¥è¿è¡ŒçŠ¶æ€å’Œ DOM æ›´æ–°ï¼Œä»¥ä¾¿åœ¨æ‚¨å°è¯•èšç„¦æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ æ˜¯å¯ç”¨çš„ã€‚</p><p>æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>react-dom</code> åŒ…ä¸­çš„ <code>flushSync</code> å‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><div class="language-tsx line-numbers-mode" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> flushSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
				<span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
						<span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
					inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
			<span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Show
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>flushSync</code> çš„ä½œç”¨æ˜¯å¼ºåˆ¶ React åŒæ­¥è¿è¡ŒçŠ¶æ€å’Œ DOM æ›´æ–°ã€‚è¿™æ ·ï¼Œåœ¨ <code>flushSync</code> è°ƒç”¨åï¼Œè¾“å…¥å…ƒç´ å°†å˜å¾—å¯ç”¨ï¼Œæ‚¨å¯ä»¥å°è¯•èšç„¦å®ƒã€‚</p><p>é€šå¸¸ï¼Œæ‚¨åº”è¯¥é¿å…è¿™ç§ä¼˜åŒ–ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚ç„¦ç‚¹ç®¡ç†ï¼‰ï¼Œå®ƒæ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>`,13)),s("ul",null,[s("li",null,[s("a",k,[n[0]||(n[0]=a("ğŸ“œ the ",-1)),n[1]||(n[1]=s("code",null,"flushSync",-1)),n[2]||(n[2]=a(" docs",-1)),c(t)]),n[3]||(n[3]=a(".",-1))])])])}const m=p(u,[["render",r],["__file","08-flushSync.html.vue"]]),g=JSON.parse('{"path":"/frontend/framework/react/08-flushSync.html","title":"flushSync","lang":"zh-CN","frontmatter":{"title":"flushSync","description":"flushSync æ˜¯ React ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¼ºåˆ¶åŒæ­¥æ›´æ–°ã€‚ å¸®åŠ©ç”¨æˆ·å°†ç„¦ç‚¹ä¿æŒåœ¨æ­£ç¡®çš„ä½ç½®æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ã€‚è¿™å¯¹äºä¾èµ–å±å¹•é˜…è¯»å™¨æˆ–é”®ç›˜å¯¼èˆªçš„ç”¨æˆ·å°¤å…¶é‡è¦ã€‚ä½†å³ä½¿æ˜¯èƒ½å¤Ÿä½¿ç”¨é”®ç›˜çš„ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ç²¾å¿ƒè®¾è®¡çš„ç„¦ç‚¹ç®¡ç†ä½“éªŒä¸­å—ç›Šã€‚ æœ‰æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ åœ¨çŠ¶æ€æ›´æ–°åæ‰ä¼šå˜å¾—å¯ç”¨ã€‚ä¾‹å¦‚ï¼š å‡è®¾ç”¨æˆ·ç‚¹å‡»ã€Œæ˜¾ç¤ºã€åï¼Œä»–ä»¬æƒ³è¦åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›å†…å®¹ã€‚è‰¯å¥½çš„ç„¦...","head":[["meta",{"property":"og:url","content":"https://dribble-njr.github.io/blog/blog/frontend/framework/react/08-flushSync.html"}],["meta",{"property":"og:title","content":"flushSync"}],["meta",{"property":"og:description","content":"flushSync æ˜¯ React ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¼ºåˆ¶åŒæ­¥æ›´æ–°ã€‚ å¸®åŠ©ç”¨æˆ·å°†ç„¦ç‚¹ä¿æŒåœ¨æ­£ç¡®çš„ä½ç½®æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ã€‚è¿™å¯¹äºä¾èµ–å±å¹•é˜…è¯»å™¨æˆ–é”®ç›˜å¯¼èˆªçš„ç”¨æˆ·å°¤å…¶é‡è¦ã€‚ä½†å³ä½¿æ˜¯èƒ½å¤Ÿä½¿ç”¨é”®ç›˜çš„ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ç²¾å¿ƒè®¾è®¡çš„ç„¦ç‚¹ç®¡ç†ä½“éªŒä¸­å—ç›Šã€‚ æœ‰æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ åœ¨çŠ¶æ€æ›´æ–°åæ‰ä¼šå˜å¾—å¯ç”¨ã€‚ä¾‹å¦‚ï¼š å‡è®¾ç”¨æˆ·ç‚¹å‡»ã€Œæ˜¾ç¤ºã€åï¼Œä»–ä»¬æƒ³è¦åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›å†…å®¹ã€‚è‰¯å¥½çš„ç„¦..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-04T10:58:10.000Z"}],["meta",{"property":"article:author","content":"njr"}],["meta",{"property":"article:modified_time","content":"2025-08-04T10:58:10.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"flushSync\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-04T10:58:10.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"njr\\",\\"url\\":\\"https://github.com/dribble-njr/blog\\",\\"email\\":\\"wzw15292257101@163.com\\"}]}"]]},"headers":[],"git":{"createdTime":1754305090000,"updatedTime":1754305090000,"contributors":[{"name":"dribble-njr","email":"wzw15292257101@163.com","commits":1}]},"readingTime":{"minutes":1.63,"words":489},"filePathRelative":"frontend/framework/react/08-flushSync.md","localizedDate":"2025å¹´8æœˆ4æ—¥","excerpt":"","autoDesc":true}');export{m as comp,g as data};
