<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="https://dribble-njr.github.io/blog/blog/atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
  <id>https://dribble-njr.github.io/blog/blog/</id>
  <title/>
  <subtitle>Personal frontend knowledge base</subtitle>
  <icon>https://dribble-njr.github.io/blog/blog/favicon.ico</icon>
  <updated>2025-08-15T08:51:27.988Z</updated>
  <generator>@vuepress/plugin-feed</generator>
  <link rel="self" href="https://dribble-njr.github.io/blog/blog/atom.xml"/>
  <link rel="alternate" href="https://dribble-njr.github.io/blog/blog/"/>
  <category term="react"/>
  <category term="è®¡ç®—æœºç½‘ç»œ"/>
  <category term="expo"/>
  <category term="news"/>
  <category term="backend"/>
  <category term="node"/>
  <category term="Project"/>
  <category term="linux"/>
  <category term="database"/>
  <category term="æ“ä½œç³»ç»Ÿ"/>
  <category term="operating-system"/>
  <category term="å·¥ç¨‹åŒ–"/>
  <category term="reading"/>
  <category term="practice"/>
  <category term="CSS"/>
  <category term="Pixi"/>
  <category term="READING"/>
  <category term="JavaScript"/>
  <category term="browser"/>
  <contributor>
    <name>patterns</name>
  </contributor>
  <entry>
    <title type="text">å¾®ä¿¡å†…ç½®æµè§ˆå™¨è§†é¢‘ preload å…¼å®¹æ€§é—®é¢˜</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/023-weixin-video-preload.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/023-weixin-video-preload.html"/>
    <updated>2025-08-15T08:49:38.000Z</updated>
    <summary type="html"><![CDATA[<h2>èƒŒæ™¯</h2>
<p>åœ¨ Web é¡¹ç›®ä¸­ä½¿ç”¨ <code>video.js</code> æ’­æ”¾è§†é¢‘æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šé€šè¿‡ <code>preload="metadata"</code> æˆ– <code>preload="auto"</code> æ¥æå‰åŠ è½½è§†é¢‘å…ƒæ•°æ®ï¼ˆ<code>loadedmetadata</code> äº‹ä»¶ï¼‰å’Œé¦–å¸§ï¼Œä»¥ä¾¿æ˜¾ç¤ºå°é¢æˆ–åšä¸€äº›è§†é¢‘æ—¶é•¿è®¡ç®—ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ <strong>å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯ iOS ç‰ˆï¼‰</strong> ä¸­ï¼Œè§†é¢‘çš„åŠ è½½è¡Œä¸ºå­˜åœ¨é™åˆ¶ï¼š</p>
<ul>
<li>å³ä½¿è®¾ç½®äº† <code>autoplay</code>ã€<code>muted</code>ã€<code>preload</code>ï¼Œä¹Ÿ<strong>ä¸ä¼šè‡ªåŠ¨è§¦å‘ <code>loadedmetadata</code></strong>ã€‚</li>
<li>è§†é¢‘é¦–å¸§ä¹Ÿä¸ä¼šåœ¨æœªæ’­æ”¾æ—¶æ¸²æŸ“å‡ºæ¥ã€‚</li>
<li>è¿™äº›è¡Œä¸ºä¸ Chrome / Safari / Android å¾®ä¿¡éƒ½æœ‰å·®å¼‚ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<h2>èƒŒæ™¯</h2>
<p>åœ¨ Web é¡¹ç›®ä¸­ä½¿ç”¨ <code>video.js</code> æ’­æ”¾è§†é¢‘æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šé€šè¿‡ <code>preload="metadata"</code> æˆ– <code>preload="auto"</code> æ¥æå‰åŠ è½½è§†é¢‘å…ƒæ•°æ®ï¼ˆ<code>loadedmetadata</code> äº‹ä»¶ï¼‰å’Œé¦–å¸§ï¼Œä»¥ä¾¿æ˜¾ç¤ºå°é¢æˆ–åšä¸€äº›è§†é¢‘æ—¶é•¿è®¡ç®—ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨ <strong>å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼ˆå°¤å…¶æ˜¯ iOS ç‰ˆï¼‰</strong> ä¸­ï¼Œè§†é¢‘çš„åŠ è½½è¡Œä¸ºå­˜åœ¨é™åˆ¶ï¼š</p>
<ul>
<li>å³ä½¿è®¾ç½®äº† <code>autoplay</code>ã€<code>muted</code>ã€<code>preload</code>ï¼Œä¹Ÿ<strong>ä¸ä¼šè‡ªåŠ¨è§¦å‘ <code>loadedmetadata</code></strong>ã€‚</li>
<li>è§†é¢‘é¦–å¸§ä¹Ÿä¸ä¼šåœ¨æœªæ’­æ”¾æ—¶æ¸²æŸ“å‡ºæ¥ã€‚</li>
<li>è¿™äº›è¡Œä¸ºä¸ Chrome / Safari / Android å¾®ä¿¡éƒ½æœ‰å·®å¼‚ã€‚</li>
</ul>
]]></content>
    <published>2025-08-15T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">useSyncExternalStore</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/09-useSyncExternalStore.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/09-useSyncExternalStore.html"/>
    <updated>2025-08-15T08:49:38.000Z</updated>
    <summary type="html"><![CDATA[<p>ä¸æ˜¯æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ç”¨ React æ„å»ºçš„ã€‚æœ‰å¾ˆå¤šåº“å’Œå¹³å° API æ˜¯å¤–éƒ¨äº React çš„ã€‚å°†è¿™äº›ä¸œè¥¿å¼•å…¥ React çš„ç»„ä»¶æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç†ç”Ÿå‘½å‘¨æœŸæ˜¯æ„å»ºå…¨åŠŸèƒ½åº”ç”¨ç¨‹åºçš„å¿…è¦æ¡ä»¶ã€‚</p>
<p>ä»»åŠ¡æ˜¯åŒæ­¥å¤–éƒ¨ä¸–ç•Œä¸ React ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>useSyncExternalStore</code> é’©å­ã€‚</p>
<p>è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç»„ä»¶ä¸ºä¾‹ï¼Œè¯¥ç»„ä»¶é€šè¿‡ geolocation API æ˜¾ç¤ºæ‚¨çš„å½“å‰ä½ç½®ã€‚geolocation API ä¸æ˜¯ React çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åŒæ­¥ geolocation API çš„å¤–éƒ¨çŠ¶æ€ä¸ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">type</span> <span class="token class-name">LocationData</span> <span class="token operator">=</span>
	<span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span><span class="token punctuation">;</span> geo<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">}</span>
	<span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'available'</span><span class="token punctuation">;</span> geo<span class="token operator">:</span> GeolocationPosition <span class="token punctuation">}</span>
<span class="token comment">// this variable is our external store!</span>
<span class="token keyword">let</span> location<span class="token operator">:</span> LocationData <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribeToGeolocation</span><span class="token punctuation">(</span><span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> watchId <span class="token operator">=</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">watchPosition</span><span class="token punctuation">(</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		location <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'available'</span><span class="token punctuation">,</span> geo<span class="token operator">:</span> position <span class="token punctuation">}</span>
		<span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		location <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span> <span class="token punctuation">}</span>
		<span class="token keyword">return</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">clearWatch</span><span class="token punctuation">(</span>watchId<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getGeolocationSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> location
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>
		subscribeToGeolocation<span class="token punctuation">,</span>
		getGeolocationSnapshot<span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'unavailable'</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
				<span class="token string">'Your location is unavailable'</span>
			<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					Your location is </span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>geo<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token string">'Â°, '</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>geo<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token string">'Â°'</span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>ä¸æ˜¯æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ç”¨ React æ„å»ºçš„ã€‚æœ‰å¾ˆå¤šåº“å’Œå¹³å° API æ˜¯å¤–éƒ¨äº React çš„ã€‚å°†è¿™äº›ä¸œè¥¿å¼•å…¥ React çš„ç»„ä»¶æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç†ç”Ÿå‘½å‘¨æœŸæ˜¯æ„å»ºå…¨åŠŸèƒ½åº”ç”¨ç¨‹åºçš„å¿…è¦æ¡ä»¶ã€‚</p>
<p>ä»»åŠ¡æ˜¯åŒæ­¥å¤–éƒ¨ä¸–ç•Œä¸ React ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>useSyncExternalStore</code> é’©å­ã€‚</p>
<p>è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç»„ä»¶ä¸ºä¾‹ï¼Œè¯¥ç»„ä»¶é€šè¿‡ geolocation API æ˜¾ç¤ºæ‚¨çš„å½“å‰ä½ç½®ã€‚geolocation API ä¸æ˜¯ React çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åŒæ­¥ geolocation API çš„å¤–éƒ¨çŠ¶æ€ä¸ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSyncExternalStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">type</span> <span class="token class-name">LocationData</span> <span class="token operator">=</span>
	<span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span><span class="token punctuation">;</span> geo<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">}</span>
	<span class="token operator">|</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'available'</span><span class="token punctuation">;</span> geo<span class="token operator">:</span> GeolocationPosition <span class="token punctuation">}</span>
<span class="token comment">// this variable is our external store!</span>
<span class="token keyword">let</span> location<span class="token operator">:</span> LocationData <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">subscribeToGeolocation</span><span class="token punctuation">(</span><span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> watchId <span class="token operator">=</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">watchPosition</span><span class="token punctuation">(</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		location <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'available'</span><span class="token punctuation">,</span> geo<span class="token operator">:</span> position <span class="token punctuation">}</span>
		<span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		location <span class="token operator">=</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token string">'unavailable'</span> <span class="token punctuation">}</span>
		<span class="token keyword">return</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">clearWatch</span><span class="token punctuation">(</span>watchId<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getGeolocationSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> location
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>
		subscribeToGeolocation<span class="token punctuation">,</span>
		getGeolocationSnapshot<span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'unavailable'</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
				<span class="token string">'Your location is unavailable'</span>
			<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					Your location is </span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>geo<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token string">'Â°, '</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>geo<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
					</span><span class="token punctuation">{</span><span class="token string">'Â°'</span><span class="token punctuation">}</span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åŸºæœ¬ API å¦‚ä¸‹ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">useSyncExternalStore</span><span class="token punctuation">(</span>
	subscribe<span class="token punctuation">,</span>
	getSnapshot<span class="token punctuation">,</span>
	getServerSnapshot<span class="token punctuation">,</span> <span class="token comment">// optional</span>
<span class="token punctuation">)</span>
</code></pre></div><ul>
<li><code>subscribe</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°å¹¶è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚æ¯å½“å¤–éƒ¨å­˜å‚¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè®© React çŸ¥é“åº”è¯¥è°ƒç”¨ <code>getSnapshot</code> æ¥è·å–æ–°å€¼ã€‚</li>
<li><code>getSnapshot</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›å¤–éƒ¨å­˜å‚¨çš„å½“å‰å€¼ã€‚</li>
<li><code>getServerSnapshot</code> æ˜¯ä¸€ä¸ªå¯é€‰å‡½æ•°ï¼Œå®ƒä»æœåŠ¡å™¨è¿”å›å¤–éƒ¨å­˜å‚¨çš„å½“å‰å€¼ã€‚è¿™å¯¹äºæœåŠ¡å™¨ç«¯æ¸²æŸ“å’Œé‡æ–°æ°´åˆå¾ˆæœ‰ç”¨ã€‚å¦‚æœæ‚¨ä¸æä¾›æ­¤å‡½æ•°ï¼Œåˆ™ React å°†åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“æœ€è¿‘çš„ <code>Suspense</code> è¾¹ç•Œ <code>fallback</code>ï¼Œç„¶åå½“å®¢æˆ·ç«¯æ°´åˆæ—¶ï¼Œå®ƒå°†è°ƒç”¨ <code>getSnapshot</code> æ¥è·å–å½“å‰å€¼ã€‚</li>
</ul>
<p>å‚è€ƒæ–‡æ¡£ï¼š</p>
<ul>
<li><a href="https://react.dev/reference/react/useSyncExternalStore" target="_blank" rel="noopener noreferrer">ğŸ“œ <code>useSyncExternalStore</code> docs</a></li>
<li><a href="https://react.dev/reference/react-dom/server" target="_blank" rel="noopener noreferrer">ğŸ“œ SSR docs</a></li>
</ul>
]]></content>
    <published>2025-08-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">flushSync</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/08-flushSync.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/08-flushSync.html"/>
    <updated>2025-08-04T10:58:10.000Z</updated>
    <summary type="html"><![CDATA[<p><code>flushSync</code> æ˜¯ React ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¼ºåˆ¶åŒæ­¥æ›´æ–°ã€‚</p>
<p>å¸®åŠ©ç”¨æˆ·å°†ç„¦ç‚¹ä¿æŒåœ¨æ­£ç¡®çš„ä½ç½®æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ã€‚è¿™å¯¹äºä¾èµ–å±å¹•é˜…è¯»å™¨æˆ–é”®ç›˜å¯¼èˆªçš„ç”¨æˆ·å°¤å…¶é‡è¦ã€‚ä½†å³ä½¿æ˜¯èƒ½å¤Ÿä½¿ç”¨é”®ç›˜çš„ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ç²¾å¿ƒè®¾è®¡çš„ç„¦ç‚¹ç®¡ç†ä½“éªŒä¸­å—ç›Šã€‚</p>
<p>æœ‰æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ åœ¨çŠ¶æ€æ›´æ–°åæ‰ä¼šå˜å¾—å¯ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Show</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p><code>flushSync</code> æ˜¯ React ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¼ºåˆ¶åŒæ­¥æ›´æ–°ã€‚</p>
<p>å¸®åŠ©ç”¨æˆ·å°†ç„¦ç‚¹ä¿æŒåœ¨æ­£ç¡®çš„ä½ç½®æ˜¯ç”¨æˆ·ä½“éªŒçš„å…³é”®éƒ¨åˆ†ã€‚è¿™å¯¹äºä¾èµ–å±å¹•é˜…è¯»å™¨æˆ–é”®ç›˜å¯¼èˆªçš„ç”¨æˆ·å°¤å…¶é‡è¦ã€‚ä½†å³ä½¿æ˜¯èƒ½å¤Ÿä½¿ç”¨é”®ç›˜çš„ç”¨æˆ·ä¹Ÿå¯ä»¥ä»ç²¾å¿ƒè®¾è®¡çš„ç„¦ç‚¹ç®¡ç†ä½“éªŒä¸­å—ç›Šã€‚</p>
<p>æœ‰æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ åœ¨çŠ¶æ€æ›´æ–°åæ‰ä¼šå˜å¾—å¯ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Show</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‡è®¾ç”¨æˆ·ç‚¹å‡»ã€Œæ˜¾ç¤ºã€åï¼Œä»–ä»¬æƒ³è¦åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›å†…å®¹ã€‚è‰¯å¥½çš„ç„¦ç‚¹ç®¡ç†ä¼šåœ¨å…ƒç´ å˜å¾—å¯è§åèšç„¦è¯¥å…ƒç´ ã€‚</p>
<p>React ä¸­çš„çŠ¶æ€æ›´æ–°æ˜¯æ‰¹é‡è¿›è¡Œçš„ã€‚å› æ­¤ï¼ŒçŠ¶æ€æ›´æ–°ä¸ä¸€å®šä¼šåœ¨è°ƒç”¨çŠ¶æ€æ›´æ–°å‡½æ•°æ—¶ç«‹å³å‘ç”Ÿã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœå°è¯•åœ¨çŠ¶æ€æ›´æ–°åç«‹å³èšç„¦å…ƒç´ ï¼Œå®ƒå¯èƒ½æ— æ³•æŒ‰é¢„æœŸå·¥ä½œã€‚è¿™æ˜¯å› ä¸ºæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ å¯èƒ½è¿˜ä¸å¯ç”¨ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
				<span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
					inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This probably won't work</span>
				<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
			<span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Show
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•æ˜¯å¼ºåˆ¶ React åŒæ­¥è¿è¡ŒçŠ¶æ€å’Œ DOM æ›´æ–°ï¼Œä»¥ä¾¿åœ¨æ‚¨å°è¯•èšç„¦æ—¶ï¼Œæ‚¨æƒ³è¦èšç„¦çš„å…ƒç´ æ˜¯å¯ç”¨çš„ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>react-dom</code> åŒ…ä¸­çš„ <code>flushSync</code> å‡½æ•°æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> flushSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>show<span class="token punctuation">,</span> setShow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
				<span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
						<span class="token function">setShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
					inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
			<span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Show
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>show <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>flushSync</code> çš„ä½œç”¨æ˜¯å¼ºåˆ¶ React åŒæ­¥è¿è¡ŒçŠ¶æ€å’Œ DOM æ›´æ–°ã€‚è¿™æ ·ï¼Œåœ¨ <code>flushSync</code> è°ƒç”¨åï¼Œè¾“å…¥å…ƒç´ å°†å˜å¾—å¯ç”¨ï¼Œæ‚¨å¯ä»¥å°è¯•èšç„¦å®ƒã€‚</p>
<p>é€šå¸¸ï¼Œæ‚¨åº”è¯¥é¿å…è¿™ç§ä¼˜åŒ–ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚ç„¦ç‚¹ç®¡ç†ï¼‰ï¼Œå®ƒæ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li><a href="https://react.dev/reference/react-dom/flushSync" target="_blank" rel="noopener noreferrer">ğŸ“œ the <code>flushSync</code> docs</a>.</li>
</ul>
]]></content>
    <published>2025-08-04T10:58:10.000Z</published>
  </entry>
  <entry>
    <title type="text">useImperativeHandle</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/07-useImperativeHandle.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/07-useImperativeHandle.html"/>
    <updated>2025-07-22T06:35:28.000Z</updated>
    <summary type="html"><![CDATA[<p>æœ‰æ—¶ä½ éœ€è¦æš´éœ²ä¸€ä¸ªæ–¹æ³•ç»™çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶å¯ä»¥ä¸»åŠ¨ä¸å­ç»„ä»¶äº¤äº’ã€‚è¿™å¯ä»¥é€šè¿‡ <code>ref</code> æ¥å®ç°ï¼Œ<code>useRef</code> é’©å­å¯ä»¥è®©ä½ æ‹¥æœ‰ä¸€ä¸ªä¸ç»„ä»¶å®ä¾‹å…³è”çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜æ—¶è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p>
<p>çˆ¶ç»„ä»¶å¯ä»¥ä¼ é€’ä¸€ä¸ª <code>ref</code> ç»™å­ç»„ä»¶ï¼Œç„¶åå­ç»„ä»¶å¯ä»¥åœ¨è¿™ä¸ª <code>ref</code> ä¸ŠæŒ‚è½½æ–¹æ³•ï¼Œçˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">type</span> <span class="token class-name">InputAPI</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	ref<span class="token punctuation">,</span>
	<span class="token operator">...</span>props
<span class="token punctuation">}</span><span class="token operator">:</span> React<span class="token punctuation">.</span>InputHTMLAttributes<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
	ref<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span>InputAPI<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	ref<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> myInputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>InputAPI<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>myInputRef<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Enter your name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> myInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focusInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Focus the input
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>æœ‰æ—¶ä½ éœ€è¦æš´éœ²ä¸€ä¸ªæ–¹æ³•ç»™çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶å¯ä»¥ä¸»åŠ¨ä¸å­ç»„ä»¶äº¤äº’ã€‚è¿™å¯ä»¥é€šè¿‡ <code>ref</code> æ¥å®ç°ï¼Œ<code>useRef</code> é’©å­å¯ä»¥è®©ä½ æ‹¥æœ‰ä¸€ä¸ªä¸ç»„ä»¶å®ä¾‹å…³è”çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜æ—¶è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p>
<p>çˆ¶ç»„ä»¶å¯ä»¥ä¼ é€’ä¸€ä¸ª <code>ref</code> ç»™å­ç»„ä»¶ï¼Œç„¶åå­ç»„ä»¶å¯ä»¥åœ¨è¿™ä¸ª <code>ref</code> ä¸ŠæŒ‚è½½æ–¹æ³•ï¼Œçˆ¶ç»„ä»¶å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">type</span> <span class="token class-name">InputAPI</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	ref<span class="token punctuation">,</span>
	<span class="token operator">...</span>props
<span class="token punctuation">}</span><span class="token operator">:</span> React<span class="token punctuation">.</span>InputHTMLAttributes<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
	ref<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span>InputAPI<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	ref<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> myInputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>InputAPI<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>myInputRef<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Enter your name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> myInputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focusInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				Focus the input
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™å®é™…ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å½“åœ¨ React çš„ concurrent/suspense ç‰¹æ€§ä¸­ä½¿ç”¨æ—¶ï¼Œä¼šå‡ºç°ä¸€äº›è¾¹ç¼˜æƒ…å†µçš„é—®é¢˜ï¼ˆå®ƒä¹Ÿä¸æ”¯æŒå›è°ƒ refï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>useImperativeHandle</code> é’©å­æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">type</span> <span class="token class-name">InputAPI</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	ref<span class="token punctuation">,</span>
	<span class="token operator">...</span>props
<span class="token punctuation">}</span><span class="token operator">:</span> React<span class="token punctuation">.</span>InputHTMLAttributes<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
	ref<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span>InputAPI<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>
		ref<span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">focusInput</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>useImperativeHandle</code> æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>ref</code>ï¼šä¸ç»„ä»¶å®ä¾‹å…³è”çš„ <code>ref</code> å¯¹è±¡ã€‚</li>
<li><code>createHandle</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æš´éœ²ç»™çˆ¶ç»„ä»¶çš„ APIã€‚</li>
<li><code>dependencies</code>ï¼šä¾èµ–æ•°ç»„ï¼Œå½“ä¾èµ–æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>createHandle</code> å‡½æ•°ä¼šé‡æ–°æ‰§è¡Œã€‚</li>
</ul>
<p><a href="https://epicreact.dev/why-you-shouldnt-put-refs-in-a-dependency-array" target="_blank" rel="noopener noreferrer">Why you shouldn't put refs in a dependency array</a>.</p>
<p><code>useImperativeHandle</code> å…è®¸æˆ‘ä»¬æš´éœ²ä¸€äº›æ–¹æ³•ç»™çˆ¶ç»„ä»¶ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥è¢«çˆ¶ç»„ä»¶è°ƒç”¨ã€‚è¿™åœ¨æŸäº›åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½ æœ‰ä¸€ä¸ªéœ€è¦æ‰‹åŠ¨æ“ä½œçš„ç»„ä»¶ï¼Œä½†æ˜¯ä½ åˆä¸æƒ³è®©çˆ¶ç»„ä»¶ç›´æ¥æ“ä½œè¿™ä¸ªç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ã€‚</p>
<p>::: TIP</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦ <code>useImperativeHandle</code>ã€‚åœ¨å†³å®šä½¿ç”¨å®ƒä¹‹å‰ï¼Œé—®é—®è‡ªå·±æ˜¯å¦è¿˜æœ‰å…¶ä»–æ–¹å¼å¯ä»¥å®ç°ä½ çš„ç›®æ ‡ã€‚</p>
<p><a href="https://tylermcginnis.com/imperative-vs-declarative-programming/" target="_blank" rel="noopener noreferrer">Imperative vs Declarative Programming</a></p>
<p>:::</p>
]]></content>
    <published>2025-07-16T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Portals</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/06-createPortal.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/06-createPortal.html"/>
    <updated>2025-07-16T09:19:21.000Z</updated>
    <summary type="html"><![CDATA[<p>æœ‰ä¸€äº›åœºæ™¯ä¸‹ï¼Œéœ€è¦å°†ç»„ä»¶æ¸²æŸ“åœ¨æ­£å¸¸çš„æ–‡æ¡£æµå¤–éƒ¨ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œéœ€è¦æ¸²æŸ“åœ¨ <code>body</code> å…ƒç´ çš„é¡¶éƒ¨ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>useEffect</code> æ¥åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œç„¶ååœ¨ç»„ä»¶å¸è½½æ—¶å°†å…¶åˆ é™¤ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ¨¡å¼éå¸¸å¸¸è§ï¼ŒReact æä¾›äº†ä¸€ä¸ªå†…ç½®çš„æ–¹æ³•æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£å°±æ˜¯ <code>ReactDOM.createPortal</code>ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">function</span> <span class="token function">Modal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	title<span class="token punctuation">,</span>
	content<span class="token punctuation">,</span>
	handleClose<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	title<span class="token operator">:</span> <span class="token builtin">string</span>
	content<span class="token operator">:</span> <span class="token builtin">string</span>
	<span class="token function-variable function">handleClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>showModal<span class="token punctuation">,</span> setShowModal<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShowModal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Show Modal</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>showModal <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span>
					<span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>My Modal<span class="token punctuation">"</span></span>
					<span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is the content of the modal<span class="token punctuation">"</span></span>
					<span class="token attr-name">handleClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShowModal</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
				<span class="token punctuation">/&gt;</span></span>
			<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>æœ‰ä¸€äº›åœºæ™¯ä¸‹ï¼Œéœ€è¦å°†ç»„ä»¶æ¸²æŸ“åœ¨æ­£å¸¸çš„æ–‡æ¡£æµå¤–éƒ¨ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œéœ€è¦æ¸²æŸ“åœ¨ <code>body</code> å…ƒç´ çš„é¡¶éƒ¨ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>useEffect</code> æ¥åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œç„¶ååœ¨ç»„ä»¶å¸è½½æ—¶å°†å…¶åˆ é™¤ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ¨¡å¼éå¸¸å¸¸è§ï¼ŒReact æä¾›äº†ä¸€ä¸ªå†…ç½®çš„æ–¹æ³•æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£å°±æ˜¯ <code>ReactDOM.createPortal</code>ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">function</span> <span class="token function">Modal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	title<span class="token punctuation">,</span>
	content<span class="token punctuation">,</span>
	handleClose<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	title<span class="token operator">:</span> <span class="token builtin">string</span>
	content<span class="token operator">:</span> <span class="token builtin">string</span>
	<span class="token function-variable function">handleClose</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>modal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token punctuation">[</span>showModal<span class="token punctuation">,</span> setShowModal<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShowModal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Show Modal</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token punctuation">{</span>showModal <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span>
					<span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>My Modal<span class="token punctuation">"</span></span>
					<span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>This is the content of the modal<span class="token punctuation">"</span></span>
					<span class="token attr-name">handleClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setShowModal</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
				<span class="token punctuation">/&gt;</span></span>
			<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>createPortal</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ è¦æ¸²æŸ“çš„ UIï¼Œå®ƒæœ‰è®¿é—® propsã€state ç­‰çš„èƒ½åŠ›ã€‚</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä½ è¦æ¸²æŸ“åˆ°çš„ DOM èŠ‚ç‚¹ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠæ¨¡æ€æ¡†æ¸²æŸ“åˆ°äº† <code>body</code> å…ƒç´ ã€‚</p>
<ul>
<li><a href="https://react.dev/reference/react-dom/createPortal" target="_blank" rel="noopener noreferrer">the <code>createPortal</code> docs</a></li>
</ul>
]]></content>
    <published>2025-07-16T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">useReducer</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/05-useReducer.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/05-useReducer.html"/>
    <updated>2025-07-04T11:02:47.000Z</updated>
    <summary type="html"><![CDATA[<p><code>useState</code> å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çŠ¶æ€ç®¡ç†çš„éœ€æ±‚ï¼Œæœ‰æ—¶ä½ å¸Œæœ›å°†çŠ¶æ€é€»è¾‘ä¸è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„ç»„ä»¶åˆ†å¼€ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªçŠ¶æ€å…ƒç´ é€šå¸¸ä¼šä¸€èµ·æ”¹å˜ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰çŠ¶æ€å…ƒç´ çš„å¯¹è±¡å¯èƒ½å¾ˆæœ‰å¸®åŠ©ã€‚è¿™æ—¶ä½¿ç”¨ <code>useReducer</code> æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p><code>useState</code> å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çŠ¶æ€ç®¡ç†çš„éœ€æ±‚ï¼Œæœ‰æ—¶ä½ å¸Œæœ›å°†çŠ¶æ€é€»è¾‘ä¸è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„ç»„ä»¶åˆ†å¼€ã€‚æ­¤å¤–ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªçŠ¶æ€å…ƒç´ é€šå¸¸ä¼šä¸€èµ·æ”¹å˜ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰çŠ¶æ€å…ƒç´ çš„å¯¹è±¡å¯èƒ½å¾ˆæœ‰å¸®åŠ©ã€‚è¿™æ—¶ä½¿ç”¨ <code>useReducer</code> æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>useReducer</code> æ¥æ”¶ä¸€ä¸ª <code>reducer</code> å‡½æ•°å’Œä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å½“å‰çŠ¶æ€å’Œ <code>dispatch</code> å‡½æ•°çš„æ•°ç»„ã€‚</p>
<ul>
<li><code>reducer</code>ï¼šæŒ‡å®šæ•°æ®å¦‚ä½•æ›´æ–°ï¼Œ<code>reducer</code> å‡½æ•°å¿…é¡»ä¸ºçº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰çŠ¶æ€å’Œ action ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚çŠ¶æ€å’Œ action å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚
<ul>
<li><code>state</code>ï¼šå½“å‰çŠ¶æ€</li>
<li><code>action</code>ï¼šè§¦å‘çŠ¶æ€æ”¹å˜çš„ action</li>
</ul>
</li>
<li><code>initialArg</code>ï¼šåˆå§‹çŠ¶æ€çš„å€¼ï¼Œå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚åˆå§‹çŠ¶æ€çš„è®¡ç®—å–å†³äºä¸‹ä¸€ä¸ª <code>init</code> å‚æ•°ã€‚</li>
<li><code>optional init</code>ï¼šåˆå§‹åŒ–å‡½æ•°ï¼Œè¿”å›åˆå§‹çŠ¶æ€ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™åˆå§‹çŠ¶æ€è®¾ç½®ä¸º <code>initialArg</code>ã€‚å¦åˆ™ï¼Œåˆå§‹çŠ¶æ€è®¾ç½®ä¸º <code>init(initialArg)</code> çš„ç»“æœã€‚</li>
</ul>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'incremented_age'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      age<span class="token operator">:</span> state<span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">'Unknown action.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'incremented_age'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        Increment age
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello! You are </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token plain-text">.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>useReducer</code> ç±»ä¼¼ <code>useState</code>ï¼Œä½†ä»–å¯ä»¥å°†é€»è¾‘ä¸ç»„ä»¶åˆ†ç¦»ï¼Œå¹¶ä¸”å¯ä»¥å¤„ç†å¤šä¸ªçŠ¶æ€å…ƒç´ ã€‚</p>
]]></content>
    <published>2025-07-03T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">useId</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/04-useId.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/04-useId.html"/>
    <updated>2025-06-26T03:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p><code>useId</code> é’©å­ç”¨äºç”Ÿæˆå”¯ä¸€ä¸”ç¨³å®šçš„æ ‡è¯†ç¬¦ï¼ˆIDï¼‰ï¼Œå¯ä»¥ç”¨äº DOM å…ƒç´ ï¼Œä¼ å…¥ç»™ <code>attribute</code>ã€‚</p>
<p>åœ¨å¯é‡ç”¨ç»„ä»¶ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŒä¸€é¡µé¢ä¸Šå¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œè¿™ä¼šå˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚ä½ ä¸èƒ½ç¡¬ç¼–ç ä¸€ä¸ª <code>id</code> å€¼ï¼Œå› ä¸ºé‚£æ ·ä¼šæœ‰å¤šä¸ªå…·æœ‰ç›¸åŒ <code>id</code> çš„å…ƒç´ ï¼Œè¿™æ˜¯æ— æ•ˆçš„ HTMLã€‚ä½ å¯ä»¥ä½¿ç”¨éšæœºæ•°æˆ–å­—ç¬¦ä¸²ï¼Œä½†é‚£æ ·ä½ éœ€è¦è‡ªå·±ç®¡ç†ï¼Œå¹¶ä¸”å®ƒä¸ä¼šåœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ã€‚å¦‚æœä½ æƒ³è¦æœåŠ¡å™¨æ¸²æŸ“ä½ çš„åº”ç”¨ï¼Œä½ éœ€è¦ç¡®ä¿å®¢æˆ·ç«¯ç”Ÿæˆçš„ ID ä¸æœåŠ¡å™¨ç”Ÿæˆçš„ ID åŒ¹é…ï¼Œä»¥é¿å… bugï¼Œè¿™å¾ˆç—›è‹¦ã€‚</p>
<p>è¿™å°±æ˜¯ <code>useId</code> é’©å­å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p><code>useId</code> é’©å­ç”¨äºç”Ÿæˆå”¯ä¸€ä¸”ç¨³å®šçš„æ ‡è¯†ç¬¦ï¼ˆIDï¼‰ï¼Œå¯ä»¥ç”¨äº DOM å…ƒç´ ï¼Œä¼ å…¥ç»™ <code>attribute</code>ã€‚</p>
<p>åœ¨å¯é‡ç”¨ç»„ä»¶ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŒä¸€é¡µé¢ä¸Šå¤šæ¬¡ä½¿ç”¨æ—¶ï¼Œè¿™ä¼šå˜å¾—å…·æœ‰æŒ‘æˆ˜æ€§ã€‚ä½ ä¸èƒ½ç¡¬ç¼–ç ä¸€ä¸ª <code>id</code> å€¼ï¼Œå› ä¸ºé‚£æ ·ä¼šæœ‰å¤šä¸ªå…·æœ‰ç›¸åŒ <code>id</code> çš„å…ƒç´ ï¼Œè¿™æ˜¯æ— æ•ˆçš„ HTMLã€‚ä½ å¯ä»¥ä½¿ç”¨éšæœºæ•°æˆ–å­—ç¬¦ä¸²ï¼Œä½†é‚£æ ·ä½ éœ€è¦è‡ªå·±ç®¡ç†ï¼Œå¹¶ä¸”å®ƒä¸ä¼šåœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ã€‚å¦‚æœä½ æƒ³è¦æœåŠ¡å™¨æ¸²æŸ“ä½ çš„åº”ç”¨ï¼Œä½ éœ€è¦ç¡®ä¿å®¢æˆ·ç«¯ç”Ÿæˆçš„ ID ä¸æœåŠ¡å™¨ç”Ÿæˆçš„ ID åŒ¹é…ï¼Œä»¥é¿å… bugï¼Œè¿™å¾ˆç—›è‹¦ã€‚</p>
<p>è¿™å°±æ˜¯ <code>useId</code> é’©å­å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p>
<p><code>useId</code> é’©å­ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ä¸”ç¨³å®šçš„æ ‡è¯†ç¬¦ï¼ˆIDï¼‰ï¼Œä½ å¯ä»¥ç”¨äº DOM å…ƒç´ ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¦‚ä½•åœ¨è¡¨å•ç»„ä»¶ä¸­ä½¿ç”¨ <code>useId</code> é’©å­çš„ç¤ºä¾‹ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">FormField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">useId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Name:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>useId</code> ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ IDï¼Œå°†æ ‡ç­¾ä¸è¾“å…¥å…³è”èµ·æ¥ï¼Œç¡®ä¿å±å¹•é˜…è¯»å™¨å’Œå…¶ä»–è¾…åŠ©æŠ€æœ¯å¯ä»¥æ­£ç¡®è¯†åˆ«è¡¨å•å­—æ®µå…³ç³»ã€‚</p>
<p>ä¸ <code>useState</code> æˆ– <code>useEffect</code> ä¸åŒï¼Œ<code>useId</code> ä¸æ¥å—ä»»ä½•å‚æ•°å¹¶è¿”å›ä¸€ä¸ªå•ä¸ªå­—ç¬¦ä¸²å€¼ã€‚æ²¡æœ‰ setter æˆ– updater å‡½æ•°ï¼Œå› ä¸ºæä¾›çš„ ID åº”è¯¥åœ¨æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜ä¸”å”¯ä¸€ã€‚</p>
<p>å®ƒåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä¸Šä¸‹æ–‡ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒç¡®ä¿æœåŠ¡å™¨ç”Ÿæˆçš„ ID ä¸å®¢æˆ·ç«¯ç”Ÿæˆçš„ ID ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œé¿å… hydration ä¸åŒ¹é…ã€‚</p>
<p>è®°ä½ï¼Œ<code>useId</code> çš„ä¸»è¦ç”¨é€”æ˜¯ç”¨äºå¯è®¿é—®æ€§å’Œç®¡ç†ä¸åŒ DOM å…ƒç´ ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚æ ‡ç­¾å’Œè¾“å…¥ã€‚å®ƒå¸®åŠ©ä¿æŒä½ çš„ UI å¯é¢„æµ‹ä¸”å¯è®¿é—®ï¼Œè€Œæ— éœ€è‡ªå·±ç®¡ç†å”¯ä¸€ IDã€‚</p>
<p>ä¸€ä¸ªé‡è¦çš„äº‹æƒ…æ˜¯ï¼Œä½ ä¸åº”è¯¥ä½¿ç”¨ <code>useId</code> ä¸ºé DOM å…ƒç´ ç”Ÿæˆ IDï¼Œå¦‚åˆ—è¡¨ä¸­çš„é”®æˆ– React å…ƒç´ çš„å”¯ä¸€é”®ã€‚è¿™äº› ID åº”è¯¥æ¥è‡ªä½ çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ <code>useId</code>ã€‚</p>
]]></content>
    <category term="react"/>
    <published>2025-06-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">useRef</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/03-useRef.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/03-useRef.html"/>
    <updated>2025-06-26T03:44:06.000Z</updated>
    <summary type="html"><![CDATA[<p>ä½¿ç”¨ React æ—¶ï¼Œé€šå¸¸éœ€è¦ç›´æ¥ä¸ DOM äº¤äº’ã€‚ä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªéœ€è¦ç›´æ¥ä¸ DOM äº¤äº’çš„éæ¡†æ¶ç‰¹å®šçš„åº“ã€‚é€šå¸¸ä¸ºäº†ä½¿ UI å¯è®¿é—®ï¼Œä½ éœ€è¦è€ƒè™‘ç„¦ç‚¹ç®¡ç†ï¼Œè¿™éœ€è¦ä½ è°ƒç”¨è¾“å…¥æ¡†çš„ <code>.focus()</code> æ–¹æ³•ã€‚</p>
<p>è®°ä½ï¼Œå½“ä½ è¿™æ ·åšæ—¶ï¼š<code>&lt;div&gt;hi&lt;/div&gt;</code>ï¼Œå®é™…ä¸Šæ˜¯ <code>React.createElement</code> çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥ä½ å®é™…ä¸Šæ— æ³•åœ¨æ¸²æŸ“æ–¹æ³•ä¸­è®¿é—® DOM èŠ‚ç‚¹ã€‚äº‹å®ä¸Šï¼ŒDOM èŠ‚ç‚¹åœ¨ <code>ReactDOM.createRoot().render()</code> æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰æ ¹æœ¬ä¸å­˜åœ¨ã€‚ä½ çš„ç»„ä»¶çš„æ¸²æŸ“æ–¹æ³•å®é™…ä¸Šåªæ˜¯è´Ÿè´£åˆ›å»ºå’Œè¿”å› React å…ƒç´ ï¼Œä¸ DOM æœ¬èº«æ— å…³ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>ä½¿ç”¨ React æ—¶ï¼Œé€šå¸¸éœ€è¦ç›´æ¥ä¸ DOM äº¤äº’ã€‚ä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªéœ€è¦ç›´æ¥ä¸ DOM äº¤äº’çš„éæ¡†æ¶ç‰¹å®šçš„åº“ã€‚é€šå¸¸ä¸ºäº†ä½¿ UI å¯è®¿é—®ï¼Œä½ éœ€è¦è€ƒè™‘ç„¦ç‚¹ç®¡ç†ï¼Œè¿™éœ€è¦ä½ è°ƒç”¨è¾“å…¥æ¡†çš„ <code>.focus()</code> æ–¹æ³•ã€‚</p>
<p>è®°ä½ï¼Œå½“ä½ è¿™æ ·åšæ—¶ï¼š<code>&lt;div&gt;hi&lt;/div&gt;</code>ï¼Œå®é™…ä¸Šæ˜¯ <code>React.createElement</code> çš„è¯­æ³•ç³–ï¼Œæ‰€ä»¥ä½ å®é™…ä¸Šæ— æ³•åœ¨æ¸²æŸ“æ–¹æ³•ä¸­è®¿é—® DOM èŠ‚ç‚¹ã€‚äº‹å®ä¸Šï¼ŒDOM èŠ‚ç‚¹åœ¨ <code>ReactDOM.createRoot().render()</code> æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰æ ¹æœ¬ä¸å­˜åœ¨ã€‚ä½ çš„ç»„ä»¶çš„æ¸²æŸ“æ–¹æ³•å®é™…ä¸Šåªæ˜¯è´Ÿè´£åˆ›å»ºå’Œè¿”å› React å…ƒç´ ï¼Œä¸ DOM æœ¬èº«æ— å…³ã€‚</p>
<p>å› æ­¤ï¼Œä¸ºäº†è®¿é—® DOMï¼Œä½ éœ€è¦è®© React åœ¨æ¸²æŸ“ç»„ä»¶æ—¶ç»™ä½ æä¾›å¯¹ç‰¹å®š DOM èŠ‚ç‚¹çš„è®¿é—®ã€‚è¿™é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ <code>ref</code> æ¥å®ç°ã€‚</p>
<p>æœ‰ä¸¤ç§ä½¿ç”¨ <code>ref</code> å±æ€§çš„æ–¹æ³•ï¼šå›è°ƒå’Œ <code>useRef</code> é’©å­ã€‚</p>
<p><strong>ref callback:</strong></p>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>ref</code> å±æ€§å¹¶ä¼ é€’ä¸€ä¸ªå›è°ƒï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
			<span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>myDiv <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">here's my div!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> myDiv<span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">my div is getting removed from the page!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> myDiv<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">}</span></span>
		<span class="token punctuation">&gt;</span></span><span class="token plain-text">
			Hey, this is my div!
		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å‡ºäºå‘åå…¼å®¹çš„åŸå› ï¼ŒTypeScript ä¼šå‘Šè¯‰ä½  <code>myDiv</code> å¯ä»¥æ˜¯ <code>HTMLDivElement</code> æˆ– <code>null</code>ã€‚å› æ­¤ï¼Œä½ å¯èƒ½éœ€è¦å¤„ç† <code>null</code> çš„æƒ…å†µï¼ˆé€šå¸¸ï¼Œåªéœ€æå‰è¿”å›ï¼‰ã€‚åœ¨æœªæ¥ï¼Œå®ƒå°†æ°¸è¿œä¸ä¼šæ˜¯ <code>null</code>ã€‚</p>
</div>
<p><strong>ref object:</strong></p>
<p>å¯¹äºæ›´å¤æ‚çš„ä½¿ç”¨åœºæ™¯ï¼ˆä¾‹å¦‚ï¼Œéœ€è¦åœ¨åˆå§‹æ¸²æŸ“åä¸ DOM äº¤äº’ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>useRef</code> é’©å­ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>ref</code> å±æ€§å’Œ <code>useRef</code> çš„ç®€å•ç¤ºä¾‹ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token function">MyDiv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> myDivRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> myDiv <span class="token operator">=</span> myDivRef<span class="token punctuation">.</span>current
		<span class="token comment">// myDiv is the div DOM node!</span>
		<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>myDivRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hi</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ <code>ref</code> å¯¹è±¡çš„ä¼˜ç‚¹æ˜¯ä½ å¯ä»¥å°† ref å¯¹è±¡å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œå¹¶åœ¨ <code>useEffect</code> å›è°ƒæˆ–äº‹ä»¶å¤„ç†ç¨‹åºä¸­å®‰å…¨åœ°è®¿é—®å®ƒã€‚</p>
<p>ç»„ä»¶æ¸²æŸ“åï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯â€œå·²æŒ‚è½½â€ã€‚è¿™å°±æ˜¯ <code>useEffect</code> å›è°ƒè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œæ‰€ä»¥åˆ°é‚£æ—¶ï¼Œref åº”è¯¥æœ‰å®ƒçš„ <code>current</code> å±æ€§è®¾ç½®ä¸º DOM èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œä½ é€šå¸¸ä¼šåœ¨ <code>useEffect</code> å›è°ƒä¸­è¿›è¡Œç›´æ¥ DOM äº¤äº’/æ“ä½œã€‚</p>
<p>æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ <code>ref</code> å±æ€§ï¼ˆå¦‚ä¸Šæ‰€ç¤ºï¼‰ã€‚ä½ å°† ref ä¼ é€’ç»™è¯¥å±æ€§ï¼ŒReact å°†ä¸ºä½ æä¾›å¯¹è¯¥å…ƒç´ åˆ›å»ºçš„å…ƒç´ çš„å¼•ç”¨ã€‚</p>
<p>ä½ è¿˜å¯ä»¥å°† <code>ref</code> ä¼ é€’ç»™å‡½æ•°ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¯ä»¥å°† <code>ref</code> è½¬å‘åˆ°å¦ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–è€…å®ƒå¯ä»¥ä½¿ç”¨ <code>useImperativeHandle</code> åœ¨ä¸Šé¢æ·»åŠ ä¸€äº›æ–¹ä¾¿çš„æ–¹æ³•ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ç›´æ¥å°† <code>ref</code> ä¼ é€’ä½œä¸º <code>props</code> ç»™å‡½æ•°ç»„ä»¶ï¼Œåœ¨ React 18 ä¸­éœ€è¦ä½¿ç”¨ <code>forwardRef</code> æ¥è½¬å‘ <code>ref</code>ã€‚</p>
<p>React19 ä¸­ï¼Œ<code>forwardRef</code> å·²ç»åºŸå¼ƒï¼Œç›´æ¥å°† <code>ref</code> ä¼ é€’ä½œä¸º <code>props</code> ç»™å‡½æ•°ç»„ä»¶å³å¯ã€‚</p>
</div>
]]></content>
    <category term="react"/>
    <published>2025-06-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Video.js Component å¼€å‘æŒ‡å—</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/022-videojs-component.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/022-videojs-component.html"/>
    <updated>2025-06-20T03:26:47.000Z</updated>
    <summary type="html"><![CDATA[<h2><strong>Video.js Component åŸºç¡€æ¦‚å¿µ</strong></h2>
<h3>ä»€ä¹ˆæ˜¯ Video.js Componentï¼Ÿ</h3>
<p>Video.js Component æ˜¯åŸºäº Video.js Player æ¡†æ¶çš„å¯æ‰©å±• UI å…ƒç´ ï¼Œç”¨äºå¢å¼ºè§†é¢‘æ’­æ”¾å™¨çš„åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒã€‚æ¯ä¸ª Component éƒ½æ˜¯ç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„æ¨¡å—ã€‚</p>
<h3>Component ç»§æ‰¿å…³ç³»</h3>
<h3>æ ¸å¿ƒ API</h3>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token comment">// åŸºç¡€ Component ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">videojs</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token string">'Component'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>player<span class="token operator">:</span> Player<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆå§‹åŒ–é€»è¾‘</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è·å– DOM å…ƒç´ </span>
  <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement

  <span class="token comment">// æ·»åŠ /ç§»é™¤ CSS ç±»</span>
  <span class="token function">addClass</span><span class="token punctuation">(</span>className<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">removeClass</span><span class="token punctuation">(</span>className<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

  <span class="token comment">// äº‹ä»¶ç»‘å®š</span>
  <span class="token function">on</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> handler<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">off</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> handler<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

  <span class="token comment">// æ¸…ç†èµ„æº</span>
  <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2><strong>Video.js Component åŸºç¡€æ¦‚å¿µ</strong></h2>
<h3>ä»€ä¹ˆæ˜¯ Video.js Componentï¼Ÿ</h3>
<p>Video.js Component æ˜¯åŸºäº Video.js Player æ¡†æ¶çš„å¯æ‰©å±• UI å…ƒç´ ï¼Œç”¨äºå¢å¼ºè§†é¢‘æ’­æ”¾å™¨çš„åŠŸèƒ½å’Œç”¨æˆ·ä½“éªŒã€‚æ¯ä¸ª Component éƒ½æ˜¯ç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„æ¨¡å—ã€‚</p>
<h3>Component ç»§æ‰¿å…³ç³»</h3>
<h3>æ ¸å¿ƒ API</h3>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token comment">// åŸºç¡€ Component ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">videojs</span><span class="token punctuation">.</span><span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token string">'Component'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>player<span class="token operator">:</span> Player<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åˆå§‹åŒ–é€»è¾‘</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è·å– DOM å…ƒç´ </span>
  <span class="token function">el</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement

  <span class="token comment">// æ·»åŠ /ç§»é™¤ CSS ç±»</span>
  <span class="token function">addClass</span><span class="token punctuation">(</span>className<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">removeClass</span><span class="token punctuation">(</span>className<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

  <span class="token comment">// äº‹ä»¶ç»‘å®š</span>
  <span class="token function">on</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> handler<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">off</span><span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> handler<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

  <span class="token comment">// æ¸…ç†èµ„æº</span>
  <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

</code></pre></div>]]></content>
    <published>2025-06-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">react fundamentals</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/react/00-fundaments.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/react/00-fundaments.html"/>
    <updated>2025-06-10T09:10:35.000Z</updated>
    <summary type="html"><![CDATA[<h2>Hello Word</h2>
<h3>In JS</h3>
<p>åœ¨ä½¿ç”¨ react ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨åŸç”Ÿ js æ¥å†™ä¸€äº›ç®€å•çš„é¡µé¢ã€‚</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>Hello Word</h2>
<h3>In JS</h3>
<p>åœ¨ä½¿ç”¨ react ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨åŸç”Ÿ js æ¥å†™ä¸€äº›ç®€å•çš„é¡µé¢ã€‚</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>

element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'container'</span>
element<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Hello Word'</span>

rootElement<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
</code></pre></div><h3>In React</h3>
<p>React æŒ‰ç…§åŸç”Ÿ DOM çš„æ“ä½œé€»è¾‘ï¼Œä½¿ç”¨ <code>createElement</code> æ–¹æ³•æ¥åˆ›å»ºå…ƒç´ ï¼Œå¹¶ä½¿ç”¨ <code>render</code> æ–¹æ³•æ¥æ¸²æŸ“å…ƒç´ ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>

<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'container'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Hello Word'</span><span class="token punctuation">)</span>

<span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>React æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ¡†æ¶ï¼Œç”¨äºæè¿° UI ç»“æ„å’ŒçŠ¶æ€é€»è¾‘ã€‚è€Œ React DOM æ˜¯ React çš„ DOM æ¸²æŸ“å™¨ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“ React ç»„ä»¶ã€‚ç±»ä¼¼çš„è¿˜æœ‰ React Nativeï¼Œç”¨äºåœ¨ç§»åŠ¨ç«¯æ¸²æŸ“ React ç»„ä»¶ã€‚</p>
</div>
<p><code>createElement</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ‡ç­¾åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§ <code>props</code>ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆä»¥åŠåç»­å‚æ•°ï¼‰ä¼šè¢«æ”¶é›†èµ·æ¥ï¼Œä½œä¸ºå­å…ƒç´  <code>children</code>ã€‚</p>
<h3>åµŒå¥—</h3>
<p>è‹¥è¦å®ç°ä¸€ä¸ªæ·±åº¦åµŒå¥—çš„ç»„ä»¶ï¼Œéœ€è¦ä¸€å±‚ä¸€å±‚çš„åµŒå¥—ï¼Œè¿™æ ·ä»£ç ä¼šå˜å¾—éå¸¸è‡ƒè‚¿ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// &lt;div class="container"&gt;</span>
<span class="token comment">// 	&lt;p&gt;Nested list&lt;/p&gt;</span>
<span class="token comment">// 	&lt;ul class="content"&gt;</span>
<span class="token comment">// 		&lt;li&gt;This is a nested list item&lt;/li&gt;</span>
<span class="token comment">// 		&lt;li&gt;This is a nested list item&lt;/li&gt;</span>
<span class="token comment">// 	&lt;/ul&gt;</span>
<span class="token comment">// &lt;/div&gt;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> createElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>

<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
  <span class="token string">'div'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'container'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Nested list'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">createElement</span><span class="token punctuation">(</span>
    <span class="token string">'ul'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">'content'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'This is a nested list item'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'This is a nested list item'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
</code></pre></div><p>å› æ­¤ React æä¾›äº† JSX è¯­æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°ç¼–å†™ç»„ä»¶ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ¨ JSX ä¸­ï¼Œ<code>className</code> è¡¨ç¤ºç±»åï¼Œè€Œä¸æ˜¯ HTML ä¸­çš„ <code>class</code>ï¼Œå› ä¸ºåœ¨ JavaScript ä¸­ï¼Œ<code>class</code> æ˜¯ä¿ç•™å­—ï¼Œä¸” DOM çš„ç±»åå±æ€§æ˜¯ <code>className</code>ã€‚</p>
</div>
<h2>JSX</h2>
<p>JSX æ˜¯ React çš„è¯­æ³•æ‰©å±•ï¼Œå…è®¸æˆ‘ä»¬åœ¨ JavaScript ä¸­ä½¿ç”¨ç±»ä¼¼äº HTML çš„è¯­æ³•æ¥æè¿° UI ç»“æ„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ‰“åŒ…å·¥å…·ï¼ˆå¦‚ <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack</a>ã€<a href="https://vite.dev/" target="_blank" rel="noopener noreferrer">Vite</a>ï¼‰ä¼šä½¿ç”¨ <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">babel</a> è‡ªåŠ¨å°† JSX è½¬æ¢ä¸º <code>createElement</code> æ–¹æ³•è°ƒç”¨ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20250610120118.png" alt="babel" tabindex="0" loading="lazy"><figcaption>babel</figcaption></figure>
<p>ä¸Šé¢å¤æ‚åµŒå¥—ç»“æ„åœ¨ JSX ä¸­å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Nested list</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">This is a nested list item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">This is a nested list item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>

<span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
</code></pre></div><h3>æ’å€¼</h3>
<p>ç±»ä¼¼æ¨¡æ¿å­—ç¬¦ä¸²ï¼ŒJSX ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨æ’å€¼ã€‚ä½ å¯ä»¥åœ¨é‡Œé¢å†™ JavaScript è¡¨è¾¾å¼ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> world <span class="token operator">=</span> <span class="token string">'World'</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>world<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>Spread</h3>
<p>Spread å…è®¸ä½ å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚å› æ­¤ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡ <code>props</code>ï¼Œä½ å¯ä»¥å°†å®ƒå±•å¼€ï¼Œç„¶åä¼ é€’ç»™ <code>createElement</code> æ–¹æ³•ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token string">'Hello World'</span>
<span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'container'</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> children<span class="token punctuation">,</span> className <span class="token punctuation">}</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>props <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ JSX ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œå°† <code>props</code> å±•å¼€ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> children <span class="token operator">=</span> <span class="token string">'Hello World'</span>
<span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'container'</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> children<span class="token punctuation">,</span> className <span class="token punctuation">}</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3>Fragment</h3>
<p>React Fragments å…è®¸ä½ å°†å¤šä¸ªå…ƒç´ ç»„åˆåœ¨ä¸€èµ·ï¼Œè€Œä¸ä¼šæ·»åŠ é¢å¤–çš„ DOM èŠ‚ç‚¹ã€‚è¿™è®©ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­è¿”å›å¤šä¸ªå…ƒç´ ï¼Œè€Œæ— éœ€ä½¿ç”¨é¢å¤–çš„ <code>div</code> åŒ…è£…ã€‚è¿™åœ¨é¿å…ä¸å¿…è¦çš„æ ‡è®°å½±å“æ ·å¼æˆ–å¸ƒå±€æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">This is a paragraph.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ç©ºæ ‡ç­¾ <code>&lt;&gt;&lt;/&gt;</code> æ¥ä»£æ›¿ <code>Fragment</code>ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">This is a paragraph.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div><h2>ç»„ä»¶</h2>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ç”Ÿæˆä»¥ä¸‹çš„ DOM ç»“æ„ï¼š</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Goodbye World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»„ä»¶æ¥ç”Ÿæˆè¿™ä¸ªç»“æ„ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ<code>createElement</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½åªä¼ å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ ‡ç­¾åã€‚ä½†æ˜¯ï¼Œå®ƒè¿˜å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›éœ€è¦æ¸²æŸ“çš„ç»“æ„ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">createElement</span><span class="token punctuation">(</span>
	someFunction<span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">prop1</span><span class="token operator">:</span> <span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token literal-property property">prop2</span><span class="token operator">:</span> <span class="token string">'value2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">'child1'</span><span class="token punctuation">,</span>
	<span class="token string">'child2'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p><code>someFunction</code> ä¼šä»¥ <code>props</code> å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œ <code>children</code> ä¼šä½œä¸º <code>props</code> å¯¹è±¡çš„ <code>children</code> å±æ€§ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">someFunction</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	props<span class="token punctuation">.</span>children <span class="token comment">// ['child1', 'child2']</span>
	props<span class="token punctuation">.</span>prop1 <span class="token comment">// 'value1'</span>
	props<span class="token punctuation">.</span>prop2 <span class="token comment">// 'value2'</span>
	<span class="token keyword">return</span> <span class="token comment">// some jsx</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å³å¯å®ç°ç»„ä»¶çš„å¤ç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"message"</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Hello World'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Goodbye World'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>æˆ‘ä»¬æƒ³åœ¨ JSX ä¸­åƒ <code>div</code> ä¸€æ ·ä½¿ç”¨è¿™ä¸ªç»„ä»¶ï¼š</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>Babel</code> è´Ÿè´£å°† JSX ç»„ä»¶ç¼–è¯‘æˆ <code>createElement</code> è°ƒç”¨ã€‚å¦‚æœæˆ‘ä»¬å°è¯• <code>&lt;message&gt;Hello World&lt;/message&gt;</code>ï¼Œ<code>Babel</code> ä¼šè¿™æ ·åšï¼š</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>message</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>message</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// the desired output</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Hello World'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// the actual output</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token string">'Hello World'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ <code>Babel</code> å¦‚ä½•ç¼–è¯‘æˆ‘ä»¬çš„ JSXï¼Œè®©å®ƒé€šè¿‡å‡½æ•°åè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥ä¼ é€’å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€äº› <code>Babel</code> è¾“å‡ºçš„ JSX ç¤ºä¾‹ï¼š</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code>element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Capitalized</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement(Capitalized)</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property.access</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement(property.access)</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Property.Access</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement(Property.Access)</span>
element <span class="token operator">=</span> <span class="token operator">&lt;</span>Property<span class="token punctuation">[</span><span class="token string">'Access'</span><span class="token punctuation">]</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token comment">// SyntaxError</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lowercase</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement('lowercase')</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kebab-case</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement('kebab-case')</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Upper-Kebab-Case</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement('Upper-Kebab-Case')</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Upper_Snake_Case</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement(Upper_Snake_Case)</span>
element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lower_snake_case</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">// createElement('lower_snake_case')</span>
</code></pre></div><p>å› æ­¤ï¼Œæœ€ç»ˆéœ€è¦å°†ç»„ä»¶åé¦–å­—æ¯å¤§å†™ï¼Œè¿™æ · <code>Babel</code> æ‰ä¼šå°†å®ƒç¼–è¯‘æˆ <code>createElement</code> è°ƒç”¨ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Message</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Goodbye World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Message</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>Components are functions which accept an object called <code>props</code> and return something that is renderable.</p>
</div>
]]></content>
    <category term="react"/>
    <published>2025-06-10T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç½‘ç»œæ¨¡å‹</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/01-network-model.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/01-network-model.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<h2>TCP/IP ç½‘ç»œä½“ç³»</h2>
<p>TCP/IP ä½“ç³»ç»“æ„åˆ†ä¸ºå››å±‚ï¼Œæ˜¯äº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ï¼Œå„å±‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>--- åº”ç”¨å±‚ ---
--- è¿è¾“å±‚ ---
--- ç½‘ç»œå±‚ ---
--- ç½‘ç»œæ¥å£å±‚ ---
</code></pre></div><ul>
<li><strong>åº”ç”¨å±‚</strong> ä¸ºç”¨æˆ·æä¾›åº”ç”¨åŠŸèƒ½ï¼Œæ‹¥æœ‰ä¸åŒçš„åº”ç”¨å±‚åè®®ï¼Œç”¨æ¥å®šä¹‰åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’è§„åˆ™ï¼Œä»¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨ï¼Œä¾‹å¦‚ HTTPï¼ˆä¸‡ç»´ç½‘ï¼‰ã€SMTPï¼ˆç”µå­é‚®ä»¶ï¼‰ã€DNSï¼ˆåŸŸåæŸ¥è¯¢ï¼‰ã€FTPï¼ˆæ–‡ä»¶ä¼ è¾“ï¼‰ ç­‰ç­‰ï¼›</li>
<li><strong>è¿è¾“å±‚</strong> è´Ÿè´£ä¸º <strong>ä¸¤å°ä¸»æœºä¸­çš„è¿›ç¨‹</strong> æä¾›é€šä¿¡æœåŠ¡ï¼Œå…¶ä¸­çš„ä¸¤ä¸ªé‡è¦åè®®æ˜¯ TCP å’Œ UDPï¼š
<ul>
<li>TCP æä¾› <strong>é¢å‘è¿æ¥çš„ã€å¯é çš„</strong> æ•°æ®ä¼ è¾“æœåŠ¡ï¼›</li>
<li>UDP æä¾› <strong>æ— è¿æ¥çš„ã€ä¸å¯é çš„</strong> ä¼ è¾“æœåŠ¡ã€‚</li>
</ul>
</li>
<li><strong>ç½‘ç»œå±‚</strong> ä¸­è´Ÿè´£ä¸ºä¸¤å°ä¸»æœºæä¾›é€šä¿¡æœåŠ¡ï¼Œé€‰æ‹©åˆé€‚çš„è·¯ç”±å°†æ•°æ®ä¼ é€’åˆ°ç›®æ ‡ä¸»æœºï¼Œå®ƒçš„æ ¸å¿ƒåè®®æ˜¯ IP åè®®ï¼›</li>
<li><strong>ç½‘ç»œæ¥å£å±‚</strong> å¹¶æ²¡æœ‰è§„å®šä»€ä¹ˆå…·ä½“çš„å†…å®¹ï¼Œç›®çš„æ˜¯å¯ä»¥äº’è”å…¨ä¸–ç•Œä¸åŒçš„ç½‘ç»œæ¥å£ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<h2>TCP/IP ç½‘ç»œä½“ç³»</h2>
<p>TCP/IP ä½“ç³»ç»“æ„åˆ†ä¸ºå››å±‚ï¼Œæ˜¯äº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ï¼Œå„å±‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code></code></pre></div>]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-05-06T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">HTTP æ¦‚è¿°</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/02-http-overview.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/02-http-overview.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocol, HTTPï¼‰ä¸€èˆ¬æ˜¯ç”¨äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„åº”ç”¨å±‚åè®®ã€‚</p>
<h2>HTTP åè®®ç‰¹æ€§</h2>
<ul>
<li>ç®€å•ï¼šHTTP åŸºæœ¬çš„æŠ¥æ–‡æ ¼å¼å°±æ˜¯ header + bodyï¼Œå¤´éƒ¨ä¿¡æ¯ä¹Ÿæ˜¯ key-value çš„ç®€å•æ–‡æœ¬å½¢å¼ï¼Œæ˜“äºç†è§£ï¼Œé™ä½äº†å­¦ä¹ å’Œä½¿ç”¨çš„é—¨æ§›ã€‚</li>
<li>çµæ´»æ˜“æ‰©å±•ï¼šHTTP/1.0 å‡ºç°çš„ HTTP headers è®©åè®®æ‰©å±•å˜å¾—éå¸¸å®¹æ˜“ï¼Œåªè¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¯¹æ–° headers è¾¾æˆè¯­ä¹‰ä¸€è‡´ï¼Œæ–°åŠŸèƒ½å°±å¯ä»¥è¢«æ·»åŠ è¿›æ¥ã€‚</li>
<li>æ— è¿æ¥ï¼šæ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·ç«¯çš„åº”ç­”åï¼Œå°±ä¼šæ–­å¼€è¿æ¥ï¼ŒHTTP 1.1 å¯ä»¥å¼€å¯é•¿è¿æ¥ã€‚</li>
<li>æ— çŠ¶æ€ï¼šå¯¹äºäº‹ç‰©å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚å› æ­¤æµè§ˆå™¨æ— æ³•ä¿å­˜ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œæ¯æ¬¡è¿›è¡Œéœ€è¦ç™»å½•æ‰èƒ½æ‰§è¡Œçš„æ“ä½œæ—¶ï¼Œéƒ½éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚è€Œ cookie å¯ä»¥åˆ›å»ºæœ‰çŠ¶æ€çš„ä¼šè¯ã€‚å¥½å¤„åœ¨äºæœåŠ¡å™¨ä¸ä¼šè®°å¿† HTTP çš„çŠ¶æ€ï¼Œèƒ½å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li>
<li>æ˜æ–‡ä¼ è¾“ï¼šç»™è°ƒè¯•å¸¦æ¥ä¾¿åˆ©æ€§ï¼Œä½†æ˜¯ç”¨æˆ·æ¯«æ— éšç§å¯è¨€ï¼Œä¸å®‰å…¨ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocol, HTTPï¼‰ä¸€èˆ¬æ˜¯ç”¨äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„åº”ç”¨å±‚åè®®ã€‚</p>
<h2>HTTP åè®®ç‰¹æ€§</h2>
<ul>
<li>ç®€å•ï¼šHTTP åŸºæœ¬çš„æŠ¥æ–‡æ ¼å¼å°±æ˜¯ header + bodyï¼Œå¤´éƒ¨ä¿¡æ¯ä¹Ÿæ˜¯ key-value çš„ç®€å•æ–‡æœ¬å½¢å¼ï¼Œæ˜“äºç†è§£ï¼Œé™ä½äº†å­¦ä¹ å’Œä½¿ç”¨çš„é—¨æ§›ã€‚</li>
<li>çµæ´»æ˜“æ‰©å±•ï¼šHTTP/1.0 å‡ºç°çš„ HTTP headers è®©åè®®æ‰©å±•å˜å¾—éå¸¸å®¹æ˜“ï¼Œåªè¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¯¹æ–° headers è¾¾æˆè¯­ä¹‰ä¸€è‡´ï¼Œæ–°åŠŸèƒ½å°±å¯ä»¥è¢«æ·»åŠ è¿›æ¥ã€‚</li>
<li>æ— è¿æ¥ï¼šæ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·ç«¯çš„åº”ç­”åï¼Œå°±ä¼šæ–­å¼€è¿æ¥ï¼ŒHTTP 1.1 å¯ä»¥å¼€å¯é•¿è¿æ¥ã€‚</li>
<li>æ— çŠ¶æ€ï¼šå¯¹äºäº‹ç‰©å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚å› æ­¤æµè§ˆå™¨æ— æ³•ä¿å­˜ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œæ¯æ¬¡è¿›è¡Œéœ€è¦ç™»å½•æ‰èƒ½æ‰§è¡Œçš„æ“ä½œæ—¶ï¼Œéƒ½éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚è€Œ cookie å¯ä»¥åˆ›å»ºæœ‰çŠ¶æ€çš„ä¼šè¯ã€‚å¥½å¤„åœ¨äºæœåŠ¡å™¨ä¸ä¼šè®°å¿† HTTP çš„çŠ¶æ€ï¼Œèƒ½å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li>
<li>æ˜æ–‡ä¼ è¾“ï¼šç»™è°ƒè¯•å¸¦æ¥ä¾¿åˆ©æ€§ï¼Œä½†æ˜¯ç”¨æˆ·æ¯«æ— éšç§å¯è¨€ï¼Œä¸å®‰å…¨ã€‚</li>
</ul>
<h2>HTTP æŠ¥æ–‡æ ¼å¼</h2>
<h3>è¯·æ±‚æŠ¥æ–‡æ ¼å¼</h3>
<p>å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚åˆ°æœåŠ¡å™¨çš„è¯·æ±‚æ¶ˆæ¯ï¼š<strong>è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€ç©ºè¡Œå’Œè¯·æ±‚ä½“å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚</strong></p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>POST / HTTP1.1
Host:www.wrox.com
User-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)
Content-Type:application/x-www-form-urlencoded
Content-Length:40
Connection: Keep-Alive

name=Professional%20Ajax&amp;publisher=Wiley
</code></pre></div><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šè¯·æ±‚è¡Œï¼Œè¯·æ±‚æ–¹æ³• + URI + HTTP ç‰ˆæœ¬ã€‚</p>
<p>ç¬¬äºŒéƒ¨åˆ†ï¼šè¯·æ±‚å¤´éƒ¨ã€‚</p>
<p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šç©ºè¡Œã€‚</p>
<p>ç¬¬å››éƒ¨åˆ†ï¼šè¯·æ±‚æ•°æ®ã€‚</p>
<h3>å“åº”æŠ¥æ–‡æ ¼å¼</h3>
<p>æœåŠ¡å™¨å“åº”ä¹Ÿç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>å“åº”è¡Œã€å“åº”å¤´ã€ç©ºè¡Œå’Œå“åº”ä½“</strong>ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>HTTP/1.1 200 OK
Date: Fri, 22 May 2009 06:07:21 GMT
Content-Type: text/html; charset=UTF-8

&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;!--body goes here--&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h2>HTTP å¸¸è§çŠ¶æ€ç </h2>
<ul>
<li>1xxï¼šæç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºç›®å‰æ˜¯åè®®å¤„ç†çš„ä¸­é—´çŠ¶æ€ï¼Œè¿˜éœ€è¿›ä¸€æ­¥æ“ä½œï¼›</li>
<li>2xxï¼šæˆåŠŸï¼Œè¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ”¶åˆ°å¹¶æ­£ç¡®å¤„ç†ï¼›</li>
<li>3xxï¼šé‡å®šå‘ï¼Œèµ„æºä½ç½®å‘ç”Ÿå˜åŠ¨ï¼Œéœ€è¦å®¢æˆ·ç«¯é‡æ–°å‘é€è¯·æ±‚ï¼›</li>
<li>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æŠ¥æ–‡æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ï¼›</li>
<li>5xxï¼šæœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯ã€‚</li>
</ul>
<p>| å¸¸è§çŠ¶æ€ç                 | çŠ¶æ€æè¿°                                                         |<br>
|</p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-04-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">GET å’Œ POST çš„åŒºåˆ«</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/03-get-post-difference.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/03-get-post-difference.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ¦‚è¿°</h2>
<p>GET å’Œ POST æ˜¯ HTTP åè®®ä¸­å‘é€è¯·æ±‚çš„æ–¹æ³•ã€‚</p>
<ul>
<li>GETï¼šè¯·æ±‚èµ„æºï¼Œä»æœåŠ¡å™¨è·å–æ•°æ®ï¼›</li>
<li>POSTï¼šå°†æ•°æ®æäº¤åˆ°æŒ‡å®šåœ°å€ã€‚</li>
</ul>
<p>äºŒè€…æœ¬è´¨ä¸Šéƒ½æ˜¯ TCP é“¾æ¥ï¼Œå› æ­¤æœ¬è´¨ä¸Š<strong>æ²¡æœ‰åŒºåˆ«</strong>ï¼Œä½†ç”±äº HTTP è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´å®ƒä»¬åœ¨å®é™…æ“ä½œä¸­ä¼šæœ‰ä¸€å®šåŒºåˆ«ã€‚</p>
<h2>åŒºåˆ«</h2>
<ul>
<li>GET åœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€Œ POST ä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>
<li>GET äº§ç”Ÿçš„ URL åœ°å€å¯ä»¥è¢« Bookmarkedï¼Œè€Œ POST ä¸å¯ä»¥ã€‚</li>
<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ cacheï¼Œè€Œ POST ä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li>
<li>GET è¯·æ±‚åªèƒ½è¿›è¡Œ url ç¼–ç ï¼Œè€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li>
<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li>
<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€Œ POST æ²¡æœ‰ã€‚</li>
<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGET åªæ¥å— ASCII å­—ç¬¦ï¼Œè€Œ POST æ²¡æœ‰é™åˆ¶ã€‚</li>
<li>GET æ¯” POST æ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨ URL ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’ï¼ŒPOST æ”¾åœ¨ Request body ä¸­ã€‚</li>
<li>GET æ–¹æ³•æ˜¯å®‰å…¨ä¸”å¹‚ç­‰çš„ï¼ŒPOST æ–¹æ³•æ˜¯<strong>ä¸å®‰å…¨ä¸”ä¸å¹‚ç­‰</strong>çš„ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<h2>æ¦‚è¿°</h2>
<p>GET å’Œ POST æ˜¯ HTTP åè®®ä¸­å‘é€è¯·æ±‚çš„æ–¹æ³•ã€‚</p>
<ul>
<li>GETï¼šè¯·æ±‚èµ„æºï¼Œä»æœåŠ¡å™¨è·å–æ•°æ®ï¼›</li>
<li>POSTï¼šå°†æ•°æ®æäº¤åˆ°æŒ‡å®šåœ°å€ã€‚</li>
</ul>
<p>äºŒè€…æœ¬è´¨ä¸Šéƒ½æ˜¯ TCP é“¾æ¥ï¼Œå› æ­¤æœ¬è´¨ä¸Š<strong>æ²¡æœ‰åŒºåˆ«</strong>ï¼Œä½†ç”±äº HTTP è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´å®ƒä»¬åœ¨å®é™…æ“ä½œä¸­ä¼šæœ‰ä¸€å®šåŒºåˆ«ã€‚</p>
<h2>åŒºåˆ«</h2>
<ul>
<li>GET åœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€Œ POST ä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>
<li>GET äº§ç”Ÿçš„ URL åœ°å€å¯ä»¥è¢« Bookmarkedï¼Œè€Œ POST ä¸å¯ä»¥ã€‚</li>
<li>GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ cacheï¼Œè€Œ POST ä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li>
<li>GET è¯·æ±‚åªèƒ½è¿›è¡Œ url ç¼–ç ï¼Œè€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li>
<li>GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li>
<li>GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€Œ POST æ²¡æœ‰ã€‚</li>
<li>å¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGET åªæ¥å— ASCII å­—ç¬¦ï¼Œè€Œ POST æ²¡æœ‰é™åˆ¶ã€‚</li>
<li>GET æ¯” POST æ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨ URL ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>
<li>GET å‚æ•°é€šè¿‡ URL ä¼ é€’ï¼ŒPOST æ”¾åœ¨ Request body ä¸­ã€‚</li>
<li>GET æ–¹æ³•æ˜¯å®‰å…¨ä¸”å¹‚ç­‰çš„ï¼ŒPOST æ–¹æ³•æ˜¯<strong>ä¸å®‰å…¨ä¸”ä¸å¹‚ç­‰</strong>çš„ã€‚</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<ul>
<li>å®‰å…¨ï¼šè¯·æ±‚æ–¹æ³•ä¸ä¼šç ´åæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼›</li>
<li>å¹‚ç­‰ï¼šæ‰§è¡Œå¤šæ¬¡ç›¸åŒçš„æ“ä½œï¼Œç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚</li>
</ul>
</div>
<h2>è¯¯åŒº</h2>
<h3>å‚æ•°é•¿åº¦</h3>
<p>GET å‚æ•°æœ‰é•¿åº¦é™åˆ¶ï¼Œä½†è¿™æ˜¯å› ä¸ºæµè§ˆå™¨å¯¹ URL çš„é•¿åº¦é™åˆ¶ï¼Œè€Œä¸æ˜¯ HTTP åè®®æœ¬èº«å¯¹å‚æ•°é•¿åº¦çš„é™åˆ¶ã€‚HTTP åŒæ ·å¯¹ POST å‚æ•°é•¿åº¦æ²¡æœ‰é™åˆ¶ï¼Œè€Œæ˜¯é æœåŠ¡å™¨çš„è®¾ç½®æ¥é™åˆ¶å¤§å°çš„ã€‚</p>
<h3>å®‰å…¨æ€§</h3>
<p>POST <strong>ç›¸å¯¹</strong>æ¯” GET å®‰å…¨æ€§è¦é«˜ã€‚</p>
<p>é€šè¿‡ GET æäº¤çš„è¯·æ±‚éƒ½å°†æ˜¾ç¤ºåˆ° URL ä¸Šï¼Œé¡µé¢ä¼šè¢«æµè§ˆå™¨ç¼“å­˜ï¼Œå…¶ä»–äººæŸ¥çœ‹å†å²è®°å½•ä¼šçœ‹åˆ°æäº¤çš„æ•°æ®ã€‚</p>
<p>è¿™é‡Œçš„ç›¸å¯¹åœ¨äºï¼š<strong>HTTP æœ¬èº«æ˜¯æ˜æ–‡ä¼ è¾“çš„åè®®</strong>ï¼Œæ— è®ºä½¿ç”¨ GET è¿˜æ˜¯ POST éƒ½æœ‰å¯èƒ½å—åˆ°ä¸­é—´äººæ”»å‡»è€Œé€ æˆæ•°æ®æ³„éœ²ã€‚</p>
<p>å¦‚æœ HTTP é“¾æ¥ä½¿ç”¨ SSL/TLSï¼Œé‚£ä¹ˆ GET å‚æ•°ä¹Ÿä¼šè¢«åŠ å¯†ï¼Œä½†æ˜¯ä»ç„¶ä¼šåœ¨æŸäº›åœ°æ–¹å‡ºç°ï¼Œæ¯”å¦‚æœåŠ¡å™¨æ—¥å¿—ã€æµè§ˆå™¨æ’ä»¶å’Œå…¶ä»–åº”ç”¨ã€‚è€Œ POST æ•°æ®ä¼šè¢«åŠ å¯†å¹¶ä¸”ä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ³„éœ²ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å› æ­¤å¦‚æœæƒ³è¦ä¿è¯æ€»æ˜¯å®‰å…¨åœ°ä¼ è¾“æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ HTTPS ä¸Šçš„ POSTã€‚</p>
</div>
<h3>Request Body</h3>
<p>GET å¯ä»¥å¸¦ Request Bodyï¼Œä½†ä¸èƒ½ä¿è¯ä¸€å®šèƒ½è¢«æ¥æ”¶åˆ°ã€‚å¦‚æœä½ ç”¨ GET è¯·æ±‚ï¼Œåœ¨ Request Body æºå¸¦æ•°æ®ï¼Œä¸åŒæœåŠ¡å™¨çš„å¤„ç†æ–¹å¼ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œæœ‰äº›æœåŠ¡å™¨ä¼šå¸®ä½ è¯»å‡ºæ•°æ®ï¼Œæœ‰äº›æœåŠ¡å™¨ç›´æ¥å¿½ç•¥ã€‚</p>
<h3>æ•°æ®åŒ…</h3>
<p>å¯¹äº GET è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠ http header å’Œ data ä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº” 200ï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚</p>
<p>å¯¹äº POSTï¼Œæµè§ˆå™¨å…ˆå‘é€ headerï¼ŒæœåŠ¡å™¨å“åº” 100 continueï¼Œæµè§ˆå™¨å†å‘é€ dataï¼ŒæœåŠ¡å™¨å“åº” 200 okã€‚</p>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šåœ¨ POST ä¸­å‘é€ä¸¤æ¬¡åŒ…ï¼ŒFirefox å°±åªå‘é€ä¸€æ¬¡ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/3063530/what-is-the-difference-between-get-and-post-encryption" target="_blank" rel="noopener noreferrer">https - What is the difference between GET and POST encryption? - Stack Overflow</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzI3NzIzMzg3Mw==&amp;mid=100000054&amp;idx=1&amp;sn=71f6c214f3833d9ca20b9f7dcd9d33e4#rd" target="_blank" rel="noopener noreferrer">99%çš„äººéƒ½ç†è§£é”™äº† HTTP ä¸­ GET ä¸ POST çš„åŒºåˆ« (qq.com)</a></li>
<li><a href="https://github.com/febobo/web-interview/issues/145" target="_blank" rel="noopener noreferrer">é¢è¯•å®˜ï¼šè¯´ä¸€ä¸‹ GET å’Œ POST çš„åŒºåˆ«ï¼Ÿ Â· Issue #145 Â· febobo/web-interview (github.com)</a></li>
</ul>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-04-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">HTTP æ€§èƒ½æ¼”å˜</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/04-http-development.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/04-http-development.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>æ•´ä¸ª HTTP çš„æ¼”å˜å²å°±æ˜¯ä¸€ä¸ªåœ¨ä¸æ–­ä¼˜åŒ–æ€§èƒ½çš„è¿‡ç¨‹ã€‚</p>
<h2>HTTP/0.9 - å•è¡Œåè®®</h2>
<p>æœ€åˆç‰ˆæœ¬çš„ HTTP åè®®å¹¶æ²¡æœ‰ç‰ˆæœ¬å·ï¼Œåæ¥å®ƒçš„ç‰ˆæœ¬å·è¢«å®šä½åœ¨ 0.9 ä»¥åŒºåˆ†åæ¥çš„ç‰ˆæœ¬ã€‚</p>
<p>HTTP/0.9 æå…¶ç®€å•ï¼šè¯·æ±‚ç”±å•è¡ŒæŒ‡ä»¤æ„æˆï¼Œä»¥å”¯ä¸€å¯ç”¨æ–¹æ³• GET å¼€å¤´ï¼Œå…¶åè·Ÿç›®æ ‡èµ„æºçš„è·¯å¾„ï¼ˆä¸€æ—¦è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œåè®®ã€æœåŠ¡å™¨ã€ç«¯å£å·è¿™äº›éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼‰ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>GET /mypage.html
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>æ•´ä¸ª HTTP çš„æ¼”å˜å²å°±æ˜¯ä¸€ä¸ªåœ¨ä¸æ–­ä¼˜åŒ–æ€§èƒ½çš„è¿‡ç¨‹ã€‚</p>
<h2>HTTP/0.9 - å•è¡Œåè®®</h2>
<p>æœ€åˆç‰ˆæœ¬çš„ HTTP åè®®å¹¶æ²¡æœ‰ç‰ˆæœ¬å·ï¼Œåæ¥å®ƒçš„ç‰ˆæœ¬å·è¢«å®šä½åœ¨ 0.9 ä»¥åŒºåˆ†åæ¥çš„ç‰ˆæœ¬ã€‚</p>
<p>HTTP/0.9 æå…¶ç®€å•ï¼šè¯·æ±‚ç”±å•è¡ŒæŒ‡ä»¤æ„æˆï¼Œä»¥å”¯ä¸€å¯ç”¨æ–¹æ³• GET å¼€å¤´ï¼Œå…¶åè·Ÿç›®æ ‡èµ„æºçš„è·¯å¾„ï¼ˆä¸€æ—¦è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œåè®®ã€æœåŠ¡å™¨ã€ç«¯å£å·è¿™äº›éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼‰ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>GET /mypage.html
</code></pre></div><p>HTTP/0.9 çš„å“åº”å†…å®¹ä¸åŒ…å« HTTP å¤´ï¼Œè¿™æ„å‘³ç€åªæœ‰ HTML æ–‡ä»¶å¯ä»¥ä¼ é€ï¼Œæ— æ³•ä¼ é€å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼›ä¹Ÿæ²¡æœ‰çŠ¶æ€ç æˆ–é”™è¯¯ä»£ç ï¼›ä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œä¸€ä¸ªç‰¹æ®Šçš„åŒ…å«é—®é¢˜æè¿°ä¿¡æ¯çš„ HTML æ–‡ä»¶å°†ä¼šè¢«è¿”å›ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>&lt;HTML&gt;
è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„HTMLé¡µé¢
&lt;/HTML&gt;
</code></pre></div><p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li>è¯·æ±‚åªæœ‰ä¸€ä¸ªè¯·æ±‚è¡Œï¼›</li>
<li>å“åº”åªæœ‰ä¸€ä¸ªå“åº”ä½“ï¼Œä¸”åªèƒ½è¿”å› HTML æ–‡ä»¶ï¼›</li>
</ul>
<h2>HTTP/1.0 - æ„å»ºå¯æ‰©å±•æ€§</h2>
<p>ç”±äº HTTP/0.9 åè®®çš„åº”ç”¨ååˆ†æœ‰é™ï¼ŒHTTP/1.0 åœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†å¾ˆå¤šæ–°ç‰¹æ€§ï¼š</p>
<ul>
<li>åè®®ç‰ˆæœ¬ä¿¡æ¯ç°åœ¨ä¼šéšç€æ¯ä¸ªè¯·æ±‚è¡Œå‘é€ã€‚</li>
<li>çŠ¶æ€ç åœ¨å“åº”å¼€å§‹æ—¶å‘é€ï¼Œä½¿æµè§ˆå™¨èƒ½äº†è§£è¯·æ±‚æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥ï¼Œå¹¶è°ƒæ•´ç›¸åº”è¡Œä¸ºï¼ˆå¦‚æ›´æ–°æˆ–ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼‰ã€‚</li>
<li>å¼•å…¥äº† HTTP å¤´çš„æ¦‚å¿µï¼Œä½¿åè®®å˜å¾—çµæ´»æ˜“æ‰©å±•ã€‚</li>
<li>Content-Type å¤´ä½¿ä¼ è¾“é™¤ HTML æ–‡ä»¶ä»¥ä¸ºå…¶ä»–ç±»å‹æ–‡ä»¶çš„å¯èƒ½ã€‚</li>
</ul>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>// è¯·æ±‚
GET /mypage.html HTTP/1.0
User-Agent: NCSA_Mosaic/2.0 (Windows 3.1)

// å“åº”
200 OK
Date: Tue, 15 Nov 1994 08:12:31 GMT
Server: CERN/3.0 libwww/2.17
Content-Type: text/html
&lt;HTML&gt;
ä¸€ä¸ªåŒ…å«å›¾ç‰‡çš„é¡µé¢
  &lt;IMG SRC="/myimage.gif"&gt;
&lt;/HTML&gt;
</code></pre></div><h2>HTTP/1.1</h2>
<p>HTTP/1.0 é‡‡ç”¨çŸ­è¿æ¥æ–¹å¼ï¼Œå³æ¯æ¬¡è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶éƒ½éœ€è¦å’Œæµè§ˆå™¨å»ºç«‹ TCP è¿æ¥ï¼Œå½“æ”¶åˆ°å“åº”åå°±ä¼šç«‹å³å…³é—­è¿æ¥ï¼Œè¿™æ ·ä¼šé€ æˆä¸å¿…è¦çš„æ—¶é—´å¼€é”€ã€‚</p>
<p>ä¸ºäº†å‡å°‘æ—¶å»¶ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šå»ºç«‹å¤šä¸ªå¹¶è¡Œçš„ TCP è¿æ¥åŒæ—¶è¯·æ±‚å¤šä¸ªå¯¹è±¡ã€‚ä½†æ˜¯è¿™ä¼šå ç”¨å¤§é‡æœåŠ¡å™¨çš„èµ„æºã€‚</p>
<p>HTTP/1.1 ç›¸æ¯”äº HTTP/1.0 æ€§èƒ½ä¸Šçš„æ”¹è¿›ï¼š</p>
<ul>
<li>ä½¿ç”¨ TCP é•¿è¿æ¥çš„æ–¹å¼æ”¹å–„äº† HTTP/1.0 çŸ­è¿æ¥é€ æˆçš„æ€§èƒ½å¼€é”€ï¼›</li>
<li>æ”¯æŒç®¡é“ç½‘ç»œä¼ è¾“ï¼Œåªè¦ç¬¬ä¸€ä¸ªè¯·æ±‚å‘å‡ºï¼Œä¸å¿…ç­‰å¾…å“åº”ï¼Œå°±å¯ä»¥ç›´æ¥å‘é€ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œå‡å°‘æ•´ä½“çš„å“åº”æ—¶é—´ï¼ˆæµæ°´çº¿æ–¹å¼å·¥ä½œï¼‰ã€‚</li>
</ul>
<p>ä½†æ˜¯ HTTP/1.1 è¿˜æ˜¯æœ‰æ€§èƒ½ç“¶é¢ˆï¼š</p>
<ul>
<li>åªèƒ½å‹ç¼© body éƒ¨åˆ†ï¼Œè¯·æ±‚/å“åº”å¤´éƒ¨æœªç»å‹ç¼©å°±å‘é€ï¼Œå¤´éƒ¨ä¿¡æ¯è¶Šå¤šå»¶è¿Ÿè¶Šå¤§ï¼›</li>
<li>å‘é€å†—é•¿çš„é¦–éƒ¨ï¼Œæ¯æ¬¡äº’ç›¸å‘é€ç›¸åŒçš„é¦–éƒ¨é€ æˆçš„æµªè´¹æ¯”è¾ƒå¤šï¼›</li>
<li>æœåŠ¡å™¨æ˜¯æŒ‰è¯·æ±‚é¡ºåºå“åº”çš„ï¼Œå¦‚æœæœåŠ¡å™¨å“åº”è¿‡æ…¢ï¼Œä¼šå¯¼è‡´å®¢æˆ·ç«¯ä¸€ç›´è¯·æ±‚ä¸åˆ°åé¢çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯<strong>é˜Ÿå¤´é˜»å¡</strong>ï¼›</li>
<li>æ²¡æœ‰è¯·æ±‚ä¼˜å…ˆçº§æ§åˆ¶ï¼›</li>
<li>è¯·æ±‚åªèƒ½ä»å®¢æˆ·ç«¯å¼€å§‹ï¼ŒæœåŠ¡å™¨åªèƒ½è¢«åŠ¨å“åº”ã€‚</li>
</ul>
<h2>HTTP/2.0</h2>
<p>HTTP/2.0 æ˜¯åŸºäº HTTPS çš„ï¼Œæ‰€ä»¥å®‰å…¨æ€§æœ‰æ‰€ä¿è¯ã€‚HTTP/2.0 ç›¸æ¯” HTTP/1.1 æ€§èƒ½ä¸Šçš„æ”¹è¿›ï¼š</p>
<ul>
<li>å¤´éƒ¨å‹ç¼©ï¼šå¦‚æœåŒæ—¶å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œä»–ä»¬çš„å¤´æ˜¯ä¸€æ ·æˆ–ç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆåè®®ä¼šæ¶ˆé™¤é‡å¤çš„éƒ¨åˆ†ï¼›</li>
<li>é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼šå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ç»Ÿç§°ä¸ºå¸§ï¼Œå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ï¼Œå¢åŠ äº†æ•°æ®ä¼ è¾“çš„æ•ˆç‡ï¼›</li>
<li>å¤šè·¯å¤ç”¨ï¼šå¯ä»¥åœ¨ä¸€ä¸ªè¿æ¥ä¸­å¹¶å‘å¤šä¸ªè¯·æ±‚æˆ–å“åº”ï¼Œè€Œä¸ç”¨æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè§£å†³äº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ï¼›</li>
<li>å¯ä»¥æŒ‡å®šæ•°æ®æµçš„ä¼˜å…ˆçº§ï¼›</li>
<li>æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<p>ç¼ºé™·åœ¨äºï¼šå¤šä¸ª HTTP è¯·æ±‚å¤ç”¨ä¸€ä¸ª TCP è¿æ¥ï¼Œä¸€æ—¦å‘ç”Ÿä¸¢åŒ…ç°è±¡ï¼Œå°±ä¼šè§¦å‘ TCP çš„é‡ä¼ æœºåˆ¶ï¼Œè¿™æ ·åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­çš„æ‰€æœ‰ HTTP è¯·æ±‚éƒ½å¿…é¡»ç­‰å¾…è¿™ä¸ªä¸¢äº†çš„åŒ…è¢«é‡ä¼ å›æ¥ã€‚</p>
<h2>HTTP/3.0</h2>
<p>HTTP/2.0 åŸºäº TCP ä¼ è¾“å±‚ï¼Œå¯¼è‡´ä¸¢åŒ…ä¸‹é˜»å¡æ‰€æœ‰ HTTP è¯·æ±‚çš„é—®é¢˜ï¼Œå› æ­¤ HTTP/3.0 æŠŠ HTTP ä¸‹å±‚çš„ TCP åè®®æ”¹æˆäº† UDPã€‚</p>
<p>UDP æ˜¯ä¸å¯é ä¼ è¾“ï¼Œä½†æ˜¯åŸºäº UDP çš„ QUIC åè®®å¯ä»¥å®ç°ç±»ä¼¼ TCP çš„å¯é ä¼ è¾“ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<p><a href="https://xiaolincoding.com/network/2_http/http_interview.html#http-1-1%E3%80%81http-2%E3%80%81http-3-%E6%BC%94%E5%8F%98" target="_blank" rel="noopener noreferrer">3.1 HTTP å¸¸è§é¢è¯•é¢˜ | å°æ— coding (xiaolincoding.com)</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP#%E5%90%8Ehttp2%E8%BF%9B%E5%8C%96" target="_blank" rel="noopener noreferrer">HTTP çš„å‘å±• - HTTP | MDN (mozilla.org)</a></p>
<p><a href="https://www.bilibili.com/video/BV1c4411d7jb?p=73" target="_blank" rel="noopener noreferrer">è®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚ï¼ˆæœ‰å­—å¹•æ— èƒŒæ™¯éŸ³ä¹ç‰ˆï¼‰_å“”å“©å“”å“©_bilibili</a></p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-04-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">HTTP ç¼“å­˜</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/05-http-cache.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/05-http-cache.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>å¯¹äºä¸€äº›ç›¸åŒçš„è¯·æ±‚ï¼Œé€šè¿‡å¤ç”¨ä»¥å‰è·å–çš„èµ„æºï¼Œæ˜¾è‘—æé«˜ç½‘é¡µçš„æ€§èƒ½ã€‚Web ç¼“å­˜å‡å°‘äº†ç­‰å¾…æ—¶é—´å’Œæµé‡ï¼Œå› æ­¤å‡å°‘äº†æ˜¾ç¤ºèµ„æºçš„æ¸²æŸ“æ—¶é—´ã€‚</p>
<p>HTTP ç¼“å­˜çš„å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å¼ºåˆ¶ç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>ã€‚</p>
<h2>å¼ºç¼“å­˜</h2>
<p>å¼ºç¼“å­˜æ˜¯æŒ‡ï¼šåªè¦æµè§ˆå™¨åˆ¤æ–­ç¼“å­˜æ²¡æœ‰è¿‡æœŸï¼Œåˆ™ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p>
<p>å¼ºç¼“å­˜æ˜¯åˆ©ç”¨ä¸‹é¢è¿™ä¸¤ä¸ªå­—æ®µå®ç°çš„ï¼Œå®ƒä»¬éƒ½ç”¨æ¥è¡¨ç¤ºèµ„æºåœ¨å®¢æˆ·ç«¯ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚</p>
<ul>
<li><code>Expires</code>ï¼šç»å¯¹æ—¶é—´ï¼›</li>
<li><code>Cache-Control</code>ï¼šç¼“å­˜æŒ‡ä»¤ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>å¯¹äºä¸€äº›ç›¸åŒçš„è¯·æ±‚ï¼Œé€šè¿‡å¤ç”¨ä»¥å‰è·å–çš„èµ„æºï¼Œæ˜¾è‘—æé«˜ç½‘é¡µçš„æ€§èƒ½ã€‚Web ç¼“å­˜å‡å°‘äº†ç­‰å¾…æ—¶é—´å’Œæµé‡ï¼Œå› æ­¤å‡å°‘äº†æ˜¾ç¤ºèµ„æºçš„æ¸²æŸ“æ—¶é—´ã€‚</p>
<p>HTTP ç¼“å­˜çš„å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å¼ºåˆ¶ç¼“å­˜</strong>å’Œ<strong>åå•†ç¼“å­˜</strong>ã€‚</p>
<h2>å¼ºç¼“å­˜</h2>
<p>å¼ºç¼“å­˜æ˜¯æŒ‡ï¼šåªè¦æµè§ˆå™¨åˆ¤æ–­ç¼“å­˜æ²¡æœ‰è¿‡æœŸï¼Œåˆ™ç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p>
<p>å¼ºç¼“å­˜æ˜¯åˆ©ç”¨ä¸‹é¢è¿™ä¸¤ä¸ªå­—æ®µå®ç°çš„ï¼Œå®ƒä»¬éƒ½ç”¨æ¥è¡¨ç¤ºèµ„æºåœ¨å®¢æˆ·ç«¯ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚</p>
<ul>
<li><code>Expires</code>ï¼šç»å¯¹æ—¶é—´ï¼›</li>
<li><code>Cache-Control</code>ï¼šç¼“å­˜æŒ‡ä»¤ã€‚</li>
</ul>
<h3>Expires</h3>
<p>å“åº”å¤´åŒ…å«çš„æ—¥æœŸæ—¶é—´ï¼Œåœ¨è¿™ä¸ªæ—¶é—´å‰ï¼Œæµè§ˆå™¨éƒ½ä¸ä¼šå†å‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç¼“å­˜èµ„æºã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">Expires</span><span class="token operator">:</span> Wed<span class="token punctuation">,</span> <span class="token number">21</span> Oct <span class="token number">2015</span> <span class="token number">07</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">00</span> <span class="token constant">GMT</span>
</code></pre></div><h3>Cache-Control</h3>
<p>é€šç”¨æ¶ˆæ¯å¤´å­—æ®µï¼Œé€šè¿‡æŒ‡å®šæŒ‡ä»¤æ¥å®ç°ç¼“å­˜æœºåˆ¶ã€‚ç¼“å­˜æŒ‡ä»¤æ˜¯å•å‘çš„ï¼Œè¿™æ„å‘³ç€åœ¨è¯·æ±‚ä¸­è®¾ç½®çš„æŒ‡ä»¤ï¼Œä¸ä¸€å®šè¢«åŒ…å«åœ¨å“åº”ä¸­ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>Cache<span class="token operator">-</span>Control<span class="token operator">:</span> max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">20000</span>
</code></pre></div><p><code>max-age=&lt;seconds&gt;</code> å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ï¼Œç›¸å¯¹äºè¯·æ±‚çš„æ—¶é—´è®¡ç®—ã€‚</p>
<p>å…·ä½“æµç¨‹ï¼š</p>
<ol>
<li>å½“æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å“åº”å¤´ä¼šå¸¦ä¸Š <code>Cache-Control</code>ï¼Œå…¶ä¸­è®¾ç½®äº†è¿‡æœŸæ—¶é—´ <code>max-age</code>ï¼›</li>
<li>æµè§ˆå™¨å†æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚åï¼Œä¼šè®¡ç®—<strong>å½“å‰è¯·æ±‚æ—¶é—´å’Œè¿‡æœŸæ—¶é—´</strong>å·®å€¼ï¼Œæ¥åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™é‡æ–°è¯·æ±‚æœåŠ¡å™¨ï¼Œå¦åˆ™ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼›</li>
<li>å¦‚æœå·²ç»è¿‡æœŸï¼ŒæœåŠ¡å™¨å†æ¬¡æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ›´æ–°å“åº”å¤´çš„ <code>Cache-Control</code>ã€‚</li>
</ol>
<p>é™¤äº† <code>max-age</code> å¤–ï¼Œè¿˜æœ‰å…¶ä»–æŒ‡ä»¤ï¼Œè¯¦è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control" target="_blank" rel="noopener noreferrer">Cache-Control</a>ã€‚</p>
<h3>ä¼˜å…ˆçº§</h3>
<p>å½“åŒæ—¶æœ‰ <code>Expires</code> å’Œ <code>Cache-Control</code> å­—æ®µæ—¶ï¼Œå¦‚æœ <code>Cache-Control</code> å“åº”å¤´è®¾ç½®äº† <code>max-age</code> æˆ– <code>s-maxage</code> æŒ‡ä»¤ï¼Œé‚£ä¹ˆ <code>Expires</code> ä¼šè¢«å¿½ç•¥ã€‚</p>
<h2>åå•†ç¼“å­˜</h2>
<p>ä¸ºäº†çŸ¥é“æœåŠ¡å™¨æœ‰æ²¡æœ‰æ›´æ–°å†…å®¹ï¼Œå¿…é¡»å’ŒæœåŠ¡å™¨æ²Ÿé€šï¼Œç„¶åæ ¹æ®æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯åˆ¤æ–­æ˜¯å¦ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œè¿™ç§æ–¹å¼ç§°ä¸º<strong>åå•†ç¼“å­˜</strong>ã€‚</p>
<p>åå•†ç¼“å­˜é€šè¿‡ä¸¤ç§å¤´éƒ¨å®ç°ï¼š</p>
<ul>
<li>è¯·æ±‚å¤´éƒ¨çš„ <code>If-Modified-Since</code> å’Œå“åº”å¤´éƒ¨çš„ <code>Last-Modified</code>ï¼›</li>
<li>è¯·æ±‚å¤´éƒ¨çš„ <code>If-None-Match</code> å’Œå“åº”å¤´éƒ¨çš„ <code>ETag</code>ã€‚</li>
</ul>
<h3><code>If-Modified-Since</code> å’Œ <code>Last-Modified</code></h3>
<p>è¿™ç§æ–¹å¼æ˜¯åŸºäºæ—¶é—´å®ç°çš„ã€‚</p>
<p>å“åº”å¤´ <code>Last-Modified</code> å­˜æ”¾çš„æ˜¯èµ„æºæœ€åä¿®æ”¹æ—¶é—´ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>Last<span class="token operator">-</span>Modified<span class="token operator">:</span> Wed<span class="token punctuation">,</span> <span class="token number">21</span> Oct <span class="token number">2015</span> <span class="token number">07</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">00</span> <span class="token constant">GMT</span>
</code></pre></div><p>è¯·æ±‚å¤´ä¸­çš„ <code>If-Modified-Since</code> å«ä¹‰ä¸ºèµ„æºä» xxx æ—¶é—´åæ˜¯å¦æœ‰æ›´æ–°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>If<span class="token operator">-</span>Modified<span class="token operator">-</span>Since<span class="token operator">:</span> Wed<span class="token punctuation">,</span> <span class="token number">21</span> Oct <span class="token number">2015</span> <span class="token number">07</span><span class="token operator">:</span><span class="token number">28</span><span class="token operator">:</span><span class="token number">00</span> <span class="token constant">GMT</span>
</code></pre></div><p>å½“æœåŠ¡å™¨æ”¶åˆ°æµè§ˆå™¨è¿™ä¸ªè¯·æ±‚å¤´åï¼Œä¼šè·Ÿå½“å‰ç‰ˆæœ¬çš„æ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼š</p>
<ol>
<li>å½“å‰ç‰ˆæœ¬çš„ä¿®æ”¹æ—¶é—´æ¯”è¿™ä¸ªæ™šï¼Œä¹Ÿå°±æ˜¯å†…å®¹å‘ç”Ÿå˜åŒ–äº†ï¼Œé‚£ä¹ˆä¼šè¿”å› 200 å’Œæ–°çš„å†…å®¹ï¼›</li>
<li>è‹¥å½“å‰ç‰ˆæœ¬çš„ä¿®æ”¹æ—¶é—´è¾ƒæ—©ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ›´æ–°ï¼Œé‚£ä¹ˆä¼šè¿”å› 304ï¼Œæµè§ˆå™¨ä¼šä»ç¼“å­˜ä¸­è¯»å–å†…å®¹ã€‚</li>
</ol>
<h3><code>ETag</code> å’Œ <code>If-None-Match</code></h3>
<p>è¿™ç§æ–¹å¼æ˜¯é€šè¿‡å”¯ä¸€æ ‡è¯†å®ç°ã€‚</p>
<p><code>ETag</code> æ˜¯èµ„æºçš„ç‰¹å®šç‰ˆæœ¬çš„æ ‡è¯†ç¬¦ï¼Œå“åº”å¤´ä¼šæ ¹æ®è¿”å›å†…å®¹è¿”å›ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå…·ä½“è¿”å›å€¼çœ‹æœåŠ¡å™¨çš„è®¡ç®—ç­–ç•¥ï¼Œå¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">ETag</span><span class="token operator">:</span> <span class="token string">'33a64df551425fcc55e4d42a148795d9f25f89d4'</span>
</code></pre></div><p>å½“å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªå“åº”åï¼Œä¼šå°†è¿™ä¸ª <code>ETag</code> ä¿å­˜èµ·æ¥ï¼Œç­‰ä¸‹ä¸ªè¯·æ±‚æ—¶ï¼Œä¼šå°†å®ƒæ”¾åˆ°è¯·æ±‚ä½“çš„ <code>If-None-Match</code> å­—æ®µä¸­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>If<span class="token operator">-</span>None<span class="token operator">-</span>Match<span class="token operator">:</span> <span class="token string">"33a64df551425fcc55e4d42a148795d9f25f89d4"</span>
</code></pre></div><p>å½“æœåŠ¡å™¨æ”¶åˆ°æµè§ˆå™¨è¿™ä¸ªè¯·æ±‚å¤´åï¼Œä¼šè·Ÿå½“å‰ç‰ˆæœ¬çš„ <code>ETag</code> è¿›è¡Œæ¯”è¾ƒï¼š</p>
<ol>
<li>å¦‚æœæ ‡è¯†ç¬¦ä¸ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯å†…å®¹å‘ç”Ÿå˜åŒ–äº†ï¼Œé‚£ä¹ˆä¼šè¿”å› 200 å’Œæ–°çš„å†…å®¹ï¼›</li>
<li>å¦‚æœæ ‡è¯†ç¬¦ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ›´æ–°ï¼Œé‚£ä¹ˆä¼šè¿”å› 304ï¼Œæµè§ˆå™¨ä¼šä»ç¼“å­˜ä¸­è¯»å–å†…å®¹ã€‚</li>
</ol>
<h3>ä¼˜å…ˆçº§</h3>
<p>åå•†ç¼“å­˜å…ˆæ£€æŸ¥ä¸Šä¸€æ¬¡å“åº”å¤´ä¸­æ˜¯å¦æœ‰ <code>ETag</code>ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å‘èµ·è¯·æ±‚ä¸­è¯·æ±‚å¤´å¸¦ä¸Š <code>If-None-Match</code> å­—æ®µï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ£€æŸ¥ä¸Šä¸€æ¬¡å“åº”å¤´ä¸­æ˜¯å¦æœ‰ <code>Last-Modified</code> å­—æ®µï¼Œå‘èµ·è¯·æ±‚ä¸­è¯·æ±‚å¤´å¸¦ä¸Š <code>If-Modified-Since</code> å­—æ®µã€‚</p>
<h2>æ€»ç»“</h2>
<p>HTTP ç¼“å­˜æœºåˆ¶åˆ†ä¸ºä¸¤ç§ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚</p>
<p>æµè§ˆå™¨ä¼šé¦–å…ˆåˆ¤æ–­å¼ºç¼“å­˜ï¼Œå¦‚æœå¼ºç¼“å­˜ç”Ÿæ•ˆï¼Œé‚£ä¹ˆç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼›è‹¥æ²¡æœ‰ç”Ÿæ•ˆï¼Œåˆ™ä¼šä½¿ç”¨åå•†ç¼“å­˜ï¼Œå‘é€è¯·æ±‚ä¸æœåŠ¡å™¨åå•†ã€‚</p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-05-04T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">HTTPS ç•¥è§£</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/06-https-overview.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/06-https-overview.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<h2>HTTP å’Œ HTTPS</h2>
<h3>åŒºåˆ«</h3>
<ul>
<li>HTTP æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨ï¼Œè€Œ HTTPS åŠ å…¥äº† SSL/TLS å®‰å…¨åè®®ï¼Œä½¿å¾—æŠ¥æ–‡èƒ½åŠ å¯†ä¼ è¾“ï¼›</li>
<li>HTTP å»ºç«‹è¿æ¥åªéœ€ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œ HTTPS åœ¨ä¸‰æ¬¡æ¡æ‰‹åï¼Œè¿˜éœ€è¦è¿›è¡Œ SSL/TLS æ¡æ‰‹ï¼›</li>
<li>HTTP ç«¯å£å·ä¸º 80ï¼ŒHTTPS ç«¯å£å·ä¸º 443ï¼›</li>
<li>HTTPS éœ€è¦å‘ CA ç”³è¯·æ•°å­—è¯ä¹¦ã€‚</li>
</ul>
<figure><img src="/assets/image/computer-science/networking/006/HTTP.png" alt="http" tabindex="0" loading="lazy"><figcaption>http</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<h2>HTTP å’Œ HTTPS</h2>
<h3>åŒºåˆ«</h3>
<ul>
<li>HTTP æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨ï¼Œè€Œ HTTPS åŠ å…¥äº† SSL/TLS å®‰å…¨åè®®ï¼Œä½¿å¾—æŠ¥æ–‡èƒ½åŠ å¯†ä¼ è¾“ï¼›</li>
<li>HTTP å»ºç«‹è¿æ¥åªéœ€ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œ HTTPS åœ¨ä¸‰æ¬¡æ¡æ‰‹åï¼Œè¿˜éœ€è¦è¿›è¡Œ SSL/TLS æ¡æ‰‹ï¼›</li>
<li>HTTP ç«¯å£å·ä¸º 80ï¼ŒHTTPS ç«¯å£å·ä¸º 443ï¼›</li>
<li>HTTPS éœ€è¦å‘ CA ç”³è¯·æ•°å­—è¯ä¹¦ã€‚</li>
</ul>
<figure><img src="/assets/image/computer-science/networking/006/HTTP.png" alt="http" tabindex="0" loading="lazy"><figcaption>http</figcaption></figure>
<figure><img src="/assets/image/computer-science/networking/006/HTTPS.png" alt="https" tabindex="0" loading="lazy"><figcaption>https</figcaption></figure>
<h3>HTTPS ç¼ºç‚¹</h3>
<ul>
<li>åœ¨ç›¸åŒç½‘ç»œç¯å¢ƒä¸­ï¼ŒHTTPS ç›¸æ¯” HTTP æ— è®ºæ˜¯å“åº”æ—¶é—´è¿˜æ˜¯è€—ç”µé‡éƒ½æœ‰å¤§å¹…åº¦ä¸Šå‡ï¼›</li>
<li>HTTPS çš„å®‰å…¨æ˜¯æœ‰èŒƒå›´çš„ï¼Œåœ¨é»‘å®¢æ”»å‡»ã€æœåŠ¡å™¨åŠ«æŒç­‰æƒ…å†µä¸‹å‡ ä¹èµ·ä¸åˆ°ä½œç”¨ï¼›</li>
<li>åœ¨ç°æœ‰çš„è¯ä¹¦æœºåˆ¶ä¸‹ï¼Œä¸­é—´äººæ”»å‡»ä¾ç„¶æœ‰å¯èƒ½å‘ç”Ÿï¼›</li>
<li>HTTPS éœ€è¦æ›´å¤šçš„æœåŠ¡å™¨èµ„æºï¼Œä¹Ÿä¼šå¯¼è‡´æˆæœ¬çš„å‡é«˜ã€‚</li>
</ul>
<h2>åŠ å¯†ç®—æ³•</h2>
<p>HTTPS ä½¿ç”¨æ··åˆåŠ å¯†ç®—æ³•è§£å†³æ•°æ®å®‰å…¨ä¼ è¾“é—®é¢˜ï¼Œå³<strong>å¯¹ç§°åŠ å¯†</strong>å’Œ<strong>éå¯¹ç§°åŠ å¯†</strong>æ··åˆä½¿ç”¨ã€‚</p>
<h3>å¯¹ç§°åŠ å¯†</h3>
<p>åŠ å¯†å’Œè§£å¯†éƒ½æ˜¯åŒä¸€ä¸ªå¯†é’¥ï¼Œä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>ç”±äºå¯†é’¥ç›¸åŒï¼Œå› æ­¤åŠ å¯†è§£å¯†é€Ÿåº¦å¿«ï¼Œé€‚åˆåŠ å¯†æ¯”è¾ƒå¤§çš„æ•°æ®ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>äº¤æ˜“åŒæ–¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ï¼Œå› æ­¤éœ€è¦åœ¨<strong>é¦–æ¬¡</strong>ä¼ è¾“è¿‡ç¨‹ä¸­å¿…ç„¶éœ€è¦ç”±ä¸€æ–¹å°†å¯†é’¥ä¼ ç»™å¦ä¸€æ–¹ï¼Œè¿™æ ·å°±æ— æ³•ä¿è¯ä¿è¯å¯†é’¥çš„å®‰å…¨æ€§ï¼Œæœ‰å¯èƒ½ä¼šè¢«æˆªè·ï¼›</li>
<li>ä¸åŒç”¨æˆ·è®¿é—®çš„å¯†é’¥éœ€è¦ä¸åŒï¼Œè¿™ä¼šé€ æˆæœåŠ¡å™¨ç®¡ç†å¯†é’¥å›°éš¾ï¼Œæˆæœ¬é«˜ã€‚</li>
</ol>
<h3>éå¯¹ç§°åŠ å¯†</h3>
<p>åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼šå…¬é’¥ï¼ˆpublic keyï¼‰åŠ å¯†å’Œç§é’¥ï¼ˆprivate keyï¼‰è§£å¯†ã€‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‘é€æ–¹å‘æ¥æ”¶æ–¹è¯·æ±‚ä¸€ä¸ªå…¬é’¥ï¼›</li>
<li>å‘é€æ–¹ä½¿ç”¨å…¬é’¥åŠ å¯†ï¼Œå…¬é’¥å’ŒåŠ å¯†çš„æ•°æ®æ³„éœ²å¹¶æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºåªæœ‰ç§é’¥æ‰èƒ½è§£å¯†ï¼›</li>
<li>æ¥æ”¶æ–¹ç”¨ç§é’¥è§£å¯†æ¶ˆæ¯ã€‚</li>
</ol>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼Œç§é’¥ä¸éœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå®‰å…¨æ€§é«˜ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼ŒåŠ å¯†è§£å¯†é€Ÿåº¦æ¯”å¯¹ç§°åŠ å¯†æ…¢ï¼›</li>
<li>ä¸­é—´äººæ”»å‡»ï¼šä¸­é—´äººè¿›è¡Œæ‹¦æˆªï¼Œæ— æ³•ä¿è¯å…¬é’¥æ˜¯æ¥æ”¶æ–¹æä¾›çš„ã€‚</li>
</ol>
<figure><img src="/assets/image/computer-science/networking/006/mid-attack.png" alt="ä¸­é—´äººæ”»å‡»" tabindex="0" loading="lazy"><figcaption>ä¸­é—´äººæ”»å‡»</figcaption></figure>
<h2>æ•°å­—è¯ä¹¦å’Œæ•°å­—ç­¾å</h2>
<p>ä¸­é—´äººæ”»å‡»ä½¿æˆ‘ä»¬æ— æ³•éªŒè¯å…¬é’¥çš„çœŸå‡ã€‚å› æ­¤å¼•å…¥<strong>æ•°å­—è¯ä¹¦</strong>ï¼Œç”¨å®ƒæ¥è¯æ˜èº«ä»½æ˜¯çœŸå®çš„ï¼Œå¹¶ä¸”é˜²æ­¢è¢«ä¸­é—´äººæ”»å‡»ã€‚</p>
<p>ç”±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCertificate Authorityï¼Œç®€ç§° CAï¼‰è´Ÿè´£ç»™ç”¨æˆ·ç­¾å‘æ•°å­—è¯ä¹¦ï¼Œè¯ä¹¦ä¸­åŒ…æ‹¬ï¼šç­¾å‘è€…ã€ä½¿ç”¨è€…å…¬é’¥ã€ä½¿ç”¨çš„ HASH ç®—æ³•ã€è¯ä¹¦åˆ°æœŸæ—¶é—´ç­‰ã€‚</p>
<p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä¸­é—´äººç¯¡æ”¹äº†è¯ä¹¦ï¼Œå¦‚ä½•ä¿è¯èº«ä»½è¯æ˜æ˜¯æœ‰æ•ˆçš„ï¼Ÿè¿™æ—¶éœ€è¦å¼•è¿›<strong>æ•°å­—ç­¾å</strong>ã€‚</p>
<p>é¦–å…ˆä½¿ç”¨ CA è‡ªå¸¦çš„ HASH ç®—æ³•å¯¹è¯ä¹¦çš„å†…å®¹è¿›è¡Œ HASH å¾—åˆ°ä¸€ä¸ªä¿¡æ¯æ‘˜è¦ï¼Œå†ç”¨ CA çš„ç§é’¥è¿›è¡ŒåŠ å¯†ï¼Œæœ€ç»ˆç»„æˆæ•°å­—ç­¾åã€‚å½“æœåŠ¡å™¨å°†åŸå§‹ä¿¡æ¯å’Œæ•°å­—ç­¾åå‘é€è¿‡æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å…ˆä½¿ç”¨ CA çš„å…¬é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ° CA åˆ›å»ºçš„ä¿¡æ¯æ‘˜è¦ï¼Œå†ä½¿ç”¨åŒæ ·çš„ HASH ç®—æ³•ç”ŸæˆåŸå§‹ä¿¡æ¯çš„ä¿¡æ¯æ‘˜è¦ï¼Œä¸¤è€…è¿›è¡Œå¯¹æ¯”ï¼Œå°±çŸ¥é“è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹äº†ã€‚</p>
<p>é€šè¿‡æ•°å­—ç­¾åçš„è¯ä¹¦éªŒè¯ï¼Œèƒ½æœ€å¤§ç¨‹åº¦çš„ä¿è¯æ•°æ®ä¼ è¾“å®‰å…¨ã€‚</p>
<h2>HTTPS å·¥ä½œæµç¨‹</h2>
<p>å‰é¢æåˆ°ï¼ŒHTTPS ä½¿ç”¨äº†æ··åˆåŠ å¯†è§£å†³å®‰å…¨ä¼ è¾“é—®é¢˜ï¼Œæ•´ä¸ªå·¥ä½œè¿‡ç¨‹åˆ†ä¸ºä¸‰å¤§æ­¥ï¼šè¯ä¹¦éªŒè¯ã€éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ã€‚</p>
<figure><img src="/assets/image/computer-science/networking/006/https-flow.png" alt="httpså·¥ä½œæµç¨‹" tabindex="0" loading="lazy"><figcaption>httpså·¥ä½œæµç¨‹</figcaption></figure>
<p><strong>è¯ä¹¦éªŒè¯ï¼š</strong></p>
<ol>
<li>Client å‘èµ·ä¸€ä¸ª HTTPS çš„è¯·æ±‚ï¼›</li>
<li>Server æŠŠäº‹å…ˆé…ç½®å¥½çš„å…¬é’¥è¯ä¹¦è¿”å›ç»™å®¢æˆ·ç«¯ï¼›</li>
<li>Client éªŒè¯å…¬é’¥è¯ä¹¦ï¼šå¦‚æœéªŒè¯é€šè¿‡åˆ™ç»§ç»­ï¼Œä¸é€šè¿‡åˆ™æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼›</li>
</ol>
<p><strong>éå¯¹ç§°åŠ å¯†ï¼š</strong></p>
<ol start="4">
<li>Client ç”ŸæˆåŠ å¯†æ‰€ä½¿ç”¨çš„ä¼šè¯å¯†é’¥ï¼Œç„¶åç”¨è¯ä¹¦çš„å…¬é’¥åŠ å¯†è¿™ä¸ªä¼šè¯å¯†é’¥ï¼Œå‘ç»™ Serverã€‚</li>
<li>Server ä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†è¿™ä¸ªæ¶ˆæ¯ï¼Œå¾—åˆ°ä¼šè¯å¯†é’¥ã€‚è‡³æ­¤ï¼ŒClient å’Œ Server åŒæ–¹éƒ½æŒæœ‰äº†ç›¸åŒçš„ä¼šè¯å¯†é’¥ã€‚</li>
</ol>
<p><strong>å¯¹ç§°åŠ å¯†ï¼š</strong></p>
<ol start="6">
<li>Server ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†â€œæ˜æ–‡å†…å®¹ Aâ€ï¼Œå‘é€ç»™ Clientã€‚</li>
<li>Client ä½¿ç”¨ä¼šè¯å¯†é’¥è§£å¯†å“åº”çš„å¯†æ–‡ï¼Œå¾—åˆ°â€œæ˜æ–‡å†…å®¹ Aâ€ã€‚</li>
<li>Client å†æ¬¡å‘èµ· HTTPS çš„è¯·æ±‚ï¼Œä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†è¯·æ±‚çš„â€œæ˜æ–‡å†…å®¹ Bâ€ï¼Œç„¶å Server ä½¿ç”¨ä¼šè¯å¯†é’¥è§£å¯†å¯†æ–‡ï¼Œå¾—åˆ°â€œæ˜æ–‡å†…å®¹ Bâ€ã€‚</li>
</ol>
<h2>å‚è€ƒé“¾æ¥</h2>
<p><a href="https://www.cnblogs.com/linianhui/p/security-based-toolbox.html" target="_blank" rel="noopener noreferrer">[ä¿¡æ¯å®‰å…¨] 1.å¯†ç å·¥å…·ç®± </a></p>
<p><a href="https://www.cnblogs.com/linianhui/p/security-complex-toolbox.html" target="_blank" rel="noopener noreferrer">[ä¿¡æ¯å®‰å…¨] 2.å¯†ç å·¥å…·ç®±ï¼ˆç»­ï¼‰</a></p>
<p><a href="https://www.cnblogs.com/linianhui/p/security-https-workflow.html" target="_blank" rel="noopener noreferrer">[ä¿¡æ¯å®‰å…¨] 3.HTTPS å·¥ä½œæµç¨‹</a></p>
<p><a href="https://segmentfault.com/a/1190000021494676" target="_blank" rel="noopener noreferrer">HTTPS è¯¦è§£ä¸€ï¼šé™„å¸¦æœ€ç²¾ç¾è¯¦å°½çš„ HTTPS åŸç†å›¾</a></p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-05-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">TCP ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/07-tcp-three-handshakes-and-four-waves.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/07-tcp-three-handshakes-and-four-waves.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>ä¼ è¾“å±‚æ§åˆ¶åè®®ï¼ˆTransmission Control Protocol, TCPï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<h2>ä¸‰æ¬¡æ¡æ‰‹</h2>
<p>ä¸‰æŠ¥æ–‡æ¡æ‰‹å…·ä½“è¿‡ç¨‹ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢ä¸‰ä¸ªæŠ¥æ–‡æ®µï¼‰ï¼š</p>
<figure><img src="/assets/image/computer-science/networking/007/three.png" alt="ä¸‰æ¬¡æ¡æ‰‹" tabindex="0" loading="lazy"><figcaption>ä¸‰æ¬¡æ¡æ‰‹</figcaption></figure>
<p><strong>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š</strong></p>]]></summary>
    <content type="html"><![CDATA[<p>ä¼ è¾“å±‚æ§åˆ¶åè®®ï¼ˆTransmission Control Protocol, TCPï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p>
<h2>ä¸‰æ¬¡æ¡æ‰‹</h2>
<p>ä¸‰æŠ¥æ–‡æ¡æ‰‹å…·ä½“è¿‡ç¨‹ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢ä¸‰ä¸ªæŠ¥æ–‡æ®µï¼‰ï¼š</p>
<figure><img src="/assets/image/computer-science/networking/007/three.png" alt="ä¸‰æ¬¡æ¡æ‰‹" tabindex="0" loading="lazy"><figcaption>ä¸‰æ¬¡æ¡æ‰‹</figcaption></figure>
<p><strong>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š</strong></p>
<p>èµ·åˆä¸¤ç«¯éƒ½å¤„äº <code>CLOSED</code> å…³é—­çŠ¶æ€ã€‚ä¸€å¼€å§‹ï¼ŒæœåŠ¡å™¨å°±è¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œè¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚</p>
<p>åœ¨æ‰“ç®—å»ºç«‹ TCP è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å°†åŒæ­¥è¯·æ±‚æ ‡å¿— <code>SYN=1</code> å’Œéšæœºåˆå§‹åºå· <code>seq=x</code> å‘é€ç»™æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯è¿›å…¥ <code>SYN-SENT</code> ï¼ˆåŒæ­¥å·²å‘é€ï¼‰çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ã€‚</p>
<p><strong>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š</strong></p>
<p>æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åŒ…åç”±åŒæ­¥ä½ <code>SYN=1</code> å¾—çŸ¥å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ã€‚</p>
<p>æœåŠ¡å™¨å‘é€åŒæ­¥è¯·æ±‚æ ‡å¿— <code>SYN=1</code>ã€ç¡®è®¤æ ‡å¿— <code>ACK=1</code>ã€éšæœºåˆå§‹åºå· <code>seq=y</code> ä»¥åŠç¡®è®¤å·å­—æ®µ <code>ack=x+1</code>ï¼Œå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¹¶è¿›å…¥ <code>SYN-RCVD</code> ï¼ˆåŒæ­¥å·²æ¥æ”¶ï¼‰çŠ¶æ€ã€‚</p>
<p><strong>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š</strong></p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ <code>ack</code> æ˜¯å¦ä¸º <code>x+1</code>ï¼Œ<code>ACK</code> æ˜¯å¦ä¸º <code>1</code>ï¼Œå¦‚æœæ­£ç¡®åˆ™å‘é€ç¡®è®¤æ ‡å¿— <code>ACK=1</code>ã€åºå· <code>seq=x+1</code> ä»¥åŠç¡®è®¤å· <code>ack=y+1</code>ï¼Œå¹¶è¿›å…¥è¿æ¥å·²å»ºç«‹çŠ¶æ€ <code>ESTABLISHED</code>ã€‚</p>
<p>æœåŠ¡å™¨æ”¶åˆ°æ¶ˆæ¯åï¼Œæ£€æŸ¥ <code>ack</code> æ˜¯å¦ä¸º <code>y+1</code>ï¼Œ<code>ACK</code> æ˜¯å¦ä¸º <code>1</code>ï¼Œå¦‚æœæˆåŠŸåˆ™å»ºç«‹è¿æ¥ã€‚ è¿›å…¥è¿æ¥å·²å»ºç«‹çŠ¶æ€ <code>ESTABLISHED</code>ã€‚</p>
<p><strong>èƒ½å¦é‡‡ç”¨ä¸¤æŠ¥æ–‡æ¡æ‰‹ï¼Ÿ</strong></p>
<p>å¦‚æœå®¢æˆ·ç«¯å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œä½†å› ç½‘ç»œå»¶è¿Ÿè€Œæœªæ”¶åˆ°ç¡®è®¤ï¼Œäºæ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°ç¡®è®¤ï¼Œç”±äºæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶å°±ä¼šå»ºç«‹è¿æ¥ï¼Œç­‰æ•°æ®ä¼ è¾“å®Œæ¯•åï¼Œé‡Šæ”¾è¿æ¥ã€‚</p>
<p>æ­¤æ—¶ç¬¬ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç»è¿‡ä¸€æ®µæ—¶é—´åˆ°è¾¾æœåŠ¡ç«¯ï¼Œäºæ˜¯æœåŠ¡ç«¯æ”¶åˆ°ç¡®è®¤ï¼Œç”±äºé‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶å°±å·²åŒæ„å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å¯¹æœåŠ¡ç«¯çš„ç¡®è®¤æŠ¥æ–‡å‘å‡ºå“åº”ï¼Œä¹Ÿä¸ç»§ç»­å‘é€æ•°æ®ï¼Œå¯¼è‡´è¿æ¥ä¸€ç›´å»ºç«‹ï¼Œæµªè´¹èµ„æºã€‚</p>
<h2>å››æ¬¡æŒ¥æ‰‹</h2>
<p>å››æŠ¥æ–‡æŒ¥æ‰‹æ¥é‡Šæ”¾è¿æ¥ï¼ˆç°äºŒè€…å‡å¤„äºè¿æ¥å·²å»ºç«‹çŠ¶æ€ï¼Œå‡è®¾å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­ TCP è¿æ¥ï¼‰ï¼š</p>
<figure><img src="/assets/image/computer-science/networking/007/four.png" alt="å››æ¬¡æŒ¥æ‰‹" tabindex="0" loading="lazy"><figcaption>å››æ¬¡æŒ¥æ‰‹</figcaption></figure>
<p><strong>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼š</strong></p>
<p>å®¢æˆ·ç«¯å‘é€ TCP è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå¹¶è¿›å…¥<strong>ç»ˆæ­¢ç­‰å¾… 1 çŠ¶æ€</strong>ã€‚</p>
<p>è¯¥æŠ¥æ–‡æ®µé¦–éƒ¨ç§çš„ç»ˆæ­¢ä½ FIN å’Œç¡®è®¤ä½ ACK éƒ½è®¾ç½®ä¸º 1 ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª TCP è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼ŒåŒæ—¶ä¹Ÿå¯¹ä¹‹å‰æ”¶åˆ°çš„æŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ã€‚</p>
<p>åºå· seq = uï¼Œå®ƒç­‰äºä¹‹å‰å®¢æˆ·ç«¯å·²ç»ä¼ é€è¿‡çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ  1 ã€‚ç¡®è®¤å· ack çš„å€¼è®¾ç½®ä¸º v ï¼Œå®ƒç­‰äº TCP å®¢æˆ·è¿›ç¨‹ä¹‹å‰å·²æ”¶åˆ°çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ  1 ã€‚</p>
<p><strong>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼š</strong></p>
<p>æœåŠ¡ç«¯æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œä¼šå‘é€ä¸€ä¸ªæ™®é€šçš„ TCP ç¡®è®¤æŠ¥æ–‡æ®µå¹¶è¿›å…¥<strong>å…³é—­ç­‰å¾…çŠ¶æ€</strong>ã€‚</p>
<p>è¯¥æŠ¥æ–‡æ®µé¦–éƒ¨ä¸­çš„ç¡®è®¤ä½ ACK è¢«è®¾ç½®ä¸º 1ï¼›seq è®¾ç½®ä¸º vï¼Œå®ƒç­‰äºæœåŠ¡ç«¯ä¹‹å‰å·²ä¼ é€è¿‡çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ  1 ã€‚ç¡®è®¤å· ack å­—æ®µçš„å€¼è¢«è®¾ç½®ä¸º u + 1ï¼Œè¿™æ˜¯å¯¹è¿æ¥é‡Šæ”¾æŠ¥æ–‡çš„ç¡®è®¤ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç»™æœåŠ¡ç«¯å‘é€ä¿¡æ¯æŠ¥æ–‡ï¼Œåªèƒ½æ¥æ”¶ã€‚ä½†æ˜¯æœåŠ¡ç«¯è¦æ˜¯è¿˜æœ‰ä¿¡æ¯è¦ä¼ ç»™å®¢æˆ·ç«¯ï¼Œä»èƒ½ä¼ é€ã€‚</p>
<p><strong>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼š</strong></p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µåå°±è¿›å…¥<strong>ç»ˆæ­¢ç­‰å¾… 2 çŠ¶æ€</strong>ï¼Œå½“æœåŠ¡å™¨æ•°æ®å‘é€å®Œæ¯•åï¼Œç»™å®¢æˆ·ç«¯å‘é€ TCP è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µå¹¶è¿›å…¥<strong>æœ€åç¡®è®¤çŠ¶æ€</strong>ã€‚</p>
<p>è¯¥æŠ¥æ–‡æ®µé¦–éƒ¨ä¸­çš„ç»ˆæ­¢ä½ FIN å’Œç¡®è®¤ä½ ACK çš„å€¼éƒ½è®¾ç½®ä¸º 1 ï¼Œseq = w ï¼Œack = u + 1 ã€‚</p>
<p><strong>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼š</strong></p>
<p>å®¢æˆ·ç«¯æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œéœ€è¦å‘æœåŠ¡ç«¯å‘é€ TCP ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå¹¶è¿›å…¥<strong>æ—¶é—´ç­‰å¾…çŠ¶æ€</strong>ã€‚</p>
<p>é¦–éƒ¨ä¸­çš„ç¡®è®¤ä½ ACK = 1 ï¼Œseq = u + 1 ï¼Œack = w + 1 ï¼Œè¿™æ˜¯å¯¹ TCP è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µçš„ç¡®è®¤ã€‚</p>
<p>æœåŠ¡ç«¯ æ”¶åˆ°è¯¥æŠ¥æ–‡åå°±è¿›å…¥<strong>å…³é—­çŠ¶æ€</strong>ï¼Œè€Œ å®¢æˆ·ç«¯ è¿˜è¦ç»è¿‡ 2MSL åæ‰èƒ½è¿›å…¥<strong>å…³é—­çŠ¶æ€</strong>ã€‚</p>
<blockquote>
<p>MSLï¼Œæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼Œä¸€èˆ¬ä¸º 2 åˆ†é’Ÿã€‚</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆæœ€åè¿˜è¦ç­‰å¾…ä¸¤ä¸ªæ—¶é—´å‘¨æœŸå‘¢ï¼Ÿ</strong></p>
<ul>
<li>å®¢æˆ·ç«¯çš„æœ€åä¸€ä¸ª ACK æŠ¥æ–‡åœ¨ä¼ è¾“çš„æ—¶å€™ä¸¢å¤±ï¼ŒæœåŠ¡å™¨å¹¶æ²¡æœ‰æ¥æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡ã€‚è¿™ä¸ªå€™æ—¶å€™æœåŠ¡å™¨å°±ä¼šè¶…æ—¶é‡ä¼ è¿™ä¸ª FIN æ¶ˆæ¯ï¼Œç„¶åå®¢æˆ·ç«¯å°±ä¼šé‡æ–°è¿”å›æœ€åä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œç­‰å¾…ä¸¤ä¸ªæ—¶é—´å‘¨æœŸï¼Œå®Œæˆå…³é—­ã€‚</li>
<li>å¦‚æœä¸ç­‰å¾…è¿™ä¸¤ä¸ªæ—¶é—´å‘¨æœŸï¼ŒæœåŠ¡å™¨é‡ä¼ çš„é‚£æ¡æ¶ˆæ¯å°±ä¸ä¼šæ”¶åˆ°ã€‚æœåŠ¡å™¨å°±å› ä¸ºæ¥æ”¶ä¸åˆ°å®¢æˆ·ç«¯çš„ä¿¡æ¯è€Œæ— æ³•æ­£å¸¸å…³é—­ã€‚</li>
</ul>
<h2>å‚è€ƒé“¾æ¥</h2>
<p><a href="https://www.bilibili.com/video/BV1c4411d7jb" target="_blank" rel="noopener noreferrer">è®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚</a></p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-05-06T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">TCP ä¸ UDP çš„åŒºåˆ«</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/08-tcp-udp.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/08-tcp-udp.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>TCP å’Œ UDP éƒ½æ˜¯ä¼ è¾“å±‚åè®®ï¼Œå±äº TCP/IP åè®®æ—ã€‚</p>
<h2>UDP</h2>
<p>ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUser Datagram Protocolï¼ŒUDPï¼‰ç”¨æ¥å¤„ç†æ•°æ®åŒ…ï¼Œæ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<p><strong>æ— è¿æ¥</strong></p>
<p>ä¸éœ€è¦åƒ TCP ä¸€æ ·è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥ï¼Œå¹¶ä¸”ä¹Ÿåªæ˜¯æ•°æ®æŠ¥æ–‡çš„æ¬è¿å·¥ï¼Œä¸ä¼šå¯¹æŠ¥æ–‡è¿›è¡Œä»»ä½•çš„åŠ å·¥å¤„ç†ã€‚</p>
<p><strong>å•æ’­ã€å¤šæ’­ã€å¹¿æ’­</strong></p>
<p>UDP æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€å¤šå¯¹ä¸€çš„ä¼ è¾“æ–¹å¼ã€‚</p>
<p><strong>é¢å‘æŠ¥æ–‡</strong></p>]]></summary>
    <content type="html"><![CDATA[<p>TCP å’Œ UDP éƒ½æ˜¯ä¼ è¾“å±‚åè®®ï¼Œå±äº TCP/IP åè®®æ—ã€‚</p>
<h2>UDP</h2>
<p>ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUser Datagram Protocolï¼ŒUDPï¼‰ç”¨æ¥å¤„ç†æ•°æ®åŒ…ï¼Œæ˜¯ä¸€ç§æ— è¿æ¥çš„åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<p><strong>æ— è¿æ¥</strong></p>
<p>ä¸éœ€è¦åƒ TCP ä¸€æ ·è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥ï¼Œå¹¶ä¸”ä¹Ÿåªæ˜¯æ•°æ®æŠ¥æ–‡çš„æ¬è¿å·¥ï¼Œä¸ä¼šå¯¹æŠ¥æ–‡è¿›è¡Œä»»ä½•çš„åŠ å·¥å¤„ç†ã€‚</p>
<p><strong>å•æ’­ã€å¤šæ’­ã€å¹¿æ’­</strong></p>
<p>UDP æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€å¤šå¯¹ä¸€çš„ä¼ è¾“æ–¹å¼ã€‚</p>
<p><strong>é¢å‘æŠ¥æ–‡</strong></p>
<p>åœ¨å‘é€ç«¯ï¼Œåº”ç”¨å±‚å°†æ•°æ®ä¼ é€’ç»™ä¼ è¾“å±‚ï¼ŒUDP åªä¼šç»™æ•°æ®å¢åŠ ä¸€ä¸ª UDP å¤´æ ‡è¯†è¿™æ˜¯ä¸€ä¸ª UDP åè®®æŠ¥æ–‡ï¼Œç„¶åå°±ä¼ ç»™ç½‘ç»œå±‚ï¼Œå¯¹åº”ç”¨å±‚äº¤ä»˜çš„æŠ¥æ–‡æ—¢ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œä¿ç•™æŠ¥æ–‡çš„è¾¹ç•Œï¼Œä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ã€‚</p>
<p>åœ¨æ¥æ”¶ç«¯ï¼Œç½‘ç»œå±‚å°† UDP æ•°æ®æŠ¥ä¼ è¾“ç»™ UDPï¼ŒUDP å»é™¤é¦–éƒ¨åå°±ä¼šå°†æ•°æ®åŸå°ä¸åŠ¨åœ°ä¼ é€’ç»™åº”ç”¨å±‚ï¼Œä¸€æ¬¡äº¤ä»˜ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ã€‚</p>
<p><strong>ä¸å¯é </strong></p>
<p>é¦–å…ˆä½“ç°åœ¨æ— è¿æ¥ä¸Šï¼Œé€šä¿¡åŒæ–¹æƒ³å‘å°±å‘ï¼Œå¿…ç„¶ä¸å¯é ã€‚æ²¡æœ‰åƒ TCP åšé‡ä¼ æœºåˆ¶ã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚</p>
<p><strong>å¤´éƒ¨å¼€é”€å°</strong></p>
<p>UDP å¤´éƒ¨åªæœ‰ 8 å­—èŠ‚ï¼Œç›¸æ¯” TCP 20 ä¸ªå­—èŠ‚å°‘å¾—å¤šï¼Œä¼ è¾“æ•°æ®æ—¶æ¯”è¾ƒé«˜æ•ˆã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯</strong></p>
<p>UDP åº”ç”¨äºæ•ˆç‡è¦æ±‚é«˜ï¼Œä½†å¯é æ€§è¦æ±‚ç›¸å¯¹è¾ƒä½çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼šå³æ—¶é€šè®¯ï¼Œé€Ÿåº¦è¦æ±‚é«˜ï¼Œä½†æ˜¯å¶å°”å‡ºç°æ–­ç»­ä¸æ˜¯å¤ªå¤§é—®é¢˜ï¼Œå®Œå…¨å¯ä»¥ä¸ä½¿ç”¨é‡ä¼ æœºåˆ¶ï¼Œåœºæ™¯æœ‰åœ¨çº¿è§†é¢‘ã€ç½‘ç»œè¯­éŸ³é€šè¯ã€å¹¿æ’­é€šä¿¡ç­‰ã€‚</p>
<h2>TCP</h2>
<p>ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTransmission Control Protocolï¼ŒTCPï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šè®¯åè®®ï¼Œå®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<p><strong>é¢å‘è¿æ¥</strong></p>
<p>åœ¨å‘é€å‰å¿…é¡»è¿›è¡Œ TCP ä¸‰æ¬¡æ¡æ‰‹åœ¨ä¸¤ç«¯å»ºç«‹è¿æ¥ã€‚</p>
<p><strong>ä»…æ”¯æŒå•æ’­ä¼ è¾“</strong></p>
<p>æ¯ä¸ª TCP åªèƒ½è¿›è¡Œä¸€å¯¹ä¸€ä¼ è¾“ï¼Œä¸æ”¯æŒå¤šæ’­å’Œå¹¿æ’­çš„å½¢å¼ã€‚</p>
<p><strong>é¢å‘å­—èŠ‚æµ</strong></p>
<p>TCP ä¸åƒ UDP é‚£æ ·ä¸€ä¸ªä¸€ä¸ªæŠ¥æ–‡ç‹¬ç«‹ä¼ è¾“ï¼Œè€Œæ˜¯åœ¨ä¸ä¿ç•™æŠ¥æ–‡è¾¹ç•Œçš„æƒ…å†µä¸‹ä»¥å­—èŠ‚æµæ–¹å¼è¿›è¡Œä¼ è¾“ã€‚</p>
<p><strong>å¯é ä¼ è¾“</strong></p>
<p>TCP ä¸ºäº†å®ç°å¯é ä¼ è¾“ï¼Œä½¿ç”¨äº†é‡ä¼ æœºåˆ¶ã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ã€‚</p>
<p><strong>å¤´éƒ¨å¼€é”€å¤§</strong></p>
<p>TCP å¤´éƒ¨æœ€å° 20 ä¸ªå­—èŠ‚ï¼Œæœ€å¤§ 60 ä¸ªå­—èŠ‚ï¼Œä¼ è¾“æ•ˆç‡æ…¢ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯</strong></p>
<p>TCP åº”ç”¨äºæ•ˆç‡è¦æ±‚ç›¸å¯¹ä½ï¼Œä½†å¯é æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼šæ–‡ä»¶ä¼ è¾“ã€é‚®ä»¶ä¼ è¾“ç­‰ã€‚</p>
<h2>åŒºåˆ«</h2>
<p>|              | UDP                   | TCP                                          |<br>
|</p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2022-05-06T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç™»é™†å¤±è´¥ HTTP çŠ¶æ€ç </title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/09-http-code-when-authorized-refused.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/09-http-code-when-authorized-refused.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<p>å¦‚æœç”¨æˆ·å°è¯•ç™»é™†ï¼Œä½†ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®ï¼Œåº”è¯¥è¿”å›ä»€ä¹ˆçŠ¶æ€ç ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜åœ¨ç¤¾åŒºä¸­æœ‰ä¸€å®šäº‰è®®ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>403 Forbidden</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>404 Not Found</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>400 Bad Request</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>401 Unauthorized</code>ã€‚</p>
<p><code>403 Forbidden</code> è¡¨ç¤ºæ‹’ç»è®¿é—®ï¼Œä½†æ˜¯è¯·æ±‚æ¥å£æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œå› æ­¤è¯¥çŠ¶æ€ç è‚¯å®šä¸æ­£ç¡®ã€‚</p>
<p><code>404 Not Found</code> è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œä½†æ˜¯è¯·æ±‚æ¥å£æ˜¯å­˜åœ¨çš„ï¼Œå› æ­¤è¯¥çŠ¶æ€ç ä¹Ÿä¸æ­£ç¡®ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>å¦‚æœç”¨æˆ·å°è¯•ç™»é™†ï¼Œä½†ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®ï¼Œåº”è¯¥è¿”å›ä»€ä¹ˆçŠ¶æ€ç ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜åœ¨ç¤¾åŒºä¸­æœ‰ä¸€å®šäº‰è®®ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>403 Forbidden</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>404 Not Found</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>400 Bad Request</code>ï¼Œæœ‰äº›äººè®¤ä¸ºåº”è¯¥è¿”å› <code>401 Unauthorized</code>ã€‚</p>
<p><code>403 Forbidden</code> è¡¨ç¤ºæ‹’ç»è®¿é—®ï¼Œä½†æ˜¯è¯·æ±‚æ¥å£æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œå› æ­¤è¯¥çŠ¶æ€ç è‚¯å®šä¸æ­£ç¡®ã€‚</p>
<p><code>404 Not Found</code> è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œä½†æ˜¯è¯·æ±‚æ¥å£æ˜¯å­˜åœ¨çš„ï¼Œå› æ­¤è¯¥çŠ¶æ€ç ä¹Ÿä¸æ­£ç¡®ã€‚</p>
<p><code>400 Bad Request</code> è¡¨ç¤ºè¯·æ±‚å‚æ•°é”™è¯¯ï¼Œä½†æ˜¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ ¼å¼ä¹Ÿæ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œå› æ­¤ä¹Ÿä¸åº”è¯¥ç”¨è¯¥çŠ¶æ€ç ã€‚</p>
<p>è€Œæ ¹æ® <a href="https://stackoverflow.com/questions/32752578/whats-the-appropriate-http-status-code-to-return-if-a-user-tries-logging-in-wit" target="_blank" rel="noopener noreferrer">What's the appropriate HTTP status code to return if a user tries logging in with an incorrect username / password, but correct format?</a> è®¨è®ºï¼Œåº”è¯¥è¿”å› <code>401 Unauthorized</code>ã€‚</p>
<p>æ ¹æ® <a href="https://www.rfc-editor.org/rfc/rfc7235#section-3.1" target="_blank" rel="noopener noreferrer">RFC7235</a>ï¼šå¦‚æœè¯·æ±‚ä¸­åŒ…å«èº«ä»½éªŒè¯å‡­æ®ï¼Œåˆ™ <code>401</code> å“åº”è¡¨ç¤ºæ‹’ç»å¯¹è¿™äº›å‡­æ®è¿›è¡Œæˆæƒã€‚</p>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2024-07-10T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">401 å’Œ 403 çŠ¶æ€ç </title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/networking/10-401-403.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/networking/10-401-403.html"/>
    <updated>2025-02-11T08:02:34.000Z</updated>
    <summary type="html"><![CDATA[<h2>401 Unauthorizedï¼ˆæœªæˆæƒï¼‰</h2>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºéœ€è¦èº«ä»½éªŒè¯ï¼Œä½†èº«ä»½éªŒè¯å¤±è´¥æˆ–æœªæä¾›æ­£ç¡®çš„è®¤è¯ä¿¡æ¯ã€‚</li>
<li><strong>è§¦å‘æƒ…å†µ</strong>ï¼šå½“æœåŠ¡å™¨è¦æ±‚ç”¨æˆ·æä¾›å‡­æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ï¼Œä½†ç”¨æˆ·æœªæä¾›å‡­æ®ï¼Œæˆ–æä¾›çš„å‡­æ®æ— æ•ˆæ—¶ï¼ŒæœåŠ¡å™¨è¿”å› 401ã€‚</li>
<li><strong>å¤„ç†æ–¹å¼</strong>ï¼š
<ul>
<li>å®¢æˆ·ç«¯åº”è¯¥æä¾›æœ‰æ•ˆçš„å‡­æ®ï¼Œå¦‚ç™»å½•ä¿¡æ¯ã€API å¯†é’¥æˆ– tokenã€‚</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”ä¸­åŒ…å«ä¸€ä¸ª <code>WWW-Authenticate</code> å¤´ï¼Œæç¤ºå®¢æˆ·ç«¯åº”è¯¥å¦‚ä½•æä¾›å‡­è¯ã€‚</li>
</ul>
</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<h2>401 Unauthorizedï¼ˆæœªæˆæƒï¼‰</h2>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºéœ€è¦èº«ä»½éªŒè¯ï¼Œä½†èº«ä»½éªŒè¯å¤±è´¥æˆ–æœªæä¾›æ­£ç¡®çš„è®¤è¯ä¿¡æ¯ã€‚</li>
<li><strong>è§¦å‘æƒ…å†µ</strong>ï¼šå½“æœåŠ¡å™¨è¦æ±‚ç”¨æˆ·æä¾›å‡­æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ï¼Œä½†ç”¨æˆ·æœªæä¾›å‡­æ®ï¼Œæˆ–æä¾›çš„å‡­æ®æ— æ•ˆæ—¶ï¼ŒæœåŠ¡å™¨è¿”å› 401ã€‚</li>
<li><strong>å¤„ç†æ–¹å¼</strong>ï¼š
<ul>
<li>å®¢æˆ·ç«¯åº”è¯¥æä¾›æœ‰æ•ˆçš„å‡­æ®ï¼Œå¦‚ç™»å½•ä¿¡æ¯ã€API å¯†é’¥æˆ– tokenã€‚</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”ä¸­åŒ…å«ä¸€ä¸ª <code>WWW-Authenticate</code> å¤´ï¼Œæç¤ºå®¢æˆ·ç«¯åº”è¯¥å¦‚ä½•æä¾›å‡­è¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è®¿é—®ä¸€ä¸ªéœ€è¦ç™»å½•æ‰èƒ½æŸ¥çœ‹çš„é¡µé¢ï¼Œä½†æ²¡æœ‰ç™»å½•æˆ–ç™»å½•ä¿¡æ¯æ— æ•ˆã€‚</li>
<li>API è¯·æ±‚ç¼ºå°‘è®¤è¯ä¿¡æ¯ï¼ˆå¦‚ç¼ºå°‘ Authorization Header æˆ– token é”™è¯¯ï¼‰ã€‚</li>
</ul>
]]></content>
    <category term="è®¡ç®—æœºç½‘ç»œ"/>
    <published>2025-02-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ä» React Native åˆ° Expoï¼šå¿«é€Ÿå®ç°è·¨å¹³å°å¼€å‘</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/expo/</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/expo/"/>
    <updated>2025-01-24T09:10:50.000Z</updated>
    <summary type="html"><![CDATA[<p>éšç€ç§»åŠ¨å¼€å‘çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ï¼Œè·¨å¹³å°å¼€å‘æ¡†æ¶æˆä¸ºå¼€å‘è€…çš„é¦–é€‰ã€‚å…¶ä¸­ï¼Œ<a href="https://reactnative.dev/" target="_blank" rel="noopener noreferrer">React Native</a> å’Œ <a href="https://expo.dev/" target="_blank" rel="noopener noreferrer">Expo</a> æ˜¯ä¸¤ç§å¤‡å—å…³æ³¨çš„æŠ€æœ¯è·¯çº¿ã€‚è¿™ç¯‡æ–‡ç« å°†ä» React Native çš„åŸºç¡€å‡ºå‘ï¼Œæ¢è®¨ Expo çš„ä¼˜åŠ¿ï¼Œå¹¶ä»‹ç»å¦‚ä½•æ­å»º Expo é¡¹ç›®ã€CI/CD æµç¨‹åŠå¼€å‘ä½“éªŒã€‚</p>
<hr>]]></summary>
    <content type="html"><![CDATA[<p>éšç€ç§»åŠ¨å¼€å‘çš„éœ€æ±‚æ—¥ç›Šå¢é•¿ï¼Œè·¨å¹³å°å¼€å‘æ¡†æ¶æˆä¸ºå¼€å‘è€…çš„é¦–é€‰ã€‚å…¶ä¸­ï¼Œ<a href="https://reactnative.dev/" target="_blank" rel="noopener noreferrer">React Native</a> å’Œ <a href="https://expo.dev/" target="_blank" rel="noopener noreferrer">Expo</a> æ˜¯ä¸¤ç§å¤‡å—å…³æ³¨çš„æŠ€æœ¯è·¯çº¿ã€‚è¿™ç¯‡æ–‡ç« å°†ä» React Native çš„åŸºç¡€å‡ºå‘ï¼Œæ¢è®¨ Expo çš„ä¼˜åŠ¿ï¼Œå¹¶ä»‹ç»å¦‚ä½•æ­å»º Expo é¡¹ç›®ã€CI/CD æµç¨‹åŠå¼€å‘ä½“éªŒã€‚</p>
]]></content>
    <category term="expo"/>
    <published>2025-01-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">2024 å‰ç«¯ç”Ÿæ€æŠ¥å‘Š</title>
    <id>https://dribble-njr.github.io/blog/blog/news/2024/W52/state-of-fe-2024.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/news/2024/W52/state-of-fe-2024.html"/>
    <updated>2024-12-31T10:49:31.000Z</updated>
    <summary type="html"><![CDATA[<p>æœ€è¿‘ï¼Œ<a href="http://tsh.io" target="_blank" rel="noopener noreferrer">tsh.io</a> å‘å¸ƒäº†ä¸€ä»½å…³äº 2024 å¹´ <a href="https://tsh.io/state-of-frontend/" target="_blank" rel="noopener noreferrer">å‰ç«¯ç”Ÿæ€çš„æŠ¥å‘Š</a>ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›æœ‰è¶£çš„æ•°æ®å’Œè¶‹åŠ¿ã€‚</p>
<h2>æ¡†æ¶</h2>
<h3>å‰ç«¯æ¡†æ¶</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241230124159.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¡†æ¶" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¡†æ¶</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<p>æœ€è¿‘ï¼Œ<a href="http://tsh.io" target="_blank" rel="noopener noreferrer">tsh.io</a> å‘å¸ƒäº†ä¸€ä»½å…³äº 2024 å¹´ <a href="https://tsh.io/state-of-frontend/" target="_blank" rel="noopener noreferrer">å‰ç«¯ç”Ÿæ€çš„æŠ¥å‘Š</a>ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›æœ‰è¶£çš„æ•°æ®å’Œè¶‹åŠ¿ã€‚</p>
<h2>æ¡†æ¶</h2>
<h3>å‰ç«¯æ¡†æ¶</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241230124159.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¡†æ¶" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¡†æ¶</figcaption></figure>
<ol>
<li>React å’Œ Vue.js åœ¨ä½¿ç”¨ç‡å’Œå–œçˆ±åº¦ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä»æ˜¯å¸‚åœºçš„ä¸»æµé€‰æ‹©ã€‚</li>
<li>Svelte å’Œ HTMX å±•ç°å‡ºå¾ˆé«˜çš„å­¦ä¹ å…´è¶£ï¼Œå¯èƒ½åœ¨æœªæ¥æˆä¸ºæ›´åŠ æµè¡Œçš„é€‰æ‹©ã€‚</li>
<li>Angular ç³»åˆ— è™½ç„¶ä»æœ‰ç¨³å®šçš„ç”¨æˆ·åŸºç¡€ï¼Œä½†å­¦ä¹ å…´è¶£è¾ƒä½ã€‚</li>
<li>æ–°å…´æ¡†æ¶ï¼ˆå¦‚ Qwikã€Litï¼‰æ˜¾ç¤ºäº†æ½œåœ¨çš„å¢é•¿ç©ºé—´ï¼Œä½†éœ€è¦æ›´å¤šçš„æ¨å¹¿å’Œç”Ÿæ€å®Œå–„ã€‚</li>
<li>è¾¹ç¼˜åŒ–æ¡†æ¶ï¼ˆå¦‚ Emberã€Phoenixï¼‰ç”¨æˆ·åŸºç¡€è–„å¼±ï¼Œæœªæ¥å¯èƒ½é€æ¸é€€å‡ºä¸»æµå¸‚åœºã€‚</li>
</ol>
<h3>æ¸²æŸ“æ¡†æ¶</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241230124811.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¸²æŸ“æ¡†æ¶" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ¸²æŸ“æ¡†æ¶</figcaption></figure>
<ol>
<li>Next.js ä¾ç„¶æ˜¯å‰ç«¯å¼€å‘çš„é¦–é€‰å·¥å…·ï¼Œæ‹¥æœ‰æé«˜çš„ç”¨æˆ·æ»¡æ„åº¦å’Œå¸‚åœºæ¥å—åº¦ã€‚</li>
<li>Astro å’Œ SvelteKit çš„å­¦ä¹ æ„å‘å¾ˆé«˜ï¼Œç‰¹åˆ«æ˜¯ SvelteKitï¼Œæœªæ¥å¯èƒ½æˆä¸ºæ–°å…´çƒ­ç‚¹ã€‚</li>
<li>Nuxt åœ¨ Vue.js ç”Ÿæ€ä¸­è¡¨ç°ç¨³å®šï¼Œä½†åœ¨æ•´ä½“å¸‚åœºä¸Šå­¦ä¹ æ„å‘ç¨é€Šäº SvelteKit å’Œ Astroã€‚</li>
<li>Remix è™½ç„¶ç”¨æˆ·ç¾¤è¾ƒå°ï¼Œä½†å­¦ä¹ æ„å‘è¡¨æ˜å…¶æ½œåœ¨å‘å±•å‰æ™¯å¹¿é˜”ã€‚</li>
<li>Gatsby çš„çƒ­åº¦å’Œæ»¡æ„åº¦æ˜æ˜¾ä¸‹é™ï¼Œå¯èƒ½éš¾ä»¥ä¿æŒå¸‚åœºç«äº‰åŠ›ã€‚</li>
<li>Docusaurus çš„å…³æ³¨åº¦è¾ƒä½ï¼Œä½†åœ¨ç‰¹å®šé¢†åŸŸï¼ˆæ–‡æ¡£ç”Ÿæˆï¼‰ä»æœ‰ä¸€å¸­ä¹‹åœ°ã€‚</li>
</ol>
<h2>åº“</h2>
<h3>éªŒè¯åº“</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241230125532.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„éªŒè¯åº“" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„éªŒè¯åº“</figcaption></figure>
<ol>
<li>Zod æ˜¯å½“å‰æœ€å—æ¬¢è¿çš„å·¥å…·ï¼Œä½¿ç”¨ç‡é«˜ï¼Œè¯„ä»·å¥½ï¼Œå¹¶ä¸”å¯¹æœªæ¥ç”¨æˆ·æœ‰è¾ƒå¤§å¸å¼•åŠ›ã€‚</li>
<li>ä¼ ç»Ÿå·¥å…·å¦‚ Joi å’Œ Yup ä¾ç„¶æœ‰ä¸€å®šçš„ç”¨æˆ·åŸºç¡€ï¼Œä½† Yup åœ¨å­¦ä¹ æ„å‘ä¸Šè¡¨ç°æ›´å¼ºã€‚</li>
<li>æ–°å…´å·¥å…·å¦‚ Valibot å¼€å§‹å—åˆ°å…³æ³¨ï¼Œä½†ç›®å‰å½±å“åŠ›æœ‰é™ã€‚</li>
<li>ç‰¹å®šç”Ÿæ€çš„å·¥å…·å¦‚ Ajv å’Œ class-validator ä¸»è¦ç”¨äºç‰¹æ®Šåœºæ™¯ï¼Œä½¿ç”¨èŒƒå›´è¾ƒå°ã€‚</li>
</ol>
<h3>æ—¥æœŸç®¡ç†åº“</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231172109.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ—¥æœŸç®¡ç†åº“" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ—¥æœŸç®¡ç†åº“</figcaption></figure>
<p>æ€»ç»“</p>
<ol>
<li>æœ€å—æ¬¢è¿ï¼šdate-fns æ˜¯å½“å‰çš„ä¸»æµé€‰æ‹©ï¼Œå…¶åŠŸèƒ½å…¨é¢ä¸”æ¨¡å—åŒ–è®¾è®¡æ·±å—å¼€å‘è€…å–œçˆ±ã€‚</li>
<li>Moment çš„ä½™çƒ­ï¼šå°½ç®¡å®˜æ–¹ä¸å†æ¨èï¼Œä½† Moment ä¾ç„¶æœ‰å¹¿æ³›çš„ç”¨æˆ·åŸºç¡€ï¼Œä½†å…¶è´Ÿé¢è¯„ä»·ä¹Ÿè¾ƒå¤šã€‚</li>
<li>è½»é‡æ›¿ä»£å“ï¼šDay.js æä¾›äº†ç±»ä¼¼ Moment çš„ APIï¼ŒåŒæ—¶æ›´åŠ è½»é‡ï¼Œé€æ¸å—åˆ°å¼€å‘è€…é’çã€‚</li>
<li>æ–°å…´å·¥å…·ï¼šLuxon åŠŸèƒ½å¼ºå¤§ï¼Œå­¦ä¹ æ„æ„¿é«˜ï¼Œä½†ç›®å‰å°šæœªè¢«å¹¿æ³›é‡‡ç”¨ã€‚</li>
<li>å…³æ³¨åº¦è¾ƒä½çš„å·¥å…·ï¼šDate.js å’Œ Luxon åœ¨æ— æ„è§æ¯”ä¾‹ä¸Šæ’åé å‰ï¼Œè¯´æ˜å®ƒä»¬çš„å¸‚åœºå½±å“åŠ›è¾ƒä½ã€‚</li>
</ol>
<p>å»ºè®®ï¼š</p>
<ol>
<li>å¦‚æœé¡¹ç›®éœ€è¦æ¨¡å—åŒ–å’Œé«˜æ€§èƒ½ï¼Œå¯ä»¥é€‰æ‹© date-fnsã€‚</li>
<li>å¦‚æœå€¾å‘äºè½»é‡çº§è§£å†³æ–¹æ¡ˆï¼ŒDay.js æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</li>
<li>å¯¹äºéœ€è¦å¤„ç†å¤æ‚å›½é™…åŒ–æˆ–æ—¶åŒºåŠŸèƒ½çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘å­¦ä¹  Luxonã€‚</li>
</ol>
<h3>çŠ¶æ€ç®¡ç†åº“</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231172832.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„çŠ¶æ€ç®¡ç†åº“" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„çŠ¶æ€ç®¡ç†åº“</figcaption></figure>
<ol>
<li>æµè¡Œè¶‹åŠ¿ï¼šReact Context API æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„ç®€å•çŠ¶æ€ç®¡ç†å·¥å…·ï¼ŒRedux Toolkit å’Œ Zustand æ˜¯å¤æ‚åœºæ™¯ä¸­æ›´ç°ä»£åŒ–çš„é€‰æ‹©ã€‚</li>
<li>å·¥å…·å®šä½ï¼š
<ul>
<li>Redux å’Œ Redux Toolkit é€‚åˆå¤æ‚åœºæ™¯ï¼Œä½† Toolkit æ›´é€‚åˆç°ä»£å¼€å‘ã€‚</li>
<li>React Context API å’Œ Zustand æ˜¯è½»é‡åœºæ™¯çš„çƒ­é—¨é€‰æ‹©ã€‚</li>
<li>Vue ç¤¾åŒºç”¨æˆ·å€¾å‘äº Piniaã€‚</li>
</ul>
</li>
<li>æ–°å…´å·¥å…·ï¼šZustand å’Œ Jotai ç­‰è½»é‡çº§åº“è¶Šæ¥è¶Šå—åˆ°å…³æ³¨ï¼Œä½† Jotai ç›®å‰çš„ç¤¾åŒºå½±å“åŠ›è¾ƒå¼±ã€‚</li>
</ol>
<h3>å·¥å…·åº“</h3>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231173312.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„å…¶ä»–å·¥å…·åº“" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„å…¶ä»–å·¥å…·åº“</figcaption></figure>
<ol>
<li>æµè¡Œå·¥å…·ï¼šLodash æ˜¯æœ€å—æ¬¢è¿çš„å·¥å…·åº“ï¼ŒåŠŸèƒ½ä¸°å¯Œä¸”åº”ç”¨åœºæ™¯å¹¿æ³›ã€‚</li>
<li>è¿‡æ—¶å·¥å…·ï¼šjQuery å’Œ Underscore çš„ä½¿ç”¨ç‡ä¸‹é™ï¼Œæ›´å¤šç”¨æˆ·è½¬å‘ç°ä»£å·¥å…·ã€‚</li>
<li>æ–°å…´å·¥å…·ï¼šImmer å’Œ Ramda çš„ç”¨æˆ·ç¾¤ä½“è¾ƒå°ï¼Œä½†å¯¹ç‰¹å®šéœ€æ±‚çš„å¼€å‘è€…å¯èƒ½æœ‰å¸å¼•åŠ›ã€‚</li>
<li>ç‰¹å®šé¢†åŸŸå·¥å…·ï¼šRxJS åœ¨å“åº”å¼ç¼–ç¨‹ä¸­æœ‰è¾ƒé«˜è®¤å¯åº¦ï¼Œä½†å­¦ä¹ æ›²çº¿é™åˆ¶äº†å®ƒçš„æ™®åŠã€‚</li>
</ol>
<h2>æ•°æ®è¯·æ±‚åº“</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231174531.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ•°æ®è¯·æ±‚åº“" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ•°æ®è¯·æ±‚åº“</figcaption></figure>
<ol>
<li>ä¸»æµå·¥å…·ï¼šAxios å’Œ Native Fetch æ˜¯æœ€å—æ¬¢è¿çš„å·¥å…·ï¼Œåˆ†åˆ«å æ®äº† 73.6% å’Œ 72.4% çš„ã€ŒUsed and likedã€ã€‚</li>
<li>æ–°å…´è¶‹åŠ¿ï¼štRPC å’Œ TanStack Query é€æ¸å—åˆ°å…³æ³¨ï¼Œå°¤å…¶æ˜¯ tRPC çš„æœªæ¥å­¦ä¹ å…´è¶£é«˜è¾¾ 29.8%ã€‚</li>
<li>å°ä¼—å·¥å…·ï¼šky å’Œ ApolloClient è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨ç”¨æˆ·ä¸­çš„ä½¿ç”¨ç‡è¾ƒä½ã€‚</li>
<li>æœ‰æ½œåŠ›çš„å·¥å…·ï¼šSWR å’Œ TanStack Query åœ¨ React ç”Ÿæ€ä¸­æœ‰è¾ƒå¤§æ½œåŠ›ã€‚</li>
</ol>
<h2>æ‰˜ç®¡å¹³å°</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231174959.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ‰˜ç®¡å¹³å°" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ‰˜ç®¡å¹³å°</figcaption></figure>
<p>Vercel, AWS andâ€¦ Netlify æ˜¯ç›®å‰æœ€å—æ¬¢è¿çš„äº‘æ‰˜ç®¡å¹³å°ã€‚ä¹Ÿæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äººä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨ã€‚</p>
<h2>CIï¼ˆæŒç»­é›†æˆï¼‰</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231175544.png" alt="æ˜¯å¦ä½¿ç”¨ CI å·¥å…·" tabindex="0" loading="lazy"><figcaption>æ˜¯å¦ä½¿ç”¨ CI å·¥å…·</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231175156.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ CI å·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ CI å·¥å…·</figcaption></figure>
<p>å¯¹äºç‹¬ç«‹å¼€å‘è€…æ¥è¯´ï¼Œä½¿ç”¨ GitHub Actions æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<p>è‹¥æƒ³è¦ç‹¬ç«‹çš„ CI/CD å¹³å°ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ Jenkins æˆ–è€… GitLab CI æä¾›çš„è‡ªæ‰˜ç®¡æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h2>å¾®å‰ç«¯</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231175653.png" alt="æ˜¯å¦ä½¿ç”¨å¾®å‰ç«¯" tabindex="0" loading="lazy"><figcaption>æ˜¯å¦ä½¿ç”¨å¾®å‰ç«¯</figcaption></figure>
<p>é‡‡ç”¨ç‡ä» 2022 å¹´æŠ¥å‘Šä½¿ç”¨å¾®å‰ç«¯çš„å—è®¿è€…ä¸­ 75.4% æ˜¾è‘—ä¸‹é™è‡³ 2024 å¹´çš„ 23.6%ã€‚è¿™ä¸€æ€¥å‰§ä¸‹é™è¡¨æ˜è¡Œä¸šåœ¨å‰ç«¯æ¶æ„æ–¹é¢çš„è½¬å˜ã€‚</p>
<p>è®¸å¤šäººæ„è¯†åˆ°å¾®å‰ç«¯ä¸ä»…éœ€è¦æŠ€æœ¯çŸ¥è¯†ï¼Œè¿˜éœ€è¦ç»„ç»‡å’Œæ–‡åŒ–çš„å˜é©ï¼Œè€Œä»–ä»¬å¹¶æœªåšå¥½å‡†å¤‡ã€‚å¦ä¸€ä¸ªå…³é”®å› ç´ æ˜¯å¯¹æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰å’Œé™æ€ç½‘ç«™ç”Ÿæˆï¼ˆSSGï¼‰æ¶æ„çš„æŠ•èµ„ä¸æ–­å¢åŠ ï¼Œè¿™äº›æ¶æ„åŒ…å«ç±»ä¼¼çš„æ¦‚å¿µã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231175714.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆ" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆ</figcaption></figure>
<ol>
<li>ä¸»æµå·¥å…·ï¼šWebpack 5 Module Federation å’Œ Single SPA æ˜¯å¾®å‰ç«¯é¢†åŸŸçš„ä¸¤å¤§ä¸»æµè§£å†³æ–¹æ¡ˆï¼Œåˆ†åˆ«å æ®äº† 51.8% å’Œ 35.5% çš„æ¯”ä¾‹ã€‚</li>
<li>æ¬¡ä¸»æµå·¥å…·ï¼šOpen Componentsã€SystemJS å’Œ Bit åœ¨ç‰¹å®šåœºæ™¯ä¸‹æœ‰ä¸€å®šç”¨æˆ·åŸºç¡€ï¼Œä½†å¸‚åœºå æ¯”æ˜æ˜¾ä½äºå‰ä¸¤è€…ã€‚</li>
<li>å°ä¼—å·¥å…·ï¼šQiankunã€Luigi å’Œ Piral ç­‰å·¥å…·çš„ä½¿ç”¨æ¯”ä¾‹è¾ƒä½ï¼Œä½†åœ¨ç‰¹å®šç¤¾åŒºå’Œåº”ç”¨åœºæ™¯ä¸­ä»æœ‰ä»·å€¼ã€‚</li>
<li>åˆ›æ–°ç©ºé—´ï¼š"Other" ç±»åˆ«æ˜¾ç¤ºäº†å¼€å‘è€…åœ¨å¾®å‰ç«¯é¢†åŸŸçš„å¤šæ ·åŒ–å°è¯•ï¼Œå¯èƒ½åŒ…æ‹¬å®šåˆ¶è§£å†³æ–¹æ¡ˆæˆ–å°šæœªæ™®åŠçš„æ–°å·¥å…·ã€‚</li>
</ol>
<h2>åŒ…ç®¡ç†å™¨</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231180850.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨</figcaption></figure>
<h2>JavaScript è¿è¡Œæ—¶</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231181012.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ JavaScript è¿è¡Œæ—¶" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ JavaScript è¿è¡Œæ—¶</figcaption></figure>
<p>Node: ç¨³å®šã€ç”Ÿæ€ä¸°å¯Œã€ç¤¾åŒºæ´»è·ƒã€‚</p>
<p>ç„¶è€Œï¼Œå…¶ä»– JavaScript è¿è¡Œæ—¶ï¼Œå¦‚ Bunï¼ˆ10%ï¼‰å’Œ Denoï¼ˆ2.6%ï¼‰ï¼Œå¼€å§‹å¼€è¾Ÿè‡ªå·±çš„å¸‚åœºã€‚</p>
<p>Bun ä½œä¸ºé¢†å…ˆæ›¿ä»£å“çš„åœ°ä½å€¼å¾—æ³¨æ„ã€‚å®ƒä¸“æ³¨äºå…¶æƒŠäººçš„é€Ÿåº¦å’Œå‡ ä¹å®Œå…¨çš„ Node.js å…¼å®¹æ€§ï¼Œå°½ç®¡è¿˜æœªè¾¾åˆ° 100%ã€‚Bun è¿˜å¼•å…¥äº†å†…ç½®åŒ…ç®¡ç†å™¨ã€åŸç”Ÿ TypeScript å’Œ JSX æ”¯æŒä»¥åŠç‹¬ç‰¹çš„ APIã€‚</p>
<p>Deno ç”± Ryan Dahlï¼ˆNode.js çš„åŸå§‹å¼€å‘è€…ï¼‰åˆ›å»ºï¼Œèµ°ä¸Šäº†ä¸ Bun ç±»ä¼¼çš„é“è·¯ã€‚å°½ç®¡å…¶æœ€åˆé€šè¿‡ URL å¯¼å…¥ä¾èµ–é¡¹çš„æ–¹æ³•å¯èƒ½å‡ç¼“äº†é‡‡ç”¨é€Ÿåº¦ï¼Œä½† Deno æ¨å‡ºå…¶åŒ…æ³¨å†Œè¡¨ JSRï¼ˆnpm çš„æ›¿ä»£å“ï¼‰æ ‡å¿—ç€æˆ˜ç•¥è½¬å˜ã€‚éšç€ Deno2 çš„åˆ°æ¥ï¼Œè§‚å¯Ÿå®ƒå¦‚ä½•å‘å±•ä»¥åŠç¤¾åŒºçš„ååº”å°†ä¼šå¾ˆæœ‰è¶£ã€‚</p>
<h2>TypeScript</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231182827.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ç±»å‹å·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ç±»å‹å·¥å…·</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231182909.png" alt="2024 ä¸ 2022 å¹´ç›¸æ¯”æ›´å¤šäººä½¿ç”¨ TypeScript" tabindex="0" loading="lazy"><figcaption>2024 ä¸ 2022 å¹´ç›¸æ¯”æ›´å¤šäººä½¿ç”¨ TypeScript</figcaption></figure>
<h2>æµè§ˆå™¨æŠ€æœ¯</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183301.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æµè§ˆå™¨æŠ€æœ¯" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æµè§ˆå™¨æŠ€æœ¯</figcaption></figure>
<h2>PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183531.png" alt="æ˜¯å¦ä½¿ç”¨ PWA" tabindex="0" loading="lazy"><figcaption>æ˜¯å¦ä½¿ç”¨ PWA</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183453.png" alt="PWA çš„æœªæ¥" tabindex="0" loading="lazy"><figcaption>PWA çš„æœªæ¥</figcaption></figure>
<h2>è®¾è®¡ç³»ç»Ÿ</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183550.png" alt="æœ€å–œæ¬¢çš„è®¾è®¡ç³»ç»Ÿæ’å" tabindex="0" loading="lazy"><figcaption>æœ€å–œæ¬¢çš„è®¾è®¡ç³»ç»Ÿæ’å</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183659.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„è®¾è®¡äº¤æ¥å·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„è®¾è®¡äº¤æ¥å·¥å…·</figcaption></figure>
<h2>Style å·¥å…·</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183814.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ Style å·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„ Style å·¥å…·</figcaption></figure>
<h2>æµ‹è¯•</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231183955.png" alt="å›¢é˜Ÿä¸­è°è´Ÿè´£æµ‹è¯•" tabindex="0" loading="lazy"><figcaption>å›¢é˜Ÿä¸­è°è´Ÿè´£æµ‹è¯•</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184037.png" alt="è½¯ä»¶æµ‹è¯•ç±»å‹" tabindex="0" loading="lazy"><figcaption>è½¯ä»¶æµ‹è¯•ç±»å‹</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184104.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æµ‹è¯•å·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æµ‹è¯•å·¥å…·</figcaption></figure>
<h2>ä»£ç ç®¡ç†</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184146.png" alt="æœ€å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨" tabindex="0" loading="lazy"><figcaption>æœ€å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184208.png" alt="æœ€å–œæ¬¢çš„æµè§ˆå™¨ä»£ç ç¼–è¾‘å™¨" tabindex="0" loading="lazy"><figcaption>æœ€å–œæ¬¢çš„æµè§ˆå™¨ä»£ç ç¼–è¾‘å™¨</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184301.png" alt="ç‰ˆæœ¬æ§åˆ¶" tabindex="0" loading="lazy"><figcaption>ç‰ˆæœ¬æ§åˆ¶</figcaption></figure>
<h2>ä½ä»£ç /æ— ä»£ç </h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184344.png" alt="low-code å¹³å°" tabindex="0" loading="lazy"><figcaption>low-code å¹³å°</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184409.png" alt="no-code å¹³å°" tabindex="0" loading="lazy"><figcaption>no-code å¹³å°</figcaption></figure>
<h2>æ„å»ºå·¥å…·</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184501.png" alt="è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ„å»ºå·¥å…·" tabindex="0" loading="lazy"><figcaption>è¿‡å»ä¸€å¹´ä½¿ç”¨çš„æ„å»ºå·¥å…·</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184537.png" alt="lint å·¥å…·" tabindex="0" loading="lazy"><figcaption>lint å·¥å…·</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184607.png" alt="ç½‘é¡µæ„å»ºå·¥å…·" tabindex="0" loading="lazy"><figcaption>ç½‘é¡µæ„å»ºå·¥å…·</figcaption></figure>
<h2>æ“ä½œç³»ç»Ÿ</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184634.png" alt="æ“ä½œç³»ç»Ÿ" tabindex="0" loading="lazy"><figcaption>æ“ä½œç³»ç»Ÿ</figcaption></figure>
<h2>AI å·¥å…·</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184727.png" alt="AI å·¥å…·" tabindex="0" loading="lazy"><figcaption>AI å·¥å…·</figcaption></figure>
<h2>æœªæ¥è¶‹åŠ¿</h2>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241231184836.png" alt="æœªæ¥è¶‹åŠ¿" tabindex="0" loading="lazy"><figcaption>æœªæ¥è¶‹åŠ¿</figcaption></figure>
]]></content>
    <category term="news"/>
    <published>2024-12-29T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Prisma</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/node/prisma/</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/node/prisma/"/>
    <updated>2024-12-23T03:21:07.000Z</updated>
    <summary type="html"><![CDATA[<p>Prisma ORM æ˜¯ä¸€å¥—ç”¨äºä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„ä¸‹ä¸€ä»£ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒObject-Relational Mappingï¼‰å·¥å…·ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<ul>
<li>Prisma Client: è‡ªåŠ¨ç”Ÿæˆä¸”ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»ºå™¨ï¼Œç”¨äº Node.js å’Œ TypeScript</li>
<li>Prisma Migrate: å£°æ˜å¼æ•°æ®å»ºæ¨¡å’Œè¿ç§»ç³»ç»Ÿ</li>
<li>Prisma Studio: ç”¨äºæŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®åº“ä¸­æ•°æ®çš„ GUI</li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>Prisma Studio æ˜¯ Prisma ORM ä¸­å”¯ä¸€ä¸æ˜¯å¼€æºçš„éƒ¨åˆ†ã€‚ä½ åªèƒ½åœ¨æœ¬åœ°è¿è¡Œ Prisma Studioã€‚</p>
</div>]]></summary>
    <content type="html"><![CDATA[<p>Prisma ORM æ˜¯ä¸€å¥—ç”¨äºä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„ä¸‹ä¸€ä»£ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒObject-Relational Mappingï¼‰å·¥å…·ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<ul>
<li>Prisma Client: è‡ªåŠ¨ç”Ÿæˆä¸”ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»ºå™¨ï¼Œç”¨äº Node.js å’Œ TypeScript</li>
<li>Prisma Migrate: å£°æ˜å¼æ•°æ®å»ºæ¨¡å’Œè¿ç§»ç³»ç»Ÿ</li>
<li>Prisma Studio: ç”¨äºæŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®åº“ä¸­æ•°æ®çš„ GUI</li>
</ul>
<div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>Prisma Studio æ˜¯ Prisma ORM ä¸­å”¯ä¸€ä¸æ˜¯å¼€æºçš„éƒ¨åˆ†ã€‚ä½ åªèƒ½åœ¨æœ¬åœ°è¿è¡Œ Prisma Studioã€‚</p>
</div>
<h2>ä¸ºä»€ä¹ˆä½¿ç”¨ Prisma ORM</h2>
<p>Prisma ORM ä¸ä»…æä¾›äº†ç°ä»£åŒ–çš„å¼€å‘ä½“éªŒï¼Œè¿˜æ˜¾è‘—æé«˜äº†ä¸æ•°æ®åº“äº¤äº’çš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚ä»¥ä¸‹æ˜¯ Prisma ORM çš„ä¸»è¦ä¼˜åŠ¿ï¼Œå¹¶ä¸åŸå§‹ SQL è¿›è¡Œå¯¹æ¯”ã€‚</p>
<h3>ç±»å‹å®‰å…¨ vs SQL é™æ€æŸ¥è¯¢</h3>
<p>Prisma Client æä¾›äº†å¼ºå¤§çš„ç±»å‹å®‰å…¨åŠŸèƒ½ï¼Œæ¯ä¸ªæŸ¥è¯¢éƒ½ä¸ Prisma schema ç´§å¯†ç»“åˆï¼Œä½¿å¾—æŸ¥è¯¢è¯­æ³•å’Œè¿”å›å€¼å‡å—åˆ° TypeScript çš„é™æ€ç±»å‹æ£€æŸ¥æ”¯æŒï¼š</p>
<p>Prisma æŸ¥è¯¢ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  where<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token punctuation">{</span> contains<span class="token operator">:</span> <span class="token string">'Alice'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>SQL æŸ¥è¯¢ï¼š</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> name <span class="token operator">LIKE</span> <span class="token string">'%Alice%'</span><span class="token punctuation">;</span>
</code></pre></div><p>Prisma æŸ¥è¯¢ä¸­ï¼Œé”™è¯¯å¯ä»¥åœ¨å¼€å‘é˜¶æ®µè¢«æ•è·ï¼Œè€Œ SQL æŸ¥è¯¢éœ€è¦é¢å¤–çš„æµ‹è¯•æˆ–è¿è¡Œæ—¶è°ƒè¯•ï¼Œå®¹æ˜“å¼•å…¥æ‹¼å†™æˆ–é€»è¾‘é”™è¯¯ã€‚</p>
<h3>å¼€å‘æ•ˆç‡ vs æ‰‹åŠ¨ç¼–å†™ SQL</h3>
<p>ä½¿ç”¨ Prisma ORMï¼Œå¯ä»¥é€šè¿‡é«˜å±‚æŠ½è±¡ç®€åŒ–å¸¸è§çš„æ•°æ®åº“æ“ä½œï¼Œè€Œä¸éœ€è¦é‡å¤ç¼–å†™å¤§é‡ SQL æŸ¥è¯¢ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªç”¨æˆ·å’Œå…³è”å¸–å­ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> <span class="token string">'alice@example.com'</span><span class="token punctuation">,</span>
    posts<span class="token operator">:</span> <span class="token punctuation">{</span>
      create<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Prisma is amazing!'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>SQLï¼š</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token string">"User"</span> <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"email"</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'alice@example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token string">"Post"</span> <span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token string">"authorId"</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Prisma is amazing!'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Prisma çš„é«˜å±‚ API ä¸ä»…æ˜“è¯»ï¼Œè¿˜é¿å…äº†å¤„ç† SQL ä¸­å¤–é”®å…³ç³»å’Œæ‰‹åŠ¨å…³è”æ•°æ®çš„å¤æ‚æ€§ã€‚</p>
<h3>å£°æ˜å¼æ•°æ®å»ºæ¨¡ vs æ‰‹åŠ¨è®¾è®¡æ•°æ®åº“</h3>
<p>Prisma schema æä¾›äº†ç›´è§‚çš„å£°æ˜å¼è¯­æ³•æ¥å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œä¸æ•°æ®åº“ç»“æ„ç›´æ¥åŒæ­¥ï¼Œè€Œ SQL é€šå¸¸éœ€è¦æ‰‹åŠ¨è®¾è®¡è¡¨ç»“æ„å¹¶ç»´æŠ¤å¤æ‚çš„è¿ç§»è„šæœ¬ã€‚</p>
<p>Prisma schemaï¼š</p>
<div class="language-prisma" data-ext="prisma" data-title="prisma"><pre class="language-prisma"><code>model User {
  id    Int     @id @default(autoincrement())
  email String  @unique
  posts Post[]
}
</code></pre></div><p>SQLï¼š</p>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token string">"User"</span> <span class="token punctuation">(</span>
  <span class="token string">"id"</span> <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
  <span class="token string">"email"</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token string">"Post"</span> <span class="token punctuation">(</span>
  <span class="token string">"id"</span> <span class="token keyword">INT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
  <span class="token string">"title"</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token string">"authorId"</span> <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token string">"authorId"</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token string">"User"</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Prisma schema è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„è¿ç§»è„šæœ¬ï¼Œè€Œ SQL çš„è¡¨å®šä¹‰éœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™ï¼Œå®¹æ˜“å‡ºé”™ã€‚</p>
<h3>æ€»ç»“</h3>
<p>Prisma ORM é€šè¿‡æä¾›ç±»å‹å®‰å…¨ã€è‡ªåŠ¨è¿ç§»ã€é«˜å±‚æŠ½è±¡å’Œå£°æ˜å¼æ•°æ®å»ºæ¨¡ï¼Œæ˜¾è‘—æé«˜äº†ä¸æ•°æ®åº“äº¤äº’çš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚</p>
<p>| ç‰¹æ€§             | Prisma ORM                       | åŸå§‹ SQL             |<br>
|</p>
]]></content>
    <category term="backend"/>
    <category term="node"/>
    <published>2024-12-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Prisma å…¥é—¨</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/node/prisma/01-quick-start.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/node/prisma/01-quick-start.html"/>
    <updated>2024-12-17T10:57:18.000Z</updated>
    <summary type="html"><![CDATA[<p>ä»¥å…³ç³»å‹æ•°æ®åº“ Mysql ä¸ºä¾‹ï¼Œä»‹ç» Prisma åœ¨ Node.js å’Œ Typescript é¡¹ç›®ä¸­çš„å®‰è£…å’Œä½¿ç”¨ã€‚</p>
<h2>å‰ç½®æ¡ä»¶</h2>
<ul>
<li>å®‰è£… <a href="https://nodejs.org/en" target="_blank" rel="noopener noreferrer">Node.js</a></li>
<li>è¿è¡Œ <a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">Mysql</a></li>
</ul>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>æ›´å¤šç³»ç»Ÿè¦æ±‚è¯·å‚è€ƒ <a href="https://www.prisma.io/docs/orm/reference/system-requirements" target="_blank" rel="noopener noreferrer">Prisma ç³»ç»Ÿè¦æ±‚</a>ã€‚</p>
<p>ç¡®ä¿æ‹¥æœ‰ <a href="https://www.prisma.io/docs/orm/reference/connection-urls" target="_blank" rel="noopener noreferrer">æ•°æ®åº“è¿æ¥ url</a>ã€‚</p>
</div>]]></summary>
    <content type="html"><![CDATA[<p>ä»¥å…³ç³»å‹æ•°æ®åº“ Mysql ä¸ºä¾‹ï¼Œä»‹ç» Prisma åœ¨ Node.js å’Œ Typescript é¡¹ç›®ä¸­çš„å®‰è£…å’Œä½¿ç”¨ã€‚</p>
<h2>å‰ç½®æ¡ä»¶</h2>
<ul>
<li>å®‰è£… <a href="https://nodejs.org/en" target="_blank" rel="noopener noreferrer">Node.js</a></li>
<li>è¿è¡Œ <a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">Mysql</a></li>
</ul>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>æ›´å¤šç³»ç»Ÿè¦æ±‚è¯·å‚è€ƒ <a href="https://www.prisma.io/docs/orm/reference/system-requirements" target="_blank" rel="noopener noreferrer">Prisma ç³»ç»Ÿè¦æ±‚</a>ã€‚</p>
<p>ç¡®ä¿æ‹¥æœ‰ <a href="https://www.prisma.io/docs/orm/reference/connection-urls" target="_blank" rel="noopener noreferrer">æ•°æ®åº“è¿æ¥ url</a>ã€‚</p>
</div>
<h2>å®‰è£…é¡¹ç›®</h2>
<p>åˆ›å»ºé¡¹ç›®ç›®å½•ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> hello-prisma
<span class="token builtin class-name">cd</span> hello-prisma
</code></pre></div><p>åˆå§‹åŒ– Typescript é¡¹ç›®å¹¶å®‰è£… Prisma CLIï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> init <span class="token parameter variable">-y</span>
<span class="token function">npm</span> <span class="token function">install</span> prisma typescript tsx @types/node --save-dev
</code></pre></div><p>è¿™ä¼šåˆ›å»º <code>package.json</code> æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª Typescript é¡¹ç›®ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåˆå§‹åŒ– Typescriptï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx tsc <span class="token parameter variable">--init</span>
</code></pre></div><p>ä½ ç°åœ¨å¯ä»¥é€šè¿‡ <code>npx</code> è¿è¡Œ Prisma CLIï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma
</code></pre></div><p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»º <a href="https://www.prisma.io/docs/concepts/components/prisma-schema" target="_blank" rel="noopener noreferrer">Prisma Schema</a> æ–‡ä»¶æ¥åˆ›å»º Prisma ORM é¡¹ç›®ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma init
</code></pre></div><p>è¿™ä¸ªå‘½ä»¤åšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåä¸º <code>prisma</code> çš„ç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªåä¸º <code>schema.prisma</code> çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«æ•°æ®åº“è¿æ¥å˜é‡å’Œ schema æ¨¡å‹ã€‚</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º <a href="https://www.prisma.io/docs/orm/more/development-environment/environment-variables/env-files" target="_blank" rel="noopener noreferrer"><code>.env</code></a> æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ç¯å¢ƒå˜é‡ï¼ˆä¾‹å¦‚æ•°æ®åº“è¿æ¥ï¼‰ã€‚</li>
</ul>
<h2>è¿æ¥æ•°æ®åº“</h2>
<p>ä¸ºäº†è¿æ¥æ•°æ®åº“ï¼Œä½ éœ€è¦åœ¨ <code>schema.prisma</code> æ–‡ä»¶ä¸­å®šä¹‰æ•°æ®æºï¼š</p>
<p><strong>prisma/schema.prisma</strong></p>
<div class="language-prisma" data-ext="prisma" data-title="prisma"><pre class="language-prisma"><code>datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
</code></pre></div><p><strong>.env</strong></p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>DATABASE_URL="mysql://johndoe:randompassword@localhost:3306/mydb"
</code></pre></div><p>URL æ ¼å¼å–å†³äºä½ ä½¿ç”¨çš„æ•°æ®åº“ã€‚å¯¹äº MySQLï¼Œå®ƒçœ‹èµ·æ¥å¦‚ä¸‹ï¼ˆå¤§å†™çš„éƒ¨åˆ†æ˜¯ä½ çš„ç‰¹å®šè¿æ¥ç»†èŠ‚çš„å ä½ç¬¦ï¼‰ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>mysql://USER:PASSWORD@HOST:PORT/DATABASE
</code></pre></div><p>è¿™é‡Œæ˜¯å¯¹æ¯ä¸ªç»„ä»¶çš„ç®€è¦è§£é‡Šï¼š</p>
<ul>
<li>USER: æ•°æ®åº“ç”¨æˆ·å</li>
<li>PASSWORD: æ•°æ®åº“ç”¨æˆ·å¯†ç </li>
<li>PORT: æ•°æ®åº“æœåŠ¡å™¨è¿è¡Œçš„ç«¯å£ï¼ˆé€šå¸¸ä¸º 3306 ç”¨äº MySQLï¼‰</li>
<li>DATABASE: æ•°æ®åº“åç§°</li>
</ul>
<h2>Prisma Migrate</h2>
<p><a href="https://www.prisma.io/docs/orm/prisma-migrate" target="_blank" rel="noopener noreferrer">Prisma Migrate</a> æ˜¯ Prisma çš„è¿ç§»å·¥å…·ï¼Œç”¨äºç®¡ç†æ•°æ®åº“ schema çš„å˜æ›´ã€‚</p>
<p><strong>prisma/schema.prisma</strong></p>
<div class="language-prisma" data-ext="prisma" data-title="prisma"><pre class="language-prisma"><code>model Post {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title     String   @db.VarChar(255)
  content   String?
  published Boolean  @default(false)
  author    User     @relation(fields: [authorId], references: [id])
  authorId  Int
}

model Profile {
  id     Int     @id @default(autoincrement())
  bio    String?
  user   User    @relation(fields: [userId], references: [id])
  userId Int     @unique
}

model User {
  id      Int      @id @default(autoincrement())
  email   String   @unique
  name    String?
  posts   Post[]
  profile Profile?
}
</code></pre></div><p>ä¸ºäº†å°† schema è½¬æ¢ä¸ºæ•°æ®åº“ï¼Œä½ éœ€è¦è¿è¡Œ Prisma Migrateï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma migrate <span class="token parameter variable">--name</span> init
</code></pre></div><p>è¿™ä¸ªå‘½ä»¤ä¼šåšä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ª SQL è¿ç§»æ–‡ä»¶ã€‚</li>
<li>åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œå¯¹åº”çš„ SQL è¿ç§»æ–‡ä»¶ã€‚</li>
</ul>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œ <code>prisma migrate dev</code> åï¼Œä¼šåœ¨å¼•æ“ç›–ä¸‹è°ƒç”¨ <code>generate</code>ã€‚ å¦‚æœæ¨¡å¼ä¸­å®šä¹‰äº† <code>prisma-client-js</code> ç”Ÿæˆå™¨ï¼Œå®ƒä¼šæ£€æŸ¥ <code>@prisma/client</code> æ˜¯å¦å·²å®‰è£…ï¼Œå¦‚æœç¼ºå°‘ï¼Œåˆ™å®‰è£…ã€‚</p>
</div>
<h2>å®‰è£… Prisma Client</h2>
<p>è¦å¼€å§‹ä½¿ç”¨ Prisma å®¢æˆ·ç«¯ï¼Œéœ€è¦å®‰è£… <code>@prisma/client</code> è½¯ä»¶åŒ…ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @prisma/client
</code></pre></div><p>å®‰è£…å‘½ä»¤ä¼šè°ƒç”¨ <code>prisma generate</code>ï¼Œè¯»å– Prisma schema å¹¶ç”Ÿæˆé€‚åˆä½ æ¨¡å‹çš„ Prisma å®¢æˆ·ç«¯ç‰ˆæœ¬ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241217183854.png" alt="workflow" tabindex="0" loading="lazy"><figcaption>workflow</figcaption></figure>
<p>æ— è®ºä½•æ—¶æ›´æ–° Prisma schemaï¼Œéƒ½å¿…é¡»ä½¿ç”¨ <code>prisma migrate dev</code> æˆ– <code>prisma db push</code> æ›´æ–°æ•°æ®åº“æ¨¡å¼ã€‚è¿™å°†ä½¿æ•°æ®åº“æ¨¡å¼ä¸ Prisma æ¨¡å¼ä¿æŒåŒæ­¥ã€‚è¿™äº›å‘½ä»¤è¿˜å°†é‡æ–°ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ã€‚</p>
<blockquote>
<p>[!WARNING] &gt; <code>prisma db push</code> ä¸ä¼šç”Ÿæˆè¿ç§»æ–‡ä»¶ï¼Œåªä¼šåœ¨æ•°æ®åº“ä¸­æ‰§è¡Œå¯¹åº”çš„ SQL è¯­å¥ã€‚</p>
<p>å› æ­¤å¦‚æœä½ éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œéœ€è¦æ›´å¥½çš„è¿ç§»è®°å½•å’Œç®¡ç†ï¼Œè¯·ä½¿ç”¨ <code>prisma migrate dev</code>ã€‚</p>
</blockquote>
<h2>æ“ä½œæ•°æ®åº“</h2>
<h3>æŸ¥è¯¢æ•°æ®</h3>
<p>ç°åœ¨å·²ç»ç”Ÿæˆäº† <a href="https://www.prisma.io/docs/orm/prisma-client" target="_blank" rel="noopener noreferrer">Prisma Client</a>ï¼Œå¯ä»¥å¼€å§‹ç¼–å†™åœ¨æ•°æ®åº“ä¸­è¯»å†™æ•°æ®çš„æŸ¥è¯¢ã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªåä¸º <code>index.ts</code> çš„æ–°æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@prisma/client'</span>

<span class="token keyword">const</span> prisma <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... you will write your Prisma Client queries here</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> prisma<span class="token punctuation">.</span><span class="token function">$disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token keyword">await</span> prisma<span class="token punctuation">.</span><span class="token function">$disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ä»¥ä¸‹æ˜¯ä»£ç ç‰‡æ®µå„éƒ¨åˆ†çš„ç®€è¦æ¦‚è¿°ï¼š</p>
<ul>
<li>ä» <code>@prisma/client</code> èŠ‚ç‚¹æ¨¡å—å¯¼å…¥ <code>PrismaClient</code> æ„é€ å‡½æ•°</li>
<li>å®ä¾‹åŒ– <code>PrismaClient</code></li>
<li>å®šä¹‰åä¸º <code>main</code> çš„å¼‚æ­¥å‡½æ•°ï¼Œå‘æ•°æ®åº“å‘é€æŸ¥è¯¢</li>
<li>è°ƒç”¨ <code>main</code> å‡½æ•°</li>
<li>è„šæœ¬ç»ˆæ­¢æ—¶å…³é—­æ•°æ®åº“è¿æ¥</li>
</ul>
<p>åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹æŸ¥è¯¢ï¼Œä»æ•°æ®åº“ä¸­è¯»å–æ‰€æœ‰ç”¨æˆ·è®°å½•å¹¶æ‰“å°ç»“æœï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... you will write your Prisma Client queries here</span>
  <span class="token keyword">const</span> allUsers <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allUsers<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿è¡Œè„šæœ¬ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx tsx index.ts
</code></pre></div><p>è¿™å°†æ‰“å°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå› ä¸ºæ•°æ®åº“ä¸­è¿˜æ²¡æœ‰ç”¨æˆ·è®°å½•ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre></div><h3>å†™å…¥æ•°æ®</h3>
<p><code>findMany</code> æŸ¥è¯¢åªèƒ½ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼ˆå°½ç®¡å®ƒä»ç„¶æ˜¯ç©ºçš„ï¼‰ã€‚æ¥ä¸‹æ¥å¯ä»¥å‘ <code>Post</code> è¡¨å’Œ <code>User</code> è¡¨ä¸­å†™å…¥æ–°è®°å½•ã€‚</p>
<p>è°ƒæ•´ <code>main</code> å‡½æ•°ï¼Œå‘æ•°æ®åº“å‘é€åˆ›å»ºæŸ¥è¯¢ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span>
      email<span class="token operator">:</span> <span class="token string">'alice@prisma.io'</span><span class="token punctuation">,</span>
      posts<span class="token operator">:</span> <span class="token punctuation">{</span>
        create<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Hello World'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      profile<span class="token operator">:</span> <span class="token punctuation">{</span>
        create<span class="token operator">:</span> <span class="token punctuation">{</span> bio<span class="token operator">:</span> <span class="token string">'I like turtles'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> allUsers <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">findMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    include<span class="token operator">:</span> <span class="token punctuation">{</span>
      posts<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      profile<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>allUsers<span class="token punctuation">,</span> <span class="token punctuation">{</span> depth<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ®µä»£ç ä½¿ç”¨ <a href="https://www.prisma.io/docs/orm/prisma-client/queries/relation-queries#nested-writes" target="_blank" rel="noopener noreferrer">åµŒå¥—å†™æŸ¥è¯¢</a> åˆ›å»ºäº†ä¸€æ¡æ–°çš„ç”¨æˆ·è®°å½•ä»¥åŠæ–°çš„å¸–å­å’Œç®€ä»‹è®°å½•ã€‚ç”¨æˆ·è®°å½•åˆ†åˆ«é€šè¿‡ <code>Post.author â†” User.posts</code> å’Œ <code>Profile.user â†” User.profile</code> å…³ç³»å­—æ®µä¸å…¶ä»–ä¸¤æ¡è®°å½•åˆ›å»º <a href="https://www.prisma.io/docs/orm/prisma-schema/data-model/relations#relation-fields" target="_blank" rel="noopener noreferrer">å…³ç³»</a>ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæ‚¨å‘ <code>findMany</code> ä¼ é€’äº† <a href="https://www.prisma.io/docs/orm/prisma-client/queries/select-fields#return-nested-objects-by-selecting-relation-fields" target="_blank" rel="noopener noreferrer"><code>include</code></a> é€‰é¡¹ï¼Œè¯¥é€‰é¡¹å‘Šè¯‰ Prisma å®¢æˆ·ç«¯åœ¨è¿”å›çš„ç”¨æˆ·å¯¹è±¡ä¸­åŒ…å« <code>posts</code> å’Œ <code>profile</code> å…³ç³»ã€‚</p>
<p>è¿è¡Œè„šæœ¬ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx tsx index.ts
</code></pre></div><p>è¿™å°†æ‰“å°ä¸€ä¸ªåŒ…å«æ–°åˆ›å»ºçš„ç”¨æˆ·çš„æ•°ç»„ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    email: <span class="token string">'alice@prisma.io'</span>,
    id: <span class="token number">1</span>,
    name: <span class="token string">'Alice'</span>,
    posts: <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        content: null,
        createdAt: <span class="token number">2020</span>-03-21T16:45:01.246Z,
        updatedAt: <span class="token number">2020</span>-03-21T16:45:01.246Z,
        id: <span class="token number">1</span>,
        published: false,
        title: <span class="token string">'Hello World'</span>,
        authorId: <span class="token number">1</span>,
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>,
    profile: <span class="token punctuation">{</span>
      bio: <span class="token string">'I like turtles'</span>,
      id: <span class="token number">1</span>,
      userId: <span class="token number">1</span>,
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>è¿™ä¸ª query å‘ <code>User</code> å’Œ <code>Post</code> è¡¨ä¸­å†™å…¥äº†æ–°è®°å½•ï¼š</p>
<p>User</p>
<p>| id  | email           | name  |<br>
|</p>
]]></content>
    <category term="node"/>
    <published>2024-12-17T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å›½é™…åŒ–</title>
    <id>https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/04-i18n.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/04-i18n.html"/>
    <updated>2024-12-17T10:16:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>é…ç½®</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> workspace mobile <span class="token function">add</span> i18next react-i18next expo-localization
</code></pre></div><p>é…ç½® app.json</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"expo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"expo-localization"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>é…ç½®</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> workspace mobile <span class="token function">add</span> i18next react-i18next expo-localization
</code></pre></div><p>é…ç½® app.json</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"expo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"expo-localization"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é›†æˆ</h2>
<p><code>apps/mobile/locales/index.ts</code></p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">'i18next'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initReactI18next <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-i18next'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Localization <span class="token keyword">from</span> <span class="token string">'expo-localization'</span>
<span class="token keyword">import</span> English <span class="token keyword">from</span> <span class="token string">'./en'</span>
<span class="token keyword">import</span> Chinese <span class="token keyword">from</span> <span class="token string">'./zh'</span>

<span class="token keyword">const</span> resources <span class="token operator">=</span> <span class="token punctuation">{</span>
  en<span class="token operator">:</span> <span class="token punctuation">{</span> translation<span class="token operator">:</span> English <span class="token punctuation">}</span><span class="token punctuation">,</span>
  zh<span class="token operator">:</span> <span class="token punctuation">{</span> translation<span class="token operator">:</span> Chinese <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUserLanguage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> locales <span class="token operator">=</span> Localization<span class="token punctuation">.</span><span class="token function">getLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>locales<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> locales<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>languageCode <span class="token operator">??</span> <span class="token string">'zh'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'zh'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.error('Error retrieving language preference:', error);</span>
    <span class="token keyword">return</span> <span class="token string">'zh'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token function">getUserLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

i18n<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>initReactI18next<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  resources<span class="token punctuation">,</span>
  compatibilityJSON<span class="token operator">:</span> <span class="token string">'v3'</span><span class="token punctuation">,</span>
  lng<span class="token operator">:</span> language<span class="token punctuation">,</span>
  fallbackLng<span class="token operator">:</span> <span class="token string">'zh'</span><span class="token punctuation">,</span>
  interpolation<span class="token operator">:</span> <span class="token punctuation">{</span>
    escapeValue<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// react already safes from xss</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  react<span class="token operator">:</span> <span class="token punctuation">{</span>
    useSuspense<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// avoid suspense problem</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> i18n
</code></pre></div>]]></content>
    <category term="Project"/>
    <published>2024-09-29T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">äº‘æœåŠ¡å™¨è®¾ç½®ä»£ç†</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/06-server-proxy.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/06-server-proxy.html"/>
    <updated>2024-12-04T08:46:00.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨è®¸å¤šå¼€å‘å’Œéƒ¨ç½²åœºæ™¯ä¸­ï¼Œä½¿ç”¨ä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç»•è¿‡ç½‘ç»œé™åˆ¶ï¼Œæå‡å®‰å…¨æ€§ï¼Œæˆ–è€…åŠ é€Ÿè®¿é—®ã€‚åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†ï¼Œä¸»è¦åŒ…æ‹¬é€šè¿‡éš§é“æŠ€æœ¯ä¸ä½¿ç”¨ Clash for Linux ä¸¤ç§æ–¹å¼ã€‚</p>
<h2>ä½¿ç”¨ SSH éš§é“è®¾ç½®ä»£ç†</h2>
<p>SSH éš§é“æ˜¯ä¸€ç§é€šè¿‡å®‰å…¨é€šé“å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨çš„æ–¹æ³•ã€‚ä½¿ç”¨ SSH éš§é“å¯ä»¥é€šè¿‡äº‘æœåŠ¡å™¨ä½œä¸ºä¸­ä»‹ï¼Œç»•è¿‡å±€åŸŸç½‘æˆ–åŒºåŸŸæ€§ç½‘ç»œçš„é™åˆ¶ï¼Œè®¿é—®å¤–éƒ¨æœåŠ¡ã€‚ä¸‹é¢æ˜¯å¦‚ä½•è®¾ç½® SSH éš§é“ä»£ç†ã€‚</p>
<p>ä¸€èˆ¬äº‘æœåŠ¡å™¨éƒ½æ”¯æŒ SSH éš§é“ï¼Œå¦‚æœæ˜¯åŸºäº Ubuntu çš„ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status <span class="token function">ssh</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨è®¸å¤šå¼€å‘å’Œéƒ¨ç½²åœºæ™¯ä¸­ï¼Œä½¿ç”¨ä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç»•è¿‡ç½‘ç»œé™åˆ¶ï¼Œæå‡å®‰å…¨æ€§ï¼Œæˆ–è€…åŠ é€Ÿè®¿é—®ã€‚åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•åœ¨äº‘æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†ï¼Œä¸»è¦åŒ…æ‹¬é€šè¿‡éš§é“æŠ€æœ¯ä¸ä½¿ç”¨ Clash for Linux ä¸¤ç§æ–¹å¼ã€‚</p>
<h2>ä½¿ç”¨ SSH éš§é“è®¾ç½®ä»£ç†</h2>
<p>SSH éš§é“æ˜¯ä¸€ç§é€šè¿‡å®‰å…¨é€šé“å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨çš„æ–¹æ³•ã€‚ä½¿ç”¨ SSH éš§é“å¯ä»¥é€šè¿‡äº‘æœåŠ¡å™¨ä½œä¸ºä¸­ä»‹ï¼Œç»•è¿‡å±€åŸŸç½‘æˆ–åŒºåŸŸæ€§ç½‘ç»œçš„é™åˆ¶ï¼Œè®¿é—®å¤–éƒ¨æœåŠ¡ã€‚ä¸‹é¢æ˜¯å¦‚ä½•è®¾ç½® SSH éš§é“ä»£ç†ã€‚</p>
<p>ä¸€èˆ¬äº‘æœåŠ¡å™¨éƒ½æ”¯æŒ SSH éš§é“ï¼Œå¦‚æœæ˜¯åŸºäº Ubuntu çš„ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status <span class="token function">ssh</span>
</code></pre></div><p>å¦‚æœçœ‹åˆ° <code>active (running)</code> å­—æ ·ï¼Œè¯´æ˜ SSH æœåŠ¡æ­£åœ¨è¿è¡Œã€‚</p>
<p>å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openssh-server
</code></pre></div><p>åœ¨æœ¬åœ°ç”µè„‘ä¸Šï¼Œä½¿ç”¨ SSH è¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-R</span> <span class="token number">7890</span>:127.0.0.1:7890 root@<span class="token operator">&lt;</span>your-server-ip<span class="token operator">&gt;</span>
</code></pre></div><p>ç„¶ååœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç¼–è¾‘ <code>~/.bashrc</code>ï¼ˆæˆ– <code>~/.zshrc</code>ï¼Œå–å†³äºä½ ä½¿ç”¨çš„ shellï¼‰ æ–‡ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">vi</span> ~/.bashrc
<span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://127.0.0.1:7890
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://127.0.0.1:7890
</code></pre></div><p>è¿™æ ·ï¼Œäº‘æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½ä¼šç»è¿‡æœ¬åœ°çš„ 7890 ç«¯å£ã€‚</p>
<div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>è¯¥æ–¹å¼ä¼˜ç‚¹åœ¨äºç®€å•ï¼Œåœ¨ä¸€äº›ç®€å•çš„åœºæ™¯ä¸‹å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚</p>
<p>ç¼ºç‚¹åœ¨äºä¾èµ– SSH éš§é“ï¼Œå¦‚æœä½¿ç”¨ GitHub Action è§¦å‘ CIï¼Œç”±äºæ²¡æœ‰ SSH éš§é“ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ— æ³•ä½¿ç”¨ä»£ç†ã€‚</p>
<p>é™¤éä½ èƒ½ä¿è¯æœ¬åœ°ç”µè„‘ä¸€ç›´å¤„äºè¿æ¥çŠ¶æ€ï¼Œå¦åˆ™ä¸å»ºè®®ä½¿ç”¨è¯¥æ–¹å¼ã€‚</p>
</div>
<h2>ä½¿ç”¨ Clash for Linux è®¾ç½®ä»£ç†</h2>
<p><a href="https://github.com/Elegycloud/clash-for-linux-backup" target="_blank" rel="noopener noreferrer">Clash for Linux</a> æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ä»£ç†å·¥å…·ï¼Œæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬ HTTPã€SOCKS5 ç­‰ã€‚é€šè¿‡ Clash for Linuxï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åœ¨æœ¬åœ°ç”µè„‘ä¸Šè®¾ç½®ä»£ç†ï¼Œå¹¶å°†å…¶åŒæ­¥åˆ°äº‘æœåŠ¡å™¨ä¸Šã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/Elegycloud/clash-for-linux-backup.git
</code></pre></div><p>è¿›å…¥åˆ°é¡¹ç›®ç›®å½•ï¼Œç¼–è¾‘ <code>.env</code> æ–‡ä»¶ï¼Œä¿®æ”¹å˜é‡ <code>CLASH_URL</code> çš„å€¼ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> clash-for-linux-backup
$ <span class="token function">vi</span> .env
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>CLASH_SECRET</code> å˜é‡ä¼šç”¨äºç™»é™† dashboardã€‚</p>
</div>
<p>å¯åŠ¨ä»£ç†ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">bash</span> start.sh
æ­£åœ¨æ£€æµ‹è®¢é˜…åœ°å€<span class="token punctuation">..</span>.
Clashè®¢é˜…åœ°å€å¯è®¿é—®ï¼                                      <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span>

æ­£åœ¨ä¸‹è½½Clashé…ç½®æ–‡ä»¶<span class="token punctuation">..</span>.
é…ç½®æ–‡ä»¶config.yamlä¸‹è½½æˆåŠŸï¼                              <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span>

æ­£åœ¨å¯åŠ¨ClashæœåŠ¡<span class="token punctuation">..</span>.
æœåŠ¡å¯åŠ¨æˆåŠŸï¼                                             <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span>

Clash Dashboard è®¿é—®åœ°å€ï¼šhttp://<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>:9090/ui
Secretï¼šxxxxxxxxxxxxx

è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ è½½ç¯å¢ƒå˜é‡: <span class="token builtin class-name">source</span> /etc/profile.d/clash.sh

è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯ç³»ç»Ÿä»£ç†: proxy_on

è‹¥è¦ä¸´æ—¶å…³é—­ç³»ç»Ÿä»£ç†ï¼Œè¯·æ‰§è¡Œ: proxy_off
</code></pre></div><p>åŠ è½½ç¯å¢ƒå˜é‡å¹¶å¯åŠ¨æœåŠ¡ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token builtin class-name">source</span> /etc/profile.d/clash.sh
$ proxy_on
</code></pre></div><p>æ£€æŸ¥æœåŠ¡ç«¯å£ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">netstat</span> <span class="token parameter variable">-tuln</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">7890</span>
$ <span class="token function">netstat</span> <span class="token parameter variable">-tln</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">'9090|789.'</span>
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::7892                 :::*                    LISTEN     
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::7890                 :::*                    LISTEN     
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::7891                 :::*                    LISTEN     
tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::9090                 :::*                    LISTEN
</code></pre></div><p>æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">env</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token string">'http_proxy|https_proxy'</span>
<span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://127.0.0.1:7890
<span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://127.0.0.1:7890
</code></pre></div><p>è¿™æ ·ï¼Œäº‘æœåŠ¡å™¨ä¸Šçš„ä»£ç†å³è®¾ç½®å®Œæˆã€‚è‹¥è¦æŸ¥çœ‹ dashboardï¼Œå¯ä»¥ä½¿ç”¨ VS Code æ’ä»¶ <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh" target="_blank" rel="noopener noreferrer">Remote - SSH</a> è¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œè®¾ç½®ç«¯å£è½¬å‘ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://127.0.0.1:9090/ui</code>ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20241204164400.png" alt="ç«¯å£è½¬å‘" tabindex="0" loading="lazy"><figcaption>ç«¯å£è½¬å‘</figcaption></figure>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>é…ç½®å®Œæˆåï¼Œdashboard ä¼šåœ¨å…³é—­è¿æ¥ååœæ­¢ï¼Œæ‰€ä»¥å¯ä»¥è¿›è¡ŒæŒä¹…åŒ–ã€‚</p>
</div>
<p>ç¼–è¾‘ <code>~/.bashrc</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>$ <span class="token function">vi</span> ~/.bashrc
<span class="token function">bash</span> /path/to/clash-for-linux-backup/start.sh
<span class="token builtin class-name">source</span> /etc/profile.d/clash.sh
proxy_on
</code></pre></div><p>è¿™æ ·ï¼Œæ¯æ¬¡è¿æ¥åˆ°äº‘æœåŠ¡å™¨åï¼Œéƒ½ä¼šè‡ªåŠ¨å¯åŠ¨ä»£ç†ã€‚</p>
]]></content>
    <category term="linux"/>
    <published>2024-12-04T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Docker å®‰è£… MySQL</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/database/mysql/01-install-mysql.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/database/mysql/01-install-mysql.html"/>
    <updated>2024-12-04T08:03:38.000Z</updated>
    <summary type="html"><![CDATA[<p>ä½¿ç”¨ Docker å®‰è£… MySQLã€‚</p>
<h2>å®‰è£…</h2>
<p>ä» <a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener noreferrer">docker-hub</a> é•œåƒæºä¸­æ‰¾åˆ°æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬å·ã€‚</p>
<p>è¿™é‡Œç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>ä½¿ç”¨ Docker å®‰è£… MySQLã€‚</p>
<h2>å®‰è£…</h2>
<p>ä» <a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener noreferrer">docker-hub</a> é•œåƒæºä¸­æ‰¾åˆ°æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬å·ã€‚</p>
<p>è¿™é‡Œç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql
</code></pre></div><p>ç­‰å¾…ä¸€æ®µæ—¶é—´å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ MySQL å®¹å™¨ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mysql-container <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>my-secret-pw <span class="token parameter variable">-v</span> /path/to/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 mysql
</code></pre></div><p>è¿™ä¸ªå‘½ä»¤çš„å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li><code>-d</code>: åå°è¿è¡Œå®¹å™¨ã€‚</li>
<li><code>--name mysql-container</code>: ç»™å®¹å™¨èµ·ä¸€ä¸ªåå­—ã€‚</li>
<li><code>-e MYSQL_ROOT_PASSWORD=my-secret-pw</code>: è®¾ç½® MySQL root ç”¨æˆ·çš„å¯†ç ã€‚</li>
<li><code>-p 3306:3306</code>: å°†å®¹å™¨çš„ MySQL æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ä¸º 3306ï¼‰æ˜ å°„åˆ°ä¸»æœºçš„ 3306 ç«¯å£ã€‚</li>
<li><code>-v /path/to/data:/var/lib/mysql</code>: å°†å®¹å™¨ä¸­çš„ MySQL æ•°æ®ç›®å½•æŒ‚è½½åˆ°ä¸»æœºä¸Šçš„ <code>/path/to/data</code> ç›®å½•ã€‚</li>
<li><code>-e TZ=Asia/Shanghai</code>: è®¾ç½®æ—¶åŒºã€‚</li>
</ul>
<p>å¯åŠ¨å®¹å™¨åè¿›å…¥ MySQL å®¹å™¨çš„å‘½ä»¤è¡Œç•Œé¢ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql-container <span class="token function">bash</span>
</code></pre></div><p>è¾“å…¥å¯†ç å³å¯è¿›å…¥ MySQL å‘½ä»¤è¡Œç•Œé¢ã€‚</p>
<h2>è®¾ç½® MySQL</h2>
<p>è¿›å…¥åˆ°å‘½ä»¤è¡Œç•Œé¢åï¼Œè®¾ç½®ä¸€äº›åŸºæœ¬çš„é…ç½®ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>MySQL å‘½ä»¤ä»¥ <code>;</code> è¡¨ç¤ºä¸€è¡Œç»“æŸã€‚</p>
</div>
<ol>
<li>ç™»é™† MySQL</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre></div><ol start="2">
<li>åˆ›å»ºæ•°æ®åº“</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>create database your_data_base_name<span class="token punctuation">;</span>
</code></pre></div><ol start="3">
<li>åˆ›å»ºç”¨æˆ·</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>CREATE <span class="token environment constant">USER</span> <span class="token string">'your_username'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'your_password'</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4">
<li>è®¾ç½®æƒé™</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>GRANT ALL PRIVILEGES ON your_database_name.* TO <span class="token string">'your_username'</span>@<span class="token string">'localhost'</span><span class="token punctuation">;</span>
</code></pre></div><ol start="5">
<li>åˆ·æ–°æƒé™</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>FLUSH PRIVILEGES<span class="token punctuation">;</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å¿…è¦æ­¥éª¤ï¼Œå¦åˆ™æƒé™ä¼šä¸ç”Ÿæ•ˆã€‚</p>
</div>
<p>åšå®ŒåŸºæœ¬çš„é…ç½®ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤é€€å‡ºå‘½ä»¤è¡Œç•Œé¢ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
</code></pre></div><h2>æœåŠ¡å™¨å¼€æ”¾ç«¯å£</h2>
<p>å‚è€ƒ ã€‚</p>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨ Navicat è¿æ¥æ•°æ®åº“äº†ã€‚</p>
]]></content>
    <category term="database"/>
    <published>2024-01-14T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æœåŠ¡å™¨è®¾ç½® ssh å¯†é’¥ç™»å½•</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/01-set-the-ssh.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/01-set-the-ssh.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä½¿ç”¨å¯†ç ç™»å½•æœåŠ¡å™¨å¹¶ä¸å®‰å…¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®å¯†é’¥ç™»å½•ã€‚</p>
</div>
<h2>åˆ›å»ºå¯†é’¥å¯¹</h2>
<p>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å° -&gt; äº‘æœåŠ¡ ECS -&gt; ç½‘ç»œä¸å®‰å…¨ -&gt; å¯†é’¥å¯¹ -&gt; åˆ›å»ºå¯†é’¥å¯¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-create-ssh.png" alt="step1-create-ssh" tabindex="0" loading="lazy"><figcaption>step1-create-ssh</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä½¿ç”¨å¯†ç ç™»å½•æœåŠ¡å™¨å¹¶ä¸å®‰å…¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®å¯†é’¥ç™»å½•ã€‚</p>
</div>
<h2>åˆ›å»ºå¯†é’¥å¯¹</h2>
<p>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å° -&gt; äº‘æœåŠ¡ ECS -&gt; ç½‘ç»œä¸å®‰å…¨ -&gt; å¯†é’¥å¯¹ -&gt; åˆ›å»ºå¯†é’¥å¯¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-create-ssh.png" alt="step1-create-ssh" tabindex="0" loading="lazy"><figcaption>step1-create-ssh</figcaption></figure>
<p>åˆ›å»ºæˆåŠŸä¹‹åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ª <code>.pem</code> ç§é’¥æ–‡ä»¶ï¼Œè®°ä½è¿™ä¸ªæ–‡ä»¶çš„ä½ç½®ï¼Œä¹‹åè¦ç”¨ã€‚</p>
<h2>ç»‘å®šå¯†é’¥å¯¹</h2>
<p>é€‰ä¸­åˆšæ‰åˆ›å»ºçš„å¯†é’¥å¯¹ï¼Œç‚¹å‡»å³ä¾§<strong>ç»‘å®šå¯†é’¥å¯¹</strong>ï¼Œå°†å¯†é’¥å¯¹ç»‘å®šåˆ°å®ä¾‹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step2-bind-ssh.png" alt="step2-bind-ssh" tabindex="0" loading="lazy"><figcaption>step2-bind-ssh</figcaption></figure>
<h2>æ·»åŠ å®‰å…¨ç»„è§„åˆ™</h2>
<p>äº‘æœåŠ¡ ECS -&gt; ç½‘ç»œä¸å®‰å…¨ -&gt; å®‰å…¨ç»„ -&gt; å…¥æ–¹å‘ -&gt; æ‰‹åŠ¨æ·»åŠ ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step3-add-port.png" alt="step3-add-port" tabindex="0" loading="lazy"><figcaption>step3-add-port</figcaption></figure>
<p>æ‰§è¡Œå®Œåé‡å¯å®ä¾‹ã€‚</p>
<h2>å¯†é’¥éªŒè¯å¹¶ç¦ç”¨å¯†ç ç™»å½•</h2>
<ol>
<li>
<p>å®‰è£… MobaXterm</p>
</li>
<li>
<p>åœ¨ MobaXterm ä¸‹è¾“å…¥å‘½ä»¤ï¼ˆ<a href="https://help.aliyun.com/document_detail/51798.html#title-7je-5ba-sm2" target="_blank" rel="noopener noreferrer">å‚è€ƒé˜¿é‡Œäº‘å®˜ç½‘æ–‡æ¡£</a>ï¼‰</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">400</span> <span class="token punctuation">[</span>.pemç§é’¥æ–‡ä»¶åœ¨æœ¬åœ°æœºä¸Šçš„å­˜å‚¨è·¯å¾„<span class="token punctuation">]</span>
</code></pre></div><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>.pemç§é’¥æ–‡ä»¶åœ¨æœ¬åœ°æœºä¸Šçš„å­˜å‚¨è·¯å¾„<span class="token punctuation">]</span> root@<span class="token punctuation">[</span>å…¬ç½‘IPåœ°å€<span class="token punctuation">]</span>
</code></pre></div></li>
<li>
<p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ config æ–‡ä»¶</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/ssh/sshd_config
</code></pre></div></li>
<li>
<p>æŒ‰ <code>i</code> è¿›å…¥ç¼–è¾‘æ¨¡å¼</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#ç¦ç”¨å¯†ç éªŒè¯</span>
PasswordAuthentication no
<span class="token comment">#å¯ç”¨å¯†é’¥éªŒè¯</span>
PubkeyAuthentication <span class="token function">yes</span>
</code></pre></div></li>
<li>
<p>é‡å¯ ssh æœåŠ¡</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">service</span> sshd restart
</code></pre></div></li>
</ol>
<p>æ¥ä¸‹æ¥åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ä½¿ç”¨ Workbench è¿œç¨‹è¿æ¥ï¼Œå¯ä»¥å‘ç°å¯†ç ç™»å½•å·²ç»è¢«ç¦ç”¨äº†ï¼Œåªèƒ½ä½¿ç”¨å¯†é’¥ç™»å½•ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step4-pw-fail.png" alt="step4-pw-fail" tabindex="0" loading="lazy"><figcaption>step4-pw-fail</figcaption></figure>
]]></content>
    <category term="linux"/>
    <published>2021-05-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ­å»º git ç§æœ</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/02-build-git-server.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/02-build-git-server.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><strong>git ç§æœä½œç”¨ï¼š</strong></p>
<ul>
<li>è‡ªå·±ç”µè„‘å’Œå…¬å¸ï¼ˆæˆ–è€…å®éªŒå®¤ï¼‰ç”µè„‘éšæ—¶åŒæ­¥èµ„æ–™</li>
<li>GitHubã€Gitee ç§æœ‰ä»“åº“éƒ½æ˜¯é™æµçš„ï¼Œæ–‡ä»¶ä¸€æ—¦å¤šäº†ï¼Œæˆ–è€…æœ‰å›¾ç‰‡æ–‡ä»¶ï¼Œ<code>git pull</code> çš„æ—¶å€™åŠå¤©æ‹‰ä¸ä¸‹æ¥</li>
<li>ä¿å­˜ä¸€äº›éšç§æ–‡ä»¶</li>
</ul>
</div>
<h2>å¼€å§‹æ­å»º</h2>
<ul>
<li>æœåŠ¡å™¨ï¼šcentos7.9</li>
<li>æœ¬åœ°ç”µè„‘: Windows10</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><strong>git ç§æœä½œç”¨ï¼š</strong></p>
<ul>
<li>è‡ªå·±ç”µè„‘å’Œå…¬å¸ï¼ˆæˆ–è€…å®éªŒå®¤ï¼‰ç”µè„‘éšæ—¶åŒæ­¥èµ„æ–™</li>
<li>GitHubã€Gitee ç§æœ‰ä»“åº“éƒ½æ˜¯é™æµçš„ï¼Œæ–‡ä»¶ä¸€æ—¦å¤šäº†ï¼Œæˆ–è€…æœ‰å›¾ç‰‡æ–‡ä»¶ï¼Œ<code>git pull</code> çš„æ—¶å€™åŠå¤©æ‹‰ä¸ä¸‹æ¥</li>
<li>ä¿å­˜ä¸€äº›éšç§æ–‡ä»¶</li>
</ul>
</div>
<h2>å¼€å§‹æ­å»º</h2>
<ul>
<li>æœåŠ¡å™¨ï¼šcentos7.9</li>
<li>æœ¬åœ°ç”µè„‘: Windows10</li>
</ul>
<p>å¦‚æœæœåŠ¡å™¨æ²¡è£… git å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token function">git</span>
</code></pre></div><h2>åˆ›å»º git ç”¨æˆ·</h2>
<p>åˆ›å»ºä¸€ä¸ª Git çš„ Linux è´¦æˆ·ï¼Œè¿™ä¸ªè´¦æˆ·åªåš Git ç§æœçš„æ“ä½œï¼Œä¹‹åå°±è¦è®¾ç½® Linux Git è´¦æˆ·çš„å¯†ç ï¼Œä½†ç”±äºæˆ‘ä¹‹å‰å·²ç» ï¼Œå› æ­¤ä¸ç”¨è®¾ç½®å¯†ç ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>adduser <span class="token function">git</span>
</code></pre></div><p><strong>åé¢æ‰€æœ‰çš„æ“ä½œéƒ½åœ¨ git ç”¨æˆ·ä¸‹è¿›è¡Œï¼š</strong></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@instance-5fcyjde7 ~<span class="token punctuation">]</span>su - <span class="token function">git</span>
</code></pre></div><p>çœ‹ä¸€ä¸‹è‡ªå·±æ‰€åœ¨çš„ç›®å½•ï¼Œæ˜¯ä¸æ˜¯åœ¨ git ç›®å½•ä¸‹é¢ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>git@instance-5fcyjde7 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">pwd</span>
/home/git
</code></pre></div><h2>æœåŠ¡å™¨ç«¯å¯†é’¥ç®¡ç†</h2>
<p>åˆ›å»º <code>.ssh</code> ç›®å½•ï¼Œå¦‚æœ <code>.ssh</code> å·²ç»å­˜åœ¨äº†ï¼Œå¯ä»¥å¿½ç•¥è¿™ä¸€é¡¹ã€‚æ–¹ä¾¿æ¯æ¬¡æ“ä½œ Git ä»“åº“çš„æ—¶å€™ä¸ç”¨å†å»è¾“å…¥å¯†ç ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/
<span class="token function">mkdir</span> .ssh
</code></pre></div><p>è¿›å…¥ <code>.ssh</code> æ–‡ä»¶ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª <code>authorized_keys</code> æ–‡ä»¶ï¼Œå¹¶ç»™ <code>authorized_keys</code> æ–‡ä»¶è®¾ç½®æƒé™ã€‚è¿™ä¸ªæ–‡ä»¶ç”¨æ¥å­˜æ”¾å®¢æˆ·ç«¯çš„å…¬é’¥ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">touch</span> authorized_keys
<span class="token function">chmod</span> <span class="token number">700</span> /home/git/.ssh
<span class="token function">chmod</span> <span class="token number">600</span> /home/git/.ssh/authorized_keys
</code></pre></div><p>æ¥ä¸‹æ¥è¦æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥æ”¾åœ¨ Git æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬å†å›åˆ°å®¢æˆ·ç«¯ï¼Œåˆ›å»ºä¸€ä¸ªå…¬é’¥ã€‚</p>
<p>åœ¨æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œæœ‰å…¬é’¥å’Œç§é’¥ã€‚ä¸¤ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯ï¼š<code>id_rsa</code> å’Œ <code>id_rsa.pub</code>ã€‚</p>
<p>å¦‚æœæ˜¯ Windows ç³»ç»Ÿå…¬é’¥ç§é’¥çš„ç›®å½•åœ¨ <code>C:\Users\ç”¨æˆ·å.ssh</code> ä¸‹ã€‚</p>
<p>å¦‚æœæ˜¯ Mac æˆ–è€… Linuxï¼Œ å…¬é’¥å’Œç§é’¥çš„ç›®å½•è¿™é‡Œ <code>cd ~/.ssh/</code>ï¼Œ å¦‚æœå‘ç°è‡ªå·±çš„ç”µè„‘ä¸Šæ²¡æœ‰å…¬é’¥ç§é’¥ï¼Œé‚£å°±è‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚</p>
<p>åˆ›å»ºå¯†é’¥çš„å‘½ä»¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa
</code></pre></div><p>åˆ›å»ºå¯†é’¥çš„è¿‡ç¨‹ä¸­ï¼Œä¸€è·¯ç‚¹å‡»å›è½¦å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å¡«ä»»ä½•ä¸œè¥¿ã€‚æŠŠåˆšåˆšç”Ÿæˆçš„ <code>id_rsa.pub</code>ï¼Œæ‹·è´åˆ° Git æœåŠ¡å™¨çš„ <code>/home/git/.ssh/</code> ç›®å½•ã€‚</p>
<p>åœ¨ Git æœåŠ¡å™¨ä¸Šï¼Œå°†å…¬é’¥æ·»åŠ åˆ° <code>authorized_keys</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /home/git/.ssh/
<span class="token function">cat</span> id_rsa.pub <span class="token operator">&gt;&gt;</span> authorized_keys
</code></pre></div><p>åœ¨å®¢æˆ·ç›´æ¥ç™»å½• Git æœåŠ¡å™¨ï¼ŒéªŒè¯æ˜¯å¦é…ç½®æˆåŠŸï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ssh</span> git@git æœåŠ¡å™¨ <span class="token function">ip</span>
<span class="token comment"># ä¾‹å¦‚ï¼š</span>
<span class="token function">ssh</span> git@127.0.0.1
</code></pre></div><p>å¦‚æœå¯ä»¥å…å¯†ç™»å½•ï¼Œé‚£å°±è¯´æ˜æœåŠ¡å™¨ç«¯å¯†é’¥é…ç½®æˆåŠŸäº†ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘è¿˜å‡ºç°äº†ä¸€ä¸ªé”™è¯¯ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED<span class="token operator">!</span>     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY<span class="token operator">!</span>
Someone could be eavesdropping on you right now <span class="token punctuation">(</span>man-in-the-middle attack<span class="token punctuation">)</span><span class="token operator">!</span>
It is also possible that a <span class="token function">host</span> key has just been changed.
The fingerprint <span class="token keyword">for</span> the RSA key sent by the remote <span class="token function">host</span> is
<span class="token number">51</span>:82:00:1c:7e:6f:ac:ac:de:f1:53:08:1c:7d:55:68.
Please contact your system administrator.
Add correct <span class="token function">host</span> key <span class="token keyword">in</span> /Users/isaacalves/.ssh/known_hosts to get rid of this message.
Offending RSA key <span class="token keyword">in</span> /Users/isaacalves/.ssh/known_hosts:12
RSA <span class="token function">host</span> key <span class="token keyword">for</span> <span class="token number">104.131</span>.16.158 has changed and you have requested strict checking.
Host key verification failed.
</code></pre></div><p>å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯å› ä¸ºæˆ‘æ›´æ–°äº† <code>ssh key</code>ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æ— æ•ˆçš„ key å³å¯ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-R</span> <span class="token string">"æœåŠ¡å™¨ ip"</span>
</code></pre></div><h2>æœåŠ¡å™¨ç«¯éƒ¨ç½² Git ä»“åº“</h2>
<p>æ¥ä¸‹æ¥åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½² git ä»“åº“ã€‚</p>
<p>ç™»å½•åˆ° Git æœåŠ¡å™¨ç«¯ï¼Œåˆ‡æ¢ä¸º Git è´¦æˆ·ã€‚å¦‚æœæ˜¯ root è´¦æˆ·åˆ‡æ¢æˆ Git è´¦æˆ·ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">su</span> - <span class="token function">git</span>
</code></pre></div><p>å¦‚æœæ˜¯å…¶ä»–è´¦æˆ·åˆ‡æ¢ä¸º Git è´¦æˆ·ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> - <span class="token function">git</span>
</code></pre></div><p>è¿›å…¥ git ç›®å½•ä¸‹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/git
</code></pre></div><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åä¸º <code>world.git</code>ï¼Œ<code>.git</code> åç¼€è¡¨æ˜è¿™æ˜¯ä¸€ä¸ª git ä»“åº“è€Œä¸æ˜¯åˆ«çš„ä»€ä¹ˆæ–‡ä»¶ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>git@localhost git<span class="token punctuation">]</span><span class="token comment"># mkdir world.git</span>
<span class="token punctuation">[</span>git@localhost git<span class="token punctuation">]</span><span class="token comment"># cd word.git</span>
</code></pre></div><p>åˆå§‹åŒ– word ä»“åº“ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> init <span class="token parameter variable">--bare</span>
</code></pre></div><p>å¦‚æœæƒ³åˆ›å»ºå¤šä¸ªä»“åº“ï¼Œå°±åœ¨ <strong>git</strong> ç”¨æˆ·ä¸‹çš„ <code>~/git</code> ç›®å½•åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹å¹¶<strong>åˆå§‹åŒ–</strong>å°±å¯ä»¥äº†ã€‚</p>
<p>ç°åœ¨æœåŠ¡ç«¯çš„ Git ä»“åº“å°±éƒ¨ç½²å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±èƒ½åƒå¹³æ—¶ä½¿ç”¨ github ä¸€æ ·ä½¿ç”¨è¿™ä¸ª Git ç§æœäº†ã€‚</p>
<h2>å®¢æˆ·ç«¯è¿æ¥è¿œç¨‹ä»“åº“</h2>
<p>åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä¹Ÿå«åš <code>world</code>ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å…¶å®è¿™é‡Œå‘½åæ˜¯éšæ„çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ºäº†å’Œ Git æœåŠ¡ç«¯çš„ä»“åº“åç§°ä¿æŒåŒæ­¥ã€‚è¿™æ ·æ›´ç›´è§‚æˆ‘ä»¬æ“ä½œçš„æ˜¯å“ªä¸€ä¸ªä»“åº“ã€‚</p>
</div>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> world
<span class="token builtin class-name">cd</span> world
</code></pre></div><p>è¿›å…¥ <code>world</code> æ–‡ä»¶ï¼Œå¹¶åˆå§‹åŒ–æ“ä½œï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> world
<span class="token function">git</span> init
</code></pre></div><p>åœ¨ <code>world</code> ç›®å½•ä¸Šåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œå¹¶ä¸”å°†å…¶æ·»åŠ åˆ° Git ç§æœä¸­ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">touch</span> <span class="token builtin class-name">test</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">test</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">"test git server"</span>
</code></pre></div><p>å°†æœ¬åœ°ä»“åº“å’Œè¿œç«¯ä»“åº“åŒæ­¥ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> remote <span class="token function">add</span> origin git@æœåŠ¡å™¨ ip:world.git
<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master
</code></pre></div><p>æ­¤æ—¶è¿™ä¸ª <code>test</code> æµ‹è¯•æ–‡ä»¶å°±å·²ç»æäº¤åˆ°æˆ‘ä»¬çš„ Git è¿œç«¯ç§æœä¸Šäº†ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://mp.weixin.qq.com/s/8m5zK29sX0D9NM_YB8KDNQ" target="_blank" rel="noopener noreferrer">æ‰‹æŠŠæ‰‹æ¥æ­å»º Git ç§æœï¼</a></li>
<li><a href="https://www.digitalocean.com/community/questions/warning-remote-host-identification-has-changed" target="_blank" rel="noopener noreferrer">WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED</a></li>
</ul>
]]></content>
    <category term="linux"/>
    <published>2021-05-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">é…ç½®å®å¡”é¢æ¿</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/03-configure-bt.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/03-configure-bt.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æœåŠ¡å™¨ç³»ç»Ÿï¼šcentos 7.9ã€‚</p>
<p>å…¶ä»–ç³»ç»Ÿå¯ä»¥å‚ç…§ <a href="https://www.bt.cn/bbs/thread-19376-1-1.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘</a> è¿›è¡Œæ­å»ºã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ä¸€é”®é…ç½®éƒ¨ç½²ç¯å¢ƒï¼Œå› æ­¤é€‰æ‹©å®å¡”é¢æ¿ã€‚</p>
</div>
<h2>å®‰è£…å®å¡”é¢æ¿</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh http://download.bt.cn/install/install_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> install.sh
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æœåŠ¡å™¨ç³»ç»Ÿï¼šcentos 7.9ã€‚</p>
<p>å…¶ä»–ç³»ç»Ÿå¯ä»¥å‚ç…§ <a href="https://www.bt.cn/bbs/thread-19376-1-1.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘</a> è¿›è¡Œæ­å»ºã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ä¸€é”®é…ç½®éƒ¨ç½²ç¯å¢ƒï¼Œå› æ­¤é€‰æ‹©å®å¡”é¢æ¿ã€‚</p>
</div>
<h2>å®‰è£…å®å¡”é¢æ¿</h2>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> <span class="token parameter variable">-O</span> install.sh http://download.bt.cn/install/install_6.0.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sh</span> install.sh
</code></pre></div><p>å¤§æ¦‚è¿‡ä¸¤åˆ†é’Ÿå³å¯å®‰è£…æˆåŠŸï¼Œå¤åˆ¶å¤–ç½‘é¢æ¿åœ°å€åˆ°æµè§ˆå™¨æ‰“å¼€ï¼Œè¾“å…¥ä¸‹é¢çš„ <code>username</code> å’Œ <code>password</code>ã€‚è¿›å»ä¹‹åä¼šå¼¹å‡º <code>æ¨èå®‰è£…å¥—ä»¶</code>ï¼Œå› ä¸ºåªè¦éƒ¨ç½² <code>vuepress</code>ï¼Œ å› æ­¤è¿™é‡Œå®‰è£… <code>nginx</code> å°±å¥½ã€‚é€‰æ‹©ç¼–è¯‘å®‰è£…ï¼Œæ›´åŠ ç¨³å®šã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-install-bt.png" alt="step1-install-bt" tabindex="0" loading="lazy"><figcaption>step1-install-bt</figcaption></figure>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step2-install-nginx.png" alt="step2-install-nginx" tabindex="0" loading="lazy"><figcaption>step2-install-nginx</figcaption></figure>
<p>å¦‚æœä¹‹åå¿˜è®°ç”¨æˆ·åå’Œå¯†ç ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥æ‰¾ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@xxxx ~<span class="token punctuation">]</span><span class="token comment"># bt</span>
<span class="token punctuation">[</span>root@xxxx ~<span class="token punctuation">]</span><span class="token comment"># 14</span>
</code></pre></div><h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://www.bt.cn/bbs/thread-19376-1-1.html" target="_blank" rel="noopener noreferrer">å®å¡” Linux é¢æ¿å®‰è£…æ•™ç¨‹</a></li>
<li><a href="https://www.bilibili.com/video/BV12T4y1N7T9?from=search&amp;seid=2220018938681661072&amp;spm_id_from=333.337.0.0" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘æœåŠ¡å™¨ ECS æ–°æ‰‹æ­å»ºç½‘ç«™è§†é¢‘æ•™ç¨‹ï¼ˆè¯¦ç»†ç‰ˆï¼‰</a></li>
</ul>
]]></content>
    <category term="linux"/>
    <published>2021-05-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">è‡ªåŠ¨éƒ¨ç½² Vuepress åˆ°æœåŠ¡å™¨</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/04-automated-deployment.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/04-automated-deployment.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æœåŠ¡å™¨ï¼šcentos 7.9</p>
<p>æœ¬åœ°ç”µè„‘ï¼šWindows 10</p>
</div>
<h2>æœåŠ¡å™¨ç«¯</h2>
<h3>é…ç½® nginx</h3>
<p>ç™»å½•å®å¡”é¢æ¿ï¼Œå¯ä»¥å‚è€ƒ ã€‚ç‚¹å‡»å·¦ä¾§ç½‘ç«™ -&gt; æ·»åŠ ç«™ç‚¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-add-site.png" alt="step1-add-site" tabindex="0" loading="lazy"><figcaption>step1-add-site</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æœåŠ¡å™¨ï¼šcentos 7.9</p>
<p>æœ¬åœ°ç”µè„‘ï¼šWindows 10</p>
</div>
<h2>æœåŠ¡å™¨ç«¯</h2>
<h3>é…ç½® nginx</h3>
<p>ç™»å½•å®å¡”é¢æ¿ï¼Œå¯ä»¥å‚è€ƒ ã€‚ç‚¹å‡»å·¦ä¾§ç½‘ç«™ -&gt; æ·»åŠ ç«™ç‚¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step1-add-site.png" alt="step1-add-site" tabindex="0" loading="lazy"><figcaption>step1-add-site</figcaption></figure>
<p>æ–°å¢ä¹‹åï¼Œç‚¹å‡»è®¾ç½® -&gt; é…ç½®æ–‡ä»¶ã€‚è¿™ä¸‰é¡¹æŒ‰è‡ªå·±çš„æƒ…å†µé…ç½®ï¼Œåœ¨åé¢  ä¸­ä¼šå°† dist æ–‡ä»¶æ¨é€åˆ° <code>root</code> é…ç½®é¡¹è®¾ç½®çš„æ–‡ä»¶å¤¹ä¸‹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step2-nginx-conf.png" alt="step2-nginx-conf" tabindex="0" loading="lazy"><figcaption>step2-nginx-conf</figcaption></figure>
<p>å…ˆæµ‹è¯•ä¸‹ nginx æœ‰æ²¡æœ‰é…ç½®æˆåŠŸï¼Œæœ¬åœ°æ‰“åŒ…æ–‡ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> build
</code></pre></div><p>ç„¶åå°†ç”Ÿæˆçš„ <code>dist</code> æ–‡ä»¶é‡Œçš„å†…å®¹å¤åˆ¶åˆ°åˆšæ‰è®¾ç½®çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚</p>
<p>æ¥ç€è¾“å…¥ <code>http://xxx.xxx.xxx.xxx:ç«¯å£å·</code>ï¼Œå°±èƒ½è®¿é—®æˆåŠŸäº†ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ°å€å¾—ç”¨ http åè®®ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰é…ç½® ssl è¯ä¹¦ã€‚</p>
</div>
<h3>é…ç½® git ä»“åº“</h3>
<p>åœ¨  ä¸­å·²ç»æ­å»ºå¥½äº† git ç§æœï¼Œå› æ­¤åªéœ€è¦åˆå§‹åŒ– <code>vuepress.git</code> ä»“åº“å³å¯ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /home/git
<span class="token function">mkdir</span> vuepress.git
<span class="token builtin class-name">cd</span> vuepress.git
<span class="token function">git</span> init <span class="token parameter variable">--bare</span> vuepress.git
</code></pre></div><h3>é…ç½® hooks</h3>
<p>å…ˆåˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ˆ<code>ctrl + d</code>ï¼‰ï¼Œåœ¨ home æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶å­˜æ”¾ dist æ–‡ä»¶å¤¹çš„åœ°æ–¹ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æˆ‘è¿™é‡Œé€‰æ‹©å­˜æ”¾åˆ° home æ–‡ä»¶å¤¹ä¸‹ï¼Œä½†æ˜¯ git ç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™çš„ï¼Œå› æ­¤åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥å­˜æ”¾åˆ°å…¶ä»–æ–‡ä»¶å¤¹ã€‚</p>
</div>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /home
<span class="token function">mkdir</span> tmp
<span class="token builtin class-name">cd</span> tmp
<span class="token function">mkdir</span> vuepress
</code></pre></div><p>æ¥ç€å°†æ–‡ä»¶çš„æ‰€æœ‰æƒæ¢æˆ gitï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> git:git <span class="token parameter variable">-R</span> vuepress
</code></pre></div><p>ç„¶åï¼Œæœ‰ä¸€ä¸ªå…³é”®çš„åœ°æ–¹ï¼Œè¦å°† <code>/www/wwwroot</code> çš„æ‰€æœ‰æƒæ¢æˆ gitï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> git:git /www/wwwroot
</code></pre></div><p>åšå¥½è¿™äº›å‡†å¤‡ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹é…ç½® <code>hooks</code> äº†ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /home/git/vuepress.git/hooks
<span class="token comment"># é€šè¿‡ copy æ–°å»º post-update æ–‡ä»¶</span>
<span class="token function">cp</span> post-update.sample post-update
<span class="token function">vim</span> post-update
</code></pre></div><p>æ¥ç€å°†ä¸‹é¢ä»£ç å¤åˆ¶è¿›å»ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">"auto deploy start ==================================="</span>
<span class="token builtin class-name">unset</span> GIT_DIR

<span class="token comment"># é¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="token assign-left variable">PUBLIC_WWW</span><span class="token operator">=</span>/www/wwwroot/vuepress
<span class="token comment"># git ä»“åº“æ–‡ä»¶å¤¹</span>
<span class="token assign-left variable">GIT_REPO</span><span class="token operator">=</span>/home/git/vuepress.git
<span class="token comment"># ä¸´æ—¶æ–‡ä»¶å¤¹</span>
<span class="token assign-left variable">TMP_GIT_CLONE</span><span class="token operator">=</span>/home/tmp/vuepress

<span class="token comment"># ç§»é™¤ä¸´æ—¶æ–‡ä»¶å¤¹</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${TMP_GIT_CLONE}</span>
<span class="token comment"># å…‹éš† git ä»“åº“åˆ°ä¸´æ—¶æ–‡ä»¶å¤¹</span>
<span class="token function">git</span> clone <span class="token variable">$GIT_REPO</span> <span class="token variable">$TMP_GIT_CLONE</span>
<span class="token comment"># ç§»é™¤é¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="token comment"># å®å¡”ä¸ºäº†å®‰å…¨ï¼Œä¸ºè‡ªåŠ¨åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å¢ .user.ini æ–‡ä»¶</span>
<span class="token comment"># éœ€è¦å…ˆå…³é—­è¿™ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æ‰èƒ½åˆ é™¤é¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${PUBLIC_WWW}</span>
chattr <span class="token parameter variable">-i</span> .user.ini
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${PUBLIC_WWW}</span>
<span class="token comment"># å°†ä¸´æ—¶æ–‡ä»¶å¤¹å¤åˆ¶åˆ°é¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="token function">cp</span> <span class="token parameter variable">-rf</span> <span class="token variable">${TMP_GIT_CLONE}</span> <span class="token variable">${PUBLIC_WWW}</span>

<span class="token builtin class-name">echo</span> <span class="token string">"auto deploy end ===================================="</span>
</code></pre></div><p>ç°åœ¨æœåŠ¡å™¨ç«¯çš„å‡†å¤‡å·¥ä½œå·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æœ¬åœ°ç”µè„‘çš„é…ç½®ã€‚</p>
<h2>æœ¬åœ°ç”µè„‘</h2>
<p>åœ¨æœ¬åœ°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º <code>deploy.sh</code> è„šæœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token comment"># ç¡®ä¿è„šæœ¬æŠ›å‡ºé‡åˆ°çš„é”™è¯¯</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-e</span>

<span class="token comment"># ç”Ÿæˆé™æ€æ–‡ä»¶</span>
<span class="token function">yarn</span> build

<span class="token comment"># è¿›å…¥ç”Ÿæˆçš„æ–‡ä»¶å¤¹</span>
<span class="token builtin class-name">cd</span> docs/.vuepress/dist

<span class="token comment"># åˆå§‹åŒ– git ä»“åº“ï¼Œå¹¶æäº¤ä¿®æ”¹</span>
<span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'deploy'</span>

<span class="token comment"># å‘å¸ƒåˆ° git ç§æœï¼Œ -f å¼ºåˆ¶è¦†ç›–</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin git@119.23.65.118:/home/git/vuepress.git
<span class="token function">git</span> push <span class="token parameter variable">-f</span> git@119.23.65.118:/home/git/vuepress.git master

<span class="token builtin class-name">cd</span> -
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>äº†è§£æ›´å¤š git å‘½ä»¤ï¼Œå¯ä»¥æŸ¥è¯¢<a href="https://git-scm.com/docs" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
</div>
<h2>æµ‹è¯•</h2>
<p>vscode ç»ˆç«¯ä¸­è¾“å…¥ <code>sh depoly.sh</code>ï¼ŒæŠ¥é”™ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sh</span> <span class="token builtin class-name">:</span> æ— æ³•å°†â€œshâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚
è¯·æ£€æŸ¥åç§°çš„æ‹¼å†™ï¼Œå¦‚æœåŒ…æ‹¬è·¯å¾„ï¼Œè¯·ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚
</code></pre></div><p>äº†è§£åˆ° windows ä¸Šå¯ä»¥ä½¿ç”¨ git bash æ‰§è¡Œ shell è„šæœ¬ï¼Œä½†æˆ‘å¯ä¸æƒ³æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™éƒ½æ‰“å¼€ git bashï¼Œå½“ç„¶å¾—æ‰¾å¦‚ä½•åœ¨ vscode ä¸­æ‰§è¡Œ shell è„šæœ¬çš„åŠæ³•ã€‚</p>
<ol>
<li>é¦–å…ˆå¾—åœ¨ vscode ä¸­å®‰è£… code runnerï¼Œä¹‹å‰ä¸€ç›´ç”¨å®ƒæ¥è°ƒè¯•åŠ›æ‰£ä¸Šçš„é¢˜ï¼Œå·²ç»å®‰è£…è¿‡äº†ã€‚</li>
<li>å®‰è£… git bashï¼Œè¿™ä¸ªä¸ç”¨è¯´ï¼Œå®‰è£… git çš„æ—¶å€™å°±å·²ç»æœ‰äº†</li>
<li>é…ç½® bash ç¯å¢ƒï¼Œæ‰¾åˆ° bash.exe çš„å®‰è£…ç›®å½•ï¼Œå°†å®ƒçš„ä½ç½®æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ã€‚</li>
<li>é…ç½® code runnerï¼šæ–‡ä»¶ -&gt; é¦–é€‰é¡¹ -&gt; è®¾ç½® -&gt; æœç´¢ code runner</li>
<li>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ <code>bash</code> åˆ‡æ¢åˆ° bash ç¯å¢ƒï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‰è§’å½¢å³å¯è¿è¡Œã€‚</li>
</ol>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step3-code-runner.png" alt="step3-code-runner" tabindex="0" loading="lazy"><figcaption>step3-code-runner</figcaption></figure>
<p>ç°åœ¨éšä¾¿æ›´æ–°ç‚¹å†…å®¹ï¼Œå¹¶æ‰§è¡Œ <code>deploy.sh</code> è„šæœ¬ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/step4-complete.png" alt="step4-complete" tabindex="0" loading="lazy"><figcaption>step4-complete</figcaption></figure>
<p>å†æ¬¡è®¿é—® <code>http://xxx.xxx.xxx.xxx:ç«¯å£å·</code> å‘ç°å·²ç»æ›´æ–°äº†ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="http://chanwingwah.info/article/604eb2273c8ec67668f6fd41" target="_blank" rel="noopener noreferrer">åªéœ€ä¸‰æ­¥ï¼Œ éƒ¨ç½² Vuepress å¹¶å®ç°æœ¬åœ°ä¸€è¡Œå‘½ä»¤æ›´æ–°éƒ¨ç½²åˆ°æœåŠ¡å™¨</a></li>
<li><a href="https://www.imqianduan.com/git-svn/335.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ git hooks(post-receive)å®ç°ç®€å•çš„è¿œç¨‹è‡ªåŠ¨éƒ¨ç½²</a></li>
<li><a href="https://hjxlog.com/posts/20191130a1.html#7-%E9%85%8D%E7%BD%AENginx" target="_blank" rel="noopener noreferrer">å°† Hexo éƒ¨ç½²åˆ°é˜¿é‡Œäº‘è½»é‡æœåŠ¡å™¨ï¼ˆä¿å§†çº§æ•™ç¨‹ï¼‰</a></li>
<li><a href="https://www.cnblogs.com/yongdaimi/p/15247771.html" target="_blank" rel="noopener noreferrer">VSCode: Windows ä¸‹é…ç½® VSCode è¿è¡Œ shell</a></li>
</ul>
]]></content>
    <category term="linux"/>
    <published>2021-05-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">centos å®‰è£… docker</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/linux/practice/05-install-docker.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/linux/practice/05-install-docker.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>éœ€è¦ä¿è¯ centos ç‰ˆæœ¬ï¼š</p>
<ul>
<li>centos 7</li>
<li>centos 8</li>
<li>centos 9</li>
</ul>
</div>
<h2>å¸è½½æ—§ç‰ˆæœ¬</h2>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å¿…é¡»å…ˆå®Œæˆè¿™ä¸€æ­¥ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸å¯é¢„è§çš„é”™è¯¯ã€‚</p>
</div>
<p>è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼š</p>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>éœ€è¦ä¿è¯ centos ç‰ˆæœ¬ï¼š</p>
<ul>
<li>centos 7</li>
<li>centos 8</li>
<li>centos 9</li>
</ul>
</div>
<h2>å¸è½½æ—§ç‰ˆæœ¬</h2>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å¿…é¡»å…ˆå®Œæˆè¿™ä¸€æ­¥ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸å¯é¢„è§çš„é”™è¯¯ã€‚</p>
</div>
<p>è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
</code></pre></div><p>å‡ºç°æˆåŠŸæç¤ºåå³å¯ã€‚</p>
<h2>ä½¿ç”¨ rpm repository å®‰è£…</h2>
<h3>è®¾ç½®é•œåƒ</h3>
<p>å®‰è£… <code>yum-utils</code> è½¯ä»¶åŒ…ï¼ˆæä¾› <code>yum-config-manager</code> å®ç”¨å·¥å…·ï¼‰å¹¶è®¾ç½®è½¯ä»¶æºã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
<span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div><h3>å®‰è£… docker engin</h3>
<ol>
<li>å®‰è£…æœ€æ–°ç‰ˆï¼š</li>
</ol>

<ol start="2">
<li>å¯åŠ¨ docker</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre></div><ol start="3">
<li>è¿è¡Œ <code>hello-world</code> æ˜ åƒï¼ŒéªŒè¯ Docker Engine å®‰è£…æ˜¯å¦æˆåŠŸã€‚</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre></div><p>è¿™æ¡å‘½ä»¤ä¼šä¸‹è½½ä¸€ä¸ªæµ‹è¯•é•œåƒï¼Œå¹¶åœ¨ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡Œã€‚å½“å®¹å™¨è¿è¡Œæ—¶ï¼Œå®ƒä¼šæ‰“å°ä¸€æ¡ç¡®è®¤ä¿¡æ¯å¹¶é€€å‡ºã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å¯ä»¥ä¸å»æ‰§è¡Œï¼Œåªè¦å®‰è£…è¿‡ç¨‹ä¸æŠ¥é”™å°±è¡¨æ˜æˆåŠŸã€‚</p>
</div>
]]></content>
    <category term="linux"/>
    <published>2024-01-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç¾åŒ– Windows ç»ˆç«¯</title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/operating-system/02-windows-terminal-beauty.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/operating-system/02-windows-terminal-beauty.html"/>
    <updated>2025-01-11T10:21:01.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ Windows ä¸Šçš„å¼€å‘ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨ç»ˆç«¯æ–¹é¢ï¼Œç›¸è¾ƒäº macOSï¼Œå¸¸å¸¸è®©äººè§‰å¾—å·®äº†ä¸€ç‚¹ã€Œå‘³é“ã€ã€‚macOS ä¸Šçš„ iTerm2 é…åˆ oh-my-zshï¼Œé¢œå€¼é«˜ã€åŠŸèƒ½å¼ºå¤§ï¼Œè®©å¼€å‘è€…å¾—ä»¥æ‹¥æœ‰æµç•…ä¸”ç¾è§‚çš„å·¥ä½œä½“éªŒã€‚è€Œ Windows é»˜è®¤çš„å‘½ä»¤æç¤ºç¬¦ï¼ˆcmdï¼‰å’Œ PowerShellï¼Œå¤–è§‚ç®€å•ï¼ŒåŠŸèƒ½ä¹Ÿä¸å¤Ÿçµæ´»ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œéšç€ <a href="https://github.com/microsoft/terminal" target="_blank" rel="noopener noreferrer">Windows Terminal</a> çš„æ¨å‡ºï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥åœ¨ Windows ä¸Šè·å¾—æ›´ç°ä»£çš„ç»ˆç«¯ä½“éªŒã€‚Windows Terminal æ‹¥æœ‰æ ‡ç­¾é¡µæ”¯æŒã€å¼ºå¤§çš„é…è‰²å’Œå­—ä½“è‡ªå®šä¹‰åŠŸèƒ½ï¼Œé€šè¿‡é›†æˆ <a href="https://github.com/JanDeDobbeleer/oh-my-posh" target="_blank" rel="noopener noreferrer">oh-my-posh</a> è¿›è¡Œç¾åŒ–ã€å®‰è£…æ”¯æŒä¸°å¯Œç¬¦å·çš„å­—ä½“ã€ä»¥åŠé…ç½®ä¸€äº›å¸¸ç”¨çš„å¼€å‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è®© Windows ç»ˆç«¯ç„•ç„¶ä¸€æ–°ï¼Œè¾¾åˆ°é«˜é¢œå€¼å’Œé«˜æ•ˆå…¼å…·çš„æ•ˆæœã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ Windows ä¸Šçš„å¼€å‘ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨ç»ˆç«¯æ–¹é¢ï¼Œç›¸è¾ƒäº macOSï¼Œå¸¸å¸¸è®©äººè§‰å¾—å·®äº†ä¸€ç‚¹ã€Œå‘³é“ã€ã€‚macOS ä¸Šçš„ iTerm2 é…åˆ oh-my-zshï¼Œé¢œå€¼é«˜ã€åŠŸèƒ½å¼ºå¤§ï¼Œè®©å¼€å‘è€…å¾—ä»¥æ‹¥æœ‰æµç•…ä¸”ç¾è§‚çš„å·¥ä½œä½“éªŒã€‚è€Œ Windows é»˜è®¤çš„å‘½ä»¤æç¤ºç¬¦ï¼ˆcmdï¼‰å’Œ PowerShellï¼Œå¤–è§‚ç®€å•ï¼ŒåŠŸèƒ½ä¹Ÿä¸å¤Ÿçµæ´»ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œéšç€ <a href="https://github.com/microsoft/terminal" target="_blank" rel="noopener noreferrer">Windows Terminal</a> çš„æ¨å‡ºï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥åœ¨ Windows ä¸Šè·å¾—æ›´ç°ä»£çš„ç»ˆç«¯ä½“éªŒã€‚Windows Terminal æ‹¥æœ‰æ ‡ç­¾é¡µæ”¯æŒã€å¼ºå¤§çš„é…è‰²å’Œå­—ä½“è‡ªå®šä¹‰åŠŸèƒ½ï¼Œé€šè¿‡é›†æˆ <a href="https://github.com/JanDeDobbeleer/oh-my-posh" target="_blank" rel="noopener noreferrer">oh-my-posh</a> è¿›è¡Œç¾åŒ–ã€å®‰è£…æ”¯æŒä¸°å¯Œç¬¦å·çš„å­—ä½“ã€ä»¥åŠé…ç½®ä¸€äº›å¸¸ç”¨çš„å¼€å‘å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è®© Windows ç»ˆç«¯ç„•ç„¶ä¸€æ–°ï¼Œè¾¾åˆ°é«˜é¢œå€¼å’Œé«˜æ•ˆå…¼å…·çš„æ•ˆæœã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20250111181530.png" alt="æœ€ç»ˆæ•ˆæœ" tabindex="0" loading="lazy"><figcaption>æœ€ç»ˆæ•ˆæœ</figcaption></figure>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥å°† Windows ç»ˆç«¯æ‰“é€ æˆä¸€ä¸ªé«˜æ•ˆã€å¥½çœ‹ä¸”ç¬¦åˆå¼€å‘è€…ä¹ æƒ¯çš„ç¯å¢ƒï¼Œä¸ºå¹³æ—¶çš„å¼€å‘å·¥ä½œå¢æ·»ä¸€ä»½æ„‰æ‚¦å’Œèˆ’é€‚ã€‚</p>
<h2>å®‰è£… Windows Terminal</h2>
<p>Windows Terminal æ˜¯å¾®è½¯å®˜æ–¹æ¨å‡ºçš„ç°ä»£ç»ˆç«¯å·¥å…·ï¼Œæ”¯æŒå¤šæ ‡ç­¾é¡µã€GPU åŠ é€Ÿã€Unicode å’Œ Emoji æ˜¾ç¤ºç­‰ç‰¹æ€§ï¼Œæ¨èç›´æ¥åœ¨ <a href="https://apps.microsoft.com/detail/9n0dx20hk701?rtc=1&amp;hl=zh-cn&amp;gl=CN" target="_blank" rel="noopener noreferrer">å¾®è½¯å•†åº—</a> ç›´æ¥å®‰è£… Windows Terminalã€‚</p>
<p>ç„¶åè®¾ç½®ä¸€ä¸‹é€æ˜åº¦ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ 80%ï¼Œå¹¶æ‰“å¼€äºšå…‹åŠ›æ•ˆæœï¼Œè¿™ä¼šè®©ç»ˆç«¯è·Ÿéšåº•è‰²å¢åŠ é€æ˜æ¨¡ç³Šæ•ˆæœã€‚</p>
<h2>å‡çº§ PowerShell 7.x</h2>
<p>Windows 10 æˆ– Windows 11 é»˜è®¤çš„ PowerShell ç‰ˆæœ¬è¾ƒä½ï¼Œæ— æ³•ä½¿ç”¨æ›´å¤šæ–°ç‰¹æ€§ï¼Œæ¨èå‡çº§åˆ° PowerShell 7.xï¼ŒPowerShell 7.x æ˜¯è·¨å¹³å°çš„ï¼Œå¹¶ä¸”ä¿®å¤äº†å¾ˆå¤š PowerShell 5.1 ä¸­çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>å®‰è£…æ–¹å¼ï¼š</p>
<ul>
<li>è®¿é—® <a href="https://github.com/PowerShell/PowerShell/releases" target="_blank" rel="noopener noreferrer">PowerShell GitHub Release é¡µé¢</a> ä¸‹è½½é€‚åˆä½ ç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚</li>
<li>æˆ–è€…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ Windows åŒ…ç®¡ç†å™¨ å®‰è£…ï¼ˆéœ€è¦ Windows 10 1809 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ï¼š<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>winget install <span class="token operator">--</span>id Microsoft<span class="token punctuation">.</span>Powershell <span class="token operator">--</span>source winget
</code></pre></div></li>
<li>å¦‚æœä½ ä½¿ç”¨ Chocolatey åŒ…ç®¡ç†å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>choco install powershell-core
</code></pre></div></li>
</ul>
<p>å®‰è£…å®Œåï¼Œé‡æ–°å¯åŠ¨ Windows Terminal ä»¥ä½¿ç”¨ PowerShell 7ã€‚</p>
<h2>å®‰è£… oh-my-posh</h2>
<p><a href="https://ohmyposh.dev/docs/installation/windows" target="_blank" rel="noopener noreferrer">å®‰è£… oh-my-posh</a> å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>winget install JanDeDobbeleer<span class="token punctuation">.</span>OhMyPosh <span class="token operator">-</span>s winget
</code></pre></div><p>è¿™ä¼šå®‰è£… <code>oh-my-posh.exe</code> å’Œ oh-my-posh çš„æ‰€æœ‰æœ€æ–° <a href="https://ohmyposh.dev/docs/themes" target="_blank" rel="noopener noreferrer">ä¸»é¢˜</a>ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¸ºäº†é‡æ–°åŠ è½½ PATHï¼Œå»ºè®®é‡æ–°å¯åŠ¨ç»ˆç«¯ã€‚å¦‚æœ oh-my-posh æœªè¢«è¯†åˆ«ä¸ºå‘½ä»¤ï¼Œå¯ä»¥é‡æ–°è¿è¡Œå®‰è£…ç¨‹åºï¼Œæˆ–æ‰‹åŠ¨å°†å…¶æ·»åŠ åˆ° PATHã€‚ ä¾‹å¦‚ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token variable">$env</span>:PATH <span class="token operator">+=</span> <span class="token string">";C:\Users\&lt;username&gt;\AppData\Local\Programs\oh-my-posh\bin"</span>
</code></pre></div></div>
<p>ä¸ºäº†åœ¨æ‰“å¼€ç»ˆç«¯åè‡ªåŠ¨åŠ è½½ oh-my-poshï¼Œéœ€è¦åœ¨ PowerShell é…ç½®æ–‡ä»¶ <code>$PROFILE</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>oh-my-posh init pwsh <span class="token operator">--</span>config <span class="token string">"<span class="token variable">$env</span>:POSH_THEMES_PATH\jandedobbeleer.omp.json"</span> <span class="token punctuation">|</span> <span class="token function">Invoke-Expression</span>
</code></pre></div><p><code>--config</code> å‚æ•°æŒ‡å®šä¸»é¢˜é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œ<code>$env:POSH_THEMES_PATH</code> æ˜¯ oh-my-posh ä¸»é¢˜æ–‡ä»¶å¤¹è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡ <code>Get-PoshThemes</code> æŸ¥çœ‹æ‰€æœ‰ä¸»é¢˜ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>$PROFILE</code> æ–‡ä»¶ç±»ä¼¼ <code>~/.zshrc</code> æˆ– <code>~/.bashrc</code>ï¼Œä»¥ä¸‹å‘½ä»¤ä¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>notepad <span class="token variable">$PROFILE</span>
</code></pre></div><p>ç¼–è¾‘å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ <code>. $PROFILE</code> é‡æ–°åŠ è½½é…ç½®ã€‚</p>
</div>
<h3>è®¾ç½®å­—ä½“</h3>
<p>oh-my-posh ä½¿ç”¨ <a href="https://www.nerdfonts.com/" target="_blank" rel="noopener noreferrer">Nerd Fonts</a> åšä¸ºè®¾è®¡å­—ä½“ï¼Œå®˜æ–¹æ¨èå®‰è£… <a href="https://www.nerdfonts.com/font-downloads" target="_blank" rel="noopener noreferrer">Meslo Nerd Font</a>ã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº† <a href="https://www.nerdfonts.com/font-downloads" target="_blank" rel="noopener noreferrer">BitstromWera Nerd Font</a>ã€‚</p>
<p>å¯ä»¥åœ¨ <a href="https://www.nerdfonts.com/font-downloads" target="_blank" rel="noopener noreferrer">Nerd Fonts</a> é¡µé¢ä¸‹è½½å’Œé¢„è§ˆå­—ä½“ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ oh-my-posh æä¾›çš„ CLI å®‰è£…ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>oh-my-posh font install
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œéœ€è¦åœ¨ Windows Terminal ä¸­è®¾ç½®å­—ä½“ï¼ŒæŒ‰ <code>CTRL + SHIFT + ,</code> æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œåœ¨ <code>defaults</code> å±æ€§ä¸‹æ·»åŠ ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"profiles"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"defaults"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"font"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"face"</span><span class="token operator">:</span> <span class="token string">"MesloLGM Nerd Font"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä½¿ç”¨äº† VSCodeï¼Œå¯ä»¥åœ¨ <code>settings.json</code> ä¸­æ·»åŠ ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">"terminal.integrated.fontFamily"</span><span class="token operator">:</span> <span class="token string">"Bitstream Vera Sans Mono Nerd Font"</span>
</code></pre></div><h2>ç¯å¢ƒé…ç½®</h2>
<h3>Chocolatey</h3>
<p><a href="https://chocolatey.org/" target="_blank" rel="noopener noreferrer">Chocolatey</a> æ˜¯ä¸€ä¸ª Windows ä¸‹çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®‰è£…å’Œç®¡ç†è½¯ä»¶ã€‚</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token function">Set-ExecutionPolicy</span> Bypass <span class="token operator">-</span>Scope <span class="token keyword">Process</span> <span class="token operator">-</span>Force<span class="token punctuation">;</span> <span class="token namespace">[System.Net.ServicePointManager]</span>::SecurityProtocol = <span class="token namespace">[System.Net.SecurityProtocolType]</span>::Tls12<span class="token punctuation">;</span> <span class="token function">iex</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">New-Object</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>WebClient<span class="token punctuation">)</span><span class="token punctuation">.</span>DownloadString<span class="token punctuation">(</span><span class="token string">'https://community.chocolatey.org/install.ps1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3>vim</h3>
<p>PowerShell é»˜è®¤ä¸æ”¯æŒ vimï¼Œéœ€è¦å®‰è£… <a href="https://github.com/vim/vim" target="_blank" rel="noopener noreferrer">vim</a> æˆ– <a href="https://github.com/neovim/neovim" target="_blank" rel="noopener noreferrer">neovim</a>ã€‚</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>choco install vim
</code></pre></div><p>å®‰è£…å®Œæˆåå³å¯ä½¿ç”¨ <code>vim</code> å‘½ä»¤ï¼Œå†ä¹Ÿä¸ç”¨ä½¿ç”¨ <code>notepad</code> æ‰“å¼€æ–‡ä»¶äº†ã€‚</p>
<h3>zoxide</h3>
<p><a href="https://github.com/ajeetdsouza/zoxide" target="_blank" rel="noopener noreferrer">zoxide</a> æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šç›®å½•ã€‚</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>choco install zoxide
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œé…ç½® zoxide åˆ° PowerShell ä¸­ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>notepad <span class="token variable">$PROFILE</span>
</code></pre></div><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token function">Invoke-Expression</span> <span class="token punctuation">(</span>&amp; <span class="token punctuation">{</span> <span class="token punctuation">(</span>zoxide init powershell <span class="token punctuation">|</span> <span class="token function">Out-String</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>é‡æ–°åŠ è½½ PowerShell é…ç½®æ–‡ä»¶ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token punctuation">.</span> <span class="token variable">$PROFILE</span>
</code></pre></div><h3>git</h3>
<p>ä½¿ç”¨ Chocolatey å®‰è£… gitï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>choco install git
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œé…ç½® git ç”¨æˆ·ä¿¡æ¯ï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>name <span class="token string">"Your Name"</span>
git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>email <span class="token string">"your.email@example.com"</span>
</code></pre></div><h3>ssh</h3>
<p>PowerShell é»˜è®¤è‡ªå¸¦ ssh å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>ç”Ÿæˆ ssh keyï¼š</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>ssh-keygen <span class="token operator">-</span>t rsa <span class="token operator">-</span>C <span class="token string">"your_email@example.com"</span>
</code></pre></div><p>å°†ç”Ÿæˆçš„ ssh key æ·»åŠ åˆ° GitHubï¼Œåœ¨ <code>Settings</code> -&gt; <code>SSH and GPG keys</code> é¡µé¢æ·»åŠ ã€‚</p>
<p>ç„¶åä½¿ç”¨ <code>ssh -T git@github.com</code> æµ‹è¯•è¿æ¥ã€‚</p>
<p>å¦‚æœå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œå¯ä»¥æ›´æ”¹ ssh å®¢æˆ·ç«¯é…ç½®ã€‚</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>ssh: connect to host github<span class="token punctuation">.</span>com port 22: Connection refused
</code></pre></div><p>åœ¨ <code>C:\Users\&lt;username&gt;\.ssh\config</code> æ–‡ä»¶ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼‰ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>Host github.com
  HostName ssh.github.com
  Port 443
</code></pre></div><p>è¿™æ—¶å†ä½¿ç”¨ <code>ssh -T git@github.com</code> æµ‹è¯•è¿æ¥ï¼Œåº”è¯¥å°±å¯ä»¥æ­£å¸¸è¿æ¥äº†ã€‚</p>
<div class="language-powershell" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>ssh <span class="token operator">-</span>T git@github<span class="token punctuation">.</span>com
</code></pre></div><h3>node</h3>
<p>æ¨èä½¿ç”¨  å®‰è£… nodeã€‚</p>
]]></content>
    <category term="æ“ä½œç³»ç»Ÿ"/>
    <published>2024-11-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å­—ç¬¦ç¼–ç </title>
    <id>https://dribble-njr.github.io/blog/blog/computer-science/operating-system/01-character-encoding.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/computer-science/operating-system/01-character-encoding.html"/>
    <updated>2024-11-07T02:47:43.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨è®¡ç®—æœºä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°çš„å½¢å¼å­˜å‚¨çš„ï¼Œå­—ç¬¦ä¹Ÿä¸ä¾‹å¤–ã€‚ä¸ºäº†è¡¨ç¤ºå­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€å¥—ã€Œå­—ç¬¦é›†ã€ï¼Œè§„å®šæ¯ä¸ªå­—ç¬¦å’ŒäºŒè¿›åˆ¶æ•°ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æœ‰äº†å­—ç¬¦é›†ä¹‹åï¼Œè®¡ç®—æœºå°±å¯ä»¥é€šè¿‡æŸ¥è¡¨å®ŒæˆäºŒè¿›åˆ¶æ•°åˆ°å­—ç¬¦çš„è½¬æ¢ã€‚</p>
<p>Joel Spolsky</p>
<p>The Absolute<br>
Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and<br>
Character Sets (No Excuses!)</p>
<p>Mathias Bynens</p>
<p>JavaScriptâ€™s Internal Character Encoding:<br>
UCS-2 or UTF-16?</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨è®¡ç®—æœºä¸­ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°çš„å½¢å¼å­˜å‚¨çš„ï¼Œå­—ç¬¦ä¹Ÿä¸ä¾‹å¤–ã€‚ä¸ºäº†è¡¨ç¤ºå­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€å¥—ã€Œå­—ç¬¦é›†ã€ï¼Œè§„å®šæ¯ä¸ªå­—ç¬¦å’ŒäºŒè¿›åˆ¶æ•°ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚æœ‰äº†å­—ç¬¦é›†ä¹‹åï¼Œè®¡ç®—æœºå°±å¯ä»¥é€šè¿‡æŸ¥è¡¨å®ŒæˆäºŒè¿›åˆ¶æ•°åˆ°å­—ç¬¦çš„è½¬æ¢ã€‚</p>
<p>Joel Spolsky</p>
<p>The Absolute<br>
Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and<br>
Character Sets (No Excuses!)</p>
<p>Mathias Bynens</p>
<p>JavaScriptâ€™s Internal Character Encoding:<br>
UCS-2 or UTF-16?</p>
]]></content>
    <category term="operating-system"/>
    <published>2024-01-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ¨¡å—åŒ–</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/01-modularization.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/01-modularization.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>æ—©æœŸ JavaScript ä»…ä»…ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€ï¼Œæ‰€éœ€çš„ä»£ç é€šå¸¸ä¸ä¼šå¾ˆå¤§ã€‚ç„¶è€Œéšç€å‰ç«¯å’Œ JavaScript çš„å‘å±•ï¼Œé€æ¸æš´éœ²å‡ºä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å…¨å±€æ±¡æŸ“ï¼šä¸åŒæ–‡ä»¶ä¸­çš„å‡½æ•°ä¼šç›¸äº’æ±¡æŸ“ï¼›</li>
<li>ä¾èµ–æ··ä¹±ï¼šå„æ–‡ä»¶ä¸­çš„å‡½æ•°ä¾èµ–éå¸¸æ··ä¹±ã€‚</li>
</ul>
<p>æ¨¡å—åŒ–å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†å°†ç¨‹åºæ‹†åˆ†ä¸ºå¯æŒ‰éœ€å¯¼å…¥çš„å•ç‹¬æ¨¡å—ã€‚åœ¨æ¨¡å—ä¸­ç¼–å†™å±äºè‡ªå·±çš„é€»è¾‘ä»£ç ï¼Œæ‹¥æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œèƒ½å¤Ÿå¯¼å‡ºå¸Œæœ›æš´éœ²çš„å˜é‡ã€å‡½æ•°ã€å¯¹è±¡ç­‰ï¼Œå¹¶èƒ½é€šè¿‡æŸç§æ–¹å¼ï¼Œå¯¼å…¥å…¶ä»–æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°æˆ–å¯¹è±¡ç­‰ã€‚</p>
<p>JavaScript æœ¬èº«ç›´åˆ° ES2015 æ‰æ¨å‡ºäº†è‡ªå·±çš„æ¨¡å—åŒ–æ–¹æ¡ˆ â€”â€” ES Moduleã€‚åœ¨æ­¤ä¹‹å‰ï¼Œä¸ºäº†è®© JavaScript æ”¯æŒæ¨¡å—åŒ–ï¼Œç¤¾åŒºä¸­æ¶Œç°äº†ä¸åŒçš„æ¨¡å—åŒ–è§„èŒƒï¼šAMDã€CMDã€CommonJS ç­‰ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>æ—©æœŸ JavaScript ä»…ä»…ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€ï¼Œæ‰€éœ€çš„ä»£ç é€šå¸¸ä¸ä¼šå¾ˆå¤§ã€‚ç„¶è€Œéšç€å‰ç«¯å’Œ JavaScript çš„å‘å±•ï¼Œé€æ¸æš´éœ²å‡ºä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å…¨å±€æ±¡æŸ“ï¼šä¸åŒæ–‡ä»¶ä¸­çš„å‡½æ•°ä¼šç›¸äº’æ±¡æŸ“ï¼›</li>
<li>ä¾èµ–æ··ä¹±ï¼šå„æ–‡ä»¶ä¸­çš„å‡½æ•°ä¾èµ–éå¸¸æ··ä¹±ã€‚</li>
</ul>
<p>æ¨¡å—åŒ–å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†å°†ç¨‹åºæ‹†åˆ†ä¸ºå¯æŒ‰éœ€å¯¼å…¥çš„å•ç‹¬æ¨¡å—ã€‚åœ¨æ¨¡å—ä¸­ç¼–å†™å±äºè‡ªå·±çš„é€»è¾‘ä»£ç ï¼Œæ‹¥æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œèƒ½å¤Ÿå¯¼å‡ºå¸Œæœ›æš´éœ²çš„å˜é‡ã€å‡½æ•°ã€å¯¹è±¡ç­‰ï¼Œå¹¶èƒ½é€šè¿‡æŸç§æ–¹å¼ï¼Œå¯¼å…¥å…¶ä»–æ¨¡å—ä¸­çš„å˜é‡ã€å‡½æ•°æˆ–å¯¹è±¡ç­‰ã€‚</p>
<p>JavaScript æœ¬èº«ç›´åˆ° ES2015 æ‰æ¨å‡ºäº†è‡ªå·±çš„æ¨¡å—åŒ–æ–¹æ¡ˆ â€”â€” ES Moduleã€‚åœ¨æ­¤ä¹‹å‰ï¼Œä¸ºäº†è®© JavaScript æ”¯æŒæ¨¡å—åŒ–ï¼Œç¤¾åŒºä¸­æ¶Œç°äº†ä¸åŒçš„æ¨¡å—åŒ–è§„èŒƒï¼šAMDã€CMDã€CommonJS ç­‰ã€‚</p>
<h2>æ—©æœŸæ¨¡å—åŒ–æ–¹æ¡ˆ</h2>
<h3>Window</h3>
<p>åœ¨æœ€å¼€å§‹çš„å‰ç«¯æ—¶æœŸï¼ŒJavaScript æ–‡ä»¶ä¹‹é—´çš„é€šä¿¡é€šå¸¸ä¼šä¾é  window å¯¹è±¡ã€‚</p>
<p><strong>utils.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> utils <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">format</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>time.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>
<span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">curTime</span><span class="token operator">:</span> curTime
<span class="token punctuation">}</span>
</code></pre></div><p><strong>index.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>time<span class="token punctuation">.</span>curTime<span class="token punctuation">)</span> <span class="token comment">// '2022-08-10 15:05'</span>
</code></pre></div><p><strong>index.html</strong></p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¿…é¡»ä¿è¯é¡ºåºæ­£ç¡® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./time.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./utils.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./index.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç„¶è€Œè¿™ä¼šå¸¦æ¥å‘½åå†²çªçš„é—®é¢˜ï¼Œå¹¶ä¸”å£°æ˜çš„å…¨å±€å˜é‡ä¼šå ç”¨å†…å­˜æ— æ³•å›æ”¶ï¼Œä»£ç å¯è¯»æ€§å·®ã€‚å› æ­¤å‡ºç°äº†ç«‹å³è°ƒç”¨è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ã€‚</p>
<h2>IIFE</h2>
<p>ä½¿ç”¨ç«‹å³è°ƒç”¨è¡¨è¾¾å¼ï¼ˆImmediately Invoked Function Expression, IIFEï¼‰æ”¹é€ ä¸Šè¿°ä»£ç ï¼š</p>
<p><strong>utils.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> moduleUtils <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    format
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>time.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> moduleTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    curTime
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>index.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>moduleUtils<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>moduleTime<span class="token punctuation">.</span>curTime<span class="token punctuation">)</span>
</code></pre></div><p>ç°åœ¨å› ä¸ºå‡½æ•°å…·æœ‰ä½œç”¨åŸŸï¼Œå°±å¯ä»¥è§£å†³å‘½åå†²çªçš„é—®é¢˜ï¼Œç„¶è€Œè¿™å†æ¬¡å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä»£ç æ··ä¹±ä¸å ªï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä»£ç éƒ½éœ€è¦åŒ…è£¹åœ¨ä¸€ä¸ªç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ä¸­ç¼–å†™ï¼›</li>
<li>åœ¨æ²¡æœ‰åˆé€‚çš„è§„èŒƒçš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå…¬å¸æˆ–ä¸ªäººéƒ½ä¼šå‡ºç°ä»»æ„å‘½åå¯¼è‡´æ¨¡å—åç§°ç›¸åŒçš„æƒ…å†µã€‚</li>
</ul>
<p>å› æ­¤éœ€è¦ç”¨è§„èŒƒç¼–å†™æ¨¡å—åŒ–ä»£ç ï¼Œè¿™ä¸ªè§„èŒƒéœ€è¦åŒ…æ‹¬ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š<strong>æ¨¡å—æœ¬èº«å¯ä»¥å¯¼å‡ºæš´éœ²çš„å±æ€§ï¼Œåˆå¯ä»¥å¯¼å…¥éœ€è¦çš„å±æ€§ã€‚</strong></p>
<h2>CommonJS</h2>
<p>CommonJS æ˜¯ä¸€ä¸ª JavaScript è§„èŒƒï¼Œæœ€åˆæå‡ºæ¥æ˜¯åœ¨æµè§ˆå™¨ä»¥å¤–çš„åœ°æ–¹ä½¿ç”¨ï¼Œå¹¶ä¸”å½“æ—¶è¢«å‘½åä¸º ServerJSï¼Œåæ¥ä¸ºäº†ä½“ç°å®ƒçš„å¹¿æ³›æ€§ï¼Œä¿®æ”¹ä¸º CommonJSï¼Œå¹³æ—¶æˆ‘ä»¬ä¹Ÿä¼šç®€ç§°ä¸º CJSã€‚</p>
<p>NodeJS å¯¹ CommonJS è¿›è¡Œäº†æ”¯æŒå’Œå®ç°ï¼š</p>
<ul>
<li>åœ¨ Node ä¸­æ¯ä¸ª js æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼›</li>
<li>è¿™ä¸ªæ¨¡å—åŒ…æ‹¬ CommonJS è§„èŒƒçš„æ ¸å¿ƒå˜é‡ï¼š<code>exports</code> <code>module.exports</code> <code>require</code>ã€‚</li>
</ul>
<p>ä¸‹é¢åœ¨ node ç¯å¢ƒä¸­æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚</p>
<p><strong>utils.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  format
<span class="token punctuation">}</span>
</code></pre></div><p><strong>time.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>

exports<span class="token punctuation">.</span>curTime <span class="token operator">=</span> curTime
</code></pre></div><p><strong>index.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> curTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./time.js'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> format <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./utils'</span><span class="token punctuation">)</span>

<span class="token function">format</span><span class="token punctuation">(</span>curTime<span class="token punctuation">)</span> <span class="token comment">// "2022-08-10 15:05"</span>
</code></pre></div><h3><code>exports</code> å’Œ <code>module.exports</code></h3>
<p>å¯ä»¥çœ‹åˆ°ï¼Œnode ä¸­å®ç”¨ <code>exports</code> å’Œ <code>module.exports</code> å®ç°æ¨¡å—å¯¼å‡ºï¼Œä½¿ç”¨ <code>require()</code> å®ç°æ¨¡å—å¯¼å…¥ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰ä¸¤ä¸ªå¯¼å‡ºæ–¹å¼ï¼Ÿ</p>
<p>å› ä¸º CommonJS è§„èŒƒä¸­åªå®šä¹‰äº† <code>exports</code>ï¼Œä½†æ˜¯å®ƒå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå› æ­¤ node ä½¿ç”¨ <code>module.exports = exports</code> é—´æ¥ä»£æ›¿äº† <code>exports</code>ï¼Œä»–ä»¬ä¸¤ä¸ªæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯¹è±¡ã€‚<code>require()</code> ä¼šè¿”å› <code>module.exports</code> æŒ‡å‘çš„å¯¹è±¡ã€‚</p>
<p>å¯ä»¥åœ¨ index.js ä¸­æ‰“å° <code>module</code> å¯¹è±¡ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>Module <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>                    <span class="token comment">// æ¨¡å— id</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/* ... */'</span><span class="token punctuation">,</span>          <span class="token comment">// æ–‡ä»¶è·¯å¾„</span>
  <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token comment">// æ¨¡å—å¯¼å‡ºå¯¹è±¡</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'/* ... */'</span><span class="token punctuation">,</span>      <span class="token comment">// æ–‡ä»¶å</span>
  <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>              <span class="token comment">// æ¨¡å—æ˜¯å¦åŠ è½½å®Œæˆ</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    Module <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// æ¨¡å— utils</span>
    Module <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// æ¨¡å— time</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* ... */</span> <span class="token punctuation">]</span>        <span class="token comment">// æœç´¢è·¯å¾„</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>require</h3>
<p><code>require()</code> å¼•å…¥æ¨¡å—éœ€è¦ç»å†ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>è·¯å¾„åˆ†æ</li>
<li>æ–‡ä»¶å®šä½</li>
<li>ç¼–è¯‘æ‰§è¡Œ</li>
</ol>
<h4>æ ¸å¿ƒæ¨¡å—å’Œæ–‡ä»¶æ¨¡å—</h4>
<p>è€Œåœ¨ Node ä¸­ï¼Œæ¨¡å—åˆ†ä¸ºæ ¸å¿ƒæ¨¡å—å’Œæ–‡ä»¶æ¨¡å—ï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¨¡å—ï¼šåœ¨ Node æºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘æˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨ Node è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œæ ¸å¿ƒæ¨¡å—å°±ç›´æ¥åŠ è½½è¿›äº†å†…å­˜ä¸­ï¼Œå› æ­¤æ ¸å¿ƒæ¨¡å—å¼•å…¥æ—¶ï¼Œä¸éœ€è¦è¿›è¡Œæ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨è·¯å¾„åˆ†ææ—¶ä¼šä¼˜å…ˆåˆ¤æ–­ï¼Œå› æ­¤å®ƒçš„åŠ è½½é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚</li>
<li>æ–‡ä»¶æ¨¡å—ï¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ï¼Œéœ€è¦å®Œæ•´çš„è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½ã€ç¼–è¯‘æ‰§è¡Œè¿‡ç¨‹ï¼Œé€Ÿåº¦æ¯”æ ¸å¿ƒæ¨¡å—æ…¢ã€‚</li>
</ul>
<h4>ä¼˜å…ˆä»ç¼“å­˜ä¸­åŠ è½½</h4>
<p>Node ä¼šå¯¹å¼•å…¥è¿‡çš„æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œä»¥å‡å°‘äºŒæ¬¡å¼•å…¥æ—¶çš„å¼€é”€ï¼Œå¯¹ä»»ä½•æ¨¡å—éƒ½ä¼šé‡‡å–ç¼“å­˜ä¼˜å…ˆçš„ç­–ç•¥ï¼Œ<strong>ç¼“å­˜æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§</strong>ã€‚</p>
<p>ä»ç¼“å­˜åŠ è½½çš„ä¼˜åŒ–ç­–ç•¥ä½¿å¾—äºŒæ¬¡å¼•å…¥æ—¶ä¸éœ€è¦è·¯å¾„åˆ†æã€æ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæé«˜äº†åŠ è½½æ¨¡å—çš„æ•ˆç‡ã€‚</p>
<h4>è·¯å¾„åˆ†æ</h4>
<p>åœ¨åˆ¤æ–­ç¼“å­˜åï¼Œéœ€è¦å¯¹æ¨¡å—è¿›è¡Œè·¯å¾„åˆ†æå’Œæ–‡ä»¶å®šä½ï¼Œ<code>require(X)</code> æ¥æ”¶ä¸€ä¸ª<strong>æ¨¡å—æ ‡è¯†ç¬¦</strong>ï¼Œä¸åŒæ ‡è¯†ç¬¦æœ‰ä¸åŒæŸ¥æ‰¾è§„åˆ™ã€‚</p>
<p><strong>æƒ…å†µä¸€ï¼šX æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå¦‚ pathã€http</strong></p>
<p><strong>æ ¸å¿ƒæ¨¡å—</strong>ä¼šç›´æ¥è¿”å›æ¨¡å—ï¼Œå¹¶ä¸”åœæ­¢æŸ¥æ‰¾ã€‚</p>
<p>è¯•å›¾åŠ è½½ä¸€ä¸ªä¸æ ¸å¿ƒæ¨¡å—æ ‡è¯†ç¬¦ç›¸åŒçš„è‡ªå®šä¹‰æ¨¡å—æ˜¯ä¸ä¼šæˆåŠŸçš„ï¼Œå¦‚æœè‡ªå·±ç¼–å†™äº†ä¸€ä¸ª <code>http</code> ç”¨æˆ·æ¨¡å—ï¼Œæƒ³è¦åŠ è½½æˆåŠŸï¼Œåˆ™å¿…é¡»é€‰æ‹©ä¸€ä¸ªä¸åŒçš„æ ‡è¯†ç¬¦æˆ–è€…æ¢ç”¨è·¯å¾„æ–¹å¼ã€‚</p>
<p><strong>æƒ…å†µäºŒï¼šX ä»¥ ./ æˆ– ../ æˆ– / ï¼ˆè·¯å¾„å½¢å¼ï¼‰å¼€å¤´</strong></p>
<p>ä»¥è·¯å¾„å¼€å§‹çš„æ ‡è¯†ç¬¦ï¼Œä¼šè¢«å½“æˆ<strong>æ–‡ä»¶æ¨¡å—</strong>ï¼Œåœ¨åˆ†æè·¯å¾„æ—¶ï¼Œ<code>require(X)</code> æ–¹æ³•ä¼šå°†è·¯å¾„è½¬æ¢ä¸ºçœŸå®è·¯å¾„ï¼Œå¹¶ä»¥çœŸå®è·¯å¾„ä½œä¸ºç´¢å¼•ï¼Œå°†ç¼–è¯‘æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ”¾åˆ°ç¼“å­˜ä¸­ã€‚ç”±äºæ–‡ä»¶æ¨¡å—ç»™ Node æŒ‡æ˜äº†ç¡®åˆ‡çš„æ–‡ä»¶ä½ç½®ï¼Œå› æ­¤åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­å¯ä»¥èŠ‚çº¦å¤§é‡æ—¶é—´ï¼Œ<strong>æ–‡ä»¶æ¨¡å—çš„åŠ è½½é€Ÿåº¦æ…¢äºæ ¸å¿ƒæ¨¡å—</strong>ã€‚</p>
<p><strong>æƒ…å†µä¸‰ï¼šç›´æ¥æ˜¯ä¸€ä¸ª Xï¼ˆæ²¡æœ‰è·¯å¾„ï¼‰ï¼Œå¹¶ä¸” X ä¸æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—</strong></p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼ŒX æ˜¯ä¸€ä¸ª<strong>è‡ªå®šä¹‰æ¨¡å—</strong>ï¼Œé‚£ä¹ˆ Node ä¼šä»<strong>æ¨¡å—è·¯å¾„</strong> <code>moudle.paths</code> ä¸­æŸ¥æ‰¾ã€‚</p>
<blockquote>
<p>æ¨¡å—è·¯å¾„ï¼šNode åœ¨å®šä½æ–‡ä»¶æ¨¡å—çš„å…·ä½“æ–‡ä»¶æ—¶æŒ‡å®šçš„æŸ¥æ‰¾ç­–ç•¥ï¼Œä¸ºå¤šä¸ªè·¯å¾„ç»„æˆçš„æ•°ç»„ã€‚</p>
</blockquote>
<p>åœ¨ Linux ä¸‹ï¼Œæ‰“å°è¿™ä¸ªå¯èƒ½è¾“å‡ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">[</span>
  <span class="token string">'/home/jackson/research/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/home/jackson/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/home/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/node_modules'</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Windows ä¸‹ï¼Œå¯èƒ½ä¼šè¾“å‡ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token string">'c:\\nodejs\\node_modules'</span><span class="token punctuation">,</span> <span class="token string">'c:\\node_modules'</span><span class="token punctuation">]</span>
</code></pre></div><p>æ¨¡å—è·¯å¾„çš„ç”Ÿæˆè§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å½“å‰æ–‡ä»¶ç›®å½•ä¸‹çš„ <code>node_modules</code> ç›®å½•</li>
<li>çˆ¶ç›®å½•ä¸‹çš„ <code>node_modules</code> ç›®å½•</li>
<li>çˆ¶ç›®å½•çš„çˆ¶ç›®å½•ä¸‹çš„ <code>node_modules</code> ç›®å½•</li>
<li>æ²¿è·¯å¾„å‘ä¸Šé€çº§é€’å½’ï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹çš„ <code>node_modules</code> ç›®å½•</li>
</ul>
<p>åœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼ŒNode ä¼šé€ä¸ªå°è¯•æ¨¡å—è·¯å¾„ä¸­çš„è·¯å¾„ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡æ¨¡å—ï¼Œå› æ­¤é€Ÿåº¦åœ¨ä¸‰ä¸ªæƒ…å†µä¸­æœ€æ…¢ã€‚</p>
<h4>æ–‡ä»¶å®šä½</h4>
<p>æ–‡ä»¶å®šä½ä¸»è¦åŒ…æ‹¬æ–‡ä»¶æ‰©å±•ååˆ†æã€ç›®å½•å’ŒåŒ…çš„å¤„ç†ã€‚</p>
<p><strong>æ–‡ä»¶æ‰©å±•ååˆ†æ</strong></p>
<p><code>require(X)</code> åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°æ ‡è¯†ç¬¦ä¸åŒ…å«æ–‡ä»¶æ‰©å±•åçš„æƒ…å†µã€‚</p>
<ol>
<li>å¦‚æœæœ‰æ–‡ä»¶æ‰©å±•åï¼ŒæŒ‰ç…§åç¼€åçš„æ ¼å¼æŸ¥æ‰¾å¯¹åº”çš„æ–‡ä»¶</li>
<li>å¦‚æœæ²¡æœ‰æ–‡ä»¶æ‰©å±•åï¼Œä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºå°è¯•ï¼š</li>
</ol>
<ul>
<li>ç›´æ¥æŸ¥æ‰¾æ–‡ä»¶ X</li>
<li>æŸ¥æ‰¾ <code>X.js</code> æ–‡ä»¶</li>
<li>æŸ¥æ‰¾ <code>X.json</code> æ–‡ä»¶</li>
<li>æŸ¥æ‰¾ <code>X.node</code> æ–‡ä»¶</li>
</ul>
<p>åœ¨å°è¯•çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨ <code>fs</code> æ¨¡å—åŒæ­¥é˜»å¡å¼åœ°åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ï¼Œæœ€å¥½å¸¦ä¸Šæ–‡ä»¶æ‰©å±•åï¼Œä¼šåŠ å¿«æ¨¡å—åŠ è½½é€Ÿåº¦ã€‚</p>
<p><strong>ç›®å½•åˆ†æå’ŒåŒ…</strong></p>
<p>åœ¨åˆ†ææ ‡è¯†ç¬¦çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡åˆ†ææ–‡ä»¶æ‰©å±•åå¯èƒ½å¹¶æ²¡æœ‰å¾—åˆ°å¯¹åº”æ–‡ä»¶ï¼Œä½†å´å¾—åˆ°ä¸€ä¸ªç›®å½•ï¼Œæ­¤æ—¶ Node ä¼šå°†ç›®å½•å½“ä½œä¸€ä¸ªåŒ…æ¥å¤„ç†ã€‚</p>
<ol>
<li>é¦–å…ˆåœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾ <code>package.json</code> æ–‡ä»¶ï¼Œé€šè¿‡ <code>JSON.parse()</code> è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œä»ä¸­å–å‡º <code>main</code> å±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ï¼Œå¦‚æœæ–‡ä»¶åç¼ºå°‘æ‰©å±•åï¼Œåˆ™ä¼šè¿›è¡Œæ–‡ä»¶æ‰©å±•ååˆ†æ</li>
<li>å¦‚æœ <code>main</code> å±æ€§æŒ‡å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…æ²¡æœ‰ <code>package.json</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šä¸€æ¬¡æŸ¥æ‰¾ç›®å½•ä¸‹é¢çš„ <code>index</code> æ–‡ä»¶</li>
</ol>
<ul>
<li>æŸ¥æ‰¾ <code>X/index.js</code> æ–‡ä»¶</li>
<li>æŸ¥æ‰¾ <code>X/index.json</code> æ–‡ä»¶</li>
<li>æŸ¥æ‰¾ <code>X/index.node</code> æ–‡ä»¶</li>
</ul>
<ol start="3">
<li>å¦‚æœç›®å½•åˆ†æçš„è¿‡ç¨‹ä¸­æ²¡æœ‰æˆåŠŸå®šä½ï¼Œåˆ™è‡ªå®šä¹‰æ¨¡å—è¿›å…¥ä¸‹ä¸€ä¸ªæ¨¡å—è·¯å¾„ä¸­è¿›è¡Œæœç´¢ï¼›å¦‚æœæ‰€æœ‰è·¯å¾„éƒ½éå†å®Œæ¯•ï¼Œä»ç„¶æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œé‚£ä¹ˆæŠ¥é”™ï¼š<code>not found</code></li>
</ol>
<h3>æ¨¡å—ç¼–è¯‘</h3>
<p>Node ä¸­å¯¹äºæ¨¡å—çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Module</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id
  <span class="token keyword">this</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> parent
  <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>filename <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“å®šä½åˆ°ç›®æ ‡æ–‡ä»¶æ—¶ï¼ŒNode ä¼šæ–°å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œç„¶åæ ¹æ®è·¯å¾„è½½å…¥å¹¶ç¼–è¯‘ï¼Œå¯¹äºä¸åŒçš„æ–‡ä»¶æ‰©å±•åï¼Œå®ƒçš„è½½å…¥æ–¹æ³•ä¹Ÿä¸åŒï¼š</p>
<ul>
<li><code>.js</code> æ–‡ä»¶ï¼šé€šè¿‡ <code>fs</code> æ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åç¼–è¯‘æ‰§è¡Œï¼›</li>
<li><code>.node</code> æ–‡ä»¶ï¼šè¿™æ˜¯ç”¨ <code>C/C++</code> ç¼–å†™çš„æ‰©å±•æ–‡ä»¶ï¼Œé€šè¿‡ <code>dlopen()</code> æ–¹æ³•åŠ è½½æœ€åç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼›</li>
<li><code>.json</code> æ–‡ä»¶ï¼šé€šè¿‡ <code>fs</code> æ¨¡å—åŒæ­¥è¯»å–æ–‡ä»¶åï¼Œç”¨ <code>JSON.parse()</code> è§£æè¿”å›ç»“æœï¼›</li>
<li>å…¶ä½™æ‰©å±•åæ–‡ä»¶ï¼šéƒ½è¢«å½“ä½œ <code>.js</code> æ–‡ä»¶è½½å…¥ã€‚</li>
</ul>
<p>æ¨¡å—åœ¨ç¬¬ä¸€æ¬¡è¢«å¼•å…¥æ—¶ï¼Œæ¨¡å—ä¸­çš„ä»£ç ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼›æ¨¡å—è¢«å¤šæ¬¡å¼•å…¥ï¼Œä¼šç¼“å­˜ï¼ˆ<code>module.loaded</code> è®¾ç½®ä¸º <code>true</code>ï¼‰ï¼Œæœ€ç»ˆåªè¿è¡Œä¸€æ¬¡ï¼›å¦‚æœæœ‰å¾ªç¯å¼•å…¥ï¼Œä¼šé‡‡ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢åŠ è½½æ¨¡å—ã€‚</p>
<p>æ¯ä¸€ä¸ªç¼–è¯‘æˆåŠŸçš„æ¨¡å—éƒ½ä¼šè®²å…¶æ–‡ä»¶è·¯å¾„ä½œä¸ºç´¢å¼•ç¼“å­˜åœ¨ <code>Module._cache</code> å¯¹è±¡ä¸Šï¼Œä»¥æé«˜äºŒæ¬¡å¼•å…¥çš„æ€§èƒ½ã€‚</p>
<h3>å…¶ä»–</h3>
<p>æ¯ä¸ªæ¨¡å—éƒ½å­˜åœ¨ <code>require</code>ã€<code>exports</code>ã€<code>module</code> ç­‰å…¶å®ƒå˜é‡ï¼Œè¿™äº›å˜é‡ä»ä½•è€Œæ¥ï¼Ÿè¿™æ˜¯å› ä¸º Node å¯¹è·å–çš„ JavaScript æ–‡ä»¶å†…å®¹è¿›è¡Œäº†å¤´å°¾åŒ…è£…ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> Math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'math'</span><span class="token punctuation">)</span>
  exports<span class="token punctuation">.</span><span class="token function-variable function">area</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">raduis</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ ·æ¯ä¸ªæ¨¡å—æ–‡ä»¶éƒ½ç”¨å‡½æ•°è¿›è¡Œäº†ä½œç”¨åŸŸéš”ç¦»ï¼ŒåŒ…è£…ä¹‹åçš„ä»£ç ä¼šé€šè¿‡ <code>vm</code> åŸç”Ÿæ¨¡å—çš„ <code>runInThisContext()</code> æ–¹æ³•æ‰§è¡Œï¼ˆç±»ä¼¼ <code>eval</code>ï¼Œåªæ˜¯æœ‰æ˜ç¡®ä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ï¼‰ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“çš„ <code>function</code> å¯¹è±¡ã€‚æœ€å,å°†å½“å‰æ¨¡å—çš„ <code>exports</code> å±æ€§ã€<code>require()</code> æ–¹æ³•ã€<code>module</code> ä»¥åŠåœ¨æ–‡ä»¶å®šä½ä¸­å¾—åˆ°çš„å®Œæ•´æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶ç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ª <code>function</code> æ‰§è¡Œã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆå­˜åœ¨ <code>exports</code> çš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨ <code>module.exports</code>ï¼Ÿ</p>
<p>å…ˆæ¥çœ‹çœ‹åŒ…è£…ä¹‹åçš„æ–‡ä»¶ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> module<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> __dirname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p><code>exports</code> æ˜¯é€šè¿‡å½¢å‚çš„æ–¹å¼ä¼ å…¥ï¼Œ<strong>ç›´æ¥èµ‹å€¼å½¢å‚ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨</strong>ï¼Œä½†å¹¶ä¸èƒ½æ”¹å˜ä½œç”¨åŸŸå¤–çš„å€¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨ <code>exports</code> çš„æ—¶å€™ä¸æ¨èç›´æ¥èµ‹å€¼ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡èµ‹å€¼å±æ€§çš„æ–¹å¼å¯¼å‡ºå˜é‡ã€‚è€Œå¦‚æœæƒ³è¦è¾¾åˆ° <code>require</code> ç›´æ¥å¼•å…¥ä¸€ä¸ªç±»çš„æ•ˆæœï¼Œåº”è¯¥èµ‹å€¼ç»™ <code>module.exports</code> å¯¹è±¡ï¼Œè¿™ç§æ–¹æ¡ˆä¸ä¼šæ”¹å˜å½¢å‚çš„å¼•ç”¨ã€‚</p>
<h3>ç¼ºç‚¹</h3>
<p>CommonJS åŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼šåŒæ­¥æ„å‘³ç€åªæœ‰ç­‰åˆ°å¯¹åº”çš„æ¨¡å—åŠ è½½å®Œæ¯•ï¼Œå½“å‰æ¨¡å—ä¸­çš„å†…å®¹æ‰èƒ½è¢«è¿è¡Œã€‚</p>
<p>è¿™ä¹Ÿæ˜¯é€šå¸¸ç”¨ä½œæœåŠ¡å™¨æ¨¡å—åŒ–è§„èŒƒçš„åŸå› ï¼Œå› ä¸ºæœåŠ¡å™¨åŠ è½½çš„ js æ–‡ä»¶éƒ½æ˜¯æœ¬åœ°æ–‡ä»¶ï¼ŒåŠ è½½é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>å¦‚æœå°†å®ƒåº”ç”¨äºæµè§ˆå™¨å‘¢ï¼Ÿæµè§ˆå™¨åŠ è½½ js æ–‡ä»¶éœ€è¦å…ˆä»æœåŠ¡å™¨å°†æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œä¹‹ååœ¨åŠ è½½è¿è¡Œï¼Œä¼šé˜»å¡åç»­ä»£ç çš„æ‰§è¡Œã€‚</p>
<p>æ‰€ä»¥æ—©æœŸåœ¨æµè§ˆå™¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä½¿ç”¨ CommonJS è§„èŒƒï¼Œè€Œé€šå¸¸ä¼šé‡‡ç”¨ AMD æˆ– CMD è§„èŒƒã€‚</p>
<h2>AMD/CMD</h2>
<p>AMD å’Œ CMD æ˜¯ç”¨äºæµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è§„èŒƒã€‚</p>
<p>ä½†æ˜¯ç›®å‰ä¸€æ–¹é¢ç°ä»£çš„æµè§ˆå™¨å·²ç»æ”¯æŒ ES Modulesï¼Œå¦ä¸€æ–¹é¢å€ŸåŠ©äº webpack ç­‰å·¥å…·å¯ä»¥å®ç°å¯¹ CommonJS æˆ–è€… ES Module ä»£ç çš„è½¬æ¢ã€‚AMD å’Œ CMD å·²ç»ä½¿ç”¨éå¸¸å°‘äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¿›è¡Œç®€å•çš„æ¼”ç»ƒã€‚</p>
<h3>AMD</h3>
<p>å¼‚æ­¥æ¨¡å—å®šä¹‰ï¼ˆAsynchronous Module Definitionï¼ŒAMDï¼‰é‡‡ç”¨å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œå› æ­¤å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚æ¯”è¾ƒå¸¸ç”¨çš„åº“æ˜¯ <code>require.js</code>ã€‚</p>
<blockquote>
<p>å…ˆæœ‰ RequireJSï¼Œåæœ‰ AMD è§„èŒƒï¼Œéšç€ RequireJS çš„æ¨å¹¿å’Œæ™®åŠï¼ŒAMD è§„èŒƒæ‰è¢«åˆ›å»ºå‡ºæ¥ã€‚</p>
</blockquote>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>AMD
â”œâ”€â”€ index.html
â”œâ”€â”€ index.js
â”œâ”€â”€ lib
â”‚   â””â”€â”€ require.js
â””â”€â”€ modules
    â”œâ”€â”€ time.js
    â””â”€â”€ .js
</code></pre></div><p><strong>index.html</strong></p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ³¨æ„ data-main --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./lib/require.js<span class="token punctuation">"</span></span> <span class="token attr-name">data-main</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./index.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>index.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é…ç½®</span>
  require<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token comment">// æ¨¡å—æ˜ å°„å…³ç³»</span>
    <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token string">'./modules/time'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">utils</span><span class="token operator">:</span> <span class="token string">'./modules/utils'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'utils'</span><span class="token punctuation">,</span> <span class="token string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">utils<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€»è¾‘ä»£ç </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>utils<span class="token punctuation">.</span>format<span class="token punctuation">)</span> <span class="token comment">// Function</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>curTime<span class="token punctuation">)</span> <span class="token comment">// 2022-08-10 15:05</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>time.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å®šä¹‰æ¨¡å—</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>

  <span class="token comment">// æš´éœ²å±æ€§</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    curTime
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>utils.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å®šä¹‰æ¨¡å—ï¼Œå¼•å…¥éœ€è¦çš„æ¨¡å—</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">format</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>curTime<span class="token punctuation">)</span> <span class="token comment">// 2022-08-10 15:05</span>

  <span class="token comment">// æš´éœ²å±æ€§</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    format
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3>CMD</h3>
<p>é€šç”¨æ¨¡å—å®šä¹‰ï¼ˆCommon Module Definitionï¼ŒCMDï¼‰é‡‡ç”¨å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œå¹¶ä¸”å¸æ”¶ CommonJS çš„ä¼˜ç‚¹ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„åº“æ˜¯ <code>SeaJS</code>ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>CMD
â”œâ”€â”€ index.html
â”œâ”€â”€ index.js
â”œâ”€â”€ lib
â”‚   â””â”€â”€ sea.js
â””â”€â”€ modules
    â”œâ”€â”€ time.js
    â””â”€â”€ .js
</code></pre></div><p><strong>index.html</strong></p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>./lib/sea.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      seajs<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'./index.js'</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>index.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> curTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./modules/foo'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> format <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./modules/utils'</span><span class="token punctuation">)</span>

  <span class="token function">format</span><span class="token punctuation">(</span>curTime<span class="token punctuation">)</span> <span class="token comment">// 2022-08-10 15:05</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>time.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    curTime
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>utils.js</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    format
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2>ESM</h2>
<p>ES2015 åæµè§ˆå™¨å®ç°çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œé•¿è¿œæ¥çœ‹ï¼Œæœªæ¥æ— è®ºæ˜¯åŸºäº JS çš„ WEB ç«¯ï¼Œè¿˜æ˜¯åŸºäº node çš„æœåŠ¡å™¨ç«¯æˆ–æ¡Œé¢åº”ç”¨ï¼Œæ¨¡å—è§„èŒƒéƒ½ä¼šç»Ÿä¸€ä½¿ç”¨ ES6 moduleã€‚</p>
<h3>å…¼å®¹æ€§</h3>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å¯¹ ESM å®ç°å®Œå…¨æ”¯æŒï¼Œéœ€è¦ç”¨åˆ° webpack ç­‰å·¥å…·å®ç°ä»£ç è½¬æ¢ã€‚</p>
<p>å¯è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%AF%E6%8C%81" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨æ”¯æŒ</a>ã€‚</p>
<h3>å¯¼å‡º</h3>
<h4>æ–¹å¼ä¸€ï¼šåˆ†åˆ«å¯¼å‡º</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4>æ–¹å¼äºŒï¼šç»Ÿä¸€å¯¼å‡º</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> curTime <span class="token operator">=</span> <span class="token string">'2022-08-10 15:05'</span>
<span class="token keyword">const</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> curTime<span class="token punctuation">,</span> format <span class="token punctuation">}</span>
</code></pre></div><h4>æ–¹å¼ä¸‰ï¼šåˆ«åå¯¼å‡º</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> curTime <span class="token keyword">as</span> time<span class="token punctuation">,</span> format <span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„è¿™é‡Œ <code>{}</code> å¹¶éå¯¹è±¡ã€‚</p>
<h4>æ–¹å¼å››ï¼šé»˜è®¤å¯¼å‡º</h4>
<p>ä¸€ä¸ªæ¨¡å—ä¸­åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'format'</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>å¯¼å…¥</h3>
<h4>æ–¹å¼ä¸€ï¼šç»Ÿä¸€å¯¼å…¥</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> curTime<span class="token punctuation">,</span> format <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module.js'</span>
</code></pre></div><h4>æ–¹å¼äºŒï¼šæ•´ä½“å¯¼å…¥</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">'./module.js'</span>
module<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>time<span class="token punctuation">)</span>
</code></pre></div><h4>æ–¹å¼ä¸‰ï¼šåˆ«åå¯¼å…¥</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> curTime <span class="token keyword">as</span> time<span class="token punctuation">,</span> format <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module.js'</span>
</code></pre></div><h4>æ–¹å¼å››ï¼šé»˜è®¤å¯¼å‡ºçš„å¯¼å…¥</h4>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> format <span class="token keyword">from</span> <span class="token string">'./module.js'</span>
</code></pre></div><h3><code>import()</code></h3>
<p>ä¸Šè¿°çš„å¯¼å…¥éƒ½æ˜¯ç”¨ import å…³é”®å­—å®ç°æ¨¡å—å®ç°ï¼Œ<code>import()</code> å‡½æ•°å¯ä»¥å®ç°åŠ¨æ€å¯¼å…¥æ¨¡å—ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€»è¾‘ä»£ç </span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">bar</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€»è¾‘ä»£ç </span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>ESM VS CommonJS</h3>
<p>CommonJS æ¨¡å—åŠ è½½ js æ–‡ä»¶çš„è¿‡ç¨‹æ˜¯ <strong>è¿è¡Œæ—¶</strong> åŠ è½½çš„ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ï¼š</p>
<ul>
<li>è¿è¡Œæ—¶åŠ è½½æ„å‘³ç€æ˜¯ js å¼•æ“åœ¨æ‰§è¡Œ js ä»£ç çš„è¿‡ç¨‹ä¸­åŠ è½½æ¨¡å—ï¼›</li>
<li>åŒæ­¥çš„å°±æ„å‘³ç€ä¸€ä¸ªæ–‡ä»¶æ²¡æœ‰åŠ è½½ç»“æŸä¹‹å‰ï¼Œåé¢çš„ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œã€‚</li>
</ul>
<p>ES Module åŠ è½½ js æ–‡ä»¶çš„è¿‡ç¨‹æ˜¯ <strong>ç¼–è¯‘ï¼ˆè§£æï¼‰æ—¶</strong> åŠ è½½çš„ï¼Œå¹¶ä¸”æ˜¯å¼‚æ­¥çš„ï¼š</p>
<ul>
<li>ç¼–è¯‘æ—¶ï¼ˆè§£æï¼‰æ—¶åŠ è½½ï¼Œæ„å‘³ç€ <code>import</code> å…³é”®å­—ä¸èƒ½å’Œè¿è¡Œæ—¶ç›¸å…³çš„å†…å®¹æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ï¼›</li>
<li>å¼‚æ­¥çš„æ„å‘³ç€ï¼šJS å¼•æ“åœ¨é‡åˆ° import æ—¶ä¼šå»è·å–è¿™ä¸ª js æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªè·å–çš„è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</li>
</ul>
<p>CommonJS é€šè¿‡ <code>module.exports</code> å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¼å‡ºå’Œå¯¼å…¥æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸¤è¾¹ä¿®æ”¹ä¼šåŒæ—¶å½±å“å¯¼å‡ºå¯¹è±¡ã€‚</p>
<p>ES Module é€šè¿‡ <code>export</code> å¯¼å‡ºçš„æ˜¯å˜é‡æœ¬èº«çš„å¼•ç”¨ï¼šJS å¼•æ“ä¼šåˆ›å»º<strong>æ¨¡å—ç¯å¢ƒè®°å½•</strong>ï¼Œä¼šå’Œå¯¼å‡ºçš„å˜é‡è¿›è¡Œç»‘å®šã€‚æ‰€ä»¥åœ¨å¯¼å‡ºçš„æ¨¡å—ä¸­ä¿®æ”¹å˜åŒ–ï¼Œå¯¼å…¥çš„åœ°æ–¹å¯ä»¥é€šè¿‡æ¨¡å—ç¯å¢ƒè®°å½•è·å–æœ€æ–°çš„å€¼ï¼›ä½†æ˜¯åœ¨å¯¼å…¥çš„åœ°æ–¹ä¸å…è®¸ä¿®æ”¹å˜é‡ï¼ˆç›´æ¥æŠ¥é”™ï¼‰ï¼Œå› ä¸ºå¯¼å…¥å®ƒæ—¶ç›¸å½“äºç»™ä¸€ä¸ªå¸¸é‡èµ‹å€¼ã€‚</p>
<blockquote>
<p>å¦‚æœ ESM å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¼å…¥çš„æ¨¡å—ä¹Ÿèƒ½ä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå› ä¸ºä»–æŒ‡å‘å†…å­˜ç©ºé—´ã€‚</p>
</blockquote>
<h2>æ€»ç»“</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†æ¨¡å—åŒ–å‘å±•çš„å†ç¨‹ï¼Œä»‹ç»å„ç§è§„èŒƒå¦‚ CommonJSã€AMDã€CMDã€ESM çš„ä½¿ç”¨å’Œå¯¹æ¯”ã€‚</p>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2022-08-10T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åŒ…ç®¡ç†å·¥å…·</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/02-package-manager.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/02-package-manager.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>npm</h2>
<p><a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a></p>
]]></summary>
    <content type="html"><![CDATA[<h2>npm</h2>
<p><a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a></p>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2023-12-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å·¥å…·é“¾</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/03-tool.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/03-tool.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>JavaScript</h2>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>API å…¼å®¹ï¼Œpolyfill: core.js</li>
<li>è¯­æ³•å¢å¼ºï¼ˆcompilerï¼‰ï¼Œsyntax transformer(regenerator)ï¼Œjsxï¼Œtsc...</li>
</ul>
<p>babel ä»£ç ç¼–è¯‘å·¥å…·</p>
<ul>
<li>@babel/core</li>
<li>@babel/preset-env</li>
</ul>
<p>source code -- ast</p>
<p>swc(rust) å¯¹æ ‡ babel</p>
<p><a href="https://github.com/estree/estree" target="_blank" rel="noopener noreferrer">https://github.com/estree/estree</a></p>]]></summary>
    <content type="html"><![CDATA[<h2>JavaScript</h2>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>API å…¼å®¹ï¼Œpolyfill: core.js</li>
<li>è¯­æ³•å¢å¼ºï¼ˆcompilerï¼‰ï¼Œsyntax transformer(regenerator)ï¼Œjsxï¼Œtsc...</li>
</ul>
<p>babel ä»£ç ç¼–è¯‘å·¥å…·</p>
<ul>
<li>@babel/core</li>
<li>@babel/preset-env</li>
</ul>
<p>source code -- ast</p>
<p>swc(rust) å¯¹æ ‡ babel</p>
<p><a href="https://github.com/estree/estree" target="_blank" rel="noopener noreferrer">https://github.com/estree/estree</a></p>
<p><a href="https://github.com/bramblex/jsjs" target="_blank" rel="noopener noreferrer">https://github.com/bramblex/jsjs</a></p>
<h2>CSS</h2>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>è¯­æ³•ç¼ºå¤±ï¼ˆå¾ªç¯ã€åˆ¤æ–­ã€æ‹¼æ¥ï¼‰</li>
<li>åŠŸèƒ½ç¼ºå¤±ï¼ˆé¢œè‰²å‡½æ•°ã€æ•°å­¦å‡½æ•°ã€è‡ªå®šä¹‰å‡½æ•°ï¼‰</li>
</ul>
<p>sass/less/stylus --&gt; é¢„å¤„ç†å™¨ --&gt; css --&gt; postcssï¼ˆåå¤„ç†å™¨ï¼‰ --&gt; polyfillã€ä»£ç å‹ç¼©ã€å‰ªæ</p>
<p><a href="https://postcss.org/" target="_blank" rel="noopener noreferrer">https://postcss.org/</a></p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20231223162446.png" alt="20231223162446" tabindex="0" loading="lazy"><figcaption>20231223162446</figcaption></figure>
<h2>æ„å»ºå·¥å…·</h2>
<p>ä»¥ webpack ä¸ºä¾‹ã€‚</p>
<ol>
<li>å…¥å£ï¼šé€šè¿‡å…¥å£åˆ†æä¾èµ–å…³ç³»ï¼›</li>
<li>å¼€å‘æœåŠ¡å™¨ï¼šwebpack serve --&gt; webpack dev server --&gt; express --&gt; æºç å˜æ›´ --&gt; æµè§ˆå™¨åˆ·æ–°ï¼ˆå¼ºåˆ¶åˆ·æ–°ã€HMRï¼‰websocket</li>
<li>æ–‡ä»¶æŒ‡çº¹ï¼ˆhashï¼‰ï¼Œæ¶‰åŠåˆ°ç¼“å­˜ï¼Œç±»ä¼¼ </li>
<li>sourcemap</li>
<li>...</li>
</ol>
<h2>è„šæ‰‹æ¶</h2>
<p>æä¾›ç•Œé¢ä¸äº¤äº’ã€æä¾›å·¥ç¨‹æ¨¡ç‰ˆ</p>
<ul>
<li>craï¼šæ·±åº¦å®šåˆ¶ï¼Œé…ç½®éœ€è¦ eject æˆ–ä½¿ç”¨ react-rewired å’Œ customize-cra</li>
<li>vue-cliï¼šæ”¯æŒé…ç½®è¦†ç›–ï¼ŒæŠ˜ä¸­æ–¹æ¡ˆ</li>
<li>...</li>
</ul>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2023-12-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">é¡¹ç›®è§„èŒƒ</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/04-project-standards.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/04-project-standards.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ä»£ç è§„èŒƒ</h2>
<h3>editorconfig</h3>
<p>EditorConfig æœ‰åŠ©äºè·¨ä¸åŒç¼–è¾‘å™¨å’Œ IDE ä¸ºå¤„ç†åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜ç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚</p>
<p>VSCode éœ€è¦å®‰è£… <code>EditorConfig for VS Code</code> æ’ä»¶ã€‚</p>
<p><strong><code>.editorconfig</code></strong></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># http://editorconfig.org</span>

root <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨</span>
charset <span class="token operator">=</span> utf-8 <span class="token comment"># è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8</span>
indent_style <span class="token operator">=</span> space <span class="token comment"># ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰</span>
indent_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment"># ç¼©è¿›å¤§å°</span>
end_of_line <span class="token operator">=</span> lf <span class="token comment"># æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ</span>

<span class="token punctuation">[</span>*.md<span class="token punctuation">]</span> <span class="token comment"># è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™</span>
max_line_length <span class="token operator">=</span> off
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>ä»£ç è§„èŒƒ</h2>
<h3>editorconfig</h3>
<p>EditorConfig æœ‰åŠ©äºè·¨ä¸åŒç¼–è¾‘å™¨å’Œ IDE ä¸ºå¤„ç†åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜ç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚</p>
<p>VSCode éœ€è¦å®‰è£… <code>EditorConfig for VS Code</code> æ’ä»¶ã€‚</p>
<p><strong><code>.editorconfig</code></strong></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># http://editorconfig.org</span>

root <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨</span>
charset <span class="token operator">=</span> utf-8 <span class="token comment"># è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8</span>
indent_style <span class="token operator">=</span> space <span class="token comment"># ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰</span>
indent_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment"># ç¼©è¿›å¤§å°</span>
end_of_line <span class="token operator">=</span> lf <span class="token comment"># æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ</span>

<span class="token punctuation">[</span>*.md<span class="token punctuation">]</span> <span class="token comment"># è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™</span>
max_line_length <span class="token operator">=</span> off
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h3>ESLint</h3>
<p>ESLint æ˜¯ä¸€ä¸ª Javascript Linterï¼Œå¸®åŠ©æˆ‘ä»¬è§„èŒƒä»£ç è´¨é‡ï¼Œæé«˜å›¢é˜Ÿå¼€å‘æ•ˆç‡ã€‚</p>
<p>å®‰è£… <code>eslint</code> å¹¶æ–°å»ºé…ç½®æ–‡ä»¶ <code>.eslintrc.js</code>ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> eslint <span class="token parameter variable">-D</span>
</code></pre></div><div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'eslint:recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">'latest'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">'module'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœæƒ³è¦åœ¨é¡¹ç›®ä¸­å®‰è£… <code>jest</code>ï¼Œåˆ™éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ <code>env</code> åŠ ä¸Šä¸‹é¢è¿™ä¸€è¡Œï¼š</p>
<div class="language-diff" data-ext="diff" data-title="diff"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> env: {
</span><span class="token prefix unchanged"> </span><span class="token line">   browser: true,
</span><span class="token prefix unchanged"> </span><span class="token line">   es2021: true,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   jest: true
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span></code></pre></div><p>å¦‚æœæƒ³å’Œ <code>prettier</code> ä¸€èµ·ä½¿ç”¨åˆ™éœ€è¦åœ¨ <code>extends</code> ä¸­åŠ å…¥ï¼š</p>
<div class="language-diff" data-ext="diff" data-title="diff"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> extends: [
</span><span class="token prefix unchanged"> </span><span class="token line">   'eslint:recommended',
</span><span class="token prefix unchanged"> </span><span class="token line">   'plugin:react/recommended',
</span><span class="token prefix unchanged"> </span><span class="token line">   'plugin:@typescript-eslint/recommended',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   "prettier"
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],
</span></span></code></pre></div><p>è¿˜éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…ä¸ <code>TypeScript</code> ç›¸å…³çš„æ’ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> eslint-plugin-import @typescript-eslint/parser eslint-import-resolver-typescript
</code></pre></div><p>æœ€ååœ¨ <code>.eslintrc.js</code> ä¸­æ·»åŠ  <code>settings</code>ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">settings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">"import/resolver"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">"typescript"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>prettier</h3>
<p><code>prettier</code> æ˜¯ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå’Œ <code>eslint</code> ä¸åŒçš„æ˜¯ï¼Œå®ƒåªå…³æ³¨ä»£ç æ ¼å¼ï¼Œè€Œä¸å…³æ³¨è¯­æ³•é—®é¢˜ã€‚</p>
<p>é¦–å…ˆå®‰è£… <code>prettier</code> åŠç›¸å…³ä¾èµ–æ’ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> prettier eslint-config-prettier eslint-plugin-prettier eslint-plugin-react-hooks <span class="token parameter variable">-D</span>
</code></pre></div><p>ä¸ºäº†ä½¿ç”¨åˆšæ‰å®‰è£…çš„æ’ä»¶ï¼Œéœ€è¦å¯¹ <code>.eslintrc.js</code> ä¸­çš„ <code>plugins</code> è¿›è¡Œä¿®æ”¹ï¼š</p>
<div class="language-diff" data-ext="diff" data-title="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> plugins: ["react", "@typescript-eslint"]
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> plugins: ["react", "react-hooks", "@typescript-eslint", "prettier"]
</span></span></code></pre></div><p><code>prettier</code> åŸºæœ¬çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<p><strong><code>.prettierrc</code></strong></p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"useTabs"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">"tabWidth"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">"printWidth"</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
  <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span>
  <span class="token property">"semi"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>.prettierignore</code></strong></p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>/dist/*
.local
.output.js
/node_modules/**

**/*.svg
**/*.sh

/public/*
</code></pre></div><p>æœ€åå¯ä»¥åœ¨ <code>package.json</code> ä¸­é…ç½® <code>scripts</code>ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lint"</span><span class="token operator">:</span> <span class="token string">"eslint src/**/*.{js,jsx,ts,tsx,json}"</span><span class="token punctuation">,</span>
    <span class="token property">"lint:fix"</span><span class="token operator">:</span> <span class="token string">"eslint --fix 'src/**/*.{js,jsx,ts,tsx,json}'"</span><span class="token punctuation">,</span>
    <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"prettier --write 'src/**/*.{js,jsx,ts,tsx,css,md,json}' --config ./.prettierrc"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>StyleLint</h3>
<p><code>Stylelint</code> æ˜¯ä¸€ä¸ªå¼ºå¤§ã€å…ˆè¿›çš„ CSS ä»£ç æ£€æŸ¥å™¨ï¼ˆlinterï¼‰ï¼Œå¯ä»¥å¸®åŠ©ä½ è§„é¿ CSS ä»£ç ä¸­çš„é”™è¯¯å¹¶ä¿æŒä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚</p>
<blockquote>
<p><a href="https://stylelint.io/" target="_blank" rel="noopener noreferrer">https://stylelint.io/</a></p>
</blockquote>
<p>å®‰è£…ä¾èµ–</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨ scss</span>
<span class="token function">pnpm</span> <span class="token function">add</span> stylelint stylelint-config-standard-scss <span class="token parameter variable">-D</span>
<span class="token function">pnpm</span> <span class="token function">add</span> postcss-scss <span class="token parameter variable">-D</span>
</code></pre></div><p>é…ç½®æ–‡ä»¶ <code>.stylelintrc.js</code>ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">'stylelint-config-standard-scss'</span><span class="token punctuation">,</span>
  <span class="token comment">// ruleè¦†ç›–ï¼ˆæ ¹æ®è‡ªå·±å–œå¥½æ¥é…ç½®ï¼‰</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'string-quotes'</span><span class="token operator">:</span> <span class="token string">'single'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'property-no-vendor-prefix'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'declaration-colon-newline-after'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'value-list-comma-newline-after'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'custom-property-pattern'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'color-hex-length'</span><span class="token operator">:</span> <span class="token string">'short'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'color-function-notation'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'alpha-value-notation'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'value-no-vendor-prefix'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'selector-class-pattern'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'function-url-quotes'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'no-missing-end-of-source-newline'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">'no-descending-specificity'</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">'font-family-no-missing-generic-family-keyword'</span><span class="token operator">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// è‹¥é¡¹ç›®ä¸­å­˜åœ¨scssæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token string">'**/*.scss'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">customSyntax</span><span class="token operator">:</span> <span class="token string">'postcss-scss'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>.stylelintignore</code> å¿½ç•¥æ ¡éªŒç›®å½•æ–‡ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>/dist/*
/public/*
public/*
node_modules
</code></pre></div><h2>Git è§„èŒƒ</h2>
<p><code>Git</code> è§„èŒƒåŒ…æ‹¬ï¼š</p>
<ul>
<li><code>pre-commit</code>ï¼šåˆ¤æ–­æäº¤çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒ</li>
<li><code>commit-message</code>ï¼šåˆ¤æ–­ <code>commit</code> ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ</li>
</ul>
<h3>husky</h3>
<p><code>husky</code> å¯ä»¥ç®¡ç† <code>git</code> ä¸­çš„ <code>hooks</code>ï¼Œåˆå§‹åŒ–åº”è¯¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> dlx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">pnpm</span> <span class="token function">install</span> <span class="token comment"># pnpm</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å®ƒå°†è®¾ç½® <code>husky</code>ï¼Œä¿®æ”¹ <code>package.json</code> å¹¶åˆ›å»ºä¸€ä¸ªä½ å¯ä»¥ç¼–è¾‘çš„é¢„æäº¤é’©å­æ ·æœ¬ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†åœ¨ä½ æäº¤æ—¶è¿è¡Œ <code>npm test</code>ã€‚</p>
</div>
<p>ç„¶åä¿®æ”¹ <code>pre-commit</code>ï¼š</p>
<div class="language-diff" data-ext="diff" data-title="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> npm test
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> npm run lint
</span></span></code></pre></div><p>è¿™æ ·åœ¨æ¯æ¬¡ <code>git commit</code> ä¹‹å‰ï¼Œéƒ½ä¼šé¦–å…ˆè¿›è¡Œ <code>lint</code> æ£€æŸ¥ï¼Œé€šè¿‡ä¹‹åæ‰èƒ½æäº¤ä»£ç ã€‚</p>
<h3>lint-staged</h3>
<p>ç„¶è€Œæ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æˆ‘ä»¬åªä¿®æ”¹äº†ä¸ªåˆ«çš„æ–‡ä»¶ï¼Œæ²¡æœ‰å¿…è¦æ£€æµ‹æ‰€æœ‰çš„æ–‡ä»¶ä»£ç æ ¼å¼</li>
<li>å®ƒåªèƒ½ç»™æˆ‘ä»¬æç¤ºå‡ºå¯¹åº”çš„é”™è¯¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰‹åŠ¨çš„è¿›è¡Œä»£ç ä¿®æ”¹</li>
<li>ä¿®æ”¹åéœ€è¦æ‰‹åŠ¨ <code>git add .</code></li>
</ol>
<p>è¿™æ—¶å¯ä»¥ä½¿ç”¨ <code>lint-staged</code> è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒåªä¼šæ£€æŸ¥åœ¨æš‚å­˜åŒºçš„ä»£ç ã€‚</p>
<p>å®‰è£…ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> lint-staged <span class="token parameter variable">-D</span>
</code></pre></div><p>ä¿®æ”¹ <code>.husky</code> ä¸­çš„ <code>pre-commit</code>ï¼š</p>
<div class="language-diff" data-ext="diff" data-title="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> npm test
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> npx --no-install lint-staged
</span></span></code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>--no-install</code> å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
</div>
<p>åœ¨ <code>package.json</code> ä¸­é…ç½®ï¼š</p>
<blockquote>
<p>å‚è€ƒèµ„æ–™</p>
<p><a href="https://github.com/ant-design/ant-design/blob/master/package.json" target="_blank" rel="noopener noreferrer">https://github.com/ant-design/ant-design/blob/master/package.json</a> &gt; <a href="https://www.npmjs.com/package/lint-staged" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/lint-staged</a> &gt; <a href="https://juejin.cn/post/7136009620979449893#heading-5" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7136009620979449893#heading-5</a></p>
</blockquote>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"*.{json,md}"</span><span class="token operator">:</span> <span class="token string">"prettier --ignore-unknown --write"</span><span class="token punctuation">,</span>
  <span class="token property">"*.{js,jsx,ts,tsx}"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"eslint --fix"</span><span class="token punctuation">,</span>
    <span class="token string">"prettier --write"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"{!(package)*.json,*.code-snippets,.!(browserslist)*rc}"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"prettier --write--parser json"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"package.json"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"prettier --write"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"*.{scss,less,styl,html}"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"stylelint --fix"</span><span class="token punctuation">,</span>
    <span class="token string">"prettier --write"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>commitizen</h3>
<p>åœ¨å®‰è£…å®Œä¸Šé¢ä¸¤ä¸ªä¾èµ–åï¼Œå°±å·²ç»èƒ½åœ¨ <code>pre-commit</code> é’©å­åˆ¤æ–­<strong>æš‚å­˜åŒºä»£ç </strong>æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œå¹¶ä¸”ä½¿ç”¨ <code>prettier</code> ä¿®å¤å®ƒã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦åœ¨ <code>commit-message</code> ä¸­åˆ¤æ–­ <code>commit</code> ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚å¯ä»¥ä½¿ç”¨ <code>commitizen</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ’°å†™ç¬¦åˆ <code>Commit Message</code> æ ‡å‡†çš„ä¸€æ¬¾å·¥å…·ã€‚é€šè¿‡å®ƒå¯ä»¥å®ç°äº¤äº’å¼æ’°å†™è§„èŒƒçš„ <code>Commit Message</code>ã€‚</p>
<blockquote>
<p><a href="http://commitizen.github.io/cz-cli/" target="_blank" rel="noopener noreferrer">http://commitizen.github.io/cz-cli/</a></p>
</blockquote>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> commitizen <span class="token parameter variable">-D</span>
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½é‡‡ç”¨ç¬¦åˆ Angular çš„ <code>Commit message</code> æ ¼å¼çš„æäº¤è§„èŒƒï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆç¬¦åˆ Angular æäº¤è§„èŒƒæ ¼å¼çš„ <code>Commit message</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx --no-install commitizen init cz-conventional-changelog <span class="token parameter variable">--pnpm</span> --save-dev --save-exact
</code></pre></div><p><code>package.json</code> ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹é…ç½®ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">"config"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"commitizen"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"./node_modules/cz-conventional-changelog"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶ååœ¨ <code>package.json</code> ä¸­çš„ <code>scripts</code> æ·»åŠ å‘½ä»¤ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">"commit"</span><span class="token operator">:</span> <span class="token string">"git-cz"</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>commitlint</h3>
<p>è™½ç„¶ä½¿ç”¨äº† <code>commitizen</code> äº¤äº’å¼æ’°å†™è§„èŒƒçš„ <code>Commit Message</code>ï¼Œä½†ç”±äºå®ƒä¸æ˜¯å¼ºåˆ¶ä½¿ç”¨ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ <code>git commit</code> æäº¤ä¿¡æ¯ï¼Œå› æ­¤ä¸ç®¡æ˜¯ä½¿ç”¨ <code>git commit</code> æˆ– <code>git cz</code>ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹ <code>commit message</code> è¿›è¡Œæ ¡éªŒï¼Œä¸å…è®¸è§„èŒƒçš„æƒ…å†µä¸‹ä¸èƒ½è¿›è¡Œ <code>commit</code> æ“ä½œã€‚</p>
<blockquote>
<p><a href="https://commitlint.js.org/#/guides-local-setup" target="_blank" rel="noopener noreferrer">https://commitlint.js.org/#/guides-local-setup</a></p>
</blockquote>
<p>é¦–å…ˆå®‰è£…ç›¸å…³ä¾èµ–å¹¶ä¸”ç”Ÿæˆç›¸å…³é…ç½®ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Install and configure if needed</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev @commitlint/<span class="token punctuation">{</span>cli,config-conventional<span class="token punctuation">}</span>
<span class="token comment"># For Windows:</span>
<span class="token function">pnpm</span> <span class="token function">add</span> @commitlint/config-conventional @commitlint/cli <span class="token parameter variable">-D</span>

<span class="token comment"># Configure commitlint to use conventional config</span>
<span class="token builtin class-name">echo</span> <span class="token string">"module.exports = { ignores: [(commit) =&gt; commit.includes('init')], extends: ['@commitlint/config-conventional'] };"</span> <span class="token operator">&gt;</span> commitlint.config.js
</code></pre></div><p>åœ¨ <code>hushy</code> ä¸­è‡ªåŠ¨ç”Ÿæˆ <code>hook</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">"npx --no-install commitlint --edit <span class="token variable">$1</span>"</span>
</code></pre></div><p>é™¤äº† <code>cli</code> å’Œ <code>config-conventional</code> å¤–ï¼Œ<code>commitlint</code> è¿˜æä¾›äº†å…¶ä»–çš„å·¥å…·åŒ…ï¼š</p>
<ul>
<li><code>@commitlint/cli</code>: è¿™æ˜¯ <code>commitlint</code> çš„å‘½ä»¤è¡Œæ¥å£ï¼Œç”¨äºåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>commitlint</code>ã€‚</li>
<li><code>@commitlint/config-conventional</code>: è¿™æ˜¯ <code>commitlint</code> çš„ä¸€ä¸ªå¸¸è§„é…ç½®ï¼Œå®ƒæä¾›äº†ä¸€ç»„å¸¸è§„çš„ <code>commit</code> è§„åˆ™ï¼Œè¿™äº›è§„åˆ™æ¥æºäº <code>Angular</code> å›¢é˜Ÿçš„æäº¤è§„èŒƒã€‚</li>
<li><code>@commitlint/cz-commitlint</code>: è¿™ä¸ªåŒ…æ˜¯ <code>commitizen</code> ä¸ <code>commitlint</code> çš„é€‚é…å™¨ï¼Œç”¨äºåœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨äº¤äº’å¼çš„ <code>commit</code> æç¤ºå™¨ï¼Œæ¥ååŠ©å¼€å‘è€…å®Œæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚</li>
<li><code>@commitlint/format</code>: è¿™ä¸ªåŒ…æä¾›äº†ä¸€ç§æ ¼å¼åŒ– <code>commitlint</code> è¿”å›çš„ç»“æœçš„æ–¹å¼ï¼Œå¯ä»¥è‡ªå®šä¹‰è¾“å‡ºç»“æœçš„æ ·å¼ã€‚</li>
<li><code>@commitlint/prompt-cli</code>: è¿™ä¸ªåŒ…æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„äº¤äº’å¼æç¤ºå™¨ï¼Œç”¨äºåœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨äº¤äº’å¼çš„ <code>commit</code> æç¤ºå™¨ï¼Œæ¥ååŠ©å¼€å‘è€…å®Œæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">`commitizen` å’Œ `@commitlint/cz-commitlint` çš„åŒºåˆ«</p>
<p><code>commitizen</code> å’Œ <code>@commitlint/cz-commitlint</code> çš„åŠŸèƒ½å¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œä½†å®ƒä»¬å¯ä»¥ååŒå·¥ä½œæ¥å¸®åŠ©å®ç°æ›´å¥½åœ° <code>git commit</code> ä¿¡æ¯ã€‚</p>
<p><code>commitizen</code> æ˜¯ä¸€ä¸ªå¸®åŠ©åˆ›å»ºç¬¦åˆè§„èŒƒçš„ <code>git commit</code> çš„å·¥å…·ã€‚å®ƒåœ¨è¿è¡Œ <code>git cz</code> æ—¶ä¼šæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œçš„äº¤äº’å¼ç•Œé¢æ¥å¼•å¯¼ä½ åˆ›å»º <code>commit</code>ï¼Œä½¿ <code>commit message</code> æ›´ä¸ºæ ‡å‡†åŒ–ã€‚</p>
<p><code>@commitlint/cz-commitlint</code> æ˜¯ä¸€ä¸ªä¸º <code>commitizen</code> æä¾›çš„ <code>@commitlint</code> é€‚é…å™¨ã€‚å®ƒè®© <code>commitizen</code> å¯ä»¥ä½¿ç”¨ <code>@commitlint</code> çš„ <code>config</code> é…ç½®ï¼ˆå¦‚ <code>@commitlint/config-conventional</code>ï¼‰ä½œä¸º <code>commit</code> æç¤ºçš„è§„åˆ™ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š<code>commitizen</code> æä¾›äº†ä¸€ç§æ–¹å¼æ¥åˆ›å»º <code>commit</code>ï¼Œè€Œ <code>@commitlint/cz-commitlint</code> åˆ™æ˜¯å…è®¸ <code>commitizen</code> ä½¿ç”¨ <code>commitlint</code> çš„è§„åˆ™è¿›è¡Œ <code>commit</code> ä¿¡æ¯çš„åˆ›å»ºã€‚</p>
<p>è¿™æ ·ï¼Œå½“ä½¿ç”¨ <code>commitizen</code> è¿›è¡Œ <code>commit</code> æ—¶ï¼Œå°±ä¼šéµå®ˆ <code>commitlint</code> çš„è§„åˆ™ï¼Œå¦‚æœä¸éµå®ˆï¼Œ<code>commit</code> å°±ä¼šè¢«é˜»æ­¢ï¼Œé™¤éä¿®æ”¹ä¸ºç¬¦åˆè§„åˆ™çš„ä¿¡æ¯ã€‚è¿™å¯ä»¥ä¿è¯é¡¹ç›®ä¸­çš„ <code>git commit</code> æ ·å¼çš„ä¸€è‡´æ€§ã€‚</p>
<p>æ€»ç»“ï¼š<code>commitizen</code> è´Ÿè´£å¼•å¯¼åˆ›å»º <code>commit</code>ï¼Œè€Œ <code>@commitlint/cz-commitlint</code> åˆ™è´Ÿè´£è®¾å®šåˆ›å»º <code>commit</code> çš„è§„åˆ™ã€‚</p>
</div>
<div class="hint-container tip">
<p class="hint-container-title">`commitizen` å’Œ `@commitlint/prompt-cli` çš„åŒºåˆ«</p>
<p><code>@commitlint/prompt-cli</code> å’Œ <code>commitizen</code> çš„åŠŸèƒ½ç±»ä¼¼ï¼Œå®ƒä»¬éƒ½æä¾›å‘½ä»¤è¡Œçš„äº¤äº’å¼ç•Œé¢æ¥å¼•å¯¼åˆ›å»ºç¬¦åˆè§„èŒƒçš„ <code>commit message</code>ã€‚</p>
<p>åŒºåˆ«ä¸»è¦åœ¨äºï¼š</p>
<ul>
<li><code>@commitlint/prompt-cli</code> æ˜¯ <code>commitlint</code> çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºæ•è· <code>commit message</code> è¿›è¡Œæ ¡éªŒã€‚</li>
<li><code>commitizen</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒæ²¡æœ‰è‡ªå·±çš„æ ¡éªŒè§„èŒƒï¼Œä½†å¯ä»¥éå¸¸å¥½çš„ä¸ <code>commitlint</code> ä»¥åŠå…¶ä»–è§„èŒƒé…åˆä½¿ç”¨ã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤è€…å¯ä»¥ä¸€èµ·ä½¿ç”¨æˆ–åˆ†å¼€ä½¿ç”¨ï¼Œé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªä¸»è¦å–å†³äºå¸Œæœ›ä»å“ªä¸ªå·¥å…·ä¸­è·å–éœ€è¦çš„ç‰¹æ€§æˆ–è€…ä¸ªäººçš„ä½¿ç”¨ä¹ æƒ¯ã€‚</p>
</div>
<h3>CHANGELOG</h3>
<p>CHANGELOG è®°å½•é¡¹ç›®æ‰€æœ‰çš„ <code>commit</code> ä¿¡æ¯å¹¶å½’ç±»ç‰ˆæœ¬ï¼Œå¯ä»¥å¿«é€Ÿè·³è½¬åˆ°è¯¥æ¡ <code>commit</code> è®°å½•ï¼Œæ–¹ä¾¿çŸ¥é“é¡¹ç›®å“ªä¸ªç‰ˆæœ¬åšäº†å“ªäº›åŠŸèƒ½æœ‰å“ªäº› bug ç­‰ä¿¡æ¯ã€‚ä¹Ÿæ–¹ä¾¿æ’æŸ¥ bugï¼Œå¯¹äºæäº¤è®°å½•ä¸€ç›®äº†ç„¶ï¼Œä¸ç”¨ä¸€ä¸ªä¸€ä¸ªå»ç¿»å»æŸ¥ã€‚</p>
<blockquote>
<p><a href="https://juejin.cn/post/7136009620979449893" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7136009620979449893</a></p>
</blockquote>
<p>é¦–å…ˆå®‰è£… <code>standard-version</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> <span class="token function">add</span> standard-version <span class="token parameter variable">-D</span>
</code></pre></div><p>ç„¶ååœ¨ <code>package.json</code> çš„ <code>scripts</code> ä¸­æ·»åŠ å‘½ä»¤ï¼š</p>
<div class="language-json" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">"standard-version"</span><span class="token operator">:</span> <span class="token string">"standard-version"</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“ <code>commit type</code> æ˜¯ <code>feat</code> å’Œ <code>fix</code> çš„æ—¶å€™æ‰§è¡Œ <code>npm run standard-version</code>ï¼Œå®ƒä¼šè‡ªå¢ç‰ˆæœ¬å·ã€‚</p>
<p><code>standard-version</code> æä¾›è‡ªå®šä¹‰é…ç½®ä¸åŒç±»å‹å¯¹åº”æ˜¾ç¤ºæ–‡æ¡ˆï¼Œåœ¨æ ¹ç›®å½•æ–°å»º <code>.versionrc.js</code> æ–‡ä»¶ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'âœ¨ Features | æ–°åŠŸèƒ½'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸ› Bug Fixes | Bug ä¿®å¤'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸ‰ Init | åˆå§‹åŒ–'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'âœï¸ Documentation | æ–‡æ¡£'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸ’„ Styles | é£æ ¼'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'â™»ï¸ Code Refactoring | ä»£ç é‡æ„'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'âœ… Tests | æµ‹è¯•'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'âª Revert | å›é€€'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸ“¦â€ Build System | æ‰“åŒ…æ„å»º'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'ci'</span><span class="token punctuation">,</span> <span class="token literal-property property">section</span><span class="token operator">:</span> <span class="token string">'ğŸ‘· Continuous Integration | CI é…ç½®'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2023-11-21T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">yeoman åŸºç¡€ä½¿ç”¨</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/05-yeoman.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/05-yeoman.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p><code>yo@5.0.0</code> å¼•å…¥äº†ä¸€ä¸ªç ´åæ€§çš„æ›´æ–°ï¼Œä¼šå¯¼è‡´ <a href="https://github.com/yeoman/generator-generator/issues/258" target="_blank" rel="noopener noreferrer">instantiatedGenerator.run is not a function</a>ï¼Œéœ€è¦é™çº§åˆ° <code>@4.x</code>ã€‚</p>
<p>é™çº§åä»æœ‰æŠ¥é”™ï¼Œå¯èƒ½æ˜¯ <code>generator-node</code> çš„é—®é¢˜ï¼Œä¸å†æ¨èä½¿ç”¨ã€‚</p>
</div>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p><code>yo@5.0.0</code> å¼•å…¥äº†ä¸€ä¸ªç ´åæ€§çš„æ›´æ–°ï¼Œä¼šå¯¼è‡´ <a href="https://github.com/yeoman/generator-generator/issues/258" target="_blank" rel="noopener noreferrer">instantiatedGenerator.run is not a function</a>ï¼Œéœ€è¦é™çº§åˆ° <code>@4.x</code>ã€‚</p>
<p>é™çº§åä»æœ‰æŠ¥é”™ï¼Œå¯èƒ½æ˜¯ <code>generator-node</code> çš„é—®é¢˜ï¼Œä¸å†æ¨èä½¿ç”¨ã€‚</p>
</div>
<p>Yeoman æ˜¯ä¸€ä¸ªé€šç”¨çš„è„šæ‰‹æ¶ç³»ç»Ÿï¼Œå…è®¸åˆ›å»ºä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚å®ƒå¯ä»¥å¿«é€Ÿå¯åŠ¨æ–°é¡¹ç›®ï¼Œå¹¶ç®€åŒ–ç°æœ‰é¡¹ç›®çš„ç»´æŠ¤å·¥ä½œã€‚</p>
<p>Yeoman ä¸è¯­è¨€æ— å…³ã€‚å®ƒå¯ä»¥ç”Ÿæˆä»»ä½•è¯­è¨€ï¼ˆWebã€Javaã€Pythonã€C# ç­‰ï¼‰çš„é¡¹ç›®ã€‚</p>
<p>Yeoman æœ¬èº«ä¸åšä»»ä½•å†³å®šã€‚æ‰€æœ‰å†³å®šéƒ½ç”±ç”Ÿæˆå™¨åšå‡ºï¼Œè€Œç”Ÿæˆå™¨åŸºæœ¬ä¸Šå°±æ˜¯ Yeoman ç¯å¢ƒä¸­çš„æ’ä»¶ã€‚æœ‰å¾ˆå¤šå…¬å¼€å¯ç”¨çš„ç”Ÿæˆå™¨ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç”Ÿæˆå™¨æ¥åŒ¹é…ä»»ä½•å·¥ä½œæµç¨‹ä¹Ÿå¾ˆå®¹æ˜“ã€‚Yeoman å§‹ç»ˆæ˜¯æ»¡è¶³è„šæ‰‹æ¶éœ€æ±‚çš„æ­£ç¡®é€‰æ‹©ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<ul>
<li>å¿«é€Ÿåˆ›å»ºæ–°é¡¹ç›®</li>
<li>åˆ›å»ºé¡¹ç›®çš„æ–°éƒ¨åˆ†ï¼Œå¦‚å¸¦æœ‰å•å…ƒæµ‹è¯•çš„æ–°æ§åˆ¶å™¨</li>
<li>åˆ›å»ºæ¨¡å—æˆ–è½¯ä»¶åŒ…</li>
<li>å¼•å¯¼æ–°æœåŠ¡</li>
<li>æ‰§è¡Œæ ‡å‡†ã€æœ€ä½³å®è·µå’Œé£æ ¼æŒ‡å—</li>
<li>é€šè¿‡è®©ç”¨æˆ·ä½¿ç”¨ç¤ºä¾‹åº”ç”¨ç¨‹åºæ¥æ¨å¹¿æ–°é¡¹ç›®</li>
<li>...</li>
</ul>
<h2>å¼€å§‹</h2>
<p><code>yo</code> æ˜¯ä¸€æ¬¾ Yeoman å‘½ä»¤è¡Œå®ç”¨ç¨‹åºï¼Œå…è®¸ä½¿ç”¨è„šæ‰‹æ¶æ¨¡æ¿ï¼ˆç®€ç§°ä¸ºç”Ÿæˆå™¨ï¼‰åˆ›å»ºé¡¹ç›®ã€‚ä½¿ç”¨ npm å®‰è£… <code>yo</code> å’Œç”Ÿæˆå™¨ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> yo
</code></pre></div><p>ç„¶åå¯ä»¥å®‰è£…ä¸€äº›ç”Ÿæˆå™¨ï¼š</p>
<div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>å¯ä»¥åœ¨ <a href="https://yeoman.io/generators/" target="_blank" rel="noopener noreferrer">ç”Ÿæˆå™¨</a> ä¸­æœç´¢æƒ³è¦çš„ç”Ÿæˆå™¨ã€‚</p>
</div>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> generator-node
</code></pre></div><h2>åŸºæœ¬è„šæ‰‹æ¶</h2>
<p>æ­å»ºåŸºæœ¬è„šæ‰‹æ¶ï¼Œåªéœ€è¦å»é™¤ç”Ÿæˆå™¨å‰ç¼€ <code>generator-</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yo <span class="token function">node</span>
</code></pre></div><p>å¤§å¤šæ•°ç”Ÿæˆå™¨ä¼šæå‡ºä¸€ç³»åˆ—é—®é¢˜æ¥å®šåˆ¶æ–°é¡¹ç›®ã€‚è¦æŸ¥çœ‹å“ªäº›é€‰é¡¹å¯ç”¨ï¼Œè¯·ä½¿ç”¨ <code>help</code> å‘½ä»¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yo <span class="token function">node</span> <span class="token parameter variable">--help</span>
</code></pre></div><p>å¾ˆå¤šç”Ÿæˆå™¨éƒ½ä¾èµ–äºæ„å»ºç³»ç»Ÿï¼ˆå¦‚ Grunt æˆ– Gulpï¼‰å’Œè½¯ä»¶åŒ…ç®¡ç†å™¨ï¼ˆå¦‚ npm å’Œ Bowerï¼‰ã€‚è¯·åŠ¡å¿…è®¿é—®ç”Ÿæˆå™¨çš„ç½‘ç«™ï¼Œäº†è§£è¿è¡Œå’Œç»´æŠ¤æ–°åº”ç”¨ç¨‹åºçš„ç›¸å…³ä¿¡æ¯ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯è½»æ¾è®¿é—®ç”Ÿæˆå™¨çš„ä¸»é¡µï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> home generator-node
</code></pre></div><p>ä¸ºå¤æ‚æ¡†æ¶æ­å»ºè„šæ‰‹æ¶çš„ç”Ÿæˆå™¨å¯èƒ½ä¼šæä¾›é¢å¤–çš„ç”Ÿæˆå™¨ï¼Œä¸ºé¡¹ç›®çš„è¾ƒå°éƒ¨åˆ†æ­å»ºè„šæ‰‹æ¶ã€‚è¿™äº›ç”Ÿæˆå™¨é€šå¸¸è¢«ç§°ä¸ºå­ç”Ÿæˆå™¨ï¼Œè®¿é—®æ–¹å¼ä¸º <code>generator:sub-generator</code>ã€‚</p>
<p>ä»¥ <code>generator-node</code> ä¸ºä¾‹ã€‚ä¸€æ—¦ç”Ÿæˆäº†å®Œæ•´çš„ node åº”ç”¨ç¨‹åºï¼Œå°±å¯ä»¥æ·»åŠ å…¶ä»–åŠŸèƒ½ã€‚è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ æ–°æ§åˆ¶å™¨ï¼Œè¯·è¿è¡Œæ§åˆ¶å™¨å­ç”Ÿæˆå™¨ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yo node:cli
</code></pre></div><h2>å…¶ä»– yo å‘½ä»¤</h2>
<p>é™¤äº†ä¸Šä¸€èŠ‚ä»‹ç»çš„åŸºç¡€çŸ¥è¯†ï¼Œ<code>yo</code> è¿˜æ˜¯ä¸€ä¸ªå®Œå…¨äº¤äº’å¼çš„å·¥å…·ã€‚åªéœ€åœ¨ç»ˆç«¯é”®å…¥ <code>yo</code>ï¼Œå°±èƒ½çœ‹åˆ°ä¸€ç³»åˆ—é€‰é¡¹ï¼Œç”¨äºç®¡ç†ä¸ç”Ÿæˆå™¨æœ‰å…³çš„ä¸€åˆ‡ï¼šè¿è¡Œã€æ›´æ–°ã€å®‰è£…ã€å¸®åŠ©å’Œå…¶ä»–å®ç”¨ç¨‹åºã€‚</p>
<p><code>yo</code> è¿˜æä¾›ä»¥ä¸‹å‘½ä»¤ã€‚</p>
<ul>
<li><code>yo --help</code> è®¿é—®å®Œæ•´çš„å¸®åŠ©ç•Œé¢</li>
<li><code>yo --generators</code> åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ç”Ÿæˆå™¨</li>
<li><code>yo --version</code> è·å–ç‰ˆæœ¬</li>
</ul>
<h2>æ•…éšœæ’é™¤</h2>
<p>å¤§å¤šæ•°é—®é¢˜éƒ½å¯ä»¥é€šè¿‡è¿è¡Œï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>yo doctor
</code></pre></div><p><code>doctor</code> å‘½ä»¤å°†è¯Šæ–­å¹¶æä¾›è§£å†³æœ€å¸¸è§é—®é¢˜çš„æ­¥éª¤ã€‚</p>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2024-01-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">fnm å’Œ nvm å¯¹æ¯”</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/06-fnm-nvm.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/06-fnm-nvm.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ç®¡ç†å¤šä¸ª Node.js é¡¹ç›®ï¼ˆæ¯ä¸ªé¡¹ç›®éƒ½å¯èƒ½éœ€è¦ä¸åŒçš„ Node ç‰ˆæœ¬ï¼‰æ—¶ï¼Œå¯é çš„ç‰ˆæœ¬ç®¡ç†å™¨å¯ä»¥ç®€åŒ–æ‚¨çš„å·¥ä½œæµç¨‹ã€‚ ä¸¤ç§æµè¡Œçš„é€‰æ‹©æ˜¯ <a href="https://github.com/Schniz/fnm" target="_blank" rel="noopener noreferrer">fnmï¼ˆFast Node Managerï¼‰</a> å’Œ <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvmï¼ˆNode Version Managerï¼‰</a>ã€‚æœ¬æ–‡ä»æ€§èƒ½ã€åŠŸèƒ½ã€å®‰è£…ç®€ä¾¿æ€§ã€ä½¿ç”¨å’Œå…¼å®¹æ€§ç­‰æ–¹é¢å¯¹ <code>fnm</code> å’Œ <code>nvm</code> è¿›è¡Œäº†æ¯”è¾ƒï¼Œå¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆè‡ªå·±å¼€å‘éœ€æ±‚çš„ç‰ˆæœ¬ç®¡ç†å™¨ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ç®¡ç†å¤šä¸ª Node.js é¡¹ç›®ï¼ˆæ¯ä¸ªé¡¹ç›®éƒ½å¯èƒ½éœ€è¦ä¸åŒçš„ Node ç‰ˆæœ¬ï¼‰æ—¶ï¼Œå¯é çš„ç‰ˆæœ¬ç®¡ç†å™¨å¯ä»¥ç®€åŒ–æ‚¨çš„å·¥ä½œæµç¨‹ã€‚ ä¸¤ç§æµè¡Œçš„é€‰æ‹©æ˜¯ <a href="https://github.com/Schniz/fnm" target="_blank" rel="noopener noreferrer">fnmï¼ˆFast Node Managerï¼‰</a> å’Œ <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvmï¼ˆNode Version Managerï¼‰</a>ã€‚æœ¬æ–‡ä»æ€§èƒ½ã€åŠŸèƒ½ã€å®‰è£…ç®€ä¾¿æ€§ã€ä½¿ç”¨å’Œå…¼å®¹æ€§ç­‰æ–¹é¢å¯¹ <code>fnm</code> å’Œ <code>nvm</code> è¿›è¡Œäº†æ¯”è¾ƒï¼Œå¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆè‡ªå·±å¼€å‘éœ€æ±‚çš„ç‰ˆæœ¬ç®¡ç†å™¨ã€‚</p>
<h2>fnm å’Œ nvm ç®€ä»‹</h2>
<p><code>nvm</code>ï¼šä½œä¸ºæœ€å¹¿æ³›ä½¿ç”¨çš„ Node.js ç‰ˆæœ¬ç®¡ç†å™¨ï¼Œ<code>nvm</code> æä¾›äº†å¯é çš„ Node.js ç‰ˆæœ¬ç®¡ç†ã€‚å®ƒç”¨ Bash ç¼–å†™ï¼Œé€‚ç”¨äºç±» UNIX ç¯å¢ƒï¼ˆå¦‚ macOS å’Œ Linuxï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¼å®¹çš„ shellï¼ˆå¦‚ WSLï¼‰åœ¨ Windows ä¸Šä½¿ç”¨ã€‚</p>
<p><code>fnm</code>ï¼š<code>fnm</code> æ˜¯ä¸€ç§è¾ƒæ–°çš„ã€å¿«é€Ÿçš„æ›¿ä»£æ–¹æ¡ˆï¼Œç”± Rust ç¼–å†™ï¼Œä»¥å…¶é€Ÿåº¦é—»åã€‚<code>fnm</code> æ”¯æŒå¤šçº¿ç¨‹ï¼Œå› æ­¤åœ¨å®‰è£…å’Œåˆ‡æ¢ Node ç‰ˆæœ¬æ—¶ç‰¹åˆ«å¿«ã€‚å®ƒè¿˜æä¾›è·¨å¹³å°æ”¯æŒï¼ŒåŒ…æ‹¬ WSLã€macOS å’Œ Windowsã€‚</p>
<h2>å®‰è£…</h2>
<h3><code>nvm</code></h3>
<p>è¦å®‰è£… <code>nvm</code>ï¼Œåœ¨ UNIX ç³»ç»Ÿæˆ– Windows çš„ WSL ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div><p>æˆ–è€…ä½¿ç”¨ <code>wget</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">wget</span> -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div><p>å®‰è£…å®Œæˆä¹‹åï¼Œåœ¨ <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">${XDG_CONFIG_HOME-}</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">printf</span> %s <span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.nvm"</span> <span class="token operator">||</span> <span class="token builtin class-name">printf</span> %s <span class="token string">"<span class="token variable">${XDG_CONFIG_HOME}</span>/nvm"</span><span class="token variable">)</span></span>"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token comment"># This loads nvm</span>
</code></pre></div><p>é‡å¯ç»ˆç«¯æˆ–è¿è¡Œ <code>source ~/.bashrc</code> æˆ– <code>source ~/.zshrc</code> ä½¿é…ç½®ç”Ÿæ•ˆï¼Œç„¶åæ£€æŸ¥ <code>nvm</code> æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>nvm <span class="token parameter variable">--version</span>
</code></pre></div><h3><code>fnm</code></h3>
<p>åœ¨ UNIX ç³»ç»Ÿä¸Šï¼Œå¯ä»¥è¿è¡Œè„šæœ¬æˆ–ä½¿ç”¨ <code>homebrew</code> å®‰è£… <code>fnm</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># è¿è¡Œè„šæœ¬å®‰è£…</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://fnm.vercel.app/install <span class="token operator">|</span> <span class="token function">bash</span>

<span class="token comment"># æˆ–ä½¿ç”¨ homebrew å®‰è£…</span>
brew <span class="token function">install</span> fnm
</code></pre></div><p>åœ¨ Windows ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ PowerShell å®‰è£… <code>fnm</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>winget <span class="token function">install</span> Schniz.fnm
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<h4><code>~/.bashrc</code>ï¼š</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>fnm <span class="token function">env</span> --use-on-cd <span class="token parameter variable">--shell</span> <span class="token function">bash</span><span class="token variable">)</span></span>"</span>
</code></pre></div><h4><code>~/.zshrc</code>ï¼š</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>fnm <span class="token function">env</span> --use-on-cd <span class="token parameter variable">--shell</span> <span class="token function">zsh</span><span class="token variable">)</span></span>"</span>
</code></pre></div><h4><code>PowerShell</code>ï¼š</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm <span class="token function">env</span> --use-on-cd <span class="token parameter variable">--shell</span> powershell <span class="token operator">|</span> Out-String <span class="token operator">|</span> Invoke-Expression
</code></pre></div><p>é‡å¯ç»ˆç«¯ä½¿é…ç½®ç”Ÿæ•ˆï¼Œç„¶åæ£€æŸ¥ <code>fnm</code> æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm <span class="token parameter variable">--version</span>
</code></pre></div><h2>ä½¿ç”¨</h2>
<h3><code>nvm</code></h3>
<h4>å®‰è£… Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>nvm <span class="token function">install</span> <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>åˆ‡æ¢ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>nvm use <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>è®¾ç½®é»˜è®¤ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>nvm <span class="token builtin class-name">alias</span> default <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>nvm <span class="token function">ls</span>
</code></pre></div><h4>è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬</h4>
<p><code>nvm</code> é»˜è®¤æ²¡æœ‰æ”¯æŒæ ¹æ® <code>.nvmrc</code> æ–‡ä»¶è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼Œéœ€è¦åœ¨ <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># è‡ªåŠ¨ä½¿ç”¨ .nvmrc æ–‡ä»¶ä¸­å®šä¹‰çš„ Node ç‰ˆæœ¬</span>
<span class="token function-name function">auto_nvm_use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment"># å¦‚æœå­˜åœ¨ .nvmrc æ–‡ä»¶ï¼Œåˆ™åˆ‡æ¢åˆ°è¯¥æ–‡ä»¶æŒ‡å®šçš„ç‰ˆæœ¬</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">".nvmrc"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">local</span> nvmrc_version
    <span class="token assign-left variable">nvmrc_version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token operator">&lt;</span>.nvmrc<span class="token variable">)</span></span>
    <span class="token comment"># æ£€æŸ¥å½“å‰ç‰ˆæœ¬æ˜¯å¦ä¸ .nvmrc ä¸­çš„ç‰ˆæœ¬ä¸åŒ</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>nvm version<span class="token variable">)</span></span>"</span> <span class="token operator">!=</span> <span class="token string">"v<span class="token variable">$nvmrc_version</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      nvm use <span class="token string">"<span class="token variable">$nvmrc_version</span>"</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"NVM: Version <span class="token variable">$nvmrc_version</span> specified in .nvmrc is not installed."</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token comment"># é’ˆå¯¹ Bash çš„ç›®å½•åˆ‡æ¢é’©å­</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token environment constant">$BASH_VERSION</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token assign-left variable">PROMPT_COMMAND</span><span class="token operator">=</span><span class="token string">"auto_nvm_use;<span class="token variable">$PROMPT_COMMAND</span>"</span>
<span class="token keyword">fi</span>

<span class="token comment"># é’ˆå¯¹ Zsh çš„ç›®å½•åˆ‡æ¢é’©å­</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$ZSH_VERSION</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  autoload <span class="token parameter variable">-U</span> add-zsh-hook
  add-zsh-hook chpwd auto_nvm_use
  auto_nvm_use  <span class="token comment"># ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œé€‚é…å¯åŠ¨åçš„åˆå§‹ç›®å½•</span>
<span class="token keyword">fi</span>
</code></pre></div><p>åŒæ—¶ï¼Œå¦‚æœæƒ³è¦æ”¯æŒé€’å½’æŸ¥æ‰¾ç‰ˆæœ¬æ–‡ä»¶ï¼Œä¹Ÿéœ€è¦è‡ªå·±å®ç°ã€‚</p>
<h3><code>fnm</code></h3>
<h4>å®‰è£… Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm <span class="token function">install</span> <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>åˆ‡æ¢ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm use <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>è®¾ç½®é»˜è®¤ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm <span class="token builtin class-name">alias</span> default <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre></div><h4>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ Node.js ç‰ˆæœ¬</h4>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>fnm <span class="token function">ls</span>
</code></pre></div><h4>è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬</h4>
<p><code>fnm</code> é»˜è®¤æ”¯æŒæ ¹æ® <code>.nvmrc</code>ã€<code>.node-version</code> æˆ– <code>packages.json#engines#node</code>ï¼ˆå¦‚æœ <code>--resolve-engines</code> å¯ç”¨ï¼‰æ–‡ä»¶è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨ <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œ<code>--use-on-cd</code> è¡¨ç¤ºæ ¹æ®å½“å‰ç›®å½•ä¸‹çš„ <code>.nvmrc</code> æ–‡ä»¶è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼Œ<code>--version-file-strategy=recursive</code> è¡¨ç¤ºé€’å½’æŸ¥æ‰¾ç‰ˆæœ¬æ–‡ä»¶ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>fnm <span class="token function">env</span> --use-on-cd --version-file-strategy<span class="token operator">=</span>recursive<span class="token variable">)</span></span>"</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>fnm</code> å¼€ç®±å³å¸¦è®¸å¤šåŠŸèƒ½ã€‚å…¶ä¸­ä¸€äº›é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ¿€æ´»ï¼Œå› ä¸ºå®ƒä»¬ä¼šæ”¹å˜ shell çš„é»˜è®¤è¡Œä¸ºï¼Œè¿˜æœ‰ä¸€äº›åªæ˜¯åŠŸèƒ½æ ‡å¿—ï¼Œä»¥é¿å…ç ´åæ€§æ›´æ”¹ï¼Œæˆ–è€…åªæ˜¯å®éªŒæ€§çš„ï¼Œç›´åˆ°æˆ‘ä»¬è®¤ä¸ºå€¼å¾—å¼•å…¥å®ƒä»¬ä¸ºæ­¢ã€‚</p>
<p>æ‰€æœ‰è¿™äº›åŠŸèƒ½éƒ½å¯ä»¥é€šè¿‡åœ¨åˆå§‹åŒ– shell æ—¶ä¸º <code>fnm env</code> è°ƒç”¨æ·»åŠ æ ‡å¿—æ¥é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„ shell è®¾ç½®ä¸º <code>eval "$(fnm env)"</code>ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªæ ‡å¿—ï¼Œå°†å…¶æ›´æ”¹ä¸º <code>eval "$(fnm env --my-flag=value)"</code>ã€‚</p>
<p>è¯¦ç»†å¯ä»¥æŸ¥çœ‹é…ç½®æ–‡æ¡£ï¼š<a href="https://github.com/Schniz/fnm/blob/master/docs/configuration.md" target="_blank" rel="noopener noreferrer">fnm é…ç½®</a> å®ç°æ›´å¥½çš„ä½¿ç”¨ä½“éªŒã€‚</p>
</div>
<h3>å‘½ä»¤å¯¹æ¯”</h3>
<p><code>fnm</code> ä¸­çš„å‘½ä»¤ä¸ <code>nvm</code> ä¸­çš„å‘½ä»¤å‡ ä¹å®Œå…¨ç›¸åŒï¼Œå› æ­¤ <code>nvm</code> ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦æ›´æ–¹ä¾¿åœ°åˆ‡æ¢åˆ° <code>fnm</code>ã€‚</p>
<h2>å¯¹æ¯”</h2>
<h3>æ€§èƒ½æ¯”è¾ƒ</h3>
<p>å®‰è£…é€Ÿåº¦ï¼šç”±äºé‡‡ç”¨ Rust åŸºç¡€å’Œå¤šçº¿ç¨‹æ¶æ„ï¼Œ<code>fnm</code> çš„é€Ÿåº¦æ˜æ˜¾æ›´å¿«ã€‚ ä¸ <code>nvm</code> ç›¸æ¯”ï¼Œå®‰è£…æ—¶é—´é€šå¸¸æ›´å¿«ã€‚</p>
<p>å†…å­˜ä½¿ç”¨ï¼š<code>fnm</code> é’ˆå¯¹ä½å†…å­˜ä½¿ç”¨ç‡è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå› æ­¤åœ¨é«˜ç«¯å’Œèµ„æºå—é™çš„ç³»ç»Ÿä¸Šéƒ½å¾ˆé«˜æ•ˆã€‚</p>
<p>ç‰ˆæœ¬åˆ‡æ¢ï¼šåœ¨ <code>fnm</code> ä¸­ï¼Œç‰ˆæœ¬åˆ‡æ¢æ˜¯å³æ—¶è¿›è¡Œçš„ã€‚ ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>nvm</code> å¯èƒ½ä¼šå‡ºç°è½»å¾®å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨åˆ‡æ¢å¤§é‡ä½¿ç”¨çš„ç‰ˆæœ¬æ—¶ã€‚</p>
<h3>è·¨å¹³å°å…¼å®¹æ€§</h3>
<p><code>nvm</code>ï¼šä¸»è¦ä¸ºç±» UNIX ç³»ç»Ÿè®¾è®¡ã€‚åœ¨ Windows ä¸Šï¼Œå¯ä»¥é€šè¿‡ WSL æˆ–ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆå¦‚ nvm-windowsï¼‰ä½¿ç”¨ã€‚</p>
<p><code>fnm</code>ï¼šå¤©ç„¶æ”¯æŒè·¨å¹³å°ï¼ŒåŒ…æ‹¬ Windowsã€macOS å’Œ Linuxï¼Œé€‚åˆåœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šå·¥ä½œã€‚</p>
<h3>ç¤¾åŒºå’Œæ”¯æŒ</h3>
<p><code>nvm</code>ï¼šç”¨æˆ·ç¾¤ä½“åºå¤§ï¼Œæ–‡æ¡£ä¸°å¯Œï¼Œç¤¾åŒºèµ„æºå……è¶³ï¼Œè§£å†³é—®é¢˜æ›´ä¸ºå®¹æ˜“ã€‚</p>
<p><code>fnm</code>ï¼šè™½ç„¶ç›¸å¯¹è¾ƒæ–°ï¼Œä½† <code>fnm</code> çš„å—æ¬¢è¿åº¦è¿…é€Ÿä¸Šå‡ï¼Œæ–‡æ¡£ç‰¹åˆ«é’ˆå¯¹å®‰è£…å’Œä½¿ç”¨åšäº†è¯¦ç»†çš„è¯´æ˜ã€‚</p>
<h2>æ€»ç»“</h2>
<p><code>nvm</code> å’Œ <code>fnm</code> éƒ½æ˜¯ç®¡ç† Node.js ç‰ˆæœ¬çš„æœ‰æ•ˆå·¥å…·ã€‚è™½ç„¶ <code>nvm</code> æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›é‡‡ç”¨çš„é€‰æ‹©ï¼Œå…·æœ‰å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒï¼Œä½† <code>fnm</code> ä½œä¸ºä¸€ç§æ–°å…´çš„å¿«é€Ÿã€è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆï¼Œæ­£åœ¨è¿…é€Ÿå´›èµ·ã€‚å¯¹äºéœ€è¦è·¨å¹³å°å…¼å®¹æ€§å’Œé¢‘ç¹ç‰ˆæœ¬åˆ‡æ¢çš„å¼€å‘è€…æ¥è¯´ï¼Œ<code>fnm</code> å¯èƒ½æ›´é€‚åˆï¼Œè€Œåå¥½æˆç†Ÿå·¥å…·å’Œä¸°å¯Œæ–‡æ¡£æ”¯æŒçš„ç”¨æˆ·å¯ä»¥é€‰æ‹© <code>nvm</code>ã€‚</p>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2024-11-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">fnm å…¨å±€å…±äº«æ¨¡å—</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/07-fnm-global-module-shared.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/engineering/basic/07-fnm-global-module-shared.html"/>
    <updated>2024-11-09T11:51:37.000Z</updated>
    <summary type="html"><![CDATA[<p><code>fnm</code> ä¼šæ ¹æ®å½“å‰ Node ç‰ˆæœ¬åˆ›å»ºç‹¬ç«‹çš„æ¨¡å—ç›®å½•ï¼Œè‹¥é¢‘ç¹åˆ‡æ¢ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦é‡æ–°å®‰è£…æ¨¡å—ã€‚</p>
<p>ä¸ºäº†æé«˜å¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å…¨å±€å…±äº«æ¨¡å—ï¼Œè™½ç„¶è¿™ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šé€ æˆç‰ˆæœ¬å†²çªçš„å¯èƒ½æ€§ï¼Œä½†å¯ä»¥å‡å°‘åˆ‡æ¢ç‰ˆæœ¬æ—¶é‡æ–°å®‰è£…æ¨¡å—çš„éº»çƒ¦ã€‚</p>
<p><code>fnm</code> è®¾ç½®å…¨å±€å…±äº«æ¨¡å—æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<h2>macOS</h2>
<ol>
<li>åˆ›å»ºå…¨å±€å…±äº«æ¨¡å—ç›®å½•<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.npm_global
</code></pre></div></li>
<li>è®¾ç½® <code>npm</code> å…¨å±€æ¨¡å—ç›®å½•<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix ~/.npm_global
</code></pre></div></li>
<li>æ›´æ–°ç¯å¢ƒå˜é‡<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">"export PATH=~/.npm_global/bin:\<span class="token environment constant">$PATH</span>"</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc
<span class="token builtin class-name">source</span> ~/.zshrc
</code></pre></div></li>
</ol>]]></summary>
    <content type="html"><![CDATA[<p><code>fnm</code> ä¼šæ ¹æ®å½“å‰ Node ç‰ˆæœ¬åˆ›å»ºç‹¬ç«‹çš„æ¨¡å—ç›®å½•ï¼Œè‹¥é¢‘ç¹åˆ‡æ¢ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦é‡æ–°å®‰è£…æ¨¡å—ã€‚</p>
<p>ä¸ºäº†æé«˜å¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å…¨å±€å…±äº«æ¨¡å—ï¼Œè™½ç„¶è¿™ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šé€ æˆç‰ˆæœ¬å†²çªçš„å¯èƒ½æ€§ï¼Œä½†å¯ä»¥å‡å°‘åˆ‡æ¢ç‰ˆæœ¬æ—¶é‡æ–°å®‰è£…æ¨¡å—çš„éº»çƒ¦ã€‚</p>
<p><code>fnm</code> è®¾ç½®å…¨å±€å…±äº«æ¨¡å—æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<h2>macOS</h2>
<ol>
<li>åˆ›å»ºå…¨å±€å…±äº«æ¨¡å—ç›®å½•<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.npm_global
</code></pre></div></li>
<li>è®¾ç½® <code>npm</code> å…¨å±€æ¨¡å—ç›®å½•<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix ~/.npm_global
</code></pre></div></li>
<li>æ›´æ–°ç¯å¢ƒå˜é‡<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">"export PATH=~/.npm_global/bin:\<span class="token environment constant">$PATH</span>"</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc
<span class="token builtin class-name">source</span> ~/.zshrc
</code></pre></div></li>
</ol>
<h2>Windows</h2>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå…±äº«çš„å…¨å±€æ¨¡å—ç›®å½•ï¼šä½ å¯ä»¥åœ¨ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªå…±äº«ç›®å½•ï¼Œæ¯”å¦‚ <code>C:\fnm-global-modules</code>ã€‚<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> C:<span class="token punctuation">\</span>fnm-global-modules
</code></pre></div></li>
<li>è®¾ç½® <code>npm</code> å…¨å±€æ¨¡å—ç›®å½•<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix C:<span class="token punctuation">\</span>fnm-global-modules
</code></pre></div></li>
<li>æ›´æ–°ç¯å¢ƒå˜é‡
<ol>
<li>æ‰“å¼€ ç³»ç»Ÿç¯å¢ƒå˜é‡è®¾ç½®ï¼ˆæŒ‰ Win + Xï¼Œé€‰æ‹© ç³»ç»Ÿ &gt; é«˜çº§ç³»ç»Ÿè®¾ç½® &gt; ç¯å¢ƒå˜é‡ï¼‰ã€‚</li>
<li>åœ¨ã€Œç³»ç»Ÿå˜é‡å’Œç”¨æˆ·å˜é‡ã€éƒ¨åˆ†æ‰¾åˆ° Pathï¼Œç‚¹å‡» ç¼–è¾‘ã€‚</li>
<li>æ·»åŠ æ–°çš„è·¯å¾„ï¼š<code>C:\fnm-global-modules\</code>ã€‚</li>
</ol>
</li>
<li>é‡å¯ç»ˆç«¯ä½¿é…ç½®ç”Ÿæ•ˆã€‚</li>
</ol>
<p>é…ç½®å®Œæˆåï¼Œé€šè¿‡ <code>npm install -g</code> å®‰è£…çš„å…¨å±€æ¨¡å—ä¼šå­˜å‚¨åœ¨ <code>~/.npm_global</code> ä¸­ï¼Œä¸å†å— Node.js ç‰ˆæœ¬åˆ‡æ¢çš„å½±å“ã€‚</p>
]]></content>
    <category term="å·¥ç¨‹åŒ–"/>
    <published>2024-11-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å•ä¾‹æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/11-singleton-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/11-singleton-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å•ä¾‹æ˜¯æŒ‡åªéœ€å®ä¾‹åŒ–ä¸€æ¬¡å°±å¯ä»¥å…¨å±€è®¿é—®çš„ç±»ã€‚å•ä¾‹å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ï¼Œè¿™ä½¿å¾—å•ä¾‹éå¸¸é€‚åˆç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„å…¨å±€çŠ¶æ€ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªé‚®ä»¶åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥å…±äº«ä¸€ä¸ª <code>EmailClient</code> å¯¹è±¡ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">EmailClient</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> transporter<span class="token operator">:</span> Transporter
  <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> Mailer

  <span class="token comment">// ä½¿ç”¨ nodemailer é…ç½®ï¼Œå‘é€é‚®ä»¶</span>
  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> smtpConfig<span class="token operator">:</span> SMTPTransport<span class="token punctuation">.</span>Options <span class="token operator">=</span> <span class="token punctuation">{</span>
      host<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_HOST</span><span class="token punctuation">,</span>
      port<span class="token operator">:</span> <span class="token number">465</span><span class="token punctuation">,</span>
      secure<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      auth<span class="token operator">:</span> <span class="token punctuation">{</span>
        user<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_AUTH_USER</span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_AUTH_PASS</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      socketTimeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      connectionTimeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      logger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      debug<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>transporter <span class="token operator">=</span> <span class="token function">createTransport</span><span class="token punctuation">(</span>smtpConfig<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mailer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>å•ä¾‹æ˜¯æŒ‡åªéœ€å®ä¾‹åŒ–ä¸€æ¬¡å°±å¯ä»¥å…¨å±€è®¿é—®çš„ç±»ã€‚å•ä¾‹å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ï¼Œè¿™ä½¿å¾—å•ä¾‹éå¸¸é€‚åˆç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„å…¨å±€çŠ¶æ€ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªé‚®ä»¶åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥å…±äº«ä¸€ä¸ª <code>EmailClient</code> å¯¹è±¡ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">EmailClient</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> transporter<span class="token operator">:</span> Transporter
  <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> Mailer

  <span class="token comment">// ä½¿ç”¨ nodemailer é…ç½®ï¼Œå‘é€é‚®ä»¶</span>
  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> smtpConfig<span class="token operator">:</span> SMTPTransport<span class="token punctuation">.</span>Options <span class="token operator">=</span> <span class="token punctuation">{</span>
      host<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_HOST</span><span class="token punctuation">,</span>
      port<span class="token operator">:</span> <span class="token number">465</span><span class="token punctuation">,</span>
      secure<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      auth<span class="token operator">:</span> <span class="token punctuation">{</span>
        user<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_AUTH_USER</span><span class="token punctuation">,</span>
        pass<span class="token operator">:</span> config<span class="token punctuation">.</span><span class="token constant">NODEMAILER_AUTH_PASS</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      socketTimeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      connectionTimeout<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      logger<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      debug<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>transporter <span class="token operator">=</span> <span class="token function">createTransport</span><span class="token punctuation">(</span>smtpConfig<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mailer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œæ„é€ å‡½æ•°ä¸º <code>private</code>ï¼Œå› æ­¤æ— æ³•åœ¨å¤–éƒ¨åˆ›å»º <code>EmailClient</code> å¯¹è±¡ï¼Œä½†å¯ä»¥é€šè¿‡ <code>getInstance</code> æ–¹æ³•è·å–å•ä¾‹å¯¹è±¡ã€‚</p>
<p>å¦‚æœä½¿ç”¨ js åˆ›å»ºå¯¹è±¡ï¼Œç”±äº js æ—  <code>private</code> ä¿®é¥°ç¬¦ï¼Œå¯ä»¥åœ¨ <code>constructor</code> ä¸­ä½¿ç”¨  åˆ¤æ–­æ˜¯å¦ä¸º <code>EmailClient</code> ç±»ï¼Œå¦‚æœæ˜¯åˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">EmailClient</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> EmailClient<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Cannot instantiate EmailClient directly'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·ï¼Œä¸€ä¸ª <code>EmailClient</code> å¯¹è±¡åªèƒ½é€šè¿‡ <code>getInstance</code> æ–¹æ³•è·å–ï¼Œè€Œä¸”åªä¼šåœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºä¸€æ¬¡ï¼Œä¸ä¼šå¤§é‡åœ°åˆ›å»ºå¤šä¸ª <code>EmailClient</code> å¯¹è±¡ï¼Œé˜²æ­¢å¤§é‡è¿æ¥é‚®ä»¶æœåŠ¡é€ æˆæ€§èƒ½é—®é¢˜ã€‚</p>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-10-28T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">Provider æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/react/01-provider-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/react/01-provider-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>Provider è§£å†³äº†å¤šå±‚åµŒå¥—ç»„ä»¶ä¸­ <code>props</code> ä¼ é€’çš„é—®é¢˜ã€‚</p>
<h2>åŸºç¡€ä½¿ç”¨</h2>
<p>react æä¾›äº† <code>createContext</code> æ–¹æ³•æ¥åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æ–¹ä¾¿çš„åœ¨å¤šå±‚åµŒå¥—ç»„ä»¶ä¸­å…±äº«æ•°æ®ã€‚</p>
<p><code>Provider</code> éœ€è¦ä¼ é€’ä¸€ä¸ª <code>value</code> å‚æ•°ï¼Œä»£è¡¨éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> DataContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DataContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SideBar</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Content</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DataContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>Provider è§£å†³äº†å¤šå±‚åµŒå¥—ç»„ä»¶ä¸­ <code>props</code> ä¼ é€’çš„é—®é¢˜ã€‚</p>
<h2>åŸºç¡€ä½¿ç”¨</h2>
<p>react æä¾›äº† <code>createContext</code> æ–¹æ³•æ¥åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œå¯ä»¥æ–¹ä¾¿çš„åœ¨å¤šå±‚åµŒå¥—ç»„ä»¶ä¸­å…±äº«æ•°æ®ã€‚</p>
<p><code>Provider</code> éœ€è¦ä¼ é€’ä¸€ä¸ª <code>value</code> å‚æ•°ï¼Œä»£è¡¨éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> DataContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DataContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SideBar</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Content</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DataContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨åµŒå¥—ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>useContext</code> è·å– <code>value</code> å‚æ•°ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> DataContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SideBar</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Content</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">SideBar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token keyword">const</span> <span class="token function-variable function">List</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ListItem</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token keyword">const</span> <span class="token function-variable function">Content</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Block</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>


<span class="token keyword">function</span> <span class="token function">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>DataContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>listItem<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>DataContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useContext</span><span class="token punctuation">(</span>DataContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>hooks</h2>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¹¶ä¸ç›´æ¥åœ¨åµŒå¥—ç»„ä»¶ä½¿ç”¨ <code>useContext</code>ï¼Œè€Œæ˜¯å°†å…¶å°è£…æˆä¸€ä¸ª hooksã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">useDataContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>DataContext<span class="token punctuation">)</span>

  <span class="token comment">// å®‰å…¨èµ·è§ï¼Œå¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ£€æŸ¥</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'useDataContext must be used within a DataContextProvider'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> data
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ä¸‹æ¥åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>useDataContext</code> è·å– <code>value</code> å‚æ•°ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useDataContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-10-15T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">åŸå‹æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/09-prototype-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/09-prototype-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>è¯¦è§ ã€‚</p>
]]></summary>
    <content type="html"><![CDATA[<p>è¯¦è§ ã€‚</p>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-10-15T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">Turso é›†æˆ Prisma</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/practice/001-integrate-turso-prisma.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/practice/001-integrate-turso-prisma.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­ï¼Œæ•°æ®åº“å’Œ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰å·¥å…·çš„é€‰æ‹©å¯¹é¡¹ç›®çš„å¼€å‘æ•ˆç‡å’Œæ•°æ®ç®¡ç†è‡³å…³é‡è¦ã€‚<a href="https://www.prisma.io/" target="_blank" rel="noopener noreferrer">Prisma</a> æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„ ORMï¼Œå®ƒä¸ä»…èƒ½ä¸ºä½ ç”Ÿæˆç±»å‹å®‰å…¨çš„æ•°æ®åº“æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥é€šè¿‡è‡ªåŠ¨è¿ç§»ç®¡ç†æ•°æ®åº“æ¨¡å¼ã€‚è€Œ <a href="https://docs.turso.tech/introduction" target="_blank" rel="noopener noreferrer">Turso</a> æ˜¯ä¸€ç§åŸºäº libSQL çš„æ‰˜ç®¡äº‘æ•°æ®åº“ï¼Œæä¾›äº†ç”Ÿäº§ç¯å¢ƒçº§åˆ«çš„ SQLite æ•°æ®åº“ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•å°† Turso å’Œ Prisma ç»“åˆä½¿ç”¨ï¼Œå¸®åŠ©ä½ å¿«é€Ÿé›†æˆå¹¶ç®¡ç†æ•°æ®åº“ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ç°ä»£åº”ç”¨å¼€å‘ä¸­ï¼Œæ•°æ®åº“å’Œ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰å·¥å…·çš„é€‰æ‹©å¯¹é¡¹ç›®çš„å¼€å‘æ•ˆç‡å’Œæ•°æ®ç®¡ç†è‡³å…³é‡è¦ã€‚<a href="https://www.prisma.io/" target="_blank" rel="noopener noreferrer">Prisma</a> æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„ ORMï¼Œå®ƒä¸ä»…èƒ½ä¸ºä½ ç”Ÿæˆç±»å‹å®‰å…¨çš„æ•°æ®åº“æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥é€šè¿‡è‡ªåŠ¨è¿ç§»ç®¡ç†æ•°æ®åº“æ¨¡å¼ã€‚è€Œ <a href="https://docs.turso.tech/introduction" target="_blank" rel="noopener noreferrer">Turso</a> æ˜¯ä¸€ç§åŸºäº libSQL çš„æ‰˜ç®¡äº‘æ•°æ®åº“ï¼Œæä¾›äº†ç”Ÿäº§ç¯å¢ƒçº§åˆ«çš„ SQLite æ•°æ®åº“ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•å°† Turso å’Œ Prisma ç»“åˆä½¿ç”¨ï¼Œå¸®åŠ©ä½ å¿«é€Ÿé›†æˆå¹¶ç®¡ç†æ•°æ®åº“ã€‚</p>
<h2>ä»€ä¹ˆæ˜¯ Tursoï¼Ÿ</h2>
<p>Turso æ˜¯ç”± libSQL æä¾›çš„äº‘ç«¯æ‰˜ç®¡æ•°æ®åº“æœåŠ¡ï¼Œå…¶æ ¸å¿ƒåŸºäº SQLiteï¼Œä¸“ä¸ºç”Ÿäº§ç¯å¢ƒè®¾è®¡ã€‚å®ƒä¿æŒäº† SQLite ç®€å•ã€è½»é‡å’Œå¿«é€Ÿçš„ç‰¹ç‚¹ï¼ŒåŒæ—¶é€šè¿‡äº‘ç«¯æ‰˜ç®¡çš„æ–¹å¼ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåœ¨åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸­ä½¿ç”¨ SQLiteï¼Œä¸”å…·æœ‰äº‘æ•°æ®åº“çš„ä¼˜åŠ¿ï¼Œä¾‹å¦‚å¤šç‚¹è®¿é—®ã€å¼ºå¤§æ€§èƒ½å’Œæ˜“äºé›†æˆã€‚</p>
<p>Turso çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŸºäº libSQLï¼šæä¾›äº†ç”Ÿäº§çº§çš„ SQLite æ•°æ®åº“ã€‚</li>
<li>åˆ†å¸ƒå¼å­˜å‚¨ï¼šé€‚ç”¨äºå¤šåŒºåŸŸã€å¤šåœ°çš„åº”ç”¨ç¨‹åºã€‚</li>
<li>è½»é‡æ˜“ç”¨ï¼šä½ å¯ä»¥åƒä½¿ç”¨æœ¬åœ° SQLite æ•°æ®åº“ä¸€æ ·å»ä½¿ç”¨å®ƒã€‚</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>é‡ç‚¹æ˜¯èƒ½å¤Ÿå…è´¹ä½¿ç”¨ã€‚</p>
</div>
<h2>ä»€ä¹ˆæ˜¯ Prismaï¼Ÿ</h2>
<p>Prisma æ˜¯ä¸€ä¸ªç°ä»£çš„ ORM å·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–æ•°æ®åº“äº¤äº’ã€‚å®ƒé€šè¿‡æä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æŸ¥è¯¢æ¥å£ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿåœ¨ä½¿ç”¨æ•°æ®åº“æ—¶é¿å…å¸¸è§çš„é”™è¯¯ã€‚Prisma çš„ä¸€äº›æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ•°æ®åº“è¿ç§»ç®¡ç†ã€è‡ªåŠ¨ç”Ÿæˆçš„æŸ¥è¯¢ API å’Œç›´è§‚çš„æ•°æ®åº“æ¨¡å¼å®šä¹‰æ–‡ä»¶ï¼ˆ<code>schema.prisma</code>ï¼‰ã€‚</p>
<p>Prisma çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç±»å‹å®‰å…¨ï¼šPrisma ç”Ÿæˆçš„å®¢æˆ·ç«¯ä»£ç æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œèƒ½åœ¨å¼€å‘é˜¶æ®µæ•è·é”™è¯¯ã€‚</li>
<li>ç›´è§‚çš„ Schema å®šä¹‰ï¼šä½¿ç”¨ <code>.prisma</code> æ–‡ä»¶å®šä¹‰æ•°æ®åº“æ¨¡å‹ã€‚</li>
<li>æ•°æ®åº“è¿ç§»ï¼šæä¾›äº†æ•°æ®åº“è¿ç§»å·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åŒ–ç®¡ç†æ•°æ®åº“ç‰ˆæœ¬ã€‚</li>
</ul>
<h2>é›†æˆ Turso å’Œ Prisma</h2>
<p>æ¥ä¸‹æ¥å°†é€æ­¥ä»‹ç»å¦‚ä½•å°† Turso å’Œ Prisma é›†æˆåœ¨ä¸€èµ·ã€‚ä¸»è¦çš„æ­¥éª¤åŒ…æ‹¬å®‰è£…å·¥å…·ã€è®¾ç½®æ•°æ®åº“è¿æ¥ã€ç”Ÿæˆæ¨¡å‹ã€è¿›è¡Œæ•°æ®åº“è¿ç§»å¹¶åº”ç”¨æ›´æ”¹ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä» Prisma ORM 5.4.2 åŠæ›´é«˜ç‰ˆæœ¬å¼€å§‹ï¼ŒTurso å¯è·å¾—æ—©æœŸè®¿é—®æ”¯æŒã€‚</p>
</div>
<h3>å®‰è£… Turso CLI å’Œ Prisma CLI</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… Turso CLI ä»¥ä¾¿ç®¡ç†å’Œè®¿é—® Turso æ•°æ®åº“ï¼Œå¹¶ä¸”éœ€è¦å®‰è£… Prisma CLI ä»¥ä¾¿ç”Ÿæˆå®¢æˆ·ç«¯å’Œç®¡ç†æ•°æ®åº“è¿ç§»ã€‚</p>
<p>å®‰è£… Prisma CLIï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> prisma --save-dev
</code></pre></div><p><a href="https://docs.turso.tech/cli/introduction" target="_blank" rel="noopener noreferrer">å®‰è£… Turso CLI</a>ï¼Œä»¥ macOS ä¸ºä¾‹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>brew <span class="token function">install</span> tursodatabase/tap/turso
</code></pre></div><p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ <code>turso auth login</code> ç™»å½•ä½ çš„ Turso å¸æˆ·ã€‚</p>
<h3>åˆ›å»º Turso æ•°æ®åº“</h3>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Turso æ•°æ®åº“ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>turso db create my-database
</code></pre></div><p>è·å–æ•°æ®åº“ URLï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>turso db show <span class="token parameter variable">--url</span> my-database
</code></pre></div><p>è·å–æ•°æ®åº“è®¿é—® tokenï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>turso db tokens create my-database
</code></pre></div><h3>é…ç½® Prisma æ•°æ®æº</h3>
<p>åˆå§‹åŒ– Prisma æ•°æ®æºï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma init
</code></pre></div><p>è¿™ä¼šç”Ÿæˆ <code>prisma/schema.prisma</code> æ–‡ä»¶åŠ <code>.env</code> æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å« Prisma æ•°æ®æºå®šä¹‰ã€‚</p>
<p><code>.env</code> æ–‡ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token assign-left variable">TURSO_URL</span><span class="token operator">=</span><span class="token operator">&lt;</span>your-turso-database-url<span class="token operator">&gt;</span>
<span class="token assign-left variable">TURSO_AUTH_TOKEN</span><span class="token operator">=</span><span class="token operator">&lt;</span>your-turso-auth-token<span class="token operator">&gt;</span>
</code></pre></div><p>éœ€è¦å¯ç”¨ <code>driverAdapters</code> ç‰¹æ€§ï¼š</p>
<div class="language-prisma" data-ext="prisma" data-title="prisma"><pre class="language-prisma"><code>generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}
</code></pre></div><p>ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥è®©ä½ é€šè¿‡ä»£ç ä¸æ•°æ®åº“äº¤äº’ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma generate
</code></pre></div><h3>åŒæ­¥æ•°æ®åº“</h3>
<p>åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åŒæ­¥æ•°æ®åº“ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>è‹¥æ— éœ€åŒæ­¥æ•°æ®åº“ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚</p>
</div>
<p>é¦–å…ˆç™»é™†åˆ° Turso æ•°æ®åº“ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>turso db shell my-database
</code></pre></div><p>å¯¼å‡ºå½“å‰æ•°æ®åº“ SQL æ•°æ®ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>.schema
</code></pre></div><p>ç„¶åå°† SQL åº”ç”¨åˆ°æœ¬åœ°æ•°æ®åº“ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>sqlite3 dev.db <span class="token operator">&lt;</span> schema.sql
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>sqlite3</code> æ˜¯ SQLite æ•°æ®åº“çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆ›å»ºã€ç®¡ç†å’ŒæŸ¥è¯¢ SQLite æ•°æ®åº“ã€‚å®ƒéå¸¸è½»é‡ï¼Œé€‚åˆåµŒå…¥å¼ç³»ç»Ÿæˆ–å°å‹åº”ç”¨çš„æœ¬åœ°æ•°æ®åº“æ“ä½œã€‚ä½ å¯ä»¥é€šè¿‡ <code>sqlite3</code> å·¥å…·æ¥æ‰§è¡Œ SQL å‘½ä»¤ã€åˆ›å»ºæ•°æ®åº“ã€æ’å…¥æ•°æ®ã€æŸ¥è¯¢æ•°æ®ã€å¯¼å…¥å’Œå¯¼å‡ºæ•°æ®åº“ç»“æ„ç­‰ã€‚</p>
<p>macOS é€šå¸¸è‡ªå¸¦ SQLiteã€‚</p>
</div>
<p>ç„¶åå°†æ•°æ®åº“ç»“æ„æ‹‰å…¥ prismaï¼Œè¿™å°†ä»æœ¬åœ°çš„ <code>dev.db</code> æ–‡ä»¶ä¸­æå–æ•°æ®åº“æ¨¡å‹ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ Prisma schemaã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma db pull
</code></pre></div><p>ç”Ÿæˆ Prisma å®¢æˆ·ç«¯ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma generate
</code></pre></div><h3>è¿ç§»æ•°æ®åº“</h3>
<p>ç”±äº Turso ç›®å‰ä¸æ”¯æŒç›´æ¥ä½¿ç”¨ Prisma è¿›è¡Œæ¨¡å¼è¿ç§»ï¼Œæ‰€ä»¥åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ SQLite è¿›è¡Œæ•°æ®åº“è¿ç§»ã€‚</p>
<p>ç”Ÿæˆè¿ç§»æ–‡ä»¶ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx prisma migrate dev <span class="token parameter variable">--name</span> init
</code></pre></div><p>è¿™æ¡å‘½ä»¤åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>åœ¨ <code>prisma/migrations</code> ç›®å½•ä¸­ä¸ºè¿™æ¬¡è¿ç§»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ SQL è¿ç§»æ–‡ä»¶ã€‚</li>
<li>é’ˆå¯¹æ•°æ®åº“æ‰§è¡Œ SQL è¿ç§»æ–‡ä»¶ã€‚</li>
<li>è¿è¡Œ <code>prisma generate</code>ï¼ˆå®‰è£… <code>@prisma/client</code> è½¯ä»¶åŒ…ï¼Œå¹¶æ ¹æ®ä½ çš„æ¨¡å‹ç”Ÿæˆå®šåˆ¶çš„ Prisma å®¢æˆ·ç«¯ APIï¼‰ã€‚</li>
</ol>
<p>æ¨é€è¿ç§»åˆ°è¿œç«¯ turso æ•°æ®åº“ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>turso db shell my-database <span class="token operator">&lt;</span> ./prisma/migrations/20240923125341_init/migration.sql
</code></pre></div><h3>æ•°æ®åº“æ“ä½œ</h3>
<p>ä¸º libSQL å®‰è£… libSQL æ•°æ®åº“å®¢æˆ·ç«¯å’Œ Prisma ORM é©±åŠ¨ç¨‹åºé€‚é…å™¨ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @libsql/client @prisma/adapter-libsql
</code></pre></div><p>æ›´æ–°æ•°æ®åº“è®¿é—®å®ä¾‹ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@prisma/client'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PrismaLibSQL <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@prisma/adapter-libsql'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@libsql/client'</span>

<span class="token keyword">const</span> libsql <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TURSO_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  authToken<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TURSO_AUTH_TOKEN</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaLibSQL</span><span class="token punctuation">(</span>libsql<span class="token punctuation">)</span>
<span class="token keyword">const</span> prisma <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrismaClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span> adapter <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> prisma
</code></pre></div><h2>ç»“è®º</h2>
<p>é›†æˆ Turso å’Œ Prisma å¯ä»¥è®©ä½ åœ¨åˆ†å¸ƒå¼äº‘ç¯å¢ƒä¸­äº«å— SQLite çš„æ€§èƒ½ä¼˜åŠ¿ï¼ŒåŒæ—¶åˆ©ç”¨ Prisma çš„ ORM åŠŸèƒ½ç®¡ç†æ•°æ®åº“æ¨¡å‹å’ŒæŸ¥è¯¢ã€‚</p>
<p>ä½†ç”±äº Turso ç›®å‰å¯¹ Prisma çš„æ”¯æŒæœ‰é™ï¼Œä½ éœ€è¦æ‰‹åŠ¨å°†è¿ç§»æ–‡ä»¶åº”ç”¨åˆ°è¿œç¨‹æ•°æ®åº“ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥å°†æœ¬åœ°å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒæœ‰æ•ˆåˆ†ç¦»ï¼Œä¿æŒé«˜æ•ˆçš„å¼€å‘æµç¨‹ã€‚</p>
]]></content>
    <category term="practice"/>
    <published>2024-09-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">è§‚å¯Ÿè€…æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/08-observer-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/08-observer-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç§å¯¹è±¡ä¹‹é—´çš„ã€Œä¸€å¯¹å¤šã€å…³ç³»ï¼Œä½¿å¾—å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½èƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªæ¨¡å¼éå¸¸é€‚åˆç”¨æ¥å®ç°äº‹ä»¶ç³»ç»Ÿæˆ–æ•°æ®ç»‘å®šåŠŸèƒ½ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240920125941.png" alt="è§‚å¯Ÿè€…æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>è§‚å¯Ÿè€…æ¨¡å¼</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç§å¯¹è±¡ä¹‹é—´çš„ã€Œä¸€å¯¹å¤šã€å…³ç³»ï¼Œä½¿å¾—å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½èƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªæ¨¡å¼éå¸¸é€‚åˆç”¨æ¥å®ç°äº‹ä»¶ç³»ç»Ÿæˆ–æ•°æ®ç»‘å®šåŠŸèƒ½ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240920125941.png" alt="è§‚å¯Ÿè€…æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>è§‚å¯Ÿè€…æ¨¡å¼</figcaption></figure>
<h2>å‡½æ•°ç‰ˆæœ¬</h2>
<p>å‡½æ•°å¼è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š</p>
<ul>
<li><code>observers</code>ï¼šåœ¨å‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶ä¼šæ”¶åˆ°é€šçŸ¥çš„è§‚å¯Ÿè€…æ•°ç»„</li>
<li><code>subscribe()</code>ï¼šå‘è§‚å¯Ÿè€…åˆ—è¡¨æ·»åŠ è§‚å¯Ÿè€…çš„æ–¹æ³•</li>
<li><code>unsubscribe()</code>ï¼šä»è§‚å¯Ÿè€…åˆ—è¡¨ç§»é™¤è§‚å¯Ÿè€…çš„æ–¹æ³•</li>
<li><code>notify()</code>ï¼šåœ¨å‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…çš„æ–¹æ³•</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> observer <span class="token operator">!==</span> func<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">observer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è®©æˆ‘ä»¬ç”¨è¿™ä¸ªå¯è§‚å¯Ÿå¯¹è±¡æ„å»ºä¸€äº›ä¸œè¥¿ã€‚ æˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸åŸºæœ¬çš„åº”ç”¨ç¨‹åºï¼Œå®ƒåªç”±ä¸¤ä¸ªç»„ä»¶ç»„æˆï¼šä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ªå¼€å…³ã€‚</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ToastContainer<span class="token punctuation">,</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-toastify'</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toastify</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">toast</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormControlLabel</span></span> <span class="token attr-name">control</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToastContainer</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¸Œæœ›è·Ÿè¸ªç”¨æˆ·ä¸åº”ç”¨ç¨‹åºçš„äº¤äº’ã€‚æ¯å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æˆ–æ‹¨åŠ¨å¼€å…³æ—¶ï¼Œæˆ‘ä»¬éƒ½è¦è®°å½•è¿™ä¸€äº‹ä»¶å¹¶åŠ ä¸Šæ—¶é—´æˆ³ã€‚é™¤äº†è®°å½•ï¼Œæˆ‘ä»¬è¿˜æƒ³åˆ›å»ºä¸€ä¸ª toast é€šçŸ¥ï¼Œåœ¨äº‹ä»¶å‘ç”Ÿæ—¶æ˜¾ç¤ºï¼</p>
<div class="language-jsx" data-ext="jsx" data-title="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ToastContainer<span class="token punctuation">,</span> toast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-toastify'</span>

<span class="token keyword">function</span> <span class="token function">logger</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toastify</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">toast</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

observable<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>logger<span class="token punctuation">)</span>
observable<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>toastify<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observable<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">'User clicked button!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    observable<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">'User toggled switch!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click me!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormControlLabel</span></span> <span class="token attr-name">control</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ToastContainer</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ•´ä¸ªæµç¨‹ï¼š<code>handleClick</code> å’Œ <code>handleToggle</code> ç”¨æ•°æ®è°ƒç”¨äº†è§‚å¯Ÿè€…çš„ <code>notify</code> æ–¹æ³•ï¼Œç„¶åè§‚å¯Ÿè€…é€šçŸ¥äº†è®¢é˜…è€…ï¼šæœ¬ä¾‹ä¸­æ˜¯ <code>logger</code> å’Œ <code>toastify</code> å‡½æ•°ã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨å¾ˆå¤šæ–¹é¢ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä½†å®ƒåœ¨å¤„ç†å¼‚æ­¥ã€åŸºäºäº‹ä»¶çš„æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚ä¹Ÿè®¸ä½ æƒ³è®©æŸäº›ç»„ä»¶åœ¨æŸäº›æ•°æ®ä¸‹è½½å®Œæˆæ—¶æ”¶åˆ°é€šçŸ¥ï¼Œæˆ–è€…å½“ç”¨æˆ·å‘ç•™è¨€æ¿å‘é€æ–°æ¶ˆæ¯æ—¶ï¼Œæ‰€æœ‰å…¶ä»–æˆå‘˜éƒ½åº”æ”¶åˆ°é€šçŸ¥ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ˜¯æ‰§è¡Œå…³æ³¨ç‚¹åˆ†ç¦»å’Œå•ä¸€å“åº”åŸåˆ™çš„å¥½æ–¹æ³•ã€‚è§‚å¯Ÿè€…å¯¹è±¡ä¸å¯è§‚å¯Ÿå¯¹è±¡å¹¶ä¸ç´§å¯†è€¦åˆï¼Œè€Œä¸”å¯ä»¥éšæ—¶ï¼ˆè§£é™¤ï¼‰è€¦åˆã€‚å¯è§‚å¯Ÿå¯¹è±¡è´Ÿè´£ç›‘æ§äº‹ä»¶ï¼Œè€Œè§‚å¯Ÿè€…åªéœ€å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®ã€‚</p>
</div>
<h2>ä¼ ç»Ÿç‰ˆæœ¬</h2>
<p>ä¸Šè¿°ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°å¼çš„è§‚å¯Ÿè€…è®¾è®¡ã€‚åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œè§‚å¯Ÿè€…è¢«è®¾è®¡ä¸ºå‡½æ•° <code>func</code>ï¼Œé€šè¿‡è°ƒç”¨ <code>subscribe</code> æ–¹æ³•ï¼Œè§‚å¯Ÿè€…å¯ä»¥è®¢é˜…ä¸»é¢˜ï¼›<code>notify</code> æ–¹æ³•ä¼šéå†æ‰€æœ‰è®¢é˜…çš„å‡½æ•°å¹¶è°ƒç”¨å®ƒä»¬æ¥é€šçŸ¥è§‚å¯Ÿè€…ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…é€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸”å¿…é¡»å®ç°ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æˆ–æ–¹æ³•ï¼ˆå¦‚ <code>update()</code>ï¼‰ã€‚è€Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œè§‚å¯Ÿè€…å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œè¿™æ ·ç®€åŒ–äº†è®¾è®¡ï¼Œä¸éœ€è¦åˆ›å»ºä¸“é—¨çš„è§‚å¯Ÿè€…ç±»ã€‚</p>
<ul>
<li>ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼šä¹Ÿç§°ä¸ºè¢«è§‚å¯Ÿè€…ã€‚ä¸»é¢˜å¯¹è±¡æŒæœ‰å¯¹è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…ã€‚</li>
<li>è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼šè§‚å¯Ÿè€…å¯¹è±¡åœ¨è¢«é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±æˆ–æ‰§è¡Œç›¸å…³åŠ¨ä½œã€‚</li>
<li>å…·ä½“ä¸»é¢˜ï¼ˆConcrete Subjectï¼‰ï¼šå®ç°ä¸»é¢˜æ¥å£ï¼Œç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œå¹¶åœ¨çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ã€‚</li>
<li>å…·ä½“è§‚å¯Ÿè€…ï¼ˆConcrete Observerï¼‰ï¼šå®ç°è§‚å¯Ÿè€…æ¥å£ï¼Œå®šä¹‰å“åº”ä¸»é¢˜çŠ¶æ€å˜åŒ–çš„å…·ä½“æ“ä½œã€‚</li>
</ul>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">// ä¸»é¢˜ï¼ˆå¯è§‚å¯Ÿè€…ï¼‰ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> observers<span class="token operator">:</span> Observer<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token comment">// æ·»åŠ è§‚å¯Ÿè€…</span>
  <span class="token function">addObserver</span><span class="token punctuation">(</span>observer<span class="token operator">:</span> Observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ç§»é™¤è§‚å¯Ÿè€…</span>
  <span class="token function">removeObserver</span><span class="token punctuation">(</span>observer<span class="token operator">:</span> Observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obs <span class="token operator">!==</span> observer<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span>
  <span class="token function">notifyObservers</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è§‚å¯Ÿè€…æŠ½è±¡ç±»</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token comment">// å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°</span>
  <span class="token keyword">abstract</span> <span class="token function">update</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteObserver</span> <span class="token keyword">extends</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
  <span class="token function">update</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer received data:'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼</span>
<span class="token keyword">const</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> observer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> observer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

subject<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>observer1<span class="token punctuation">)</span>
subject<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>observer2<span class="token punctuation">)</span>

subject<span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token string">'Hello Observers!'</span><span class="token punctuation">)</span>
<span class="token comment">// è¾“å‡º:</span>
<span class="token comment">// Received data: Hello Observers!</span>
<span class="token comment">// Received data: Hello Observers!</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ¨ React ç­‰ç»„ä»¶åŒ–æ¡†æ¶ä¸­ï¼Œä½¿ç”¨å‡½æ•°å¼çš„ç®€æ˜“è§‚å¯Ÿè€…æ¨¡å¼é€šå¸¸æ›´æ–¹ä¾¿ã€æ›´ç›´è§‚ã€‚ç‰¹åˆ«æ˜¯ç»“åˆ React çš„é’©å­ï¼ˆå¦‚ <code>useState</code> å’Œ <code>useEffect</code>ï¼‰ï¼Œå¯ä»¥éå¸¸è½»æ¾åœ°å®ç°ç±»ä¼¼è§‚å¯Ÿè€…æ¨¡å¼çš„æ•ˆæœï¼Œè€Œä¸å¿…ä¾èµ–å¤æ‚çš„ç±»ç»§æ‰¿ç»“æ„ã€‚</p>
</div>
<h2>æ‰©å±•</h2>
<p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼çš„ç»å…¸å®šä¹‰ä¸­ï¼š</p>
<ul>
<li>å‚ä¸è€…ï¼šè§‚å¯Ÿè€…ï¼ˆObserverï¼‰å’Œè¢«è§‚å¯Ÿè€…ï¼ˆSubjectï¼‰ã€‚</li>
<li>ç»“æ„ï¼šåœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…ç›´æ¥è®¢é˜…ä¸»é¢˜ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ï¼Œä¸»é¢˜æœ‰çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¸»åŠ¨é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ã€‚è§‚å¯Ÿè€…é€šè¿‡æ³¨å†Œåˆ°ä¸»é¢˜ä¸­ï¼Œæ¥æ”¶äº‹ä»¶é€šçŸ¥ã€‚</li>
<li>ç‰¹ç‚¹ï¼š
<ul>
<li>è§‚å¯Ÿè€…å’Œä¸»é¢˜æ˜¯ç´§è€¦åˆçš„ï¼šä¸»é¢˜çŸ¥é“è°è®¢é˜…äº†è‡ªå·±ï¼Œé€šçŸ¥æ—¶ç›´æ¥è°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‚</li>
<li>è§‚å¯Ÿè€…çŸ¥é“ä¸»é¢˜çš„å­˜åœ¨ï¼Œå½¼æ­¤ä¹‹é—´æœ‰ä¾èµ–ã€‚</li>
<li>é€šå¸¸ç”¨äºå•ä¸€äº‹ä»¶æºï¼Œæ¯”å¦‚ UI äº‹ä»¶ç›‘å¬ã€‚</li>
</ul>
</li>
</ul>
<p>ä½†åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œéƒ½æ˜¯ä¸»åŠ¨è°ƒç”¨äº† <code>notifyObservers</code>ï¼Œè¿™çœ‹èµ·æ¥æ›´åƒæ˜¯ç›´æ¥çš„äº‹ä»¶è§¦å‘ï¼Œè€Œä¸æ˜¯ä¸»é¢˜çŠ¶æ€çš„å˜åŒ–å¼•èµ·çš„è‡ªåŠ¨é€šçŸ¥ã€‚</p>
<p>è§‚å¯Ÿè€…æ¨¡å¼ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240920124553.png" alt="æ¨¡å¼ç»“æ„" tabindex="0" loading="lazy"><figcaption>æ¨¡å¼ç»“æ„</figcaption></figure>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p>
<ul>
<li>è§‚å¯Ÿè€…ï¼ˆ<code>LoggingListener</code> å’Œ <code>EmailAlertsListener</code>ï¼‰ç›´æ¥è®¢é˜…ä¸»é¢˜ï¼ˆ<code>Editor</code>ï¼‰ã€‚</li>
<li>å½“ <code>Editor</code> çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¸»åŠ¨é€šçŸ¥æ‰€æœ‰è®¢é˜…äº†è¯¥äº‹ä»¶çš„è§‚å¯Ÿè€…ã€‚</li>
<li>è§‚å¯Ÿè€…é€šè¿‡ <code>EventManager</code> è¿›è¡Œç®¡ç†ï¼Œä½†å®ƒä»¬ä»ç„¶ç›´æ¥ä¸ <code>Editor</code> äº¤äº’ã€‚</li>
<li><code>EventManager</code> ä»…ä»…æ˜¯è¾…åŠ©ç±»ï¼Œç”¨äºç®€åŒ–ç®¡ç†è®¢é˜…å’Œé€šçŸ¥çš„é€»è¾‘ã€‚</li>
<li>è§‚å¯Ÿè€…å¯ä»¥åªå…³å¿ƒä¸»é¢˜çš„æŸä¸ªäº‹ä»¶ç±»å‹ï¼ˆ<code>open</code> å’Œ <code>save</code>ï¼‰çš„çŠ¶æ€å˜åŒ–ã€‚</li>
</ul>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240920124501.png" alt="å°†å¯¹è±¡ä¸­å‘ç”Ÿçš„äº‹ä»¶é€šçŸ¥ç»™å…¶ä»–å¯¹è±¡" tabindex="0" loading="lazy"><figcaption>å°†å¯¹è±¡ä¸­å‘ç”Ÿçš„äº‹ä»¶é€šçŸ¥ç»™å…¶ä»–å¯¹è±¡</figcaption></figure>

]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-20T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">æ¨¡å—æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/07-module-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/07-module-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>éšç€åº”ç”¨ç¨‹åºå’Œä»£ç åº“çš„å¢é•¿ï¼Œä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œåˆ†ç¦»æ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æ¨¡å—æ¨¡å¼å¯ä»¥å°†ä»£ç åˆ†å‰²æˆæ›´å°çš„ã€å¯é‡å¤ä½¿ç”¨çš„ç‰‡æ®µã€‚</p>
<p>é™¤äº†å¯ä»¥å°†ä»£ç åˆ†å‰²æˆæ›´å°çš„ã€å¯é‡å¤ä½¿ç”¨çš„ç‰‡æ®µå¤–ï¼Œæ¨¡å—è¿˜å¯ä»¥å°†æ–‡ä»¶ä¸­çš„æŸäº›å€¼ä¿æŒç§æœ‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—ä¸­çš„å£°æ˜ä¼šè¢«ä½œç”¨åŸŸï¼ˆå°è£…ï¼‰åˆ°è¯¥æ¨¡å—ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜ç¡®å¯¼å‡ºæŸä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥å€¼åœ¨è¯¥æ¨¡å—ä¹‹å¤–å°±ä¸å¯ç”¨ã€‚è¿™å°±é™ä½äº†ä»£ç åº“å…¶ä»–éƒ¨åˆ†å£°æ˜çš„å€¼å‘ç”Ÿåç§°å†²çªçš„é£é™©ï¼Œå› ä¸ºè¿™äº›å€¼åœ¨å…¨å±€èŒƒå›´å†…ä¸å¯ç”¨ã€‚</p>
<p>æ›´è¯¦ç»†çš„å†…å®¹å¯ä»¥è§ ã€‚</p>
]]></summary>
    <content type="html"><![CDATA[<p>éšç€åº”ç”¨ç¨‹åºå’Œä»£ç åº“çš„å¢é•¿ï¼Œä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œåˆ†ç¦»æ€§å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æ¨¡å—æ¨¡å¼å¯ä»¥å°†ä»£ç åˆ†å‰²æˆæ›´å°çš„ã€å¯é‡å¤ä½¿ç”¨çš„ç‰‡æ®µã€‚</p>
<p>é™¤äº†å¯ä»¥å°†ä»£ç åˆ†å‰²æˆæ›´å°çš„ã€å¯é‡å¤ä½¿ç”¨çš„ç‰‡æ®µå¤–ï¼Œæ¨¡å—è¿˜å¯ä»¥å°†æ–‡ä»¶ä¸­çš„æŸäº›å€¼ä¿æŒç§æœ‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—ä¸­çš„å£°æ˜ä¼šè¢«ä½œç”¨åŸŸï¼ˆå°è£…ï¼‰åˆ°è¯¥æ¨¡å—ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜ç¡®å¯¼å‡ºæŸä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥å€¼åœ¨è¯¥æ¨¡å—ä¹‹å¤–å°±ä¸å¯ç”¨ã€‚è¿™å°±é™ä½äº†ä»£ç åº“å…¶ä»–éƒ¨åˆ†å£°æ˜çš„å€¼å‘ç”Ÿåç§°å†²çªçš„é£é™©ï¼Œå› ä¸ºè¿™äº›å€¼åœ¨å…¨å±€èŒƒå›´å†…ä¸å¯ç”¨ã€‚</p>
<p>æ›´è¯¦ç»†çš„å†…å®¹å¯ä»¥è§ ã€‚</p>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-19T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">æ··å…¥æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/06-mixin-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/06-mixin-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ··å…¥æ¨¡å¼</h2>
<p><code>mixin</code> æ˜¯ä¸€ç§å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä¸ºå¦ä¸€ä¸ªå¯¹è±¡æˆ–ç±»æ·»åŠ å¯é‡å¤ä½¿ç”¨çš„åŠŸèƒ½ï¼Œè€Œæ— éœ€ä½¿ç”¨ç»§æ‰¿ã€‚æˆ‘ä»¬ä¸èƒ½å•ç‹¬ä½¿ç”¨ mixinsï¼šmixins çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨ä¸ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ä¸ºå¯¹è±¡æˆ–ç±»æ·»åŠ åŠŸèƒ½ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦åˆ›å»ºå¤šæ¡ç‹—ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åˆ›å»ºçš„åŸºæœ¬ç‹—æ²¡æœ‰ä»»ä½•å±æ€§ï¼Œåªæœ‰ä¸€ä¸ªåç§°å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>æ··å…¥æ¨¡å¼</h2>
<p><code>mixin</code> æ˜¯ä¸€ç§å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä¸ºå¦ä¸€ä¸ªå¯¹è±¡æˆ–ç±»æ·»åŠ å¯é‡å¤ä½¿ç”¨çš„åŠŸèƒ½ï¼Œè€Œæ— éœ€ä½¿ç”¨ç»§æ‰¿ã€‚æˆ‘ä»¬ä¸èƒ½å•ç‹¬ä½¿ç”¨ mixinsï¼šmixins çš„å”¯ä¸€ç›®çš„æ˜¯åœ¨ä¸ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ä¸ºå¯¹è±¡æˆ–ç±»æ·»åŠ åŠŸèƒ½ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦åˆ›å»ºå¤šæ¡ç‹—ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åˆ›å»ºçš„åŸºæœ¬ç‹—æ²¡æœ‰ä»»ä½•å±æ€§ï¼Œåªæœ‰ä¸€ä¸ªåç§°å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç‹—ä¸åº”è¯¥åªæœ‰åå­—ã€‚å®ƒåº”è¯¥ä¼š <code>bark</code>ã€<code>wagTail</code> å’Œ <code>play</code>ï¼ æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª mixinï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶æ·»åŠ åˆ° <code>Dog</code> ä¸­ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> dogFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bark</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">wagTail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wagging my tail!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Playing!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Object.assign</code> æ–¹æ³•å°† <code>dogFunctionality</code> æ··åˆå…ƒç´ æ·»åŠ åˆ° <code>Dog</code> åŸå‹ä¸­ã€‚é€šè¿‡è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç›®æ ‡å¯¹è±¡æ·»åŠ å±æ€§ï¼šæœ¬ä¾‹ä¸­ä¸º <code>Dog.prototype</code>ã€‚<code>Dog</code> çš„æ¯ä¸ªæ–°å®ä¾‹éƒ½å¯ä»¥è®¿é—® <code>dogFunctionality</code> çš„å±æ€§ï¼Œå› ä¸ºå®ƒä»¬éƒ½è¢«æ·»åŠ åˆ°äº† <code>Dog</code> çš„åŸå‹ä¸­ï¼</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dogFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bark</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">wagTail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wagging my tail!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Playing!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> dogFunctionality<span class="token punctuation">)</span>

<span class="token keyword">const</span> pet1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Daisy'</span><span class="token punctuation">)</span>

pet1<span class="token punctuation">.</span>name <span class="token comment">// Daisy</span>
pet1<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Woof!</span>
pet1<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Playing!</span>
</code></pre></div><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨ä¸ä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ä½¿ç”¨ mixin æ·»åŠ åŠŸèƒ½ï¼Œä½† mixin æœ¬èº«ä¹Ÿå¯ä»¥ä½¿ç”¨ç»§æ‰¿ï¼å¤§å¤šæ•°å“ºä¹³åŠ¨ç‰©ï¼ˆé™¤äº†æµ·è±šï¼Œä¹Ÿè®¸è¿˜æœ‰å…¶ä»–åŠ¨ç‰©ï¼‰éƒ½ä¼šèµ°è·¯å’Œç¡è§‰ã€‚ç‹—æ˜¯å“ºä¹³åŠ¨ç‰©ï¼Œåº”è¯¥ä¼šèµ°è·¯å’Œç¡è§‰ï¼</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> animalFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">walk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Walking!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sleep</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sleeping!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Object.assign</code> å°†è¿™äº›å±æ€§æ·»åŠ åˆ° <code>dogFunctionality</code> åŸå‹ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œç›®æ ‡å¯¹è±¡æ˜¯ <code>dogFunctionality</code>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> animalFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">walk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Walking!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sleep</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Sleeping!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dogFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bark</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">wagTail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wagging my tail!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Playing!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>dogFunctionality<span class="token punctuation">,</span> animalFunctionality<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> dogFunctionality<span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸­çš„ <code>Window</code> å°±æ˜¯ä¸€ä¸ª mixin çš„ä¾‹å­ã€‚ <code>Window</code> å¯¹è±¡ä» <code>WindowOrWorkerGlobalScope</code> å’Œ <code>WindowEventHandlers</code> mixins ä¸­å®ç°äº†è®¸å¤šå±æ€§ï¼Œè¿™ä½¿æˆ‘ä»¬å¯ä»¥è®¿é—® <code>setTimeout</code> å’Œ <code>setInterval</code>ã€<code>indexedDB</code> å’Œ <code>isSecureContext</code> ç­‰å±æ€§ã€‚</p>
<p>ç”±äºå®ƒæ˜¯ä¸€ä¸ª mixinï¼Œå› æ­¤åªèƒ½ç”¨äºä¸ºå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œæ‚¨å°†æ— æ³•åˆ›å»º <code>WindowOrWorkerGlobalScope</code> ç±»å‹çš„å¯¹è±¡ã€‚</p>

<h2>æ€»ç»“</h2>
<p>åœ¨å¼•å…¥ ES6 ç±»ä¹‹å‰ï¼Œmixins é€šå¸¸ç”¨äºä¸º React ç»„ä»¶æ·»åŠ åŠŸèƒ½ã€‚ React å›¢é˜Ÿä¸é¼“åŠ±ä½¿ç”¨ mixinsï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“ç»™ç»„ä»¶å¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œä½¿å…¶éš¾ä»¥ç»´æŠ¤å’Œé‡ç”¨ã€‚React å›¢é˜Ÿé¼“åŠ±ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼Œç°åœ¨è¿™äº›ç»„ä»¶é€šå¸¸å¯ä»¥è¢« Hooks ä»£æ›¿ã€‚</p>
<p>æ··å…¥æ¨¡å¼çœ‹èµ·æ¥å’Œç»§æ‰¿éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«ï¼š</p>
<ul>
<li>ç»§æ‰¿ï¼šç»§æ‰¿é€šå¸¸æ˜¯åœ¨ç±»å®šä¹‰æ—¶ç¡®å®šçš„ï¼Œå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå¹¶ä¸”å¯ä»¥è¦†ç›–æˆ–æ‰©å±•å®ƒä»¬ã€‚</li>
<li>æ··å…¥ï¼šæ··å…¥æ˜¯åŠ¨æ€çš„ã€çµæ´»çš„ï¼Œä½ å¯ä»¥åœ¨å¯¹è±¡æˆ–ç±»å®ä¾‹åˆ›å»ºåå°†æŸäº›è¡Œä¸ºæ··å…¥ï¼Œè€Œä¸å¿…åœ¨å®šä¹‰æ—¶å°±ç¡®å®šç»§æ‰¿å…³ç³»ã€‚æ··å…¥åªæ˜¯é€šè¿‡ç»„åˆè€Œä¸æ˜¯åˆ›å»ºä¸¥æ ¼çš„ç»§æ‰¿é“¾ã€‚</li>
</ul>
<p>å› æ­¤ä¸Šé¢çš„å®ç°ä»ç„¶æ˜¯æ··å…¥æ¨¡å¼ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è™½ç„¶ä½ ä¿®æ”¹äº†åŸå‹ï¼Œä½†æ··å…¥æ¨¡å¼çš„æœ¬è´¨æ˜¯å°†å¤šä¸ªåŠŸèƒ½ç»„åˆåˆ°ä¸€ä¸ªç±»æˆ–å¯¹è±¡ä¸­ï¼Œè€Œä¸å¼ºåˆ¶éµå¾ªä¸¥æ ¼çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ã€‚å› æ­¤ï¼Œå®ƒä¾ç„¶å¯ä»¥è¢«è®¤ä¸ºæ˜¯æ··å…¥æ¨¡å¼ã€‚</p>
</div>
<p>å¦‚æœä¸æƒ³ç›´æ¥ä¿®æ”¹åŸå‹ï¼Œå¯ä»¥é€‰æ‹©å®ä¾‹çº§åˆ«çš„æ··å…¥ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> dogFunctionality <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">bark</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">wagTail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Wagging my tail!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">play</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Playing!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> pet1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Daisy'</span><span class="token punctuation">)</span>

<span class="token comment">// ä»…å°†åŠŸèƒ½æ··å…¥ç‰¹å®šå®ä¾‹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŸå‹</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>pet1<span class="token punctuation">,</span> dogFunctionality<span class="token punctuation">)</span>

pet1<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Woof!</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>é€šè¿‡å‘å¯¹è±¡çš„åŸå‹æ³¨å…¥åŠŸèƒ½ï¼Œmixins å¯ä»¥è®©æˆ‘ä»¬åœ¨æ²¡æœ‰ç»§æ‰¿çš„æƒ…å†µä¸‹ä¸ºå¯¹è±¡è½»æ¾æ·»åŠ åŠŸèƒ½ã€‚ä¿®æ”¹å¯¹è±¡çš„åŸå‹è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸å¥½çš„åšæ³•ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´åŸå‹æ±¡æŸ“å’Œå‡½æ•°æ¥æºçš„ä¸ç¡®å®šæ€§ã€‚</p>
</div>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-19T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">ä¸­é—´ä»¶æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/05-middleware-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/05-middleware-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ä¸­é—´ä»¶æ¨¡å¼</h2>
<p>ä¸­é—´ä»¶æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ã€‚æ”¶åˆ°è¯·æ±‚åï¼Œæ¯ä¸ªå¤„ç†è€…å‡å¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæˆ–å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸ªå¤„ç†è€…ã€‚</p>
<div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>Express å°±ä½¿ç”¨äº†ä¸­é—´ä»¶æ¨¡å¼å¤„ç†è¯·æ±‚ã€‚ä¸­é—´ä»¶æ¨¡å¼æ˜¯ Express æ ¸å¿ƒæ¶æ„çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸ä½ åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°æ¥å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ä¸­é—´ä»¶åœ¨è¯·æ±‚-å“åº”ç”Ÿå‘½å‘¨æœŸä¸­å……å½“ã€Œå¤„ç†é“¾ã€ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ—¢å¯ä»¥ç»ˆæ­¢è¯·æ±‚ï¼ˆå‘é€å“åº”ï¼‰ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p>
</div>]]></summary>
    <content type="html"><![CDATA[<h2>ä¸­é—´ä»¶æ¨¡å¼</h2>
<p>ä¸­é—´ä»¶æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ã€‚æ”¶åˆ°è¯·æ±‚åï¼Œæ¯ä¸ªå¤„ç†è€…å‡å¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæˆ–å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸ªå¤„ç†è€…ã€‚</p>
<div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>Express å°±ä½¿ç”¨äº†ä¸­é—´ä»¶æ¨¡å¼å¤„ç†è¯·æ±‚ã€‚ä¸­é—´ä»¶æ¨¡å¼æ˜¯ Express æ ¸å¿ƒæ¶æ„çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸ä½ åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°æ¥å¯¹è¯·æ±‚å’Œå“åº”å¯¹è±¡è¿›è¡Œæ“ä½œã€‚ä¸­é—´ä»¶åœ¨è¯·æ±‚-å“åº”ç”Ÿå‘½å‘¨æœŸä¸­å……å½“ã€Œå¤„ç†é“¾ã€ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ—¢å¯ä»¥ç»ˆæ­¢è¯·æ±‚ï¼ˆå‘é€å“åº”ï¼‰ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">middleware</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ‰§è¡ŒæŸäº›é€»è¾‘</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è°ƒç”¨ next() å°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span>
<span class="token punctuation">}</span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918173949.png" alt="20240918173949" tabindex="0" loading="lazy"><figcaption>20240918173949</figcaption></figure>
<h2>Express ä¸­é—´ä»¶</h2>
<p>Express é€šè¿‡ <code>app.use()</code> æ¥å®šä¹‰ä¸­é—´ä»¶ï¼Œå¹¶ä½œç”¨äºæ•´ä¸ªåº”ç”¨ç¨‹åºçš„è¯·æ±‚å¤„ç†è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request received at:'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>ç®€å•çš„ä¸­é—´ä»¶å®ç°</h2>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MiddlewareManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> readonly middlewares<span class="token operator">:</span> Middleware<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">func</span><span class="token operator">:</span> Middleware</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">req</span><span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span> <span class="token literal-property property">res</span><span class="token operator">:</span> ServerResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">runner</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">index</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> middleware <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>middleware<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">middleware</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">runner</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">runner</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-18T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">ä¸­ä»‹è€…æ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/04-mediator-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/04-mediator-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>ä¸­ä»‹è€…æ¨¡å¼ä½¿ç»„ä»¶ä¹‹é—´é€šè¿‡ä¸€ä¸ªä¸­å¿ƒç‚¹ï¼ˆè°ƒè§£å™¨ï¼‰è¿›è¡Œäº¤äº’æˆä¸ºå¯èƒ½ã€‚å®ƒå…è®¸ç»„ä»¶æ¥æ”¶è¯·æ±‚å¹¶å°†å…¶å‘é€å‡ºå»ï¼Œè€Œä¸æ˜¯å½¼æ­¤ç›´æ¥å¯¹è¯ï¼åœ¨ JavaScript ä¸­ï¼Œä¸­ä»‹è€…é€šå¸¸åªæ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢æˆ–å‡½æ•°ã€‚</p>
<p>ä½ å¯ä»¥æŠŠè¿™ç§æ¨¡å¼æ¯”ä½œç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜å’Œé£è¡Œå‘˜ä¹‹é—´çš„å…³ç³»ã€‚é£è¡Œå‘˜ä¸ç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜ä¹‹é—´çš„å¯¹è¯å¯èƒ½ä¼šå¯¼è‡´æ··ä¹±ï¼Œè€Œä¸æ˜¯è®©é£è¡Œå‘˜ç›´æ¥å¯¹è¯ã€‚ç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜ç¡®ä¿æ‰€æœ‰é£æœºéƒ½èƒ½æ”¶åˆ°æ‰€éœ€çš„ä¿¡æ¯ï¼Œä»¥ä¾¿å®‰å…¨é£è¡Œï¼Œä¸æ’å‡»å…¶ä»–é£æœºã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬ä¸å¸Œæœ›åœ¨ JavaScript ä¸­æ§åˆ¶é£æœºï¼Œä½†æˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å¯¹è±¡ä¹‹é—´çš„å¤šå‘æ•°æ®ã€‚å¦‚æœç»„ä»¶æ•°é‡è¾ƒå¤šï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡å¯èƒ½ä¼šå˜å¾—ç›¸å½“æ··ä¹±ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170836.png" alt="20240918170836" tabindex="0" loading="lazy"><figcaption>20240918170836</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<p>ä¸­ä»‹è€…æ¨¡å¼ä½¿ç»„ä»¶ä¹‹é—´é€šè¿‡ä¸€ä¸ªä¸­å¿ƒç‚¹ï¼ˆè°ƒè§£å™¨ï¼‰è¿›è¡Œäº¤äº’æˆä¸ºå¯èƒ½ã€‚å®ƒå…è®¸ç»„ä»¶æ¥æ”¶è¯·æ±‚å¹¶å°†å…¶å‘é€å‡ºå»ï¼Œè€Œä¸æ˜¯å½¼æ­¤ç›´æ¥å¯¹è¯ï¼åœ¨ JavaScript ä¸­ï¼Œä¸­ä»‹è€…é€šå¸¸åªæ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢æˆ–å‡½æ•°ã€‚</p>
<p>ä½ å¯ä»¥æŠŠè¿™ç§æ¨¡å¼æ¯”ä½œç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜å’Œé£è¡Œå‘˜ä¹‹é—´çš„å…³ç³»ã€‚é£è¡Œå‘˜ä¸ç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜ä¹‹é—´çš„å¯¹è¯å¯èƒ½ä¼šå¯¼è‡´æ··ä¹±ï¼Œè€Œä¸æ˜¯è®©é£è¡Œå‘˜ç›´æ¥å¯¹è¯ã€‚ç©ºä¸­äº¤é€šç®¡åˆ¶å‘˜ç¡®ä¿æ‰€æœ‰é£æœºéƒ½èƒ½æ”¶åˆ°æ‰€éœ€çš„ä¿¡æ¯ï¼Œä»¥ä¾¿å®‰å…¨é£è¡Œï¼Œä¸æ’å‡»å…¶ä»–é£æœºã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬ä¸å¸Œæœ›åœ¨ JavaScript ä¸­æ§åˆ¶é£æœºï¼Œä½†æˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å¯¹è±¡ä¹‹é—´çš„å¤šå‘æ•°æ®ã€‚å¦‚æœç»„ä»¶æ•°é‡è¾ƒå¤šï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡å¯èƒ½ä¼šå˜å¾—ç›¸å½“æ··ä¹±ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170836.png" alt="20240918170836" tabindex="0" loading="lazy"><figcaption>20240918170836</figcaption></figure>
<p>ä¸è®©æ¯ä¸ªå¯¹è±¡ç›´æ¥ä¸å…¶ä»–å¯¹è±¡å¯¹è¯ä»è€Œå½¢æˆå¤šå¯¹å¤šçš„å…³ç³»ä¸åŒï¼Œå¯¹è±¡çš„è¯·æ±‚ç”±è°ƒè§£å™¨å¤„ç†ã€‚è°ƒè§£å™¨å¤„ç†è¯·æ±‚ï¼Œå¹¶å°†å…¶å‘é€åˆ°éœ€è¦çš„åœ°æ–¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240918170920.png" alt="20240918170920" tabindex="0" loading="lazy"><figcaption>20240918170920</figcaption></figure>
<p>èŠå¤©å®¤å°±æ˜¯ä¸­é—´ä»¶æ¨¡å¼çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹ï¼èŠå¤©å®¤ä¸­çš„ç”¨æˆ·ä¸ä¼šç›´æ¥å¯¹è¯ã€‚èŠå¤©å®¤åªæ˜¯ç”¨æˆ·ä¹‹é—´çš„ä¸­ä»‹ã€‚</p>

<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ç»„ä»¶çš„å°è£…ä¹Ÿä½¿ç”¨äº†ä¸­ä»‹è€…æ¨¡å¼ï¼Œå­ç»„ä»¶æŠ›å‡ºäº‹ä»¶åœ¨çˆ¶ç»„ä»¶ä¸­é›†ä¸­å¤„ç†ã€‚</p>
</div>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-18T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">äº«å…ƒæ¨¡å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/03-flyweight-pattern.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/patterns/vanilla/03-flyweight-pattern.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>äº«å…ƒæ¨¡å¼</h2>
<p>å½“æˆ‘ä»¬åˆ›å»ºå¤§é‡å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼æ¥å‡å°‘å†…å­˜ä½¿ç”¨ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿæ·»åŠ ä¹¦ç±ã€‚æ‰€æœ‰ä¹¦ç±éƒ½æœ‰ <code>title</code>ã€<code>author</code> å’Œ <code>isbn</code>ï¼ç„¶è€Œï¼Œä¸€ä¸ªå›¾ä¹¦é¦†é€šå¸¸ä¸ä¼šåªæœ‰ä¸€æœ¬ä¹¦ï¼šå®ƒé€šå¸¸æœ‰åŒä¸€æœ¬ä¹¦çš„å¤šæœ¬å‰¯æœ¬ã€‚</p>
<p>å¦‚æœæœ‰å¤šæœ¬å®Œå…¨ç›¸åŒçš„ä¹¦ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾ä¹¦å®ä¾‹å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å¸Œæœ›åˆ›å»ºå¤šä¸ª <code>Book</code> æ„é€ å‡½æ•°å®ä¾‹ï¼Œä»£è¡¨ä¸€æœ¬ä¹¦ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title
    <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author
    <span class="token keyword">this</span><span class="token punctuation">.</span>isbn <span class="token operator">=</span> isbn
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>äº«å…ƒæ¨¡å¼</h2>
<p>å½“æˆ‘ä»¬åˆ›å»ºå¤§é‡å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº«å…ƒæ¨¡å¼æ¥å‡å°‘å†…å­˜ä½¿ç”¨ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿæ·»åŠ ä¹¦ç±ã€‚æ‰€æœ‰ä¹¦ç±éƒ½æœ‰ <code>title</code>ã€<code>author</code> å’Œ <code>isbn</code>ï¼ç„¶è€Œï¼Œä¸€ä¸ªå›¾ä¹¦é¦†é€šå¸¸ä¸ä¼šåªæœ‰ä¸€æœ¬ä¹¦ï¼šå®ƒé€šå¸¸æœ‰åŒä¸€æœ¬ä¹¦çš„å¤šæœ¬å‰¯æœ¬ã€‚</p>
<p>å¦‚æœæœ‰å¤šæœ¬å®Œå…¨ç›¸åŒçš„ä¹¦ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾ä¹¦å®ä¾‹å¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å¸Œæœ›åˆ›å»ºå¤šä¸ª <code>Book</code> æ„é€ å‡½æ•°å®ä¾‹ï¼Œä»£è¡¨ä¸€æœ¬ä¹¦ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title
    <span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> author
    <span class="token keyword">this</span><span class="token punctuation">.</span>isbn <span class="token operator">=</span> isbn
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä¸€æœ¬ä¹¦æœ‰ç›¸åŒçš„ ISBN ç¼–å·ï¼Œå› æ­¤æ˜¯å®Œå…¨ç›¸åŒçš„å›¾ä¹¦ç±»å‹ï¼Œæˆ‘ä»¬å°±ä¸æƒ³åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å›¾ä¹¦å®ä¾‹ã€‚ç›¸åï¼Œæˆ‘ä»¬åº”è¯¥é¦–å…ˆæ£€æŸ¥è¿™æœ¬ä¹¦æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> books <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">createBook</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> existingBook <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>existingBook<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> books<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœå®ƒå°šæœªåŒ…å«å›¾ä¹¦çš„ ISBN ç¼–å·ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€æœ¬æ–°ä¹¦ï¼Œå¹¶å°†å…¶ ISBN ç¼–å·æ·»åŠ åˆ° <code>isbnNumbers</code> é›†åˆä¸­ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">createBook</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> existingBook <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>existingBook<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> books<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>isbn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn<span class="token punctuation">)</span>
  books<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>isbn<span class="token punctuation">,</span> book<span class="token punctuation">)</span>

  <span class="token keyword">return</span> book
<span class="token punctuation">}</span>
</code></pre></div><p><code>createBook</code> å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ç§å›¾ä¹¦çš„æ–°å®ä¾‹ã€‚ç„¶è€Œï¼Œå›¾ä¹¦é¦†é€šå¸¸åŒ…å«åŒä¸€æœ¬ä¹¦çš„å¤šä¸ªå‰¯æœ¬ï¼è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>addBook</code> å‡½æ•°ï¼Œå®ƒå…è®¸æˆ‘ä»¬æ·»åŠ åŒä¸€æœ¬ä¹¦çš„å¤šä¸ªå‰¯æœ¬ã€‚å®ƒåº”è¯¥è°ƒç”¨ <code>createBook</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°è¦ä¹ˆè¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„å›¾ä¹¦å®ä¾‹ï¼Œè¦ä¹ˆè¿”å›å·²ç»å­˜åœ¨çš„å®ä¾‹ã€‚</p>
<p>ä¸ºäº†è®°å½•å‰¯æœ¬æ€»æ•°ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>bookList</code> æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å›¾ä¹¦é¦†ä¸­çš„å›¾ä¹¦æ€»æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> bookList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">addBook</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn<span class="token punctuation">,</span> availability<span class="token punctuation">,</span> sales</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">createBook</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> isbn<span class="token punctuation">)</span><span class="token punctuation">,</span>
    sales<span class="token punctuation">,</span>
    availability<span class="token punctuation">,</span>
    isbn
  <span class="token punctuation">}</span>

  bookList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
  <span class="token keyword">return</span> book
<span class="token punctuation">}</span>
</code></pre></div><p>å®Œç¾ï¼æˆ‘ä»¬ä¸å¿…æ¯æ¬¡æ·»åŠ å‰¯æœ¬æ—¶éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾ä¹¦å®ä¾‹ï¼Œè€Œæ˜¯å¯ä»¥æœ‰æ•ˆåœ°ä¸ºç‰¹å®šå‰¯æœ¬ä½¿ç”¨å·²æœ‰çš„å›¾ä¹¦å®ä¾‹ã€‚è®©æˆ‘ä»¬åˆ›å»º 3 æœ¬ä¹¦çš„ 5 ä¸ªå‰¯æœ¬ï¼šã€Šå“ˆåˆ©-æ³¢ç‰¹ã€‹ã€ã€Šæ€æ­»ä¸€åªçŸ¥æ›´é¸Ÿã€‹å’Œã€Šäº†ä¸èµ·çš„ç›–èŒ¨æ¯”ã€‹ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">addBook</span><span class="token punctuation">(</span><span class="token string">'Harry Potter'</span><span class="token punctuation">,</span> <span class="token string">'JK Rowling'</span><span class="token punctuation">,</span> <span class="token string">'AB123'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">addBook</span><span class="token punctuation">(</span><span class="token string">'Harry Potter'</span><span class="token punctuation">,</span> <span class="token string">'JK Rowling'</span><span class="token punctuation">,</span> <span class="token string">'AB123'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
<span class="token function">addBook</span><span class="token punctuation">(</span><span class="token string">'To Kill a Mockingbird'</span><span class="token punctuation">,</span> <span class="token string">'Harper Lee'</span><span class="token punctuation">,</span> <span class="token string">'CD345'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token function">addBook</span><span class="token punctuation">(</span><span class="token string">'To Kill a Mockingbird'</span><span class="token punctuation">,</span> <span class="token string">'Harper Lee'</span><span class="token punctuation">,</span> <span class="token string">'CD345'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token function">addBook</span><span class="token punctuation">(</span><span class="token string">'The Great Gatsby'</span><span class="token punctuation">,</span> <span class="token string">'F. Scott Fitzgerald'</span><span class="token punctuation">,</span> <span class="token string">'EF567'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
</code></pre></div><h2>ç‰¹ç‚¹</h2>
<p>äº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å…±äº«å·²ç»å­˜åœ¨çš„å¯¹è±¡æ¥å‡å°‘å†…å­˜å ç”¨ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯¹è±¡å…±äº«ï¼šé¿å…é‡å¤åˆ›å»ºç›¸åŒçŠ¶æ€çš„å¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜ã€‚</li>
<li>ä¸å¯å˜éƒ¨åˆ†ä¸å¯å˜éƒ¨åˆ†åˆ†ç¦»ï¼šå°†å¯¹è±¡åˆ†ä¸ºå…±äº«çš„ã€ä¸å¯å˜çš„éƒ¨åˆ†ï¼ˆå¦‚ <code>title</code>ã€<code>author</code> å’Œ <code>isbn</code>ï¼‰å’Œéå…±äº«çš„ã€å¯å˜çš„éƒ¨åˆ†ï¼ˆå¦‚ <code>availability</code> å’Œ <code>sales</code>ï¼‰ã€‚</li>
</ul>
<p>ä¸Šè¿°ä»£ç ä½“ç°äº†è¿™ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<p><code>Book</code> ç±»å®ä¾‹åŒ–äº†ä¹¦ç±çš„åŸºæœ¬ä¿¡æ¯ï¼ˆ<code>title</code>ã€<code>author</code>ã€<code>isbn</code>ï¼‰ï¼Œå¹¶é€šè¿‡ <code>Map</code> å­˜å‚¨ï¼Œç¡®ä¿åŒæ ·çš„ <code>isbn</code> åªä¼šåˆ›å»ºä¸€æ¬¡ã€‚è¿™éƒ¨åˆ†ç›¸å½“äºäº«å…ƒå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼ˆä¸å¯å˜ä¸”å¯ä»¥è¢«å¤šä¸ªå®ä¾‹å…±äº«ï¼‰ã€‚</p>
<p><code>addBook</code> å‡½æ•°æ·»åŠ äº†ä¸€äº›ä¹¦ç±çš„å¯å˜ä¿¡æ¯ï¼ˆ<code>sales</code> å’Œ <code>availability</code>ï¼‰ï¼Œè¿™äº›ä¿¡æ¯å±äºäº«å…ƒå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ï¼ˆæ¯æ¬¡ä½¿ç”¨æ—¶å¯ä»¥ç‹¬ç«‹æŒ‡å®šï¼‰ã€‚</p>
<h2>ä¼˜ç‚¹</h2>
<ul>
<li>å‡å°‘å†…å­˜å ç”¨ï¼šé¿å…äº†ä¸ºæ¯ä¸ªæ–°ä¹¦ç±å¯¹è±¡é‡å¤åˆ›å»ºç›¸åŒçš„ <code>Book</code> å®ä¾‹ã€‚å¦‚æœä¹¦ç±çš„ <code>isbn</code> ç›¸åŒï¼Œé‚£ä¹ˆä¸å†åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œè€Œæ˜¯å…±äº«ç°æœ‰çš„å¯¹è±¡ã€‚</li>
<li>æé«˜æ€§èƒ½ï¼šé€šè¿‡å…±äº«å·²æœ‰å¯¹è±¡ï¼Œå‡å°‘å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§é‡æ•°æ®å¤„ç†çš„åœºæ™¯ä¸­èƒ½æ˜¾è‘—æé«˜æ€§èƒ½ã€‚</li>
<li>æ›´å¥½çš„ç®¡ç†ï¼šå°†ä¸å¯å˜çš„æ•°æ®ä¸å¯å˜æ•°æ®åˆ†å¼€ï¼Œä»£ç é€»è¾‘æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ã€‚</li>
</ul>
<h2>é€‚ç”¨åœºæ™¯</h2>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äº <code>title</code>ã€<code>author</code> å’Œ <code>isbn</code> éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œäº«å…ƒæ¨¡å¼å¸¦æ¥çš„ä¼˜åŒ–å¯èƒ½ä¼šéå¸¸æœ‰é™ï¼Œç”šè‡³æ²¡æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>å†…å­˜ä¼˜åŒ–æœ‰é™ï¼šç”±äºå­—ç¬¦ä¸²æœ¬èº«æ˜¯ä¸å¯å˜ä¸”é€šå¸¸ç”±å¼•æ“ä¼˜åŒ–å¤„ç†ï¼ŒJavaScript å·²ç»ä¼šå¯¹ç›¸åŒçš„å­—ç¬¦ä¸²è¿›è¡Œå…±äº«å­˜å‚¨ï¼ˆç±»ä¼¼äºäº«å…ƒæ¨¡å¼ï¼‰ï¼Œè¿™æ„å‘³ç€æ‰‹åŠ¨å®ç°çš„äº«å…ƒæ¨¡å¼åœ¨è¿™æ–¹é¢å¹¶æ²¡æœ‰å¤ªå¤§çš„é¢å¤–å¥½å¤„ã€‚</li>
<li>é‡å¤å®ä¾‹å‡å°‘ä¸æ˜æ˜¾ï¼šä¸å¯¹è±¡ä¸åŒï¼ŒåŸºæœ¬ç±»å‹çš„é‡å¤å®ä¾‹åœ¨å†…å­˜ä¸­é€šå¸¸ä¸ä¼šåƒå¯¹è±¡é‚£æ ·å ç”¨å¤§é‡ç©ºé—´ã€‚å› æ­¤ï¼Œé¿å…åˆ›å»ºå¤šä¸ªåŸºæœ¬ç±»å‹çš„å®ä¾‹ä¸ä¼šæœ‰æ˜æ˜¾çš„å†…å­˜èŠ‚çœã€‚</li>
</ul>
<p>å› æ­¤ï¼Œäº«å…ƒæ¨¡å¼é€‚ç”¨äºæœ‰å¤§é‡å…¬å…±å†…åœ¨å±æ€§çš„åœºæ™¯ï¼Œå¦‚ï¼šç²’å­ç³»ç»Ÿï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç²’å­éƒ½æœ‰ä¸€äº›å…±åŒçš„å±æ€§ï¼Œå¦‚é¢œè‰²ã€ç²¾çµå›¾ç­‰ã€‚é€šè¿‡äº«å…ƒæ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å…±äº«è¿™äº›å±æ€§ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å®é™…ä¸Šäº«å…ƒæ¨¡å¼æ˜¯å…±äº«ä¸€äº›å†…åœ¨çš„å…¬å…±çŠ¶æ€ï¼Œè€Œä¸æ˜¯å…±äº«æ‰€æœ‰çš„çŠ¶æ€ã€‚</p>
<p>åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹ç»§æ‰¿è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>åœ¨äº«å…ƒæ¨¡å¼ä¸­ï¼Œè™½ç„¶æœ€ååˆ›å»ºçš„å¯¹è±¡æ•°é‡å’Œä¹‹å‰ä¸€æ ·å¤šï¼Œä½†ä¼šå¤§é‡èŠ‚çœå†…å­˜ã€‚åœ¨æœ¬ä¾‹ä¸­å¯èƒ½æ²¡æœ‰ä½“ç°å‡ºè¿™ä¸ªå¥½å¤„ï¼Œä½†æ˜¯å¦‚æœå…±äº«çš„å†…åœ¨çŠ¶æ€æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆäº«å…ƒæ¨¡å¼å°±å¯ä»¥å‘æŒ¥ä½œç”¨ã€‚</p>
</div>
]]></content>
    <author>
      <name>patterns</name>
    </author>
    <category term="reading"/>
    <contributor>
      <name>patterns</name>
    </contributor>
    <published>2024-09-18T00:00:00.000Z</published>
    <rights>Copyright by patterns</rights>
  </entry>
  <entry>
    <title type="text">è¦†ç›–è¾“å…¥æ¡† autofill æ ·å¼</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/css/018-autofill.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/css/018-autofill.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>æµè§ˆå™¨è‡ªåŠ¨å¡«å……å¯†ç ä¼šæœ‰ä¸€äº›é»˜è®¤æ ·å¼ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240914171559.png" alt="autofill é»˜è®¤æ ·å¼" tabindex="0" loading="lazy"><figcaption>autofill é»˜è®¤æ ·å¼</figcaption></figure>
<h2>æ–¹æ³•ä¸€</h2>
<p>ä½¿ç”¨ <code>-webkit-box-shadow</code> å®ç°è¦†ç›–ï¼š</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 999px #fff inset<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>æµè§ˆå™¨è‡ªåŠ¨å¡«å……å¯†ç ä¼šæœ‰ä¸€äº›é»˜è®¤æ ·å¼ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240914171559.png" alt="autofill é»˜è®¤æ ·å¼" tabindex="0" loading="lazy"><figcaption>autofill é»˜è®¤æ ·å¼</figcaption></figure>
<h2>æ–¹æ³•ä¸€</h2>
<p>ä½¿ç”¨ <code>-webkit-box-shadow</code> å®ç°è¦†ç›–ï¼š</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0 0 999px #fff inset<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†æ˜¯ï¼Œè¯¥æ–¹å¼æ— æ³•è®¾ç½®èƒŒæ™¯é€æ˜ã€‚</p>
<h2>æ–¹æ³•äºŒ</h2>
<p>ä½¿ç”¨åŠ¨ç”»ï¼š</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-text-fill-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--white-color-1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> background-color 5000s ease-in-out 0s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½†æ˜¯å¦‚æœåœç•™æ—¶é—´è¿‡ä¹…ï¼Œä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯ç›®å‰å¥½åƒæ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚</p>
]]></content>
    <category term="CSS"/>
    <published>2024-09-14T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å®ç° loading spinner</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/css/017-loading-spinner.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/css/017-loading-spinner.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å®ç°ä¸€ä¸ª loading spinner å¯ä»¥ä½¿ç”¨ CSS åŠ¨ç”»å’Œè¾¹æ¡†ã€‚</p>

]]></summary>
    <content type="html"><![CDATA[<p>å®ç°ä¸€ä¸ª loading spinner å¯ä»¥ä½¿ç”¨ CSS åŠ¨ç”»å’Œè¾¹æ¡†ã€‚</p>

]]></content>
    <category term="CSS"/>
    <published>2024-09-14T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">iOS å›¾ç‰‡å…¼å®¹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/020-ios-img.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/020-ios-img.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>é•¿æŒ‰å›¾ç‰‡ï¼Œå¼¹å‡ºèœå•</h2>
<p>åœ¨ iOS ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é•¿æŒ‰å›¾ç‰‡æ¥å¼¹å‡ºèœå•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é˜»æ­¢ã€‚</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">img</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-touch-callout</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>é•¿æŒ‰å›¾ç‰‡ï¼Œå¼¹å‡ºèœå•</h2>
<p>åœ¨ iOS ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é•¿æŒ‰å›¾ç‰‡æ¥å¼¹å‡ºèœå•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é˜»æ­¢ã€‚</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">img</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-touch-callout</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é•¿æŒ‰å›¾ç‰‡ï¼Œæ‹–åŠ¨</h2>
<p>é•¿æŒ‰ç¦æ­¢æ‹–åŠ¨ã€‚</p>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">img</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-user-drag</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>ç‚¹å‡»å‡ºç°é»‘è‰²é˜´å½±</h2>
<div class="language-css" data-ext="css" data-title="css"><pre class="language-css"><code><span class="token selector">img</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <category term="practice"/>
    <published>2024-09-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">iOS é˜»æ­¢ touch äº‹ä»¶é»˜è®¤è¡Œä¸º</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/019-ios-prevent-touch.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/019-ios-prevent-touch.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>webview å¼€å‘æ—¶ï¼ŒiOS ä¸­ safari æµè§ˆå™¨é€šè¿‡ <code>preventDefault</code> æ–¹æ³•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> usePreventTouchEvent <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token operator">=</span> HTMLDivElement<span class="token operator">&gt;</span><span class="token punctuation">(</span>containerRef<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> preventDefaultBehavior <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> Event<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> touchEvents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'touchmove'</span><span class="token punctuation">]</span>

    <span class="token keyword">const</span> dragContainer <span class="token operator">=</span> containerRef<span class="token punctuation">.</span>current

    <span class="token keyword">if</span> <span class="token punctuation">(</span>dragContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      touchEvents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        dragContainer<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> preventDefaultBehavior<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          passive<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        touchEvents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          dragContainer<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> preventDefaultBehavior<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>containerRef<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> usePreventTouchEvent
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>webview å¼€å‘æ—¶ï¼ŒiOS ä¸­ safari æµè§ˆå™¨é€šè¿‡ <code>preventDefault</code> æ–¹æ³•æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> usePreventTouchEvent <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token operator">=</span> HTMLDivElement<span class="token operator">&gt;</span><span class="token punctuation">(</span>containerRef<span class="token operator">:</span> React<span class="token punctuation">.</span>RefObject<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> preventDefaultBehavior <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> Event<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> touchEvents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'touchmove'</span><span class="token punctuation">]</span>

    <span class="token keyword">const</span> dragContainer <span class="token operator">=</span> containerRef<span class="token punctuation">.</span>current

    <span class="token keyword">if</span> <span class="token punctuation">(</span>dragContainer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      touchEvents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        dragContainer<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> preventDefaultBehavior<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          passive<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        touchEvents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          dragContainer<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> preventDefaultBehavior<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>containerRef<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> usePreventTouchEvent
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨ iOS ä¸Šï¼Œéœ€è¦å¢åŠ  <code>{ passive: false }</code> å‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´ <code>touch</code> äº‹ä»¶çš„ <code>preventDefault()</code> è¡Œä¸ºå¤±æ•ˆã€‚</p>
<p>è¯¦ç»†è§ï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#passive" target="_blank" rel="noopener noreferrer">addEventListener#passive</a>ã€‚</p>
</div>
]]></content>
    <category term="practice"/>
    <published>2024-09-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Maven</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/java/tool/01-maven.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/java/tool/01-maven.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ä»€ä¹ˆæ˜¯ Maven</h2>
<p>Maven æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·ï¼Œä¸»è¦ç”¨äº Java é¡¹ç›®ã€‚å®ƒé€šè¿‡ POMï¼ˆProject Object Modelï¼‰æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€ç¼–è¯‘ã€æµ‹è¯•å’Œæ‰“åŒ…ç­‰ä»»åŠ¡ã€‚Maven çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¾èµ–ç®¡ç†ï¼šé€šè¿‡å®šä¹‰ POM æ–‡ä»¶ä¸­çš„ä¾èµ–é¡¹ï¼ŒMaven èƒ½å¤Ÿè‡ªåŠ¨ä¸‹è½½å’Œé…ç½®é¡¹ç›®æ‰€éœ€çš„åº“ã€‚</li>
<li>æ„å»ºè‡ªåŠ¨åŒ–ï¼šMaven å¯ä»¥è‡ªåŠ¨åŒ–æ‰§è¡Œä»ç¼–è¯‘ã€æµ‹è¯•åˆ°æ‰“åŒ…çš„æ•´ä¸ªæ„å»ºè¿‡ç¨‹ã€‚</li>
<li>é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–ï¼šMaven æä¾›äº†çº¦å®šä¼˜äºé…ç½®çš„é¡¹ç›®ç»“æ„ï¼Œå‡å°‘äº†å¼€å‘è€…çš„é…ç½®å·¥ä½œã€‚</li>
</ul>
<p>ç±»ä¼¼ npmï¼Œä¸åŒçš„æ˜¯ï¼Œnpm ä½¿ç”¨ <code>package.json</code>ï¼Œè€Œ Maven ä½¿ç”¨ <code>pom.xml</code>ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<h2>ä»€ä¹ˆæ˜¯ Maven</h2>
<p>Maven æ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·ï¼Œä¸»è¦ç”¨äº Java é¡¹ç›®ã€‚å®ƒé€šè¿‡ POMï¼ˆProject Object Modelï¼‰æ–‡ä»¶æ¥ç®¡ç†é¡¹ç›®çš„ä¾èµ–ã€ç¼–è¯‘ã€æµ‹è¯•å’Œæ‰“åŒ…ç­‰ä»»åŠ¡ã€‚Maven çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¾èµ–ç®¡ç†ï¼šé€šè¿‡å®šä¹‰ POM æ–‡ä»¶ä¸­çš„ä¾èµ–é¡¹ï¼ŒMaven èƒ½å¤Ÿè‡ªåŠ¨ä¸‹è½½å’Œé…ç½®é¡¹ç›®æ‰€éœ€çš„åº“ã€‚</li>
<li>æ„å»ºè‡ªåŠ¨åŒ–ï¼šMaven å¯ä»¥è‡ªåŠ¨åŒ–æ‰§è¡Œä»ç¼–è¯‘ã€æµ‹è¯•åˆ°æ‰“åŒ…çš„æ•´ä¸ªæ„å»ºè¿‡ç¨‹ã€‚</li>
<li>é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–ï¼šMaven æä¾›äº†çº¦å®šä¼˜äºé…ç½®çš„é¡¹ç›®ç»“æ„ï¼Œå‡å°‘äº†å¼€å‘è€…çš„é…ç½®å·¥ä½œã€‚</li>
</ul>
<p>ç±»ä¼¼ npmï¼Œä¸åŒçš„æ˜¯ï¼Œnpm ä½¿ç”¨ <code>package.json</code>ï¼Œè€Œ Maven ä½¿ç”¨ <code>pom.xml</code>ã€‚</p>
<p><code>package.json</code> é€šå¸¸åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ä¾èµ–ç®¡ç†ï¼š<code>dependencies</code> å’Œ <code>devDependencies</code> å­—æ®µç”¨äºåˆ—å‡ºé¡¹ç›®åœ¨è¿è¡Œæ—¶å’Œå¼€å‘æ—¶æ‰€éœ€çš„åŒ…ã€‚</li>
<li>è„šæœ¬ç®¡ç†ï¼š<code>scripts</code> å­—æ®µå…è®¸å¼€å‘è€…å®šä¹‰å„ç§å‘½ä»¤ï¼Œå¦‚ <code>npm start</code>ã€<code>npm test</code> ç­‰ï¼Œæ¥è‡ªåŠ¨åŒ–å¸¸è§ä»»åŠ¡ã€‚</li>
<li>é¡¹ç›®å…ƒæ•°æ®ï¼šå¦‚é¡¹ç›®åç§°ã€ç‰ˆæœ¬ã€æè¿°ã€ä½œè€…ç­‰ã€‚</li>
</ul>
<p><code>pom.xml</code> ä¸­åŒ…å«ä¸‹è¿°å†…å®¹ï¼š</p>
<ul>
<li>ä¾èµ–ç®¡ç†ï¼š<code>dependencies</code> èŠ‚ç‚¹åˆ—å‡ºé¡¹ç›®æ‰€ä¾èµ–çš„åº“åŠå…¶ç‰ˆæœ¬ã€‚</li>
<li>æ„å»ºç®¡ç†ï¼š<code>build</code> èŠ‚ç‚¹å®šä¹‰äº†æ„å»ºè¿‡ç¨‹ä¸­çš„å„ç§é…ç½®ï¼ŒåŒ…æ‹¬æ’ä»¶çš„ä½¿ç”¨ã€‚</li>
<li>é¡¹ç›®å…ƒæ•°æ®ï¼šå¦‚é¡¹ç›®çš„ <code>groupId</code>ã€<code>artifactId</code>ã€<code>version</code> ç­‰ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šMaven æä¾›äº†ä¸€æ•´å¥—çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ï¼Œæ¶µç›–äº†é¡¹ç›®çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…å’Œéƒ¨ç½²ç­‰é˜¶æ®µã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<div class="language-xml" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>my-project<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.8.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2>ä¾èµ–åŸåˆ™</h2>
<ol>
<li>ä¾èµ–è·¯å¾„æœ€çŸ­ä¼˜å…ˆåŸåˆ™ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>A -<span class="token operator">&gt;</span> B -<span class="token operator">&gt;</span> C -<span class="token operator">&gt;</span> X<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span>
A -<span class="token operator">&gt;</span> D -<span class="token operator">&gt;</span> X<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”±äº X(2.0) è·¯å¾„æœ€çŸ­ï¼Œæ‰€ä»¥ä½¿ç”¨ X(2.0)ã€‚</p>
<ol start="2">
<li>å£°æ˜é¡ºåºä¼˜å…ˆåŸåˆ™ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>A -<span class="token operator">&gt;</span> B -<span class="token operator">&gt;</span> X<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span>
A -<span class="token operator">&gt;</span> C -<span class="token operator">&gt;</span> X<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ POM ä¸­æœ€å…ˆå£°æ˜çš„ä¼˜å…ˆï¼Œä¸Šé¢çš„ä¸¤ä¸ªä¾èµ–å¦‚æœå…ˆå£°æ˜ Bï¼Œé‚£ä¹ˆæœ€åä½¿ç”¨ X(1.0)ã€‚</p>
<ol start="3">
<li>è¦†å†™ä¼˜å…ˆåŸåˆ™ï¼š</li>
</ol>
<p>å­ POM å†…å£°æ˜çš„ä¾èµ–ä¼˜å…ˆäºçˆ¶ POM ä¸­å£°æ˜çš„ä¾èµ–ã€‚</p>
]]></content>
    <category term="node"/>
    <published>2024-08-30T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">finalhandler</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/node/module/001-finalhandler.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/node/module/001-finalhandler.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://github.com/pillarjs/finalhandler" target="_blank" rel="noopener noreferrer">finalhandler</a> æ¨¡å—åœ¨ Express.js ä¸­ç”¨äºå¤„ç†æœªå¤„ç†çš„è¯·æ±‚æˆ–é”™è¯¯ï¼Œæ˜¯è¯·æ±‚å¤„ç†çš„æœ€åä¸€ä¸ªæ­¥éª¤ã€‚å®ƒç¡®ä¿äº†å½“è¯·æ±‚ç»è¿‡æ‰€æœ‰ä¸­é—´ä»¶å’Œè·¯ç”±åï¼Œå¦‚æœæ²¡æœ‰å“åº”æˆ–è€…å‘ç”Ÿäº†é”™è¯¯ï¼Œåº”ç”¨ä»ç„¶èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†è¿™äº›æƒ…å†µï¼Œå¹¶è¿”å›é€‚å½“çš„ HTTP å“åº”ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<code>finalhandler</code> æ¨¡å—å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<h2>å¤„ç†æœªåŒ¹é…çš„è·¯ç”±</h2>
<p>å½“è¯·æ±‚ç»è¿‡æ‰€æœ‰ä¸­é—´ä»¶å’Œè·¯ç”±åï¼Œ<code>finalhandler</code> ä¼šæ£€æŸ¥æ˜¯å¦å·²ç»å‘é€äº†å“åº”ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™è®¤ä¸ºè¯·æ±‚æœªè¢«å¤„ç†ï¼ˆå³æœªåŒ¹é…åˆ°ä»»ä½•è·¯ç”±ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª 404 çŠ¶æ€ç ï¼ˆ"Not Found"ï¼‰ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p><a href="https://github.com/pillarjs/finalhandler" target="_blank" rel="noopener noreferrer">finalhandler</a> æ¨¡å—åœ¨ Express.js ä¸­ç”¨äºå¤„ç†æœªå¤„ç†çš„è¯·æ±‚æˆ–é”™è¯¯ï¼Œæ˜¯è¯·æ±‚å¤„ç†çš„æœ€åä¸€ä¸ªæ­¥éª¤ã€‚å®ƒç¡®ä¿äº†å½“è¯·æ±‚ç»è¿‡æ‰€æœ‰ä¸­é—´ä»¶å’Œè·¯ç”±åï¼Œå¦‚æœæ²¡æœ‰å“åº”æˆ–è€…å‘ç”Ÿäº†é”™è¯¯ï¼Œåº”ç”¨ä»ç„¶èƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†è¿™äº›æƒ…å†µï¼Œå¹¶è¿”å›é€‚å½“çš„ HTTP å“åº”ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<code>finalhandler</code> æ¨¡å—å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<h2>å¤„ç†æœªåŒ¹é…çš„è·¯ç”±</h2>
<p>å½“è¯·æ±‚ç»è¿‡æ‰€æœ‰ä¸­é—´ä»¶å’Œè·¯ç”±åï¼Œ<code>finalhandler</code> ä¼šæ£€æŸ¥æ˜¯å¦å·²ç»å‘é€äº†å“åº”ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™è®¤ä¸ºè¯·æ±‚æœªè¢«å¤„ç†ï¼ˆå³æœªåŒ¹é…åˆ°ä»»ä½•è·¯ç”±ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ª 404 çŠ¶æ€ç ï¼ˆ"Not Found"ï¼‰ã€‚</p>
<h2>å¤„ç†æœªæ•è·çš„é”™è¯¯</h2>
<p>å¦‚æœè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼ˆæ— è®ºæ˜¯åœ¨ä¸­é—´ä»¶è¿˜æ˜¯åœ¨è·¯ç”±å¤„ç†ç¨‹åºä¸­ï¼‰ï¼Œè€Œè¿™äº›é”™è¯¯æ²¡æœ‰è¢«å¤„ç†ï¼Œé‚£ä¹ˆ <code>finalhandler</code> ä¼šæ•è·åˆ°è¿™äº›é”™è¯¯ï¼Œå¹¶æ ¹æ®é”™è¯¯ç±»å‹è¿”å›é€‚å½“çš„ HTTP çŠ¶æ€ç ã€‚å¸¸è§çš„é”™è¯¯å¤„ç†åŒ…æ‹¬è¿”å› 500 çŠ¶æ€ç ï¼ˆ"Internal Server Error"ï¼‰ï¼Œä»¥åŠè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼ˆåœ¨å¼€å‘ç¯å¢ƒä¸­ï¼‰ã€‚</p>
<h2>å¤„ç†ä¸åŒçš„å“åº”ç±»å‹</h2>
<p><code>finalhandler</code> ä¼šæ ¹æ®è¯·æ±‚çš„ Accept å¤´ä¿¡æ¯ï¼Œå†³å®šè¿”å›çº¯æ–‡æœ¬é”™è¯¯ä¿¡æ¯è¿˜æ˜¯è¿”å› HTML æ ¼å¼çš„é”™è¯¯é¡µé¢ã€‚</p>
<h2>æ—¥å¿—è®°å½•</h2>
<p>åœ¨å¤„ç†é”™è¯¯æ—¶ï¼Œfinalhandler å¯ä»¥è®°å½•é”™è¯¯æ—¥å¿—ï¼Œå¸®åŠ©å¼€å‘è€…æ’æŸ¥é—®é¢˜ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œfinalhandler æ˜¯ Express åº”ç”¨çš„æœ€åä¸€é“é˜²çº¿ï¼Œç¡®ä¿æ‰€æœ‰è¯·æ±‚éƒ½èƒ½å¾—åˆ°é€‚å½“çš„å¤„ç†ï¼Œå³ä½¿å‘ç”Ÿäº†æœªé¢„æ–™çš„é”™è¯¯æˆ–æœªåŒ¹é…çš„è·¯ç”±ã€‚</p>
]]></content>
    <category term="node"/>
    <published>2024-08-27T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">express.js</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/node/express/02-express.js.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/node/express/02-express.js.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><code>express.js</code> æ–‡ä»¶å®šä¹‰äº† Express åº”ç”¨çš„ä¸»å…¥å£ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ Express åº”ç”¨å®ä¾‹ï¼Œå¹¶æš´éœ²ç›¸å…³çš„åŸå‹å’Œæ„é€ å‡½æ•°ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚å¹¶ç®¡ç†ä¸­é—´ä»¶ï¼ˆ<code>middleware</code>ï¼‰ã€‚</p>
<h2>Hello World</h2>
<p>å…ˆçœ‹çœ‹å®˜ç½‘çš„ Hello Worldï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p><code>express.js</code> æ–‡ä»¶å®šä¹‰äº† Express åº”ç”¨çš„ä¸»å…¥å£ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ Express åº”ç”¨å®ä¾‹ï¼Œå¹¶æš´éœ²ç›¸å…³çš„åŸå‹å’Œæ„é€ å‡½æ•°ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚å¹¶ç®¡ç†ä¸­é—´ä»¶ï¼ˆ<code>middleware</code>ï¼‰ã€‚</p>
<h2>Hello World</h2>
<p>å…ˆçœ‹çœ‹å®˜ç½‘çš„ Hello Worldï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æ€è€ƒä¸€ä¸‹ï¼Œ<code>express()</code> <code>app.get()</code> å’Œ <code>app.listen()</code> åˆ†åˆ«åšäº†ä»€ä¹ˆï¼Ÿ</p>
<p>æ¥ä¸‹æ¥ä¸€æ­¥æ­¥çœ‹æºç ï¼Œå°±èƒ½çœ‹å‡ºå®ƒä»¬çš„ä½œç”¨ã€‚</p>
<h2>æ¨¡å—ä¾èµ–</h2>
<p>å¼•å…¥äº†ä¸€äº›ä¾èµ–æ¨¡å—ï¼š</p>
<ul>
<li><code>bodyParser</code>: ç”¨äºè§£æè¯·æ±‚ä½“ï¼ˆbodyï¼‰ã€‚</li>
<li><code>EventEmitter</code>: Node.js çš„äº‹ä»¶æ¨¡å—ï¼Œä½¿ <code>app</code> å…·æœ‰äº‹ä»¶å¤„ç†èƒ½åŠ›ã€‚</li>
<li><a href="https://www.npmjs.com/package/merge-descriptors" target="_blank" rel="noopener noreferrer"><code>merge-descriptors</code></a>: ä¸€ä¸ªåˆå¹¶å¯¹è±¡å±æ€§çš„æ¨¡å—ï¼Œç”¨äºå°†å¤šä¸ªå¯¹è±¡çš„å±æ€§æ··å…¥åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</li>
<li><code>proto</code>: ä» <strong></strong> å¼•å…¥çš„æ ¸å¿ƒåº”ç”¨é€»è¾‘ã€‚</li>
<li><code>Route</code> å’Œ <code>Router</code>: å¤„ç†è·¯ç”±çš„æ¨¡å—ã€‚</li>
<li><code>req</code> å’Œ <code>res</code>: æ‰©å±•äº† <code>request</code> å’Œ <code>response</code> å¯¹è±¡ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> EventEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>EventEmitter
<span class="token keyword">var</span> mixin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'merge-descriptors'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> proto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./application'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Route <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/route'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> req <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./request'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./response'</span><span class="token punctuation">)</span>
</code></pre></div><h2><code>createApplication()</code></h2>
<p>æš´éœ²äº†ä¸€ä¸ª <code>createApplication()</code> å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ Express åº”ç”¨ã€‚</p>
<p>è¯¥å‡½æ•°ä¸»è¦åˆ›å»ºäº†ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œè¯¥ <code>app</code> å¯¹è±¡é¦–å…ˆæ··å…¥äº† <code>EventEmitter</code> å’Œ <code>proto</code>ï¼ˆ<strong>application.js</strong> å¯¼å‡ºçš„å¯¹è±¡ï¼‰ï¼Œå¹¶åˆ†åˆ«å°† <code>request</code> å±æ€§å’Œ <code>response</code> å±æ€§åˆå§‹åŒ–æˆäº† <code>req</code>ï¼ˆ<strong>request.js</strong> å¯¼å‡ºçš„å¯¹è±¡ï¼‰å®ä¾‹å’Œ <code>res</code>ï¼ˆ<strong>response.js</strong> å¯¼å‡ºçš„å¯¹è±¡ï¼‰å®ä¾‹ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> createApplication

<span class="token keyword">function</span> <span class="token function">createApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">app</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">mixin</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token function">mixin</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> proto<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token comment">// expose the prototype that will get set on requests</span>
  app<span class="token punctuation">.</span>request <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> app <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// expose the prototype that will get set on responses</span>
  app<span class="token punctuation">.</span>response <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> app <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> app
<span class="token punctuation">}</span>
</code></pre></div><p>å…·ä½“åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>app</code> å‡½æ•°: è¿™æ˜¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„å‡½æ•°ï¼Œå½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œ<code>app.handle(req, res, next)</code> ä¼šè¢«è°ƒç”¨æ¥å¤„ç†è¯·æ±‚ã€‚</li>
<li><code>mixin(app, EventEmitter.prototype, false)</code>: å°† <code>EventEmitter</code> çš„åŸå‹æ–¹æ³•æ··å…¥ <code>app</code>ï¼Œä½¿å¾— <code>app</code> å…·å¤‡äº‹ä»¶å¤„ç†èƒ½åŠ›ï¼Œ<code>false</code> ä»£è¡¨ä¸è¦†ç›–åŸå¯¹è±¡å±æ€§ã€‚</li>
<li><code>mixin(app, proto, false)</code>: å°† <code>application.js</code> ä¸­å®šä¹‰çš„æ ¸å¿ƒåŠŸèƒ½æ··å…¥ <code>app</code>ã€‚</li>
<li><code>app.request</code> å’Œ <code>app.response</code>: åˆ›å»º <code>req</code> å’Œ <code>res</code> çš„åŸå‹å¯¹è±¡ï¼Œå¹¶ç»‘å®š <code>app</code>ã€‚</li>
<li><code>app.init()</code>: åˆå§‹åŒ–åº”ç”¨ã€‚</li>
</ul>
<p>è°ƒç”¨ä¸‹è¿°ä»£ç æ—¶ï¼Œå®é™…ä¸Šå°±ç›¸å½“äºè°ƒç”¨äº† <code>createApplication()</code> å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ <code>app</code> å‡½æ•°ï¼Œå®ƒä½¿ç”¨äº†  å¢å¼ºäº†ä¸€äº›åŠŸèƒ½ï¼ˆ<code>proto</code> ä¸º <code>application.js</code> æš´éœ²çš„å¯¹è±¡ï¼‰ï¼Œè¯¥åŸå‹æä¾›äº†åˆå§‹åŒ– <code>init</code> æ–¹æ³•ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example app listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>listen</code> å‡½æ•°å®é™…åšäº†å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function-variable function">listen</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>server<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„åˆ°ä»–è¿™é‡Œç›´æ¥å°† <code>app</code> ä¼ å…¥äº† <code>http.createServer</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ç­¾åä¸ºï¼š<code>http.createServer([options][, requestListener])</code>ï¼Œ<code>requestListener</code> å‡½æ•°çš„ç­¾åä¸º <code>(request, response) =&gt; void</code>ã€‚è€Œåœ¨ <code>express.js</code> ä¸­ï¼Œ<code>createApplication()</code> ä¸­å°±å·²ç»å£°æ˜ <code>app</code> æ˜¯ <code>requestListener</code> ç±»å‹çš„ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">app</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæˆ‘ä»¬å…¶å®å·²ç»å¼„æ¸…æ¥šäº† Hello World å†…éƒ¨çš„å®ç°ã€‚</p>
<h2>æš´éœ²çš„æ¥å£</h2>
<p>æš´éœ²çš„æ¥å£å¦‚ä¸‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// åŸå‹</span>
exports<span class="token punctuation">.</span>application <span class="token operator">=</span> proto
exports<span class="token punctuation">.</span>request <span class="token operator">=</span> req
exports<span class="token punctuation">.</span>response <span class="token operator">=</span> res

<span class="token comment">// è·¯ç”±æ„é€ å‡½æ•°</span>
exports<span class="token punctuation">.</span>Route <span class="token operator">=</span> Route
exports<span class="token punctuation">.</span>Router <span class="token operator">=</span> Router

<span class="token comment">// ä¸­é—´ä»¶</span>
exports<span class="token punctuation">.</span>json <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span>json
exports<span class="token punctuation">.</span>query <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./middleware/query'</span><span class="token punctuation">)</span>
exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span>raw
exports<span class="token punctuation">.</span>static <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'serve-static'</span><span class="token punctuation">)</span>
exports<span class="token punctuation">.</span>text <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span>text
exports<span class="token punctuation">.</span>urlencoded <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span>urlencoded
</code></pre></div><ul>
<li><code>application</code>, <code>request</code>, <code>response</code>: åˆ†åˆ«æš´éœ²äº†åº”ç”¨çš„åŸå‹å’Œè¯·æ±‚ã€å“åº”å¯¹è±¡çš„åŸå‹ï¼Œä¾›å¤–éƒ¨ä½¿ç”¨æˆ–æ‰©å±•ã€‚</li>
<li><code>Route</code>, <code>Router</code>: æš´éœ²äº†è·¯ç”±ç›¸å…³çš„æ„é€ å‡½æ•°ã€‚</li>
<li><code>json</code>, <code>query</code>, <code>raw</code>, <code>static</code>, <code>text</code>, <code>urlencoded</code>: è¿™äº›æ˜¯å¸¸ç”¨çš„ middlewareï¼Œç”¨äºå¤„ç†è¯·æ±‚çš„å„ç§å†…å®¹ã€‚</li>
</ul>
<h2>ç§»é™¤çš„ä¸­é—´ä»¶</h2>
<p>Express åœ¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­ç§»é™¤äº†è®¸å¤šé»˜è®¤åŒ…å«çš„ä¸­é—´ä»¶ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨å®‰è£…è¿™äº›ä¸­é—´ä»¶ã€‚å¦‚æœç”¨æˆ·å°è¯•è®¿é—®è¿™äº›è¢«ç§»é™¤çš„ä¸­é—´ä»¶ï¼Œä¼šæŠ›å‡ºé”™è¯¯æç¤ºï¼Œå¹¶å¼•å¯¼ç”¨æˆ·å»æ‰‹åŠ¨å®‰è£…ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> removedMiddlewares <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'bodyParser'</span><span class="token punctuation">,</span>
  <span class="token string">'compress'</span><span class="token punctuation">,</span>
  <span class="token string">'cookieSession'</span><span class="token punctuation">,</span>
  <span class="token string">'session'</span><span class="token punctuation">,</span>
  <span class="token string">'logger'</span><span class="token punctuation">,</span>
  <span class="token string">'cookieParser'</span><span class="token punctuation">,</span>
  <span class="token string">'favicon'</span><span class="token punctuation">,</span>
  <span class="token string">'responseTime'</span><span class="token punctuation">,</span>
  <span class="token string">'errorHandler'</span><span class="token punctuation">,</span>
  <span class="token string">'timeout'</span><span class="token punctuation">,</span>
  <span class="token string">'methodOverride'</span><span class="token punctuation">,</span>
  <span class="token string">'vhost'</span><span class="token punctuation">,</span>
  <span class="token string">'csrf'</span><span class="token punctuation">,</span>
  <span class="token string">'directory'</span><span class="token punctuation">,</span>
  <span class="token string">'limit'</span><span class="token punctuation">,</span>
  <span class="token string">'multipart'</span><span class="token punctuation">,</span>
  <span class="token string">'staticCache'</span>
<span class="token punctuation">]</span>

removedMiddlewares<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
        <span class="token string">'Most middleware (like '</span> <span class="token operator">+</span>
          name <span class="token operator">+</span>
          <span class="token string">') is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.'</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2>æ€»ç»“</h2>
<p><strong>express.js</strong> æ–‡ä»¶çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ª Express åº”ç”¨å®ä¾‹ï¼Œå¹¶æä¾›äº†ä¸€äº›å†…ç½®çš„ä¸­é—´ä»¶å’Œè·¯ç”±å·¥å…·ã€‚ç§»é™¤çš„ä¸­é—´ä»¶éƒ¨åˆ†æé†’å¼€å‘è€…éœ€è¦æ‰‹åŠ¨å®‰è£…ä»¥å‰ç‰ˆæœ¬ä¸­å†…ç½®çš„ä¸­é—´ä»¶ã€‚</p>
]]></content>
    <category term="node"/>
    <published>2024-08-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ€»ä½“æ¶æ„</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/node/express/01-overview-architecture.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/node/express/01-overview-architecture.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://github.com/expressjs/express" target="_blank" rel="noopener noreferrer">Express</a> æ˜¯é€‚ç”¨äº Node.js çš„æç®€ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ã€‚å®ƒä¸ºæ„å»ºç½‘ç»œå’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›äº†ä¸€å¥—å¼ºå¤§çš„åŠŸèƒ½ã€‚å°½ç®¡ç®€å•ï¼ŒExpress å´å…·æœ‰å¾ˆå¼ºçš„å¯æ‰©å±•æ€§ï¼Œå…è®¸å¼€å‘äººå‘˜æ·»åŠ ä¸­é—´ä»¶å¹¶è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨ä»£ç è§£è¯»ä¸­ï¼Œè´´ä¸Šçš„æºç æœ‰å¯èƒ½æ”¹ä¸º TS ç±»å‹ï¼Œåœ¨é˜…è¯»æºç æ—¶è¯·æ³¨æ„ã€‚</p>
</div>]]></summary>
    <content type="html"><![CDATA[<p><a href="https://github.com/expressjs/express" target="_blank" rel="noopener noreferrer">Express</a> æ˜¯é€‚ç”¨äº Node.js çš„æç®€ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ã€‚å®ƒä¸ºæ„å»ºç½‘ç»œå’Œç§»åŠ¨åº”ç”¨ç¨‹åºæä¾›äº†ä¸€å¥—å¼ºå¤§çš„åŠŸèƒ½ã€‚å°½ç®¡ç®€å•ï¼ŒExpress å´å…·æœ‰å¾ˆå¼ºçš„å¯æ‰©å±•æ€§ï¼Œå…è®¸å¼€å‘äººå‘˜æ·»åŠ ä¸­é—´ä»¶å¹¶è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨ä»£ç è§£è¯»ä¸­ï¼Œè´´ä¸Šçš„æºç æœ‰å¯èƒ½æ”¹ä¸º TS ç±»å‹ï¼Œåœ¨é˜…è¯»æºç æ—¶è¯·æ³¨æ„ã€‚</p>
</div>
<h2>æ ¸å¿ƒç»„ä»¶</h2>
<p>åŒ…æ‹¬ <code>Application</code>ã€<code>Request</code>ã€<code>Response</code> å’Œ <code>Router</code>ï¼š</p>
<ul>
<li><code>Application</code>ï¼šåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œç”± <code>express()</code> åˆ›å»ºï¼Œå®ƒä»£è¡¨ä¸€ä¸ª Express åº”ç”¨ç¨‹åºï¼Œç”¨äºé€šè¿‡è®¾ç½®ä¸­é—´ä»¶ã€è·¯ç”±å’Œé”™è¯¯å¤„ç†ç¨‹åºæ¥é…ç½®åº”ç”¨ç¨‹åºã€‚</li>
<li><code>Request</code>ï¼š HTTP è¯·æ±‚å®ä¾‹ï¼Œè¯¥å¯¹è±¡å°è£…äº†ä¼ å…¥è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚ <code>header</code>ã€<code>query parameters</code>ã€<code>URL</code>ã€<code>body</code> ç­‰ã€‚</li>
<li><code>Response</code>ï¼šHTTP å“åº”å®ä¾‹ï¼Œè¯¥å¯¹è±¡ç”¨äºå‘å®¢æˆ·ç«¯å‘å›æ•°æ®ã€è®¾ç½®å“åº” <code>header</code>ã€<code>cookie</code>ã€çŠ¶æ€ä»£ç ç­‰ã€‚</li>
<li><code>Router</code>: è·¯ç”±å™¨å¯¹è±¡ï¼Œç”± <code>express.Router()</code> åˆ›å»ºï¼Œä¸€ä¸ªå°å‹ <code>Application</code>ï¼Œå¯æ‹¥æœ‰è‡ªå·±çš„è·¯ç”±å’Œä¸­é—´ä»¶ã€‚å®ƒæœ‰åŠ©äºå°†åº”ç”¨ç»„ç»‡æˆæ›´å°çš„ã€æ¨¡å—åŒ–çš„éƒ¨åˆ†ã€‚</li>
</ul>
<h2>Middleware</h2>
<p>å¯ä»¥è®¿é—®è¯·æ±‚ï¼ˆ<code>req</code>ï¼‰ã€å“åº”ï¼ˆ<code>res</code>ï¼‰ä»¥åŠåº”ç”¨ç¨‹åºè¯·æ±‚-å“åº”å¾ªç¯ä¸­ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°çš„å‡½æ•°ã€‚ä¸­é—´ä»¶å¯ä»¥æ‰§è¡Œä»»ä½•ä»£ç ã€ä¿®æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡ã€ç»“æŸè¯·æ±‚-å“åº”å¾ªç¯æˆ–è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</p>
<p>åœ¨ Express ä¸­ï¼Œæœ‰ä¸åŒç±»å‹çš„ä¸­é—´ä»¶ï¼š</p>
<ul>
<li>åº”ç”¨ç¨‹åºçº§ä¸­é—´ä»¶ï¼šä¸ <code>Express</code> åº”ç”¨ç¨‹åºå®ä¾‹ç»‘å®šã€‚</li>
<li>è·¯ç”±å™¨çº§ä¸­é—´ä»¶ï¼šä¸ <code>express.Router()</code> å®ä¾‹ç»‘å®šã€‚</li>
<li>é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼šèƒ½æ•æ‰é”™è¯¯å¹¶è¿›è¡Œå¤„ç†çš„ç‰¹æ®Šä¸­é—´ä»¶ã€‚</li>
</ul>
<p>ä¸­é—´ä»¶æŒ‰ç…§åº”ç”¨ç¨‹åºä¸­å®šä¹‰çš„é¡ºåºæ‰§è¡Œã€‚ å¦‚æœä¸­é—´ä»¶å‡½æ•°æ²¡æœ‰ç»“æŸè¯·æ±‚-å“åº”å¾ªç¯ï¼ˆè°ƒç”¨ <code>res.end()</code>ï¼‰ï¼Œåˆ™å¿…é¡»è°ƒç”¨ <code>next()</code> å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Most middleware (like ' + name + ') is no longer bundled with Express and must be installed separately. Please see <a href="https://github.com/senchalabs/connect#middleware" target="_blank" rel="noopener noreferrer">https://github.com/senchalabs/connect#middleware</a>.</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> removedMiddlewares <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'bodyParser'</span><span class="token punctuation">,</span>
  <span class="token string">'compress'</span><span class="token punctuation">,</span>
  <span class="token string">'cookieSession'</span><span class="token punctuation">,</span>
  <span class="token string">'session'</span><span class="token punctuation">,</span>
  <span class="token string">'logger'</span><span class="token punctuation">,</span>
  <span class="token string">'cookieParser'</span><span class="token punctuation">,</span>
  <span class="token string">'favicon'</span><span class="token punctuation">,</span>
  <span class="token string">'responseTime'</span><span class="token punctuation">,</span>
  <span class="token string">'errorHandler'</span><span class="token punctuation">,</span>
  <span class="token string">'timeout'</span><span class="token punctuation">,</span>
  <span class="token string">'methodOverride'</span><span class="token punctuation">,</span>
  <span class="token string">'vhost'</span><span class="token punctuation">,</span>
  <span class="token string">'csrf'</span><span class="token punctuation">,</span>
  <span class="token string">'directory'</span><span class="token punctuation">,</span>
  <span class="token string">'limit'</span><span class="token punctuation">,</span>
  <span class="token string">'multipart'</span><span class="token punctuation">,</span>
  <span class="token string">'staticCache'</span>
<span class="token punctuation">]</span>
</code></pre></div></div>
<h2>Routing</h2>
<p>è·¯ç”±å®šä¹‰äº†åº”ç”¨ç¨‹åºå“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„ç«¯ç‚¹ï¼ˆURIï¼‰ã€‚æ¯ä¸ªè·¯ç”±å¯ä»¥æœ‰å¤šä¸ªå¤„ç†ç¨‹åºï¼Œå¹¶æ”¯æŒæ‰€æœ‰ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰ã€‚</p>
<p>æ”¯æŒè‡ªåŠ¨è§£æ <code>query parameters</code> å’Œ <code>URL</code> ä¸­çš„ <code>:param</code> å€¼ã€‚</p>
<p>ç®€å•ç†è§£ä¸ºåˆ†å‘è¯·æ±‚å¹¶è¿›è¡Œç›¸åº”å¤„ç†ã€‚</p>
<h2>lib æºç ç»“æ„</h2>
<p>Express@4.21.0 ä¸­ï¼Œ<code>lib</code> ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>lib/
â”œâ”€â”€ application.js
â”œâ”€â”€ express.js
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ init.js
â”‚   â”œâ”€â”€ query.js
â”œâ”€â”€ request.js
â”œâ”€â”€ response.js
â”œâ”€â”€ router/
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ layer.js
â”‚   â”œâ”€â”€ route.js
â”œâ”€â”€ utils.js
â””â”€â”€ view.js
</code></pre></div><ul>
<li><code>express.js</code>: ä¸»å…¥å£æ–‡ä»¶ï¼Œå¯¼å‡ºäº†æ ¸å¿ƒçš„ <code>express()</code> å‡½æ•°ã€‚</li>
<li><code>application.js</code>: å®šä¹‰äº† Express åº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¦‚ <code>app.use()</code>ã€<code>app.get()</code> ç­‰æ–¹æ³•ã€‚</li>
<li><code>middleware/</code>: åŒ…å« Express å†…ç½®çš„ <code>middleware</code>ï¼Œä¾‹å¦‚ <code>init.js</code> ç”¨äºåˆå§‹åŒ–ä¸­é—´ä»¶ï¼Œ<code>query.js</code> ç”¨äºè§£ææŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</li>
<li><code>request.js</code>: å®šä¹‰äº† <code>req</code> å¯¹è±¡çš„æ‰©å±•å’Œè¾…åŠ©æ–¹æ³•ã€‚</li>
<li><code>response.js</code>: å®šä¹‰äº† <code>res</code> å¯¹è±¡çš„æ‰©å±•å’Œè¾…åŠ©æ–¹æ³•ã€‚</li>
<li><code>router/</code>: åŒ…å«ä¸è·¯ç”±ç›¸å…³çš„ä»£ç ï¼Œå…¶ä¸­ <code>index.js</code> æ˜¯è·¯ç”±å™¨çš„ä¸»æ¨¡å—ï¼Œ<code>layer.js</code> å’Œ <code>route.js</code> ç”¨äºå¤„ç†è·¯ç”±å±‚æ¬¡å’Œè·¯å¾„åŒ¹é…ã€‚</li>
<li><code>utils.js</code>: ä¸€äº›å·¥å…·å‡½æ•°ï¼Œç”¨äºç®€åŒ–å†…éƒ¨å®ç°ã€‚</li>
<li><code>view.js</code>: å¤„ç†è§†å›¾æ¸²æŸ“ç›¸å…³çš„é€»è¾‘ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ä¼šå¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œè¯¦ç»†åˆ†æã€‚</p>
]]></content>
    <category term="node"/>
    <published>2024-08-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">monaco-editor/react</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/018-monaco-editor-react.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/018-monaco-editor-react.html"/>
    <updated>2024-12-03T06:25:23.000Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://github.com/microsoft/monaco-editor" target="_blank" rel="noopener noreferrer">Monaco Editor</a> æ˜¯ç”±å¾®è½¯å¼€å‘çš„å¼€æºä»£ç ç¼–è¾‘å™¨ï¼Œä½¿ç”¨äº VS Codeã€‚ç„¶è€Œä»–æœ¬èº«æ˜¯ç”¨ JavaScript/TypeScript ç¼–å†™çš„ä¸€ä¸ªç‹¬ç«‹åº“ï¼Œæä¾›äº†ä¸°å¯Œçš„ API æ¥å®ç°ä»£ç ç¼–è¾‘å™¨çš„åŠŸèƒ½ã€‚å› æ­¤æ— æ³•ç›´æ¥åœ¨ React ä¸­ä½¿ç”¨ã€‚</p>
<p><a href="https://github.com/suren-atoyan/monaco-react" target="_blank" rel="noopener noreferrer">@monaco-editor/react</a> è¿™ä¸ªåº“æ˜¯å¯¹ monaco-editor çš„ React å°è£…ï¼Œä½¿å¾—ä½ åœ¨ React é¡¹ç›®ä¸­æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ Monaco Editorã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p><a href="https://github.com/microsoft/monaco-editor" target="_blank" rel="noopener noreferrer">Monaco Editor</a> æ˜¯ç”±å¾®è½¯å¼€å‘çš„å¼€æºä»£ç ç¼–è¾‘å™¨ï¼Œä½¿ç”¨äº VS Codeã€‚ç„¶è€Œä»–æœ¬èº«æ˜¯ç”¨ JavaScript/TypeScript ç¼–å†™çš„ä¸€ä¸ªç‹¬ç«‹åº“ï¼Œæä¾›äº†ä¸°å¯Œçš„ API æ¥å®ç°ä»£ç ç¼–è¾‘å™¨çš„åŠŸèƒ½ã€‚å› æ­¤æ— æ³•ç›´æ¥åœ¨ React ä¸­ä½¿ç”¨ã€‚</p>
<p><a href="https://github.com/suren-atoyan/monaco-react" target="_blank" rel="noopener noreferrer">@monaco-editor/react</a> è¿™ä¸ªåº“æ˜¯å¯¹ monaco-editor çš„ React å°è£…ï¼Œä½¿å¾—ä½ åœ¨ React é¡¹ç›®ä¸­æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ Monaco Editorã€‚</p>
<h2>å·¥ä½œåŸç†</h2>
<p>Monaco Editor (<code>monaco-editor</code>)ï¼šæä¾›äº†ç¼–è¾‘å™¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨ã€è¯­æ³•æ£€æŸ¥ç­‰ã€‚å®ƒæ˜¯ç‹¬ç«‹äºæ¡†æ¶çš„ï¼Œå¯ä»¥åœ¨ä»»ä½• JavaScript ç¯å¢ƒä¸­ä½¿ç”¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå…¨å±€çš„ monaco å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œä½ å¯ä»¥è°ƒç”¨å„ç§ API æ¥é…ç½®å’Œæ“ä½œç¼–è¾‘å™¨ã€‚</p>
<p>React å°è£… (<code>@monaco-editor/react</code>)ï¼š ä¸ºäº†æ›´å¥½åœ°åœ¨ React ç¯å¢ƒä¸­ä½¿ç”¨ Monaco Editorï¼Œ<code>@monaco-editor/react</code> é€šè¿‡å°è£…ç»„ä»¶çš„æ–¹å¼ï¼Œå°† <code>monaco-editor</code> çš„ API æš´éœ²ç»™ React ç”¨æˆ·ã€‚è¿™ä¸ªåº“ç®¡ç†äº†ç¼–è¾‘å™¨çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ï¼Œä½¿å¾— Monaco Editor èƒ½å¤Ÿå¾ˆå¥½åœ°ä¸ React çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ç®¡ç†ç³»ç»Ÿé…åˆä½¿ç”¨ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œ<code>@monaco-editor/react</code> ä¸»è¦åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<ul>
<li>ç»„ä»¶åŒ–å°è£…ï¼šæä¾›äº†ä¸€ä¸ª <code>Editor</code> ç»„ä»¶ï¼Œä¾› React å¼€å‘è€…ä½¿ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡ JSX çš„æ–¹å¼ç›´æ¥åœ¨ React ç»„ä»¶ä¸­åµŒå…¥ Monaco Editorã€‚</li>
<li>API æ¥å£ç®€åŒ–ï¼šæä¾›äº†ä¸€äº›ç®€å•çš„ props æ¥é…ç½®ç¼–è¾‘å™¨ï¼Œè€Œä¸éœ€è¦ç›´æ¥è°ƒç”¨ <code>monaco</code> å¯¹è±¡ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå¤„ç†äº†ç¼–è¾‘å™¨çš„åˆ›å»ºã€æ›´æ–°å’Œé”€æ¯ï¼Œä½¿å¾—å®ƒä¸ React çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆå¦‚ <code>componentDidMount</code>ã€<code>componentWillUnmount</code>ï¼‰é…åˆè‰¯å¥½ã€‚</li>
</ul>
<h2>ç¤ºä¾‹</h2>
<p>åœ¨ React ä¸­ä½¿ç”¨ <code>@monaco-editor/react</code> æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç† monaco å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œåªéœ€è¦é€šè¿‡ <code>Editor</code> ç»„ä»¶æ¥è®¾ç½®è¯­è¨€ã€ä¸»é¢˜ã€é»˜è®¤ä»£ç ç­‰é…ç½®é¡¹ã€‚æ¯”å¦‚ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">'@monaco-editor/react'</span>

<span class="token keyword">function</span> <span class="token function">MyEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Editor</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90vh<span class="token punctuation">"</span></span> <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span> <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vs-dark<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>// Start coding here<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyEditor
</code></pre></div><p>å¦‚æœä½ éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„å®šåˆ¶åŒ–æ“ä½œï¼Œæ¯”å¦‚åŠ è½½è‡ªå®šä¹‰è¯­è¨€æˆ–ä¸»é¢˜ï¼Œ<code>@monaco-editor/react</code> ä¹Ÿæä¾›äº† <code>beforeMount</code> å’Œ <code>onMount</code> å›è°ƒå‡½æ•°ï¼Œè®©ä½ å¯ä»¥ç›´æ¥è®¿é—® <code>monaco</code> å¯¹è±¡æ¥è¿›è¡Œé«˜çº§é…ç½®ï¼š</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Editor</span></span>
  <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90vh<span class="token punctuation">"</span></span>
  <span class="token attr-name">language</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span>
  <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vs-dark<span class="token punctuation">"</span></span>
  <span class="token attr-name">beforeMount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>monaco<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œå¯ä»¥å¯¹ monaco è¿›è¡Œé…ç½®ï¼Œä¾‹å¦‚å®šä¹‰è‡ªå®šä¹‰çš„è¯­è¨€æˆ–ä¸»é¢˜</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onMount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>editor<span class="token punctuation">,</span> monaco<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œå¯ä»¥æ“ä½œ editor å’Œ monaco å¯¹è±¡ï¼Œä¾‹å¦‚æ³¨å†Œå¿«æ·é”®ç­‰</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2>loader-config</h2>
<p><code>@monaco-editor/react</code> çš„ loader ä¼šé»˜è®¤ä» cdn ä¸­åŠ è½½ï¼Œè¿™ä¼šå½±å“ä¸­å›½ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹ loader çš„é»˜è®¤é…ç½®ã€‚</p>
<h3>ä½¿ç”¨ monaco-editor åŒ…</h3>
<p>å¦‚æœé¡¹ç›®ä½¿ç”¨ <code>webpack</code> è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä»¥é€šè¿‡ <a href="https://www.npmjs.com/package/monaco-editor-webpack-plugin" target="_blank" rel="noopener noreferrer">monaco-editor-webpack-plugin</a> æ¥è¿›è¡Œé…ç½®ã€‚è¯¥æ’ä»¶è‡ªåŠ¨å¤„ç†ç¼–è¾‘å™¨äº†ç›¸å…³çš„æ–‡ä»¶ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> monaco <span class="token keyword">from</span> <span class="token string">'monaco-editor'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@monaco-editor/react'</span>

loader<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> monaco <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¯¹äºå…¶ä»–æ‰“åŒ…å·¥å…·ï¼Œå®˜æ–¹æä¾›äº† Vite ç¤ºä¾‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> loader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@monaco-editor/react'</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> monaco <span class="token keyword">from</span> <span class="token string">'monaco-editor'</span>
<span class="token keyword">import</span> editorWorker <span class="token keyword">from</span> <span class="token string">'monaco-editor/esm/vs/editor/editor.worker?worker'</span>
<span class="token keyword">import</span> jsonWorker <span class="token keyword">from</span> <span class="token string">'monaco-editor/esm/vs/language/json/json.worker?worker'</span>
<span class="token keyword">import</span> cssWorker <span class="token keyword">from</span> <span class="token string">'monaco-editor/esm/vs/language/css/css.worker?worker'</span>
<span class="token keyword">import</span> htmlWorker <span class="token keyword">from</span> <span class="token string">'monaco-editor/esm/vs/language/html/html.worker?worker'</span>
<span class="token keyword">import</span> tsWorker <span class="token keyword">from</span> <span class="token string">'monaco-editor/esm/vs/language/typescript/ts.worker?worker'</span>

self<span class="token punctuation">.</span>MonacoEnvironment <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">getWorker</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>label <span class="token operator">===</span> <span class="token string">'json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">jsonWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>label <span class="token operator">===</span> <span class="token string">'css'</span> <span class="token operator">||</span> label <span class="token operator">===</span> <span class="token string">'scss'</span> <span class="token operator">||</span> label <span class="token operator">===</span> <span class="token string">'less'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">cssWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>label <span class="token operator">===</span> <span class="token string">'html'</span> <span class="token operator">||</span> label <span class="token operator">===</span> <span class="token string">'handlebars'</span> <span class="token operator">||</span> label <span class="token operator">===</span> <span class="token string">'razor'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">htmlWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>label <span class="token operator">===</span> <span class="token string">'typescript'</span> <span class="token operator">||</span> label <span class="token operator">===</span> <span class="token string">'javascript'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">tsWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">editorWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

loader<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> monaco <span class="token punctuation">}</span><span class="token punctuation">)</span>

loader<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre></div><p>æˆ‘ä½¿ç”¨äº† Rspack æ¥æ‰“åŒ…ï¼Œå®˜æ–¹è¯´æ˜å¯¹ <code>monaco-editor-webpack-plugin</code> æ’ä»¶è¿›è¡Œäº†å…¼å®¹ï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯ç”±äºæˆ‘ Rspack ç‰ˆæœ¬é—®é¢˜ï¼Œå¯¼è‡´æŠ¥é”™ï¼Œå› æ­¤å®éªŒäº†ä¸€ç§æ›´åŠ ç¨³å®šçš„æ–¹å¼å¦‚ä¸‹ã€‚</p>
<p>Rspack é…ç½®ä¸ Vite ä¸€è‡´ï¼Œè¯¦ç»†è§ <a href="https://github.com/rspack-contrib/rspack-examples/blob/main/rspack/monaco-editor-ts-react/src/components/Editor.tsx" target="_blank" rel="noopener noreferrer">Rspack demo monaco-editor-react</a>ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>publicPath</code> éœ€è¦è®¾ç½®ä¸º <code>'auto'</code>ï¼Œå¦åˆ™ web worker å†…å¼•ç”¨çš„æ–‡ä»¶ä¼šæ·»åŠ é‡å¤è·¯å¾„ã€‚</p>
<p>See <a href="https://rspack.dev/config/output#outputpublicpath" target="_blank" rel="noopener noreferrer">Rspack output.publicPath</a>ã€‚</p>
</div>
<h3><s>æœ¬åœ°è·¯å¾„</s></h3>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è¯¥æ–¹å¼ä¼šåœ¨ public ä¸­å¼•å…¥å¤§é‡æ–‡ä»¶ï¼Œä¸å¤ªä¼˜é›…ã€‚</p>
</div>
<p><code>monaco-editor</code> ä¸­æä¾›äº†ä¸€äº›æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œè·¯å¾„æ˜¯ <code>monaco-editor/min/vs</code>ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¸‹è½½ npm åŒ…å¹¶å°†æ–‡ä»¶ç§»åŠ¨è‡³ <code>public</code> æ–‡ä»¶å¤¹ï¼Œå¹¶è‡ªå®šä¹‰è·¯å¾„ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mv</span> node_modules/monaco-editor/min/vs public
</code></pre></div><div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> loader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@monaco-editor/react'</span>

<span class="token comment">// you can change the source of the monaco files</span>
loader<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">vs</span><span class="token operator">:</span> <span class="token string">'./vs'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// you can configure the locales</span>
loader<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">'vs/nls'</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">availableLanguages</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'*'</span><span class="token operator">:</span> <span class="token string">'de'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// or</span>
loader<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">vs</span><span class="token operator">:</span> <span class="token string">'./vs'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">'vs/nls'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">availableLanguages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'*'</span><span class="token operator">:</span> <span class="token string">'de'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div>]]></content>
    <category term="practice"/>
    <published>2024-08-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åœºæ™¯å›¾åƒ</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/04-scene-graph.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/04-scene-graph.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>æ¯ä¸€å¸§ï¼ŒPixiJS éƒ½ä¼šæ›´æ–°å¹¶æ¸²æŸ“åœºæ™¯å›¾ã€‚è®©æˆ‘ä»¬æ¥è°ˆè°ˆåœºæ™¯å›¾ä¸­æœ‰å“ªäº›å†…å®¹ï¼Œä»¥åŠå®ƒå¦‚ä½•å½±å“é¡¹ç›®å¼€å‘ã€‚</p>
<h2>åœºæ™¯å›¾æ˜¯ä¸€æ£µæ ‘</h2>
<p>åœºæ™¯å›¾çš„æ ¹èŠ‚ç‚¹æ˜¯ç”±åº”ç”¨ç¨‹åºç»´æŠ¤çš„å®¹å™¨ï¼Œç”¨ <code>app.stage</code> å¼•ç”¨ã€‚å°† sprite æˆ–å…¶ä»–å¯æ¸²æŸ“å¯¹è±¡ä½œä¸ºå­å¯¹è±¡æ·»åŠ åˆ° stage æ—¶ï¼Œå®ƒå°±ä¼šè¢«æ·»åŠ åˆ°åœºæ™¯å›¾ä¸­ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“å’Œäº¤äº’ã€‚</p>
<p>PixiJS å®¹å™¨ä¹Ÿå¯ä»¥æœ‰å­å¯¹è±¡ï¼Œå› æ­¤å½“ä½ æ„å»ºæ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œæœ€ç»ˆä¼šå½¢æˆä¸€æ£µçˆ¶å­å…³ç³»æ ‘ï¼Œstage æ˜¯æ•´ä¸ªåœºæ™¯æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚Chrome æµè§ˆå™¨çš„ <a href="https://chromewebstore.google.com/detail/pixijs-devtools/aamddddknhcagpehecnhphigffljadon" target="_blank" rel="noopener noreferrer">Pixi.js devtools</a> æ’ä»¶æ˜¯ä¸€ä¸ªæ¢ç´¢é¡¹ç›®çš„æœ‰ç”¨å·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨é¡¹ç›®è¿è¡Œæ—¶å®æ—¶æŸ¥çœ‹å’Œæ“ä½œåœºæ™¯å›¾ï¼ï¼‰ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>æ¯ä¸€å¸§ï¼ŒPixiJS éƒ½ä¼šæ›´æ–°å¹¶æ¸²æŸ“åœºæ™¯å›¾ã€‚è®©æˆ‘ä»¬æ¥è°ˆè°ˆåœºæ™¯å›¾ä¸­æœ‰å“ªäº›å†…å®¹ï¼Œä»¥åŠå®ƒå¦‚ä½•å½±å“é¡¹ç›®å¼€å‘ã€‚</p>
<h2>åœºæ™¯å›¾æ˜¯ä¸€æ£µæ ‘</h2>
<p>åœºæ™¯å›¾çš„æ ¹èŠ‚ç‚¹æ˜¯ç”±åº”ç”¨ç¨‹åºç»´æŠ¤çš„å®¹å™¨ï¼Œç”¨ <code>app.stage</code> å¼•ç”¨ã€‚å°† sprite æˆ–å…¶ä»–å¯æ¸²æŸ“å¯¹è±¡ä½œä¸ºå­å¯¹è±¡æ·»åŠ åˆ° stage æ—¶ï¼Œå®ƒå°±ä¼šè¢«æ·»åŠ åˆ°åœºæ™¯å›¾ä¸­ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“å’Œäº¤äº’ã€‚</p>
<p>PixiJS å®¹å™¨ä¹Ÿå¯ä»¥æœ‰å­å¯¹è±¡ï¼Œå› æ­¤å½“ä½ æ„å»ºæ›´å¤æ‚çš„åœºæ™¯æ—¶ï¼Œæœ€ç»ˆä¼šå½¢æˆä¸€æ£µçˆ¶å­å…³ç³»æ ‘ï¼Œstage æ˜¯æ•´ä¸ªåœºæ™¯æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚Chrome æµè§ˆå™¨çš„ <a href="https://chromewebstore.google.com/detail/pixijs-devtools/aamddddknhcagpehecnhphigffljadon" target="_blank" rel="noopener noreferrer">Pixi.js devtools</a> æ’ä»¶æ˜¯ä¸€ä¸ªæ¢ç´¢é¡¹ç›®çš„æœ‰ç”¨å·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨é¡¹ç›®è¿è¡Œæ—¶å®æ—¶æŸ¥çœ‹å’Œæ“ä½œåœºæ™¯å›¾ï¼ï¼‰ã€‚</p>
<h2>Parents and Children</h2>
<p>çˆ¶èŠ‚ç‚¹ç§»åŠ¨æ—¶ï¼Œå…¶å­èŠ‚ç‚¹ä¹Ÿä¼šç§»åŠ¨ã€‚æ—‹è½¬çˆ¶èŠ‚ç‚¹æ—¶ï¼Œå…¶å­èŠ‚ç‚¹ä¹Ÿä¼šæ—‹è½¬ã€‚éšè—çˆ¶å¯¹è±¡ï¼Œå­å¯¹è±¡ä¹Ÿä¼šè¢«éšè—ã€‚å¦‚æœä¸€ä¸ªæ¸¸æˆå¯¹è±¡ç”±å¤šä¸ªç²¾çµç»„æˆï¼Œå¯ä»¥å°†å®ƒä»¬æ”¶é›†åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œå°†å®ƒä»¬è§†ä¸ºä¸–ç•Œä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“ç§»åŠ¨å’Œæ—‹è½¬ã€‚</p>
<p>åœ¨æ¯ä¸€å¸§ä¸­ï¼ŒPixiJS éƒ½ä¼šè¿è¡Œåœºæ™¯å›¾ï¼Œä»æ ¹å¼€å§‹å‘ä¸‹ç©¿è¿‡æ‰€æœ‰å­å¯¹è±¡ï¼Œç›´åˆ°å¶å­ï¼Œä»¥è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„æœ€ç»ˆä½ç½®ã€æ—‹è½¬ã€å¯è§æ€§ã€é€æ˜åº¦ç­‰ã€‚</p>
<p>å¦‚æœçˆ¶å¯¹è±¡çš„ alpha è®¾ç½®ä¸º 0.5ï¼ˆä½¿å…¶é€æ˜ 50% ï¼‰ï¼Œé‚£ä¹ˆå®ƒçš„æ‰€æœ‰å­å¯¹è±¡ä¹Ÿå°†ä» 50% å¼€å§‹é€æ˜ã€‚å¦‚æœå°†ä¸€ä¸ªå­å¯¹è±¡çš„ alpha è®¾ç½®ä¸º 0.5ï¼Œå®ƒå°±ä¸ä¼šæ˜¯ 50% é€æ˜ï¼Œè€Œæ˜¯ 0.5 x 0.5 = 0.25 alphaï¼Œå³ 75% é€æ˜ã€‚åŒæ ·ï¼Œå¯¹è±¡çš„ä½ç½®æ˜¯ç›¸å¯¹äºçˆ¶å¯¹è±¡è€Œè¨€çš„ï¼Œå› æ­¤å¦‚æœçˆ¶å¯¹è±¡çš„ x ä½ç½®è®¾ç½®ä¸º 50 åƒç´ ï¼Œè€Œå­å¯¹è±¡çš„ x ä½ç½®è®¾ç½®ä¸º 100 åƒç´ ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨å±å¹•åç§» 150 åƒç´ å¤„ç»˜åˆ¶ï¼Œå³ 50 + 100ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸‰ä¸ªç²¾çµï¼Œæ¯ä¸ªéƒ½æ˜¯ä¸Šä¸€ä¸ªç²¾çµçš„å­ç²¾çµï¼Œå¹¶å¯¹å®ƒä»¬çš„ä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾å’Œ alpha è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚å°½ç®¡æ¯ä¸ªç²¾çµçš„å±æ€§éƒ½è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼Œä½†çˆ¶å­é“¾ä¼šæ”¾å¤§æ¯ä¸ªå˜åŒ–ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// Create the application helper and add its render target to the page</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a container to center our sprite stack on the page</span>
<span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">x</span><span class="token operator">:</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">y</span><span class="token operator">:</span>app<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// load the texture</span>
<span class="token keyword">await</span> Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'assets/images/sample.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create the 3 sprites, each a child of the last</span>
<span class="token keyword">const</span> sprites <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> parent <span class="token operator">=</span> container<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> sprite <span class="token operator">=</span> Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'assets/images/sample.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sprite<span class="token punctuation">.</span>anchor<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  wrapper<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sprite<span class="token punctuation">)</span><span class="token punctuation">;</span>
  parent<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
  sprites<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
  parent <span class="token operator">=</span> wrapper<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Set all sprite's properties to the same value, animated over time</span>
<span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">delta</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  elapsed <span class="token operator">+=</span> delta<span class="token punctuation">.</span>deltaTime <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> amount <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>elapsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">+</span> <span class="token number">0.25</span> <span class="token operator">*</span> amount<span class="token punctuation">;</span>
  <span class="token keyword">const</span> alpha <span class="token operator">=</span> <span class="token number">0.75</span> <span class="token operator">+</span> <span class="token number">0.25</span> <span class="token operator">*</span> amount<span class="token punctuation">;</span>
  <span class="token keyword">const</span> angle <span class="token operator">=</span> <span class="token number">40</span> <span class="token operator">*</span> amount<span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">75</span> <span class="token operator">*</span> amount<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sprites<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> sprite <span class="token operator">=</span> sprites<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    sprite<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sprite<span class="token punctuation">.</span>alpha <span class="token operator">=</span> alpha<span class="token punctuation">;</span>
    sprite<span class="token punctuation">.</span>angle <span class="token operator">=</span> angle<span class="token punctuation">;</span>
    sprite<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœºæ™¯å›¾ä¸­ä»»ä½•ç»™å®šèŠ‚ç‚¹çš„ç´¯è®¡å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾å’Œå€¾æ–œå€¼éƒ½å­˜å‚¨åœ¨å¯¹è±¡çš„ <code>worldTransform</code> å±æ€§ä¸­ã€‚ åŒæ ·ï¼Œç´¯ç§¯çš„ alpha å€¼ä¹Ÿå­˜å‚¨åœ¨ <code>worldAlpha</code> å±æ€§ä¸­ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/Aug-08-2024 11-58-35.gif" alt="sample" tabindex="0" loading="lazy"><figcaption>sample</figcaption></figure>
<h2>æ¸²æŸ“é¡ºåº</h2>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ ‘éœ€è¦æ¸²æŸ“ï¼Œé‚£ä¹ˆæ¸²æŸ“é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>PixiJS ä¼šä»æ ‘æ ¹å¼€å§‹å‘ä¸‹æ¸²æŸ“ã€‚åœ¨æ¯ä¸€çº§ï¼Œå…ˆæ¸²æŸ“å½“å‰å¯¹è±¡ï¼Œç„¶åæŒ‰æ’å…¥é¡ºåºæ¸²æŸ“æ¯ä¸ªå­å¯¹è±¡ã€‚è¯·çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼šä¸¤ä¸ªçˆ¶å¯¹è±¡ A å’Œ Dï¼Œä»¥åŠ A ä¸‹çš„ä¸¤ä¸ªå­å¯¹è±¡ B å’Œ Cï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// Create the application helper and add its render target to the page</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span>

<span class="token comment">// Label showing scene graph hierarchy</span>
<span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Scene Graph:\n\napp.stage\n  â”— A\n     â”— B\n     â”— C\n  â”— D'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'#ffffff'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>

<span class="token comment">// Helper function to create a block of color with a letter</span>
<span class="token keyword">const</span> letters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">function</span> <span class="token function">addLetter</span><span class="token punctuation">(</span><span class="token parameter">letter<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> color<span class="token punctuation">,</span> pos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> bg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span>Texture<span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
  bg<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span>
  bg<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span>
  bg<span class="token punctuation">.</span>tint <span class="token operator">=</span> color

  <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">text</span><span class="token operator">:</span> letter<span class="token punctuation">,</span>
    <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'#ffffff'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  text<span class="token punctuation">.</span>anchor<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
  text<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span>

  <span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  container<span class="token punctuation">.</span>position <span class="token operator">=</span> pos
  container<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span>
  container<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bg<span class="token punctuation">,</span> text<span class="token punctuation">)</span>
  parent<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>

  letters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>
  <span class="token keyword">return</span> container
<span class="token punctuation">}</span>

<span class="token comment">// Define 4 letters</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">addLetter</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>stage<span class="token punctuation">,</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">addLetter</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token number">0x00ff00</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">addLetter</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token number">0x0000ff</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">40</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token function">addLetter</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>stage<span class="token punctuation">,</span> <span class="token number">0xff8800</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Display them over time, in order</span>
<span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token number">0.0</span>
app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ticker</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  elapsed <span class="token operator">+=</span> ticker<span class="token punctuation">.</span>deltaTime <span class="token operator">/</span> <span class="token number">60.0</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>elapsed <span class="token operator">&gt;=</span> letters<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elapsed <span class="token operator">=</span> <span class="token number">0.0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> letters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    letters<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> elapsed <span class="token operator">&gt;=</span> i
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/Aug-08-2024 16-23-14.gif" alt="render order" tabindex="0" loading="lazy"><figcaption>render order</figcaption></figure>
<p>å¦‚æœæƒ³å¯¹å­å¯¹è±¡é‡æ–°æ’åºï¼Œå¯ä»¥ä½¿ç”¨ <code>setChildIndex()</code>ã€‚ è¦åœ¨çˆ¶å¯¹è±¡åˆ—è¡¨çš„ç»™å®šä½ç½®æ·»åŠ å­å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>addChildAt()</code>ã€‚ æœ€åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>sortableChildren</code> é€‰é¡¹ï¼Œç»“åˆè®¾ç½®æ¯ä¸ªå­å¯¹è±¡çš„ <code>zIndex</code> å±æ€§ï¼Œå¯¹å¯¹è±¡çš„å­å¯¹è±¡è¿›è¡Œè‡ªåŠ¨æ’åºã€‚</p>
<h2>æ¸²æŸ“ç»„</h2>
<p>å½“ä½ æ·±å…¥ç ”ç©¶ PixiJS æ—¶ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œå³æ¸²æŸ“ç»„ã€‚ å°†æ¸²æŸ“ç»„è§†ä¸ºåœºæ™¯å›¾ä¸­çš„ä¸“é—¨å®¹å™¨ï¼Œå…¶æœ¬èº«å°±åƒè¿·ä½ åœºæ™¯å›¾ã€‚ ä»¥ä¸‹æ˜¯åœ¨é¡¹ç›®ä¸­æœ‰æ•ˆä½¿ç”¨æ¸²æŸ“ç»„çš„å¿…è¦çŸ¥è¯†ã€‚ æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="https://pixijs.com/8.x/guides/advanced/render-groups" target="_blank" rel="noopener noreferrer">æ¸²æŸ“ç»„æ¦‚è¿°</a>ã€‚</p>
<h2>å‰”é™¤</h2>
<p>å¦‚æœæ‚¨æ­£åœ¨æ„å»ºçš„é¡¹ç›®ä¸­ï¼Œå¤§éƒ¨åˆ†åœºæ™¯å¯¹è±¡éƒ½ä¸åœ¨å±å¹•ä¸Šï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨ªç‰ˆæ¸¸æˆï¼‰ï¼Œé‚£ä¹ˆæ‚¨å°±éœ€è¦å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œå‰”é™¤ã€‚</p>
<p>å‰”é™¤æ˜¯ä¸€ä¸ªè¯„ä¼°å¯¹è±¡ï¼ˆæˆ–å…¶å­ä»£ï¼ï¼‰æ˜¯å¦åœ¨å±å¹•ä¸Šçš„è¿‡ç¨‹ï¼Œå¦‚æœä¸åœ¨å±å¹•ä¸Šï¼Œåˆ™å…³é—­å¯¹å…¶çš„æ¸²æŸ“ã€‚</p>
<p>å¦‚æœä¸å¯¹å±å¹•å¤–çš„å¯¹è±¡è¿›è¡Œå‰”é™¤ï¼Œå³ä½¿å®ƒä»¬çš„åƒç´ æœ€ç»ˆéƒ½ä¸åœ¨å±å¹•ä¸Šï¼Œæ¸²æŸ“å™¨ä»ä¼šç»˜åˆ¶å®ƒä»¬ã€‚</p>
<p>PixiJS å¹¶ä¸æä¾›è§†å£å‰”é™¤çš„å†…ç½®æ”¯æŒï¼Œä½†ä½ å¯ä»¥æ‰¾åˆ°ç¬¬ä¸‰æ–¹æ’ä»¶æ¥æ»¡è¶³ä½ çš„éœ€æ±‚ã€‚å¦å¤–ï¼Œå¦‚æœä½ æƒ³å»ºç«‹è‡ªå·±çš„å‰”é™¤ç³»ç»Ÿï¼Œåªéœ€åœ¨æ¯ä¸ª tick æœŸé—´è¿è¡Œå¯¹è±¡ï¼Œå¹¶å°†ä»»ä½•ä¸éœ€è¦ç»˜åˆ¶çš„å¯¹è±¡çš„ <code>renderable</code> è®¾ç½®ä¸º false å³å¯ã€‚</p>
<h2>å±€éƒ¨åæ ‡ vs å…¨å±€åæ ‡</h2>
<p>å¦‚æœåœ¨èˆå°ä¸Šæ·»åŠ ä¸€ä¸ªç²¾çµï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šæ˜¾ç¤ºåœ¨å±å¹•çš„å·¦ä¸Šè§’ã€‚è¿™æ˜¯ PixiJS ä½¿ç”¨çš„å…¨å±€åæ ‡ç©ºé—´çš„åŸç‚¹ã€‚</p>
<p>å¦‚æœä½ çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯èˆå°çš„å­å¯¹è±¡ï¼Œé‚£ä¹ˆä½ åªéœ€è¦æ‹…å¿ƒè¿™ä¸ªåæ ‡ã€‚ä½†æ˜¯ä¸€æ—¦å¼•å…¥å®¹å™¨å’Œå­å¯¹è±¡ï¼Œäº‹æƒ…å°±å˜å¾—å¤æ‚äº†ã€‚</p>
<p>ä½äº [50, 100] å¤„çš„å­å¯¹è±¡è·ç¦»çˆ¶å¯¹è±¡å‘å³ 50 åƒç´ ï¼Œå‘ä¸‹ 100 åƒç´ ã€‚æˆ‘ä»¬ç§°è¿™ä¸¤ä¸ªåæ ‡ç³»ä¸ºã€Œå…¨å±€åæ ‡ã€å’Œã€Œå±€éƒ¨åæ ‡ã€ã€‚å½“ä½ åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šä½¿ç”¨ <code>position.set(x, y)</code> æ—¶ï¼Œä½ æ€»æ˜¯åœ¨å±€éƒ¨åæ ‡ç³»ä¸‹å·¥ä½œï¼Œç›¸å¯¹äºå¯¹è±¡çš„çˆ¶å¯¹è±¡ã€‚</p>
<p>é—®é¢˜æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™ä½ éƒ½æƒ³çŸ¥é“æŸä¸ªå¯¹è±¡çš„å…¨å±€ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å‰”é™¤å±å¹•å¤–çš„å¯¹è±¡ä»¥èŠ‚çœæ¸²æŸ“æ—¶é—´ï¼Œæ‚¨éœ€è¦çŸ¥é“ç»™å®šçš„å­å¯¹è±¡æ˜¯å¦åœ¨è§†å›¾çŸ©å½¢ä¹‹å¤–ã€‚</p>
<p>è¦å°†æœ¬åœ°åæ ‡è½¬æ¢ä¸ºå…¨å±€åæ ‡ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ <code>toGlobal()</code> å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// Get the global position of an object, relative to the top-left of the screen</span>
<span class="token keyword">let</span> globalPos <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">toGlobal</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ®µä»£ç ä¼šå°† <code>globalPos</code> è®¾ç½®ä¸ºå­å¯¹è±¡çš„å…¨å±€åæ ‡ï¼Œç›¸å¯¹äºå…¨å±€åæ ‡ç³»ä¸­çš„ [0, 0]ã€‚</p>
<h2>å…¨å±€åæ ‡ vs å±å¹•åæ ‡</h2>
<p>å½“æ‚¨çš„é¡¹ç›®ä¸ä¸»æœºæ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨ååŒå·¥ä½œæ—¶ï¼Œè¿˜æœ‰ç¬¬ä¸‰ä¸ªåæ ‡ç³»â€”â€”ã€Œå±å¹•åæ ‡ã€ï¼ˆåˆç§°ã€Œè§†å£åæ ‡ã€ï¼‰ä¼šå‘æŒ¥ä½œç”¨ã€‚å±å¹•åæ ‡è¡¨ç¤ºç›¸å¯¹äº PixiJS æ­£åœ¨å‘ˆç°çš„ç”»å¸ƒå…ƒç´ å·¦ä¸Šè§’çš„ä½ç½®ã€‚DOM å’Œæœ¬åœ°é¼ æ ‡ç‚¹å‡»äº‹ä»¶ç­‰éƒ½åœ¨å±å¹•ç©ºé—´ä¸­å·¥ä½œã€‚</p>
<p>ç°åœ¨ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå±å¹•ç©ºé—´ç­‰åŒäºä¸–ç•Œç©ºé—´ã€‚å¦‚æœç”»å¸ƒçš„å¤§å°ä¸åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶æŒ‡å®šçš„å‘ˆç°è§†å›¾å¤§å°ç›¸åŒï¼Œå°±å±äºè¿™ç§æƒ…å†µã€‚ é»˜è®¤æƒ…å†µä¸‹å°±æ˜¯è¿™æ ·â€”â€”ä¾‹å¦‚ï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ª 800x600 çš„åº”ç”¨ç¨‹åºçª—å£å¹¶å°†å…¶æ·»åŠ åˆ° HTML é¡µé¢ï¼Œå®ƒå°±ä¼šä¿æŒè¿™ä¸ªå¤§å°ã€‚ä¸–ç•Œåæ ‡ä¸­çš„ 100 åƒç´ ç­‰äºå±å¹•ç©ºé—´ä¸­çš„ 100 åƒç´ ã€‚</p>
<p>ä½†æ˜¯ï¼å¸¸è§çš„æƒ…å†µæ˜¯æ‹‰ä¼¸å‘ˆç°è§†å›¾ï¼Œä½¿å…¶å……æ»¡æ•´ä¸ªå±å¹•ï¼Œæˆ–è€…ä»¥è¾ƒä½åˆ†è¾¨ç‡å‘ˆç°ï¼Œç„¶åæ”¾å¤§ä»¥æé«˜é€Ÿåº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”»å¸ƒå…ƒç´ çš„å±å¹•å°ºå¯¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚é€šè¿‡ CSSï¼‰ï¼Œä½†åº•å±‚å‘ˆç°è§†å›¾ä¸ä¼šï¼Œä»è€Œå¯¼è‡´ä¸–ç•Œåæ ‡å’Œå±å¹•åæ ‡ä¸åŒ¹é…ã€‚</p>
]]></content>
    <category term="Pixi"/>
    <published>2024-08-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ¸²æŸ“å¾ªç¯</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/03-render-loop.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/03-render-loop.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>ç°åœ¨æ‚¨å·²ç»äº†è§£äº†ç³»ç»Ÿçš„ä¸»è¦éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›éƒ¨åˆ†æ˜¯å¦‚ä½•ååŒå·¥ä½œï¼Œå°†æ‚¨çš„é¡¹ç›®å‘ˆç°åœ¨å±å¹•ä¸Šçš„ã€‚ ä¸ç½‘é¡µä¸åŒçš„æ˜¯ï¼ŒPixiJS ä¼šä¸æ–­æ›´æ–°å’Œé‡æ–°ç»˜åˆ¶ï¼Œä¸€éåˆä¸€éã€‚ ä½ æ›´æ–°å¯¹è±¡ï¼Œç„¶å PixiJS å°†å®ƒä»¬æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚ æˆ‘ä»¬ç§°è¿™ä¸ªå¾ªç¯ä¸ºæ¸²æŸ“å¾ªç¯ã€‚</p>
<p>ä»»ä½• PixiJS é¡¹ç›®æœ€ä¸»è¦çš„éƒ¨åˆ†åŒ…å«æ›´æ–° + æ¸²æŸ“å¾ªç¯ï¼Œç¼–å†™æ›´æ–°ï¼ŒPixiJS ä¼šå¤„ç†æ•´ä¸ªæ¸²æŸ“ã€‚</p>
<p>å‘ç”Ÿåœ¨æ¸²æŸ“å¾ªç¯ä¸­çš„æ¯ä¸€å¸§ä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<h2>è¿è¡Œ Ticker å›è°ƒ</h2>
<p>ç¬¬ä¸€æ­¥æ˜¯è®¡ç®—ä»ä¸Šä¸€å¸§å¼€å§‹å·²ç»è¿‡å»äº†å¤šé•¿æ—¶é—´ï¼Œç„¶åæ ¹æ®æ—¶é—´å·®è°ƒç”¨åº”ç”¨ç¨‹åºå¯¹è±¡çš„ ticker å›è°ƒã€‚ è¿™æ ·ï¼Œé¡¹ç›®ä»£ç å°±å¯ä»¥åˆ¶ä½œåŠ¨ç”»å¹¶æ›´æ–°èˆå°ä¸Šçš„ç²¾çµç­‰ï¼Œä¸ºæ¸²æŸ“åšå¥½å‡†å¤‡ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>ç°åœ¨æ‚¨å·²ç»äº†è§£äº†ç³»ç»Ÿçš„ä¸»è¦éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›éƒ¨åˆ†æ˜¯å¦‚ä½•ååŒå·¥ä½œï¼Œå°†æ‚¨çš„é¡¹ç›®å‘ˆç°åœ¨å±å¹•ä¸Šçš„ã€‚ ä¸ç½‘é¡µä¸åŒçš„æ˜¯ï¼ŒPixiJS ä¼šä¸æ–­æ›´æ–°å’Œé‡æ–°ç»˜åˆ¶ï¼Œä¸€éåˆä¸€éã€‚ ä½ æ›´æ–°å¯¹è±¡ï¼Œç„¶å PixiJS å°†å®ƒä»¬æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚ æˆ‘ä»¬ç§°è¿™ä¸ªå¾ªç¯ä¸ºæ¸²æŸ“å¾ªç¯ã€‚</p>
<p>ä»»ä½• PixiJS é¡¹ç›®æœ€ä¸»è¦çš„éƒ¨åˆ†åŒ…å«æ›´æ–° + æ¸²æŸ“å¾ªç¯ï¼Œç¼–å†™æ›´æ–°ï¼ŒPixiJS ä¼šå¤„ç†æ•´ä¸ªæ¸²æŸ“ã€‚</p>
<p>å‘ç”Ÿåœ¨æ¸²æŸ“å¾ªç¯ä¸­çš„æ¯ä¸€å¸§ä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<h2>è¿è¡Œ Ticker å›è°ƒ</h2>
<p>ç¬¬ä¸€æ­¥æ˜¯è®¡ç®—ä»ä¸Šä¸€å¸§å¼€å§‹å·²ç»è¿‡å»äº†å¤šé•¿æ—¶é—´ï¼Œç„¶åæ ¹æ®æ—¶é—´å·®è°ƒç”¨åº”ç”¨ç¨‹åºå¯¹è±¡çš„ ticker å›è°ƒã€‚ è¿™æ ·ï¼Œé¡¹ç›®ä»£ç å°±å¯ä»¥åˆ¶ä½œåŠ¨ç”»å¹¶æ›´æ–°èˆå°ä¸Šçš„ç²¾çµç­‰ï¼Œä¸ºæ¸²æŸ“åšå¥½å‡†å¤‡ã€‚</p>
<h2>æ›´æ–°åœºæ™¯å›¾åƒ</h2>
<p>åœºæ™¯å›¾åŒ…å«æ‚¨æ­£åœ¨ç»˜åˆ¶çš„äº‹ç‰©ï¼ˆç²¾çµã€æ–‡æœ¬ç­‰ï¼‰ï¼Œå¹¶ä¸”è¿™äº›å¯¹è±¡å¤„äºæ ‘çŠ¶å±‚æ¬¡ç»“æ„ä¸­ã€‚è¿™äº›å¯¹è±¡å¤„äºæ ‘çŠ¶å±‚æ¬¡ç»“æ„ä¸­ã€‚ é€šè¿‡ç§»åŠ¨ã€æ—‹è½¬ç­‰æ–¹å¼æ›´æ–°æ¸¸æˆå¯¹è±¡åï¼ŒPixiJS éœ€è¦è®¡ç®—åœºæ™¯ä¸­æ¯ä¸ªå¯¹è±¡çš„æ–°ä½ç½®å’ŒçŠ¶æ€ï¼Œç„¶åæ‰èƒ½å¼€å§‹ç»˜åˆ¶ã€‚</p>
<h2>æ¸²æŸ“åœºæ™¯å›¾åƒ</h2>
<p>ç°åœ¨æˆ‘ä»¬çš„æ¸¸æˆçŠ¶æ€å·²ç»æ›´æ–°ï¼Œæ˜¯æ—¶å€™å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šäº†ã€‚æ¸²æŸ“ç³»ç»Ÿä¼šä»åœºæ™¯å›¾çš„æ ¹èŠ‚ç‚¹ï¼ˆapp.stageï¼‰å¼€å§‹ï¼Œæ¸²æŸ“æ¯ä¸ªå¯¹è±¡åŠå…¶å­èŠ‚ç‚¹ï¼Œç›´åˆ°ç»˜åˆ¶å®Œæ‰€æœ‰å¯¹è±¡ã€‚ åœ¨æ­¤è¿‡ç¨‹ä¸­ä¸ä¼šè¿›è¡Œå‰”é™¤æˆ–å…¶ä»–å·§å¦™çš„å¤„ç†ã€‚å¦‚æœåœ¨èˆå°çš„å¯è§éƒ¨åˆ†ä¹‹å¤–æœ‰å¤§é‡å¯¹è±¡ï¼Œåˆ™éœ€è¦å°†å…¶ç¦ç”¨ä½œä¸ºä¸€ç§ä¼˜åŒ–æ–¹æ³•ï¼ˆè§†æ¤ä½“å‰”é™¤ï¼‰ã€‚</p>
<h2>å¸§é¢‘</h2>
<p>æ¸²æŸ“å¾ªç¯ä¸å¯èƒ½æ— é™å¿«åœ°è¿è¡Œ--åœ¨å±å¹•ä¸Šç»˜åˆ¶å›¾åƒéœ€è¦æ—¶é—´ã€‚æ­¤å¤–ï¼Œæ¯æ¬¡å±å¹•æ›´æ–°ï¼ˆé€šå¸¸ä¸º 60fpsï¼Œä½†è¾ƒæ–°çš„æ˜¾ç¤ºå™¨å¯æ”¯æŒ 144fps æˆ–æ›´é«˜ï¼‰æ—¶ï¼Œå¸§çš„æ›´æ–°æ¬¡æ•°ä¸€èˆ¬ä¸ä¼šè¶…è¿‡ä¸€æ¬¡ã€‚æœ€åï¼ŒPixiJS æ˜¯åœ¨ Chrome æˆ– Firefox ç­‰ç½‘ç»œæµè§ˆå™¨çš„ç¯å¢ƒä¸­è¿è¡Œçš„ã€‚æµè§ˆå™¨æœ¬èº«å¿…é¡»å¹³è¡¡å„ç§å†…éƒ¨æ“ä½œçš„éœ€è¦å’Œä¸ºä»»ä½•æ‰“å¼€çš„æ ‡ç­¾é¡µæä¾›æœåŠ¡çš„éœ€è¦ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œç¡®å®šä½•æ—¶ç»˜åˆ¶å¸§æ˜¯ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³è°ƒæ•´è¯¥è¡Œä¸ºï¼Œå¯ä»¥åœ¨ Ticker ä¸Šè®¾ç½® <code>minFPS</code> å’Œ <code>maxFPS</code> å±æ€§ã€‚è¯·æ³¨æ„ï¼Œç”±äºç¯å¢ƒå¤æ‚ï¼Œé¡¹ç›®æ— æ³•ä¿è¯ç»™å®šçš„ FPSã€‚ åœ¨ ticker å›è°ƒä¸­ä½¿ç”¨ä¼ é€’çš„ <code>ticker.deltaTime</code> å€¼æ¥ç¼©æ”¾ä»»ä½•åŠ¨ç”»ï¼Œä»¥ç¡®ä¿æµç•…æ’­æ”¾ã€‚</p>
<h2>è‡ªå®šä¹‰æ¸²æŸ“å¾ªç¯</h2>
<p>ä»¥ä¸Šä»‹ç»çš„æ˜¯åº”ç”¨ç¨‹åºè¾…åŠ©ç±»å¼€ç®±å³ç”¨çš„é»˜è®¤å‘ˆç°å¾ªç¯ã€‚å¯¹äºå¸Œæœ›è§£å†³ç‰¹å®šé—®é¢˜çš„é«˜çº§ç”¨æˆ·æ¥è¯´ï¼Œåˆ›å»ºå‘ˆç°å¾ªç¯è¿˜æœ‰è®¸å¤šå…¶ä»–æ–¹æ³•ã€‚åœ¨åˆ¶ä½œåŸå‹å’Œå­¦ä¹  PixiJS çš„è¿‡ç¨‹ä¸­ï¼Œå»ºè®®ä½¿ç”¨åº”ç”¨ç¨‹åºæä¾›çš„ç³»ç»Ÿã€‚</p>
]]></content>
    <category term="Pixi"/>
    <published>2024-08-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åŠ¡å®çš„é¡¹ç›®</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/09-pragmatic-project.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/09-pragmatic-project.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>ä¸€æ—¦é¡¹ç›®ä¸åªä½ ä¸€ä¸ªäººï¼Œå°±éœ€è¦å»ºç«‹ä¸€äº›åŸºæœ¬è§„åˆ™ï¼Œå¹¶ä¾æ¬¡å°†é¡¹ç›®çš„å„éƒ¨åˆ†åˆ†é…å‡ºå»ã€‚</p>
<h2>åŠ¡å®çš„å›¢é˜Ÿ</h2>
<ul>
<li>ç»´æŒå°è€Œç¨³å®šçš„å›¢é˜Ÿ</li>
<li>ç¦æ­¢ç ´çª—</li>
<li>å›¢é˜Ÿçš„å·¥ä½œä¸åº”ä»…è‡´åŠ›äºå¼€å‘æ–°åŠŸèƒ½ï¼Œè¿˜å¯èƒ½åŒ…æ‹¬ï¼š
<ul>
<li>æ—§ç³»ç»Ÿçš„ç»´æŠ¤</li>
<li>æµç¨‹çš„åæ€ä¸ç²¾ç‚¼</li>
<li>å®éªŒæ–°æŠ€æœ¯</li>
<li>å­¦ä¹ å’Œæå‡æŠ€èƒ½</li>
</ul>
</li>
<li>åšèƒ½èµ·ä½œç”¨çš„äº‹ï¼Œåˆ«èµ¶æ—¶é«¦</li>
</ul>
<h2>åŠ¡å®çš„å…¥é—¨å¥—ä»¶</h2>
<ul>
<li>ç‰ˆæœ¬æ§åˆ¶</li>
<li>å›å½’æµ‹è¯•</li>
<li>å®Œå…¨è‡ªåŠ¨åŒ–</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>ä¸€æ—¦é¡¹ç›®ä¸åªä½ ä¸€ä¸ªäººï¼Œå°±éœ€è¦å»ºç«‹ä¸€äº›åŸºæœ¬è§„åˆ™ï¼Œå¹¶ä¾æ¬¡å°†é¡¹ç›®çš„å„éƒ¨åˆ†åˆ†é…å‡ºå»ã€‚</p>
<h2>åŠ¡å®çš„å›¢é˜Ÿ</h2>
<ul>
<li>ç»´æŒå°è€Œç¨³å®šçš„å›¢é˜Ÿ</li>
<li>ç¦æ­¢ç ´çª—</li>
<li>å›¢é˜Ÿçš„å·¥ä½œä¸åº”ä»…è‡´åŠ›äºå¼€å‘æ–°åŠŸèƒ½ï¼Œè¿˜å¯èƒ½åŒ…æ‹¬ï¼š
<ul>
<li>æ—§ç³»ç»Ÿçš„ç»´æŠ¤</li>
<li>æµç¨‹çš„åæ€ä¸ç²¾ç‚¼</li>
<li>å®éªŒæ–°æŠ€æœ¯</li>
<li>å­¦ä¹ å’Œæå‡æŠ€èƒ½</li>
</ul>
</li>
<li>åšèƒ½èµ·ä½œç”¨çš„äº‹ï¼Œåˆ«èµ¶æ—¶é«¦</li>
</ul>
<h2>åŠ¡å®çš„å…¥é—¨å¥—ä»¶</h2>
<ul>
<li>ç‰ˆæœ¬æ§åˆ¶</li>
<li>å›å½’æµ‹è¯•</li>
<li>å®Œå…¨è‡ªåŠ¨åŒ–</li>
</ul>
<h2>å‚²æ…¢ä¸åè§</h2>
<p>åœ¨ä½œå“ä¸Šç­¾åã€‚</p>
<p>ä¿æŒåŒ¿åä¼šæ»‹ç”Ÿç²—å¿ƒã€é”™è¯¯ã€æ‡’æƒ°å’Œç³Ÿç³•çš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­â€”â€”å¾ˆå®¹æ˜“æŠŠè‡ªå·±çœ‹æˆåªæ˜¯å¤§é½¿è½®ä¸Šçš„ä¸€ä¸ªå°é½¿ï¼Œåœ¨æ— ä¼‘æ­¢çš„å·¥ä½œæ±‡æŠ¥ä¸­åˆ¶é€ è¹©è„šçš„å€Ÿå£ï¼Œè€Œä¸æ˜¯å†™å‡ºå¥½çš„ä»£ç ã€‚</p>
]]></content>
    <category term="READING"/>
    <published>2024-08-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">é¡¹ç›®å¯åŠ¨å‰</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/08-before-start-project.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/08-before-start-project.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨é¡¹ç›®çš„æœ€æ—©æœŸï¼Œä½ å’Œå›¢é˜Ÿéœ€è¦äº†è§£éœ€æ±‚ã€‚ä»…ä»…æ˜¯è¢«äººå‘ŠçŸ¥è¦åšä»€ä¹ˆæˆ–æ˜¯å€¾å¬ç”¨æˆ·æ˜¯ä¸å¤Ÿçš„ï¼šè¯»ä¸€ä¸‹éœ€æ±‚ä¹‹å‘ï¼Œå­¦ä¹ å¦‚ä½•é¿å…å¸¸è§çš„é™·é˜±ã€‚</p>
<h2>éœ€æ±‚ä¹‹å‘</h2>
<p>éœ€æ±‚å¾ˆå°‘åœç•™åœ¨è¡¨é¢ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¢«åŸ‹åœ¨å±‚å±‚çš„å‡è®¾ã€è¯¯è§£å’Œæ”¿æ²»ä¹‹ä¸‹ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œéœ€æ±‚é€šå¸¸æ ¹æœ¬ä¸å­˜åœ¨ã€‚</p>
<ul>
<li>æ— äººç¡®åˆ‡çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆ</li>
<li>ç¨‹åºå‘˜å¸®åŠ©äººä»¬ç†è§£ä»–ä»¬æƒ³è¦ä»€ä¹ˆ</li>
<li>éœ€æ±‚æ˜¯ä»åé¦ˆå¾ªç¯ä¸­å­¦åˆ°çš„</li>
<li>å’Œç”¨æˆ·ä¸€èµ·å·¥ä½œä»¥ä¾¿ä»ç”¨æˆ·è§’åº¦æ€è€ƒ</li>
<li>ä½¿ç”¨é¡¹ç›®æœ¯è¯­è¡¨</li>
</ul>
<h2>å¤„ç†æ— æ³•è§£å†³çš„éš¾é¢˜</h2>
<p>å¶å°”ä¹Ÿä¼šå‡ºç°ä¸€ä¸ªçœŸçš„éå¸¸å›°éš¾çš„é—®é¢˜ï¼Œä½ ä¼šå‘ç°è‡ªå·±é¡¿æ—¶è¢«å·å…¥é¡¹ç›®ä¹‹ä¸­ï¼šä¸€äº›å·¥ç¨‹é—®é¢˜ä½ æŠŠæ¡ä¸äº†ï¼Œæˆ–è€…æŸäº›ä»£ç æ¯”ä½ æƒ³è±¡çš„æ›´éš¾å†™ï¼Œä¹Ÿè®¸çœ‹èµ·æ¥æ ¹æœ¬åšä¸åˆ°ã€‚ä½†è¿™äº›çœŸçš„åƒçœ‹èµ·æ¥é‚£ä¹ˆéš¾å—ï¼Ÿ</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨é¡¹ç›®çš„æœ€æ—©æœŸï¼Œä½ å’Œå›¢é˜Ÿéœ€è¦äº†è§£éœ€æ±‚ã€‚ä»…ä»…æ˜¯è¢«äººå‘ŠçŸ¥è¦åšä»€ä¹ˆæˆ–æ˜¯å€¾å¬ç”¨æˆ·æ˜¯ä¸å¤Ÿçš„ï¼šè¯»ä¸€ä¸‹éœ€æ±‚ä¹‹å‘ï¼Œå­¦ä¹ å¦‚ä½•é¿å…å¸¸è§çš„é™·é˜±ã€‚</p>
<h2>éœ€æ±‚ä¹‹å‘</h2>
<p>éœ€æ±‚å¾ˆå°‘åœç•™åœ¨è¡¨é¢ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¢«åŸ‹åœ¨å±‚å±‚çš„å‡è®¾ã€è¯¯è§£å’Œæ”¿æ²»ä¹‹ä¸‹ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œéœ€æ±‚é€šå¸¸æ ¹æœ¬ä¸å­˜åœ¨ã€‚</p>
<ul>
<li>æ— äººç¡®åˆ‡çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆ</li>
<li>ç¨‹åºå‘˜å¸®åŠ©äººä»¬ç†è§£ä»–ä»¬æƒ³è¦ä»€ä¹ˆ</li>
<li>éœ€æ±‚æ˜¯ä»åé¦ˆå¾ªç¯ä¸­å­¦åˆ°çš„</li>
<li>å’Œç”¨æˆ·ä¸€èµ·å·¥ä½œä»¥ä¾¿ä»ç”¨æˆ·è§’åº¦æ€è€ƒ</li>
<li>ä½¿ç”¨é¡¹ç›®æœ¯è¯­è¡¨</li>
</ul>
<h2>å¤„ç†æ— æ³•è§£å†³çš„éš¾é¢˜</h2>
<p>å¶å°”ä¹Ÿä¼šå‡ºç°ä¸€ä¸ªçœŸçš„éå¸¸å›°éš¾çš„é—®é¢˜ï¼Œä½ ä¼šå‘ç°è‡ªå·±é¡¿æ—¶è¢«å·å…¥é¡¹ç›®ä¹‹ä¸­ï¼šä¸€äº›å·¥ç¨‹é—®é¢˜ä½ æŠŠæ¡ä¸äº†ï¼Œæˆ–è€…æŸäº›ä»£ç æ¯”ä½ æƒ³è±¡çš„æ›´éš¾å†™ï¼Œä¹Ÿè®¸çœ‹èµ·æ¥æ ¹æœ¬åšä¸åˆ°ã€‚ä½†è¿™äº›çœŸçš„åƒçœ‹èµ·æ¥é‚£ä¹ˆéš¾å—ï¼Ÿ</p>
<p>è§£å†³è°œé¢˜çš„å…³é”®æ˜¯ï¼Œè®¤è¯†åˆ°ä½ æ‰€å—åˆ°çš„çº¦æŸå’Œä½ æ‰€æ‹¥æœ‰çš„è‡ªç”±åº¦ï¼Œå› ä¸ºè®¤è¯†åˆ°è¿™äº›å°±ä¼šæ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<ul>
<li>ä¸è¦è·³å‡ºæ¡†æ¡†æ€è€ƒâ€”â€”æ‰¾åˆ°æ¡†æ¡†</li>
<li>è·³å‡ºè‡ªèº«çš„å±€é™</li>
<li>å¹¸è¿çœ·é¡¾æœ‰å‡†å¤‡çš„äºº</li>
</ul>
<h2>æºæ‰‹å…±å»º</h2>
<p>ã€Œä¸€èµ·å·¥ä½œã€çš„çœŸæ­£å«ä¹‰ï¼šä¸ä»…ä»…æ˜¯æé—®ã€è®¨è®ºã€åšç¬”è®°ï¼Œè¿˜è¦åœ¨çœŸæ­£ç¼–ç çš„åŒä¸€æ—¶åˆ»æé—®å’Œè®¨è®ºã€‚</p>
<ul>
<li>ç»“å¯¹ç¼–ç¨‹</li>
<li>é›†ä½“ç¼–ç¨‹</li>
<li>ä¸è¦ä¸€ä¸ªäººåŸ‹å¤´é’»è¿›ä»£ç ä¸­</li>
</ul>
]]></content>
    <category term="READING"/>
    <published>2024-08-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å½“ä½ ç¼–ç æ—¶</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/07-when-coding.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/07-when-coding.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å¯¹æ‰€æœ‰ä»£ç è¿›è¡Œæ‰¹åˆ¤æ€§æ€è€ƒï¼ŒåŒ…æ‹¬è‡ªå·±çš„ä»£ç ã€‚ä¸æ–­çœ‹åˆ°ç¨‹åºå’Œè®¾è®¡çš„æ”¹è¿›ç©ºé—´ã€‚</p>
<h2>å¬ä»èœ¥èœ´è„‘</h2>
<p>ä¸€ç§æœ‰æ•ˆçš„è„‘åŠ›çªç ´çš„æ–¹æ³•ï¼š</p>
<ol>
<li>åœ¨ä¾¿ç­¾ä¸Šå†™ä¸‹ã€Œæˆ‘æ­£åœ¨åš xxã€ï¼Œç„¶åè´´åœ¨å±å¹•çš„ä¸€ä¾§ã€‚</li>
<li>æé†’è‡ªå·±ï¼Œã€Œxxã€æ³¨å®šè¦å‡ºé—®é¢˜ã€‚æé†’è‡ªå·±ï¼Œã€Œxxã€å³ä½¿æ²¡æœ‰å‡ºé—®é¢˜ä¹Ÿä¼šè¢«æ‰”æ‰ã€‚è¿™æ ·åšæ²¡æœ‰åå¤„ã€‚</li>
<li>åœ¨ç©ºç¼–è¾‘å™¨çª—å£ä¸­ï¼Œå†™ä¸€æ¡æ³¨é‡Šï¼Œç”¨ä¸€å¥è¯æè¿°ä½ æƒ³å­¦ç‚¹ä»€ä¹ˆæˆ–åšç‚¹ä»€ä¹ˆã€‚</li>
<li>å¼€å§‹ç¼–ç ã€‚</li>
</ol>
<p>å¦‚æœåœ¨å®éªŒç»“æŸåä»æ—§ä¸èˆ’æœï¼Œé‚£å°±é‡æ–°ä»æ•£æ­¥ã€è°ˆè¯å’Œä¼‘æ¯å¼€å§‹ã€‚</p>
<p>é˜…è¯»åˆ«äººçš„ä»£ç ã€‚</p>
<h2>é‡æ„</h2>]]></summary>
    <content type="html"><![CDATA[<p>å¯¹æ‰€æœ‰ä»£ç è¿›è¡Œæ‰¹åˆ¤æ€§æ€è€ƒï¼ŒåŒ…æ‹¬è‡ªå·±çš„ä»£ç ã€‚ä¸æ–­çœ‹åˆ°ç¨‹åºå’Œè®¾è®¡çš„æ”¹è¿›ç©ºé—´ã€‚</p>
<h2>å¬ä»èœ¥èœ´è„‘</h2>
<p>ä¸€ç§æœ‰æ•ˆçš„è„‘åŠ›çªç ´çš„æ–¹æ³•ï¼š</p>
<ol>
<li>åœ¨ä¾¿ç­¾ä¸Šå†™ä¸‹ã€Œæˆ‘æ­£åœ¨åš xxã€ï¼Œç„¶åè´´åœ¨å±å¹•çš„ä¸€ä¾§ã€‚</li>
<li>æé†’è‡ªå·±ï¼Œã€Œxxã€æ³¨å®šè¦å‡ºé—®é¢˜ã€‚æé†’è‡ªå·±ï¼Œã€Œxxã€å³ä½¿æ²¡æœ‰å‡ºé—®é¢˜ä¹Ÿä¼šè¢«æ‰”æ‰ã€‚è¿™æ ·åšæ²¡æœ‰åå¤„ã€‚</li>
<li>åœ¨ç©ºç¼–è¾‘å™¨çª—å£ä¸­ï¼Œå†™ä¸€æ¡æ³¨é‡Šï¼Œç”¨ä¸€å¥è¯æè¿°ä½ æƒ³å­¦ç‚¹ä»€ä¹ˆæˆ–åšç‚¹ä»€ä¹ˆã€‚</li>
<li>å¼€å§‹ç¼–ç ã€‚</li>
</ol>
<p>å¦‚æœåœ¨å®éªŒç»“æŸåä»æ—§ä¸èˆ’æœï¼Œé‚£å°±é‡æ–°ä»æ•£æ­¥ã€è°ˆè¯å’Œä¼‘æ¯å¼€å§‹ã€‚</p>
<p>é˜…è¯»åˆ«äººçš„ä»£ç ã€‚</p>
<h2>é‡æ„</h2>
<p>é‡ç»„ç°æœ‰ä»£ç å®ä½“ã€æ”¹å˜å…¶å†…éƒ¨ç»“æ„è€Œä¸æ”¹å˜å…¶å¤–éƒ¨è¡Œä¸ºçš„è§„èŒƒå¼æŠ€æœ¯ã€‚</p>
<p>é‡æ„æ˜¯ä¸€é¡¹æ—¥å¤ä¸€æ—¥çš„å·¥ä½œï¼Œéœ€è¦é‡‡å–ä½é£é™©çš„å°æ­¥éª¤è¿›è¡Œï¼Œå®ƒæ›´åƒæ˜¯è€™æ¾å’Œé™¤è‰è¿™ç±»æ´»åŠ¨ã€‚è¿™æ˜¯ä¸€ç§æœ‰é’ˆå¯¹æ€§çš„ã€ç²¾ç¡®çš„æ–¹æ³•ï¼Œæœ‰åŠ©äºä¿æŒä»£ç æ˜“äºæ›´æ”¹ï¼Œè€Œä¸æ˜¯å¯¹ä»£ç åº“è¿›è¡Œè‡ªç”±çš„ã€å¤§è§„æ¨¡çš„é‡å†™ã€‚</p>
<p>ä¸ºäº†ä¿è¯å¤–éƒ¨è¡Œä¸ºæ²¡æœ‰æ”¹å˜ï¼Œä½ éœ€è¦è‰¯å¥½çš„è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•æ¥éªŒè¯ä»£ç çš„è¡Œä¸ºã€‚</p>
<ul>
<li>å°½æ—©é‡æ„ï¼Œå°½å¿«é‡æ„</li>
</ul>
<h2>æ³¨æ„å®‰å…¨</h2>
<ul>
<li>ä¿æŒä»£ç ç®€æ´ï¼Œè®©æ”»å‡»é¢æ›´å°</li>
<li>å°½æ—©æ‰“ä¸Šå®‰å…¨è¡¥ä¸</li>
</ul>
]]></content>
    <category term="READING"/>
    <published>2024-08-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å¹¶å‘</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/06-concurrent.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/06-concurrent.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ‰“ç ´æ—¶åŸŸè€¦åˆ</h2>
<p>æ—¶åŸŸè€¦åˆâ€”â€”åœ¨æ—¶é—´èŒƒç•´ä¸Šäº§ç”Ÿè€¦åˆï¼šA æ–¹æ³•å¿…é¡»åœ¨ B æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼›ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªæŠ¥å‘Šï¼›åœ¨æŒ‰é’®æŒ‰ä¸‹å‰å¿…é¡»ç­‰å±å¹•å…ˆé‡ç»˜ï¼›â€œå˜€å˜€â€ä¸€å®šåœ¨â€œå—’å—’â€ä¹‹å‰å‘ç”Ÿã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è€ƒè™‘å¹¶å‘æ€§ï¼Œå¹¶ä¸”è€ƒè™‘å¯¹æ—¶é—´ä¾èµ–æˆ–é¡ºåºä¾èµ–è§£è€¦ã€‚</p>
<ul>
<li>é€šè¿‡åˆ†æå·¥ä½œæµæ¥æé«˜å¹¶å‘æ€§</li>
<li>åšäº‹ä¹Ÿéœ€è¦æ€è€ƒå¦‚ä½•è§£è€¦</li>
</ul>
]]></summary>
    <content type="html"><![CDATA[<h2>æ‰“ç ´æ—¶åŸŸè€¦åˆ</h2>
<p>æ—¶åŸŸè€¦åˆâ€”â€”åœ¨æ—¶é—´èŒƒç•´ä¸Šäº§ç”Ÿè€¦åˆï¼šA æ–¹æ³•å¿…é¡»åœ¨ B æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼›ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªæŠ¥å‘Šï¼›åœ¨æŒ‰é’®æŒ‰ä¸‹å‰å¿…é¡»ç­‰å±å¹•å…ˆé‡ç»˜ï¼›â€œå˜€å˜€â€ä¸€å®šåœ¨â€œå—’å—’â€ä¹‹å‰å‘ç”Ÿã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è€ƒè™‘å¹¶å‘æ€§ï¼Œå¹¶ä¸”è€ƒè™‘å¯¹æ—¶é—´ä¾èµ–æˆ–é¡ºåºä¾èµ–è§£è€¦ã€‚</p>
<ul>
<li>é€šè¿‡åˆ†æå·¥ä½œæµæ¥æé«˜å¹¶å‘æ€§</li>
<li>åšäº‹ä¹Ÿéœ€è¦æ€è€ƒå¦‚ä½•è§£è€¦</li>
</ul>
]]></content>
    <category term="READING"/>
    <published>2024-08-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ‰‹å†™ callã€applyã€bind</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/017-implement-call-apply-bind.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/017-implement-call-apply-bind.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><code>call()</code>ã€<code>apply()</code> å’Œ <code>bind()</code> ä¸‰è€…éƒ½å¯ä»¥æ”¹å˜ JavaScript ä¸­çš„ this æŒ‡å‘ï¼Œå…³äºä¸‰è€…çš„åŒºåˆ«åœ¨ ä¸­æœ‰è¯¦ç»†è®°å½•ã€‚</p>
<p>è¿™ä¸‰ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯ç”± C++ å®ç°çš„ï¼Œè¿™é‡Œåªè€ƒè™‘åŠŸèƒ½ä¸Šçš„å®ç°ï¼Œä¸ä¼šè€ƒè™‘å¤ªå¤šè¾¹ç•Œæƒ…å†µã€‚</p>
<h2><code>call()</code></h2>
<p><code>call()</code> æ¥å—ä¸€ä¸ª <code>this</code> æŒ‡å‘ï¼Œå…¶åè·Ÿå‚æ•°åˆ—è¡¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å°† thisArg è½¬æˆå¯¹è±¡ç±»å‹ï¼ˆé˜²æ­¢ä¼ å…¥éå¯¹è±¡ç±»å‹ï¼‰</span>
  <span class="token comment">// ä¼ å…¥ null æˆ– undefined åˆ™ä¸ºå…¨å±€å¯¹è±¡</span>
  thisArg <span class="token operator">=</span> thisArg <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> thisArg <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token function">Object</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">)</span> <span class="token operator">:</span> window

  <span class="token comment">// foo.myCall();</span>
  <span class="token comment">// foo æ˜¯å‡½æ•°ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³éšå¼ç»‘å®šï¼šå¯¹è±¡ï¼ˆfooï¼‰è°ƒç”¨å‡½æ•°ï¼ˆmyCallï¼‰</span>
  <span class="token comment">// é‚£ä¹ˆå‡½æ•° myCall ä¸­çš„ this æŒ‡å‘ foo å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">// foo</span>

  <span class="token comment">// éœ€è¦å°† fn çš„æŒ‡å‘æ”¹ä¸º thisArg</span>
  <span class="token comment">// é‚£ä¹ˆå¯ä»¥ç»§ç»­åˆ©ç”¨ this çš„éšå¼ç»‘å®šè§„åˆ™</span>
  thisArg<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn
  <span class="token keyword">const</span> res <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>fn

  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p><code>call()</code>ã€<code>apply()</code> å’Œ <code>bind()</code> ä¸‰è€…éƒ½å¯ä»¥æ”¹å˜ JavaScript ä¸­çš„ this æŒ‡å‘ï¼Œå…³äºä¸‰è€…çš„åŒºåˆ«åœ¨ ä¸­æœ‰è¯¦ç»†è®°å½•ã€‚</p>
<p>è¿™ä¸‰ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯ç”± C++ å®ç°çš„ï¼Œè¿™é‡Œåªè€ƒè™‘åŠŸèƒ½ä¸Šçš„å®ç°ï¼Œä¸ä¼šè€ƒè™‘å¤ªå¤šè¾¹ç•Œæƒ…å†µã€‚</p>
<h2><code>call()</code></h2>
<p><code>call()</code> æ¥å—ä¸€ä¸ª <code>this</code> æŒ‡å‘ï¼Œå…¶åè·Ÿå‚æ•°åˆ—è¡¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å°† thisArg è½¬æˆå¯¹è±¡ç±»å‹ï¼ˆé˜²æ­¢ä¼ å…¥éå¯¹è±¡ç±»å‹ï¼‰</span>
  <span class="token comment">// ä¼ å…¥ null æˆ– undefined åˆ™ä¸ºå…¨å±€å¯¹è±¡</span>
  thisArg <span class="token operator">=</span> thisArg <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> thisArg <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token function">Object</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">)</span> <span class="token operator">:</span> window

  <span class="token comment">// foo.myCall();</span>
  <span class="token comment">// foo æ˜¯å‡½æ•°ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³éšå¼ç»‘å®šï¼šå¯¹è±¡ï¼ˆfooï¼‰è°ƒç”¨å‡½æ•°ï¼ˆmyCallï¼‰</span>
  <span class="token comment">// é‚£ä¹ˆå‡½æ•° myCall ä¸­çš„ this æŒ‡å‘ foo å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token comment">// foo</span>

  <span class="token comment">// éœ€è¦å°† fn çš„æŒ‡å‘æ”¹ä¸º thisArg</span>
  <span class="token comment">// é‚£ä¹ˆå¯ä»¥ç»§ç»­åˆ©ç”¨ this çš„éšå¼ç»‘å®šè§„åˆ™</span>
  thisArg<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn
  <span class="token keyword">const</span> res <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>fn

  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><h2><code>apply()</code></h2>
<p><code>apply()</code> ä¸ <code>call()</code> çš„åŒºåˆ«åœ¨äºä¼ å…¥çš„æ˜¯å‚æ•°æ•°ç»„ï¼Œå‚ç…§ä¸Šé¢æµç¨‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å†™å‡ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¤„ç† thisArg</span>
  thisArg <span class="token operator">=</span> thisArg <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> thisArg <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token function">Object</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">)</span> <span class="token operator">:</span> window

  <span class="token comment">// è·å–å¾…æ‰§è¡Œå‡½æ•°</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span>

  <span class="token comment">// æ‰§è¡Œ</span>
  thisArg<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn
  <span class="token keyword">const</span> res <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>fn

  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><h2><code>bind()</code></h2>
<p><code>bind()</code> å‡½æ•°ç¨æœ‰ä¸åŒï¼Œå®ƒè¿”å›ä¸€ä¸ªæ”¹å˜äº† <code>this</code> çš„å‡½æ•°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¤„ç† thisArg</span>
  thisArg <span class="token operator">=</span> thisArg <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> thisArg <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token function">Object</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">)</span> <span class="token operator">:</span> window

  <span class="token comment">// è·å–å¾…æ‰§è¡Œå‡½æ•°</span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">_bind</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>newArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ”¶é›†å‚æ•°</span>
    <span class="token keyword">const</span> finalArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>newArgs<span class="token punctuation">]</span>

    <span class="token comment">// æ‰§è¡Œ</span>
    thisArg<span class="token punctuation">.</span>fn <span class="token operator">=</span> fn
    <span class="token keyword">const</span> res <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>finalArgs<span class="token punctuation">)</span>
    <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>fn

    <span class="token keyword">return</span> res
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>æ€»ç»“</h2>
<p>æ‰‹å†™ <code>call</code>ã€<code>apply</code>ã€<code>bind</code> çš„æ­¥éª¤å¤§è‡´ç›¸åŒï¼Œåªæ˜¯ <code>bind</code> å¤šäº†ä¸€ä¸ªæ”¶é›†å‚æ•°çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>å¤„ç† thisArg;</li>
<li>è·å–å¾…æ‰§è¡Œå‡½æ•°ï¼›</li>
<li>æ‰§è¡Œå‡½æ•°ï¼ˆ<code>bind()</code> è¿˜æœ‰ä¸€ä¸ªæ”¶é›†å‚æ•°çš„è¿‡ç¨‹ï¼‰ã€‚</li>
</ol>
<p>æ— è®ºæ˜¯åœ¨è·å–å‡½æ•°è¿˜æ˜¯æ‰§è¡Œå‡½æ•°ï¼ˆæ”¹å˜ <code>this</code>ï¼‰çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½æ˜¯åˆ©ç”¨äº†éšå¼ç»‘å®šæ”¹å˜ <code>this</code> æŒ‡å‘çš„è§„åˆ™ã€‚</p>
]]></content>
    <category term="JavaScript"/>
    <published>2022-04-27T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å‡½æ•°</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/015-function.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/015-function.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ç®­å¤´å‡½æ•°</h2>
<p>ES6 ä¸­æ–°å¢äº† <code>=&gt;</code>ï¼Œå®ƒå¯ä»¥å°†å‡½æ•°å®šä¹‰æˆç®­å¤´å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>ç®­å¤´å‡½æ•°</h2>
<p>ES6 ä¸­æ–°å¢äº† <code>=&gt;</code>ï¼Œå®ƒå¯ä»¥å°†å‡½æ•°å®šä¹‰æˆç®­å¤´å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨ <code>arguments</code>ã€<code>super</code> å’Œ <code>new.target</code>ï¼Œä¹Ÿä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚æ­¤å¤–ï¼Œç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰ <code>prototype</code> å±æ€§ã€‚</p>
</div>
<h2>å‡½æ•°å</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°åå¯ä»¥æ˜¯ä»»ä½•æ ‡è¯†ç¬¦ã€‚</p>
<p>ECMAScript 6 çš„æ‰€æœ‰å‡½æ•°å¯¹è±¡éƒ½ä¼šæš´éœ²ä¸€ä¸ªåªè¯»çš„ <code>name</code> å±æ€§ï¼Œå…¶ä¸­åŒ…å«å…³äºå‡½æ•°çš„ä¿¡æ¯ã€‚</p>
<p>å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå±æ€§ä¸­ä¿å­˜çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ ‡è¯†ç¬¦ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åŒ–çš„å˜é‡åã€‚å³ä½¿å‡½æ•°æ²¡æœ‰åç§°ï¼Œä¹Ÿä¼šå¦‚å®æ˜¾ç¤ºæˆç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœå®ƒæ˜¯ä½¿ç”¨ <code>Function</code> æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œåˆ™ä¼šæ ‡è¯†æˆ <code>anonymous</code>ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">baz</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// foo</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// bar</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// baz</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// anonymous</span>
</code></pre></div><p>å¦‚æœå‡½æ•°æ˜¯ä¸€ä¸ªè·å–å‡½æ•°ã€è®¾ç½®å‡½æ•°ï¼Œæˆ–è€…ä½¿ç”¨ <code>bind()</code> å®ä¾‹åŒ–ï¼Œé‚£ä¹ˆæ ‡è¯†ç¬¦å‰é¢ä¼šåŠ ä¸Šä¸€ä¸ªå‰ç¼€ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// bound foo</span>

<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">years</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>years
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token parameter">newAge</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>years <span class="token operator">=</span> newAge
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> propertyDescriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>propertyDescriptor<span class="token punctuation">.</span>get<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// get age</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>propertyDescriptor<span class="token punctuation">.</span>set<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// set age</span>
</code></pre></div><h2>å‚æ•°</h2>
<p>å‡½æ•°æ—¢ä¸å…³å¿ƒä¼ å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œä¹Ÿä¸å…³å¿ƒè¿™äº›å‚æ•°çš„æ•°æ®ç±»å‹ã€‚å®šä¹‰å‡½æ•°æ—¶è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸æ„å‘³ç€è°ƒç”¨æ—¶å°±ä¼ ä¸¤ä¸ªå‚æ•°ã€‚ä½ å¯ä»¥ä¼ ä¸€ä¸ªã€ä¸‰ä¸ªï¼Œç”šè‡³ä¸€ä¸ªä¹Ÿä¸ä¼ ï¼Œè§£é‡Šå™¨éƒ½ä¸ä¼šæŠ¥é”™ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¹‹æ‰€ä»¥ä¼šè¿™æ ·ï¼Œä¸»è¦æ˜¯å› ä¸º ECMAScript å‡½æ•°çš„å‚æ•°åœ¨å†…éƒ¨è¡¨ç°ä¸ºä¸€ä¸ªæ•°ç»„ã€‚ä½†å‡½æ•°å¹¶ä¸å…³å¿ƒè¿™ä¸ªæ•°ç»„ä¸­åŒ…å«ä»€ä¹ˆã€‚å¦‚æœæ•°ç»„ä¸­ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œé‚£æ²¡é—®é¢˜ï¼›å¦‚æœæ•°ç»„çš„å…ƒç´ è¶…å‡ºäº†è¦æ±‚ï¼Œé‚£ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>äº‹å®ä¸Šï¼Œåœ¨ä½¿ç”¨ <code>function</code> å…³é”®å­—å®šä¹‰ï¼ˆéç®­å¤´ï¼‰å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—® <code>arguments</code> å¯¹è±¡ï¼ˆå‚è§ ï¼‰ï¼Œä»ä¸­å–å¾—ä¼ è¿›æ¥çš„æ¯ä¸ªå‚æ•°å€¼ã€‚</p>
</div>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ECMAScript ä¸­çš„æ‰€æœ‰å‚æ•°éƒ½æŒ‰å€¼ä¼ é€’çš„ã€‚ä¸å¯èƒ½æŒ‰å¼•ç”¨ä¼ é€’å‚æ•°ã€‚å¦‚æœæŠŠå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œé‚£ä¹ˆä¼ é€’çš„å€¼å°±æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¯¦è§ ã€‚</p>
</div>
<h2>æ— é‡è½½</h2>
<p>ECMAScript ä¸­ï¼Œå‡½æ•°çš„é‡è½½æ˜¯ä¸å…è®¸çš„ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå‡½æ•°ç­¾åã€‚</p>
<p>è€Œåœ¨ TypeScript ä¸­ï¼Œå¯ä»¥æœ‰å‡½æ•°é‡è½½ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„ç­¾åï¼Œä½†åªæœ‰ä¸€ä¸ªå…·ä½“çš„å®ç°ã€‚è¿™ç§æœºåˆ¶å…è®¸ä¸€ä¸ªå‡½æ•°æ ¹æ®ä¸åŒçš„å‚æ•°ç±»å‹æˆ–æ•°é‡æ¥æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</p>
<p>é‡è½½å‡½æ•°åœ¨å®šä¹‰æ—¶ï¼Œå…ˆåˆ—å‡ºå¤šä¸ªå‡½æ•°ç­¾åï¼Œç„¶åæä¾›ä¸€ä¸ªå…·ä½“çš„å®ç°å‡½æ•°ï¼Œè¯¥å®ç°å‡½æ•°æ ¹æ®ä¼ å…¥çš„å‚æ•°æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> User <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> User <span class="token operator">|</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> userList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> userList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>grades <span class="token operator">===</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é»˜è®¤å‚æ•°</h2>
<p>åœ¨å‡½æ•°å®šä¹‰ä¸­çš„å‚æ•°åé¢ç”¨ <code>=</code> å°±å¯ä»¥ä¸ºå‚æ•°èµ‹ä¸€ä¸ªé»˜è®¤å€¼ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">makeKing</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'Henry'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">King </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> VIII</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">makeKing</span><span class="token punctuation">(</span><span class="token string">'Louis'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'King Louis VIII'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">makeKing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'King Henry VIII'</span>
</code></pre></div><h2>å‚æ•°æ‰©å±•å’Œæ”¶é›†</h2>
<h3>æ‰©å±•å‚æ•°</h3>
<p>å¯¹å¯è¿­ä»£å¯¹è±¡åº”ç”¨æ‰©å±•æ“ä½œç¬¦ï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œå¯ä»¥å°†å¯è¿­ä»£å¯¹è±¡æ‹†åˆ†ï¼Œå¹¶å°†è¿­ä»£è¿”å›çš„æ¯ä¸ªå€¼å•ç‹¬ä¼ å…¥ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token operator">...</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3>æ”¶é›†å‚æ•°</h3>
<p>åœ¨æ„æ€å‡½æ•°å®šä¹‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•æ“ä½œç¬¦æŠŠä¸åŒé•¿åº¦çš„ç‹¬ç«‹å‚æ•°ç»„åˆä¸ºä¸€ä¸ªæ•°ç»„ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼ <code>arguments</code> å¯¹è±¡çš„æ„é€ æœºåˆ¶ï¼Œåªä¸è¿‡æ”¶é›†å‚æ•°çš„ç»“æœä¼šå¾—åˆ°ä¸€ä¸ª Array å®ä¾‹ã€‚</p>
<p>ä¸”æ”¶é›†å‚æ•°åªèƒ½æ”¾åœ¨æœ€åä¸€ä¸ªå‚æ•°ä½ç½®ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ignoreFirst</span><span class="token punctuation">(</span><span class="token parameter">firstValue<span class="token punctuation">,</span> <span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">ignoreFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// []</span>
<span class="token function">ignoreFirst</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// []</span>
<span class="token function">ignoreFirst</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// [2]</span>
<span class="token function">ignoreFirst</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [2, 3]</span>
</code></pre></div><h2>å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼</h2>
<p>å‡½æ•°å£°æ˜ä¼šåœ¨ä»»ä½•ä»£ç æ‰§è¡Œä¹‹å‰å…ˆè¢«è¯»å–å¹¶æ·»åŠ åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸ä¼šã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// æŠ¥é”™</span>
<span class="token keyword">let</span> <span class="token function-variable function">sum2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2
<span class="token punctuation">}</span>
</code></pre></div><h2>å‡½æ•°ä½œä¸ºå€¼</h2>
<p>å› ä¸ºå‡½æ•°ååœ¨ ECMAScript ä¸­å°±æ˜¯å˜é‡ï¼Œæ‰€ä»¥å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»ä½•å¯ä»¥ä½¿ç”¨å˜é‡çš„åœ°æ–¹ã€‚è¿™æ„å‘³ç€ä¸ä»…å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”è¿˜å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>
<h2>å‡½æ•°å†…éƒ¨</h2>
<p>åœ¨ ECMAScript 5 ä¸­ï¼Œå‡½æ•°å†…éƒ¨å­˜åœ¨ä¸¤ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼š<code>arguments</code> å’Œ <code>this</code>ã€‚ECMAScript 6 åˆæ–°å¢äº† <code>new.target</code> å±æ€§ã€‚</p>
<h3>arguments</h3>
<p><code>arguments</code> å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª <code>callee</code> å±æ€§ï¼Œæ˜¯ä¸€ä¸ªæŒ‡å‘ <code>arguments</code> å¯¹è±¡æ‰€åœ¨å‡½æ•°çš„æŒ‡é’ˆã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ªå‡½æ•°è¦æ­£ç¡®æ‰§è¡Œå°±å¿…é¡»ä¿è¯å‡½æ•°åæ˜¯ <code>factorial</code>ï¼Œä»è€Œå¯¼è‡´äº†ç´§å¯†è€¦åˆã€‚ä½¿ç”¨ <code>arguments.callee</code> å°±å¯ä»¥è®©å‡½æ•°é€»è¾‘ä¸å‡½æ•°åè§£è€¦ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">*</span> arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>this</h3>
<p>è¯¦è§ ã€‚</p>
<h3>new.target</h3>
<p>ECMAScript ä¸­çš„å‡½æ•°å§‹ç»ˆå¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ™®é€šå‡½æ•°è¢«è°ƒç”¨ã€‚ECMAScript 6 æ–°å¢äº†æ£€æµ‹å‡½æ•°æ˜¯å¦ä½¿ç”¨ <code>new</code> å…³é”®å­—è°ƒç”¨çš„ <code>new.target</code> å±æ€§ã€‚</p>
<p>å¦‚æœå‡½æ•°æ˜¯æ­£å¸¸è°ƒç”¨çš„ï¼Œ<code>new.target</code> å°†è¿”å› <code>undefined</code>ï¼Œå¦‚æœå‡½æ•°è¢« <code>new</code> å…³é”®å­—è°ƒç”¨ï¼Œåˆ™ <code>new.target</code> å°†è¿”å›è¿™ä¸ªå‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">King</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">'King must be instantiated using "new"'</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'King instantiated using "new"'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">King</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// King instantiated using "new"</span>
<span class="token function">King</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Error: King must be instantiated using "new"</span>
</code></pre></div><h2>å‡½æ•°å±æ€§å’Œæ–¹æ³•</h2>
<p>ECMAScript ä¸­çš„å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå› æ­¤æœ‰å±æ€§å’Œæ–¹æ³•ã€‚æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š<code>length</code> å’Œ <code>prototype</code>ã€‚å…¶ä¸­ï¼Œ<code>length</code> å±æ€§ä¿å­˜å‡½æ•°å®šä¹‰çš„å‘½åå‚æ•°çš„ä¸ªæ•°ï¼Œ<code>prototype</code> å±æ€§ä¿å­˜å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚</p>
<p>å‡½æ•°è¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<code>apply()</code> å’Œ <code>call()</code>ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šä»¥æŒ‡å®šçš„ <code>this</code> å€¼æ¥è°ƒç”¨å‡½æ•°ï¼Œå³ä¼šè®¾ç½®è°ƒç”¨å‡½æ•°æ—¶å‡½æ•°ä½“å†… <code>this</code> å¯¹è±¡çš„å€¼ã€‚</p>
<h2>å°¾è°ƒç”¨ä¼˜åŒ–</h2>
<p>ECMAScript 6 è§„èŒƒæ–°å¢äº†ä¸€é¡¹å†…å­˜ç®¡ç†ä¼˜åŒ–æœºåˆ¶ï¼Œè®© JavaScript å¼•æ“åœ¨æ»¡è¶³æ¡ä»¶æ—¶å¯ä»¥é‡ç”¨æ ˆå¸§ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œè¿™é¡¹ä¼˜åŒ–éå¸¸é€‚åˆã€Œå°¾è°ƒç”¨ã€ï¼Œå³å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå†…éƒ¨å‡½æ•°çš„è¿”å›å€¼ã€‚æ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å°¾è°ƒç”¨</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ ES6 ä¼˜åŒ–ä¹‹å‰ï¼Œæ‰§è¡Œè¿™ä¸ªä¾‹å­ä¼šåœ¨å†…å­˜ä¸­å‘ç”Ÿå¦‚ä¸‹æ“ä½œã€‚</p>
<ol>
<li>æ‰§è¡Œåˆ° <code>outerFunction</code> å‡½æ•°ä½“ï¼Œç¬¬ä¸€ä¸ªæ ˆå¸§è¢«æ¨åˆ°æ ˆä¸Šã€‚</li>
<li>æ‰§è¡Œ <code>outerFunction</code> å‡½æ•°ä½“ï¼Œåˆ° <code>return</code> è¯­å¥ã€‚è®¡ç®—è¿”å›å€¼å¿…é¡»å…ˆè®¡ç®— <code>innerFunction</code>ã€‚</li>
<li>æ‰§è¡Œåˆ° <code>innerFunction</code> å‡½æ•°ä½“ï¼Œç¬¬äºŒä¸ªæ ˆå¸§è¢«æ¨åˆ°æ ˆä¸Šã€‚</li>
<li>æ‰§è¡Œ <code>innerFunction</code> å‡½æ•°ä½“ï¼Œè®¡ç®—å…¶è¿”å›å€¼ã€‚</li>
<li>å°†è¿”å›å€¼ä¼ å› <code>outerFunction</code>ï¼Œç„¶å <code>outerFunction</code> å†è¿”å›å€¼ã€‚</li>
<li>å°†æ ˆå¸§å¼¹å‡ºæ ˆå¤–ã€‚</li>
</ol>
<p>åœ¨ ES6 ä¼˜åŒ–ä¹‹åï¼Œæ‰§è¡Œè¿™ä¸ªä¾‹å­ä¼šåœ¨å†…å­˜ä¸­å‘ç”Ÿå¦‚ä¸‹æ“ä½œã€‚</p>
<ol>
<li>æ‰§è¡Œåˆ° outerFunction å‡½æ•°ä½“ï¼Œç¬¬ä¸€ä¸ªæ ˆå¸§è¢«æ¨åˆ°æ ˆä¸Šã€‚</li>
<li>æ‰§è¡Œ outerFunction å‡½æ•°ä½“ï¼Œåˆ°è¾¾ return è¯­å¥ã€‚ä¸ºæ±‚å€¼è¿”å›è¯­å¥ï¼Œå¿…é¡»å…ˆæ±‚å€¼ innerFunctionã€‚</li>
<li>å¼•æ“å‘ç°æŠŠç¬¬ä¸€ä¸ªæ ˆå¸§å¼¹å‡ºæ ˆå¤–ä¹Ÿæ²¡é—®é¢˜ï¼Œå› ä¸º innerFunction çš„è¿”å›å€¼ä¹Ÿæ˜¯ outerFunction<br>
çš„è¿”å›å€¼ã€‚</li>
<li>å¼¹å‡º outerFunction çš„æ ˆå¸§ã€‚</li>
<li>æ‰§è¡Œåˆ° innerFunction å‡½æ•°ä½“ï¼Œæ ˆå¸§è¢«æ¨åˆ°æ ˆä¸Šã€‚</li>
<li>æ‰§è¡Œ innerFunction å‡½æ•°ä½“ï¼Œè®¡ç®—å…¶è¿”å›å€¼ã€‚</li>
<li>å°† innerFunction çš„æ ˆå¸§å¼¹å‡ºæ ˆå¤–ã€‚</li>
</ol>
<p>å¾ˆæ˜æ˜¾ï¼Œç¬¬ä¸€ç§æƒ…å†µä¸‹æ¯å¤šè°ƒç”¨ä¸€æ¬¡åµŒå¥—å‡½æ•°ï¼Œå°±ä¼šå¤šå¢åŠ ä¸€ä¸ªæ ˆå¸§ã€‚è€Œç¬¬äºŒç§æƒ…å†µä¸‹æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡åµŒå¥—å‡½æ•°ï¼Œéƒ½åªæœ‰ä¸€ä¸ªæ ˆå¸§ã€‚è¿™å°±æ˜¯ ES6 å°¾è°ƒç”¨ä¼˜åŒ–çš„å…³é”®ï¼šå¦‚æœå‡½æ•°çš„é€»è¾‘å…è®¸åŸºäºå°¾è°ƒç”¨å°†å…¶<br>
é”€æ¯ï¼Œåˆ™å¼•æ“å°±ä¼šé‚£ä¹ˆåšã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ç°åœ¨è¿˜æ²¡æœ‰åŠæ³•æµ‹è¯•å°¾è°ƒç”¨ä¼˜åŒ–æ˜¯å¦èµ·ä½œç”¨ã€‚ä¸è¿‡ï¼Œå› ä¸ºè¿™æ˜¯ ES6 è§„èŒƒæ‰€è§„å®šçš„ï¼Œå…¼å®¹çš„æµè§ˆå™¨å®ç°éƒ½èƒ½ä¿è¯åœ¨ä»£ç æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹åº”ç”¨è¿™ä¸ªä¼˜åŒ–ã€‚</p>
</div>
<h3>æ¡ä»¶</h3>
<p>å°¾è°ƒç”¨ä¼˜åŒ–çš„æ¡ä»¶å°±æ˜¯ç¡®å®šå¤–éƒ¨æ ˆå¸§çœŸçš„æ²¡æœ‰å¿…è¦å­˜åœ¨äº†ã€‚æ¶‰åŠçš„æ¡ä»¶å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸¥æ ¼æ¨¡å¼ï¼›</li>
<li>å¤–éƒ¨å‡½æ•°çš„è¿”å›å€¼æ˜¯å¯¹å°¾è°ƒç”¨å‡½æ•°çš„è°ƒç”¨ï¼›</li>
<li>å°¾è°ƒç”¨å‡½æ•°è¿”å›åä¸éœ€è¦æ‰§è¡Œé¢å¤–çš„é€»è¾‘ï¼›</li>
<li>å°¾è°ƒç”¨å‡½æ•°ä¸æ˜¯å¼•ç”¨å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­è‡ªç”±å˜é‡çš„é—­åŒ…ã€‚</li>
</ul>
<p>ä¸‹é¢å±•ç¤ºäº†å‡ ä¸ªè¿åä¸Šè¿°æ¡ä»¶çš„å‡½æ•°ï¼Œå› æ­¤éƒ½ä¸ç¬¦å·å°¾è°ƒç”¨ä¼˜åŒ–çš„è¦æ±‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token string">'use strict'</span>
<span class="token comment">// æ— ä¼˜åŒ–ï¼šå°¾è°ƒç”¨æ²¡æœ‰è¿”å›</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ— ä¼˜åŒ–ï¼šå°¾è°ƒç”¨æ²¡æœ‰ç›´æ¥è¿”å›</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> innerFunctionResult <span class="token operator">=</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> innerFunctionResult
<span class="token punctuation">}</span>
<span class="token comment">// æ— ä¼˜åŒ–ï¼šå°¾è°ƒç”¨è¿”å›åå¿…é¡»è½¬å‹ä¸ºå­—ç¬¦ä¸²</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ— ä¼˜åŒ–ï¼šå°¾è°ƒç”¨æ˜¯ä¸€ä¸ªé—­åŒ…</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'bar'</span>
  <span class="token keyword">function</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> foo
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸‹é¢æ˜¯å‡ ä¸ªç¬¦åˆå°¾è°ƒç”¨ä¼˜åŒ–æ¡ä»¶çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token string">'use strict'</span>
<span class="token comment">// æœ‰ä¼˜åŒ–ï¼šæ ˆå¸§é”€æ¯å‰æ‰§è¡Œå‚æ•°è®¡ç®—</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æœ‰ä¼˜åŒ–ï¼šåˆå§‹è¿”å›å€¼ä¸æ¶‰åŠæ ˆå¸§</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æœ‰ä¼˜åŒ–ï¼šä¸¤ä¸ªå†…éƒ¨å‡½æ•°éƒ½åœ¨å°¾éƒ¨</span>
<span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token parameter">condition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> condition <span class="token operator">?</span> <span class="token function">innerFunctionA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">innerFunctionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>å°¾è°ƒç”¨ä¼˜åŒ–</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªé€šè¿‡é€’å½’è®¡ç®—æ–æ³¢çº³å¥‘æ•°åˆ—çš„å‡½æ•°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> n
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fib</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>
</code></pre></div><p>æ˜¾ç„¶è¿™ä¸ªå‡½æ•°ä¸ç¬¦åˆå°¾è°ƒç”¨ä¼˜åŒ–çš„æ¡ä»¶ï¼Œå› ä¸ºè¿”å›è¯­å¥ä¸­æœ‰ä¸€ä¸ªç›¸åŠ çš„æ“ä½œã€‚ç»“æœï¼Œ<code>fib(n)</code> çš„æ ˆå¸§æ•°çš„å†…å­˜å¤æ‚åº¦æ˜¯ <code>O(2n)</code>ã€‚</p>
<p>åˆ©ç”¨å°¾è°ƒç”¨ä¼˜åŒ–ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token string">'use strict'</span>
<span class="token comment">// åŸºç¡€æ¡†æ¶</span>
<span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ‰§è¡Œé€’å½’</span>
<span class="token keyword">function</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">fibImpl</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>é—­åŒ…</h2>
<p>ç®€è€Œè¨€ä¹‹æ˜¯æŒ‡å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¿™ä¸ªå†…éƒ¨å‡½æ•°å°±æ˜¯é—­åŒ…ã€‚</p>
<p>è™½ç„¶å¤–éƒ¨å‡½æ•°å·²ç»è¿è¡Œå®Œæ¯•ï¼Œä½†ç”±äºé—­åŒ…çš„å­˜åœ¨ï¼Œå†…éƒ¨å‡½æ•°ä¾ç„¶å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œè¯¥å˜é‡ä¸ä¼šè¢«é”€æ¯ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'bar'</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> foo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 'bar'</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¸€äº›é—­åŒ…åœºæ™¯ï¼š</p>
<ul>
<li>èŠ‚æµé˜²æŠ–</li>
<li>å‡½æ•°æŸ¯é‡ŒåŒ–</li>
<li>é“¾å¼è°ƒç”¨</li>
<li>è¿­ä»£å™¨</li>
<li>å‘å¸ƒè®¢é˜…</li>
</ul>
<p>å› ä¸ºé—­åŒ…ä¼šä¿ç•™å®ƒä»¬åŒ…å«å‡½æ•°çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥æ¯”å…¶ä»–å‡½æ•°æ›´å ç”¨å†…å­˜ã€‚è¿‡åº¦ä½¿ç”¨é—­åŒ…å¯èƒ½å¯¼è‡´å†…å­˜è¿‡åº¦å ç”¨ï¼Œå› æ­¤å»ºè®®ä»…åœ¨ååˆ†å¿…è¦æ—¶ä½¿ç”¨ã€‚</p>
</div>
<h2>ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰</h2>
<p>ç«‹å³è°ƒç”¨çš„åŒ¿åå‡½æ•°åˆè¢«ç§°ä½œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼ŒImmediately Invoked Function Expressionï¼‰ã€‚å®ƒç±»ä¼¼äºå‡½æ•°å£°æ˜ï¼Œä½†ç”±äºè¢«åŒ…å«åœ¨æ‹¬å·ä¸­ï¼Œæ‰€ä»¥ä¼šè¢«è§£é‡Šä¸ºå‡½æ•°è¡¨è¾¾å¼ã€‚ç´§è·Ÿåœ¨ç¬¬ä¸€ç»„æ‹¬å·åé¢çš„ç¬¬äºŒç»„æ‹¬å·ä¼šç«‹å³è°ƒç”¨å‰é¢çš„å‡½æ•°è¡¨è¾¾å¼ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å—çº§ä½œç”¨åŸŸ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>å…·ä½“åº”ç”¨è§ ã€‚</p>
<h2>ç§æœ‰å˜é‡</h2>
<p>ä¸¥æ ¼æ¥è®²ï¼ŒJavaScript æ²¡æœ‰ç§æœ‰æˆå‘˜çš„æ¦‚å¿µï¼Œæ‰€æœ‰å¯¹è±¡å±æ€§éƒ½å…¬æœ‰çš„ã€‚ä¸è¿‡ï¼Œå€’æ˜¯æœ‰ã€Œç§æœ‰å˜é‡ã€çš„æ¦‚å¿µã€‚ä»»ä½•å®šä¹‰åœ¨å‡½æ•°æˆ–å—ä¸­çš„å˜é‡ï¼Œéƒ½å¯ä»¥è®¤ä¸ºæ˜¯ç§æœ‰çš„ï¼Œå› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°æˆ–å—çš„å¤–éƒ¨æ— æ³•è®¿é—®å…¶ä¸­çš„å˜é‡ã€‚ç§æœ‰å˜é‡åŒ…æ‹¬å‡½æ•°å‚æ•°ã€å±€éƒ¨å˜é‡ï¼Œä»¥åŠå‡½æ•°å†…éƒ¨å®šä¹‰çš„å…¶ä»–å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> num1 <span class="token operator">+</span> num2
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå‡½æ•° <code>add()</code> æœ‰ 3 ä¸ªç§æœ‰å˜é‡ï¼š<code>num1</code>ã€<code>num2</code> å’Œ <code>sum</code>ã€‚è¿™å‡ ä¸ªå˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ï¼Œåˆ™è¿™ä¸ªé—­åŒ…èƒ½é€šè¿‡å…¶ä½œç”¨åŸŸé“¾è®¿é—®å…¶å¤–éƒ¨çš„è¿™ 3 ä¸ªå˜é‡ã€‚åŸºäºè¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥åˆ›å»ºå‡ºèƒ½å¤Ÿè®¿é—®ç§æœ‰å˜é‡çš„å…¬æœ‰æ–¹æ³•ã€‚</p>
<p><strong>ç‰¹æƒæ–¹æ³•ï¼ˆprivileged methodï¼‰</strong> æ˜¯èƒ½å¤Ÿè®¿é—®å‡½æ•°ç§æœ‰å˜é‡ï¼ˆåŠç§æœ‰å‡½æ•°ï¼‰çš„å…¬æœ‰æ–¹æ³•ã€‚åœ¨å¯¹è±¡ä¸Šæœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºç‰¹æƒæ–¹æ³•ã€‚ç¬¬ä¸€ç§æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­å®ç°ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">MyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span>
  <span class="token keyword">let</span> privateVariable <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">function</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç‰¹æƒæ–¹æ³•</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">publicMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    privateVariable<span class="token operator">++</span>
    <span class="token keyword">return</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™é‡Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªé—­åŒ…ï¼Œåœ¨åˆ›å»ºå®ä¾‹åï¼Œåªèƒ½é€šè¿‡ <code>MyObject.prototype.publicMethod()</code> è°ƒç”¨ <code>privateVariable</code> å’Œ <code>privateFunction</code>ã€‚</p>
<h3>é™æ€ç§æœ‰å˜é‡</h3>
<p>è¯¥æ¨¡å¼ä¸å¸¸ç”¨ï¼Œç®€å•çœ‹çœ‹ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span>
  <span class="token keyword">let</span> privateVariable <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">function</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æ„é€ å‡½æ•°</span>
  <span class="token function-variable function">MyObject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// å…¬æœ‰å’Œç‰¹æƒæ–¹æ³•</span>
  <span class="token class-name">MyObject</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">publicMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    privateVariable<span class="token operator">++</span>
    <span class="token keyword">return</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä½¿ç”¨é—­åŒ…å’Œç§æœ‰å˜é‡ä¼šå¯¼è‡´ä½œç”¨åŸŸé“¾å˜é•¿ï¼Œä½œç”¨åŸŸé“¾è¶Šé•¿ï¼Œåˆ™æŸ¥æ‰¾å˜é‡æ‰€éœ€çš„æ—¶é—´ä¹Ÿè¶Šå¤šã€‚</p>
</div>
<h3>æ¨¡å—æ¨¡å¼</h3>
<p>æ¨¡å—æ¨¡å¼ï¼Œåˆ™åœ¨ä¸€ä¸ªå•ä¾‹å¯¹è±¡ä¸Šå®ç°äº†ç›¸åŒçš„éš”ç¦»å’Œå°è£…ã€‚å•ä¾‹å¯¹è±¡ï¼ˆsingletonï¼‰å°±æ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼ŒJavaScript æ˜¯é€šè¿‡å¯¹è±¡å­—é¢é‡æ¥åˆ›å»ºå•ä¾‹å¯¹è±¡çš„ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span>
  <span class="token keyword">let</span> privateVariable <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">function</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ç‰¹æƒ/å…¬æœ‰æ–¹æ³•å’Œå±æ€§</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">publicProperty</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function">publicMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      privateVariable<span class="token operator">++</span>
      <span class="token keyword">return</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ç±»ä¼¼ä¸€äº› hooks çš„å°è£…ã€‚</p>
</div>
<h3>æ¨¡å—å¢å¼ºæ¨¡å¼</h3>
<p>å¦ä¸€ä¸ªåˆ©ç”¨æ¨¡å—æ¨¡å¼çš„åšæ³•æ˜¯åœ¨è¿”å›å¯¹è±¡ä¹‹å‰å…ˆå¯¹å…¶è¿›è¡Œå¢å¼ºã€‚è¿™é€‚åˆå•ä¾‹å¯¹è±¡éœ€è¦æ˜¯æŸä¸ªç‰¹å®šç±»å‹çš„å®ä¾‹ï¼Œä½†åˆå¿…é¡»ç»™å®ƒæ·»åŠ é¢å¤–å±æ€§æˆ–æ–¹æ³•çš„åœºæ™¯ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç§æœ‰å˜é‡å’Œç§æœ‰å‡½æ•°</span>
  <span class="token keyword">let</span> privateVariable <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token keyword">function</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// åˆ›å»ºå¯¹è±¡</span>
  <span class="token keyword">let</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// æ·»åŠ ç‰¹æƒ/å…¬æœ‰å±æ€§å’Œæ–¹æ³•</span>
  object<span class="token punctuation">.</span>publicProperty <span class="token operator">=</span> <span class="token boolean">true</span>
  object<span class="token punctuation">.</span><span class="token function-variable function">publicMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    privateVariable<span class="token operator">++</span>
    <span class="token keyword">return</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è¿”å›å¯¹è±¡</span>
  <span class="token keyword">return</span> object
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2024-07-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">this æŒ‡å‘</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/016-this.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/016-this.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡ ä¹éƒ½æœ‰ <code>this</code> å…³é”®å­—ï¼Œä½†æ˜¯ JavaScript ä¸­çš„ <code>this</code> å’Œå¸¸è§çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ <code>this</code> ä¸å¤ªä¸€æ ·ï¼š</p>
<ul>
<li>å¸¸è§çš„é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚ Javaã€C++ã€Swift ç­‰ï¼Œ<code>this</code> é€šå¸¸åªä¼šå‡ºç°åœ¨ç±»çš„æ–¹æ³•ä¸­ï¼Œ<code>this</code> ä»£è¡¨çš„æ˜¯å½“å‰è°ƒç”¨å¯¹è±¡ï¼›</li>
<li>ä½†æ˜¯ JavaScript ä¸­çš„ <code>this</code> æ›´åŠ çµæ´»ï¼Œæ— è®ºæ˜¯å®ƒå‡ºç°çš„ä½ç½®è¿˜æ˜¯ä»£è¡¨çš„å«ä¹‰ã€‚</li>
</ul>
<p>åœ¨  ä¸­æåˆ°è¿‡ï¼šä¸Šä¸‹æ–‡ä¸­ä¼šåŒ…å« <code>this</code> æŒ‡å‘ï¼Œé‚£ä¹ˆä¸åŒçš„ä¸Šä¸‹æ–‡çš„ <code>this</code> æŒ‡å‘è‚¯å®šä¼šä¸åŒã€‚ä¸‹é¢å°±æ¥å…·ä½“çœ‹çœ‹ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡ ä¹éƒ½æœ‰ <code>this</code> å…³é”®å­—ï¼Œä½†æ˜¯ JavaScript ä¸­çš„ <code>this</code> å’Œå¸¸è§çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ <code>this</code> ä¸å¤ªä¸€æ ·ï¼š</p>
<ul>
<li>å¸¸è§çš„é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚ Javaã€C++ã€Swift ç­‰ï¼Œ<code>this</code> é€šå¸¸åªä¼šå‡ºç°åœ¨ç±»çš„æ–¹æ³•ä¸­ï¼Œ<code>this</code> ä»£è¡¨çš„æ˜¯å½“å‰è°ƒç”¨å¯¹è±¡ï¼›</li>
<li>ä½†æ˜¯ JavaScript ä¸­çš„ <code>this</code> æ›´åŠ çµæ´»ï¼Œæ— è®ºæ˜¯å®ƒå‡ºç°çš„ä½ç½®è¿˜æ˜¯ä»£è¡¨çš„å«ä¹‰ã€‚</li>
</ul>
<p>åœ¨  ä¸­æåˆ°è¿‡ï¼šä¸Šä¸‹æ–‡ä¸­ä¼šåŒ…å« <code>this</code> æŒ‡å‘ï¼Œé‚£ä¹ˆä¸åŒçš„ä¸Šä¸‹æ–‡çš„ <code>this</code> æŒ‡å‘è‚¯å®šä¼šä¸åŒã€‚ä¸‹é¢å°±æ¥å…·ä½“çœ‹çœ‹ã€‚</p>
<h2>å…¨å±€ä¸Šä¸‹æ–‡</h2>
<p>æ— è®ºæ˜¯å¦å¤„äºä¸¥æ ¼æ¨¡å¼ï¼Œå…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„ <code>this</code> éƒ½æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> window<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h2>å‡½æ•°ä¸Šä¸‹æ–‡</h2>
<p>åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code> æŒ‡å‘å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼Œä¸€å…±åˆ†ä¸ºå››ç§ã€‚</p>
<ul>
<li>é»˜è®¤ç»‘å®š</li>
<li>éšå¼ç»‘å®š</li>
<li>æ˜¾å¼ç»‘å®š</li>
<li>new ç»‘å®š</li>
</ul>
<h3>é»˜è®¤ç»‘å®š</h3>
<p>é»˜è®¤ç»‘å®šå³ä¸ºç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºæ²¡æœ‰ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ä¸Šè¿›è¡Œè°ƒç”¨ã€‚</p>
<p>ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹ <code>this</code> çš„æŒ‡å‘ä¼šæœ‰æ‰€ä¸åŒã€‚</p>
<p>éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç‹¬ç«‹è°ƒç”¨å‡½æ•°çš„ <code>this</code> æŒ‡å‘ä¸ºå…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¸º <code>window</code>ï¼Œnode ä¸­ä¸º <code>global</code>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>

<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> window <span class="token comment">// true</span>
</code></pre></div><p>è€Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç‹¬ç«‹è°ƒç”¨å‡½æ•°çš„ <code>this</code> æŒ‡å‘ä¸º <code>undefined</code>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span> <span class="token comment">// è¿™é‡Œæ˜¯ä¸¥æ ¼æ¨¡å¼</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span>

<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token comment">// true</span>
</code></pre></div><h3>éšå¼ç»‘å®šï¼ˆå¯¹è±¡å‡½æ•°è°ƒç”¨ï¼‰</h3>
<p>é€šè¿‡å¯¹è±¡å‘èµ·çš„å‡½æ•°è°ƒç”¨ï¼Œ<code>this</code> ä¼šæŒ‡å‘è°ƒç”¨è€…æœ¬èº«ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ¡ˆä¾‹ä¸€</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'why'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj å¯¹è±¡å‘èµ·çš„å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤ this æŒ‡å‘ obj å¯¹è±¡</span>

<span class="token comment">// æ¡ˆä¾‹äºŒ</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'wang'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">eating</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'åœ¨åƒä¸œè¥¿'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">eating</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wangåœ¨åƒä¸œè¥¿</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> obj<span class="token punctuation">.</span>eating
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefinedåœ¨åƒä¸œè¥¿ -&gt; æ²¡æœ‰å¯¹è±¡è°ƒç”¨ï¼Œè¿˜æ˜¯é»˜è®¤ç»‘å®š</span>

<span class="token comment">// æ¡ˆä¾‹ä¸‰</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj1'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj2'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> obj1<span class="token punctuation">.</span>foo
<span class="token punctuation">}</span>

obj2<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj2</span>
</code></pre></div><h3>æ˜¾ç¤ºç»‘å®š</h3>
<p>å‰é¢çš„éšå¼ç»‘å®šå­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼šå¯¹è±¡å†…éƒ¨å¿…é¡»æœ‰ä¸€ä¸ªå‡½æ•°çš„å¼•ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›åœ¨ <strong>å¯¹è±¡å†…éƒ¨</strong> åŒ…å«è¿™ä¸ªå‡½æ•°çš„å¼•ç”¨ï¼ŒåŒæ—¶åˆå¸Œæœ›åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šå¼ºåˆ¶è°ƒç”¨ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>JavaScript æä¾›äº†ä¸‰ä¸ªæ”¹å˜ this æŒ‡å‘çš„å‡½æ•°ï¼š<code>call()</code>ã€<code>apply()</code> å’Œ <code>bind()</code>ã€‚å®ƒä»¬éƒ½èƒ½æ”¹å˜ this æŒ‡å‘ï¼Œä½†æ˜¯éƒ½æœ‰ä¸€äº›ç»†å¾®çš„åŒºåˆ«ã€‚</p>
<h4><code>Function.prototype.call()</code></h4>
<p>è¯­æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸º this å€¼ï¼ˆå¯é€‰ï¼Œè‹¥çœç•¥æˆ–æŒ‡å®šä¸º <code>null</code> æˆ– <code>undefined</code> åˆ™ä¸ºå…¨å±€å¯¹è±¡ï¼‰ï¼Œåé¢ä¸ºå‚æ•°åˆ—è¡¨ã€‚<code>call()</code> ä¼šç«‹å³è°ƒç”¨è¯¥å‡½æ•°ï¼Œå› æ­¤è¿”å›å€¼ä¸ºè¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">[</span><span class="token punctuation">,</span> arg1<span class="token punctuation">[</span><span class="token punctuation">,</span> arg2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å‡½æ•°è¢«è°ƒç”¨äº†'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj'</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// å‡½æ•°è¢«è°ƒç”¨äº† { name: 'obj' }</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2<span class="token punctuation">,</span> num3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1 <span class="token operator">+</span> num2 <span class="token operator">+</span> num3<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'call'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token comment">// 90 [String: 'call']</span>
</code></pre></div><h4><code>Function.prototype.apply()</code></h4>
<p>è¯­æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸º this å€¼ï¼ˆå¯é€‰ï¼Œè‹¥çœç•¥æˆ–æŒ‡å®šä¸º <code>null</code> æˆ– <code>undefined</code> åˆ™ä¸ºå…¨å±€å¯¹è±¡ï¼‰ï¼Œåé¢ä¸ºå‚æ•°åˆ—è¡¨ã€‚å’Œ <code>call()</code> ä¸€æ ·ï¼Œ<code>apply()</code>ä¼šç«‹å³è°ƒç”¨è¯¥å‡½æ•°ï¼Œå› æ­¤è¿”å›å€¼ä¸ºè¯¥å‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">aplly</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token punctuation">[</span>argsArray<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å‡½æ•°è¢«è°ƒç”¨äº†'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj'</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// å‡½æ•°è¢«è°ƒç”¨äº† { name: 'obj' }</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2<span class="token punctuation">,</span> num3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1 <span class="token operator">+</span> num2 <span class="token operator">+</span> num3<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">'call'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 90 [String: 'call']</span>
</code></pre></div><h4><code>Function.prototype.bind()</code></h4>
<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›å‡½æ•°ç«‹å³è¢«æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>bind()</code>ï¼Œå®ƒå’Œ <code>call()</code>ã€<code>apply()</code> ä¸åŒï¼Œ<code>bind()</code> <strong>ä¸ä¼š</strong>ç«‹å³è°ƒç”¨è¯¥å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºæ”¹å˜ this æŒ‡å‘ä¹‹åçš„å‡½æ•°ã€‚</p>
<p><code>bind()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ <code>bind()</code> è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ this è¢«æŒ‡å®šä¸º <code>bind()</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚</p>
<p>è¯­æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸º this å€¼ï¼ˆå¯é€‰ï¼Œè‹¥çœç•¥æˆ–æŒ‡å®šä¸º <code>null</code> æˆ– <code>undefined</code> åˆ™ä¸ºå…¨å±€å¯¹è±¡ï¼‰ï¼Œåé¢ä¸ºå‚æ•°åˆ—è¡¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">[</span><span class="token punctuation">,</span> arg1<span class="token punctuation">[</span><span class="token punctuation">,</span> arg2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2<span class="token punctuation">,</span> num3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1 <span class="token operator">+</span> num2 <span class="token operator">+</span> num3<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> _bind <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'bind'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token function">_bind</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token comment">// 90 [String: 'bind']</span>
</code></pre></div><h3>new ç»‘å®š</h3>
<p>ä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼›</li>
<li>è¿™ä¸ªå¯¹è±¡çš„ <code>[[proto]]</code> å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ï¼›</li>
<li>æ„é€ å‡½æ•°å†…éƒ¨çš„ this è¢«èµ‹å€¼ä¸ºè¿™ä¸ªå¯¹è±¡ï¼ˆ<strong>new ç»‘å®š</strong>ï¼‰;</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼›</li>
<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å›åˆšæ‰åˆ›å»ºçš„æ–°å¯¹è±¡ã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å°±ä¼šæ‰§è¡Œ new ç»‘å®šã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// Person { name: 'wang', sayName: [Function (anonymous)] }</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">)</span>
</code></pre></div><h2>ä¼˜å…ˆçº§</h2>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°åº”ç”¨äº†å¤šä¸ªè§„åˆ™ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ä¼˜å…ˆçº§è°æ›´é«˜ï¼Ÿ</p>
<ol>
<li>
<p>é»˜è®¤ç»‘å®š</p>
<p>æ¯«æ— ç–‘é—®ï¼Œä¼˜å…ˆçº§æœ€ä½</p>
</li>
<li>
<p>æ˜¾å¼ç»‘å®šé«˜äºéšå¼ç»‘å®š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">foo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 1.call/applyçš„æ˜¾ç¤ºç»‘å®šé«˜äºéšå¼ç»‘å®š</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// [String: 'abc']</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token comment">// [String: 'abc']</span>

<span class="token comment">// 2.bindçš„ä¼˜å…ˆçº§é«˜äºéšå¼ç»‘å®š</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [String: 'abc']</span>
</code></pre></div></li>
<li>
<p>new ç»‘å®šé«˜äºæ˜¾ç¤ºç»‘å®š</p>
<p>new ä¸èƒ½å’Œ <code>call()</code>ã€<code>apply()</code> ä¸€èµ·ä½¿ç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// foo {}</span>
</code></pre></div></li>
</ol>
<p>å› æ­¤ä¼˜å…ˆçº§æ˜¯ new ç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š(apply/call/bind) &gt; éšå¼ç»‘å®š(obj.foo()) &gt; é»˜è®¤ç»‘å®š(ç‹¬ç«‹å‡½æ•°è°ƒç”¨)ã€‚</p>
<h2>ç®­å¤´å‡½æ•°</h2>
<p>ä¸Šé¢æ‰€è¯´çš„æ˜¯æ™®é€šå‡½æ•°çš„ this æŒ‡å‘ï¼Œè€Œåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œthis æ ¹æ®å¤–å±‚ä½œç”¨åŸŸæ¥å†³å®šã€‚</p>
<p>é‚£ä¹ˆå®ƒæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯å‘¢ï¼Ÿæ¥çœ‹ä¸€ä¸ªæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚çš„ä¾‹å­ï¼š</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>setTimeout()</code> ä¸­çš„ this å…³é”®å­—åœ¨éä¸¥æ ¼æ¨¡å¼ä¼šæŒ‡å‘ window (æˆ–å…¨å±€)å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º undefinedã€‚è¯¦è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/setTimeout#%E5%85%B3%E4%BA%8Ethis%E7%9A%84%E9%97%AE%E9%A2%98" target="_blank" rel="noopener noreferrer">window.setTimeout - Web API æ¥å£å‚è€ƒ | MDN (mozilla.org)</a></p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getData</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‘é€ç½‘ç»œè¯·æ±‚, å°†ç»“æœæ”¾åˆ°ä¸Šé¢ data å±æ€§ä¸­</span>
    <span class="token comment">// åœ¨ç®­å¤´å‡½æ•°ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆ</span>
    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
      <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'cba'</span><span class="token punctuation">,</span> <span class="token string">'nba'</span><span class="token punctuation">]</span>
      _this<span class="token punctuation">.</span>data <span class="token operator">=</span> result
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token comment">// ["abc", "cba", "nba"]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div><p>æœ‰äº†ç®­å¤´å‡½æ•°ä¹‹åï¼Œå°±ä¸å¿…ä½¿ç”¨ <code>_this = this</code> è·å–çœŸæ­£æƒ³è¦çš„ <code>this</code> äº†ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// { data: [], getData: [Function: getData] }</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'cba'</span><span class="token punctuation">,</span> <span class="token string">'nba'</span><span class="token punctuation">]</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> result
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre></div><h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://developer.mozilla.org/" target="_blank" rel="noopener noreferrer">MDN (mozilla.org)</a></li>
<li><a href="https://juejin.cn/post/6844903746984476686" target="_blank" rel="noopener noreferrer">é¢è¯•å®˜é—®ï¼šJS çš„ this æŒ‡å‘ - æ˜é‡‘ (juejin.cn)</a></li>
</ul>
]]></content>
    <category term="JavaScript"/>
    <published>2022-04-22T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ¶æ„æ¦‚è¿°</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/02-architecture-overview.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/02-architecture-overview.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://github.com/pixijs/pixijs" target="_blank" rel="noopener noreferrer">PixiJS</a> æºä»£ç ä¸­ä¸»è¦æ¨¡å—çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ¨¡å—</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Renderer</td>
<td>æ¸²æŸ“å™¨ï¼ŒPixiJS ç³»ç»Ÿæ ¸å¿ƒï¼Œç”¨äºæ˜¾ç¤ºåœºæ™¯æ ‘ï¼Œå¹¶å°†å…¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚</td>
</tr>
<tr>
<td>Container</td>
<td>å®¹å™¨ï¼Œä¸»è¦åœºæ™¯å¯¹è±¡ï¼Œç”¨äºåˆ›å»ºåœºæ™¯æ ‘ï¼Œå¦‚ç²¾çµã€å›¾å½¢å’Œæ–‡æœ¬ã€‚</td>
</tr>
<tr>
<td>Assets</td>
<td>ä¸ºå¼‚æ­¥åŠ è½½èµ„æºæä¾›å·¥å…·ã€‚</td>
</tr>
<tr>
<td>Ticker</td>
<td>åŸºäºæ—¶é’Ÿçš„å‘¨æœŸæ€§å›è°ƒã€‚æ¸¸æˆæ›´æ–°é€»è¾‘å°†é€šå¸¸åœ¨æ¯å¸§çš„å“åº”ä¸­è¿è¡Œã€‚</td>
</tr>
<tr>
<td>Application</td>
<td>ä¸€ä¸ªç®€å•çš„å¸®åŠ©å¯¹è±¡ï¼ŒåŒ…è£…äº†ä¸€ä¸ªåŠ è½½å™¨ï¼Œä¸€ä¸ªæ—¶é’Ÿå’Œä¸€ä¸ªæ¸²æŸ“å™¨ã€‚</td>
</tr>
<tr>
<td>Events</td>
<td>PixiJS æ”¯æŒåŸºäºæŒ‡é’ˆçš„äº¤äº’ï¼Œä½¿å¯¹è±¡å¯ä»¥è¢«ç‚¹å‡»ï¼Œè§¦å‘æ‚¬åœäº‹ä»¶ç­‰ã€‚</td>
</tr>
<tr>
<td>Accessibility</td>
<td>é€šè¿‡æˆ‘ä»¬çš„æ˜¾ç¤ºç³»ç»Ÿæˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªä¸°å¯Œçš„é”®ç›˜å’Œå±å¹•é˜…è¯»å™¨çš„å·¥å…·ã€‚</td>
</tr>
</tbody>
</table>]]></summary>
    <content type="html"><![CDATA[<p><a href="https://github.com/pixijs/pixijs" target="_blank" rel="noopener noreferrer">PixiJS</a> æºä»£ç ä¸­ä¸»è¦æ¨¡å—çš„å…³ç³»å¦‚ä¸‹ï¼š</p>
<p>| æ¨¡å—          | è¯´æ˜                                                           |<br>
|</p>
]]></content>
    <category term="Pixi"/>
    <published>2024-07-29T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">whistle è°ƒè¯•çœŸæœº</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/017-whistle-debug-real-phone.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/017-whistle-debug-real-phone.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨å‰ç«¯å¼€å‘ä¸­ç§»åŠ¨ç«¯å¼€å‘æŠ€èƒ½å¿…ä¸å¯å°‘ã€‚å½“æˆ‘ä»¬é‡åˆ°ç±»ä¼¼äºè¿™æ ·çš„é—®é¢˜ï¼š</p>
<ul>
<li>ç§»åŠ¨ç«¯ <code>Canvas</code> æ¸²æŸ“å¤±è´¥</li>
<li>å¾®ä¿¡è·å– <code>openId</code> å›è°ƒé¡µä¸åŒ¹é…</li>
<li>å¾®ä¿¡æµè§ˆå™¨æ–‡ä»¶ä¸Šä¼ å¤±è´¥</li>
<li>æ”¯ä»˜å®ï¼Œå¾®ä¿¡ <code>H5</code> æ”¯ä»˜åŸŸåæ ¡éªŒä¸åŒ¹é…</li>
<li>ç”Ÿäº§ç¯å¢ƒ BUGï¼Œæµ‹è¯•ç¯å¢ƒæ— æ³•å¤ç°</li>
<li>å½“åç«¯æ¥å£å¯ç”¨ <code>cors</code> è·¨åŸŸæ—¶ï¼Œæœ¬åœ°ç¯å¢ƒæ— æ³•è®¿é—®</li>
</ul>
<p><code>Chrome</code> æ¨¡æ‹Ÿå™¨å’Œå¾®ä¿¡å¼€å‘è€…å·¥å…·ç­‰éƒ½æ— æ³•å®Œç¾å¤ç°æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>whistle</code> æ¥å®ç°çœŸæœºè°ƒè¯•</p>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨å‰ç«¯å¼€å‘ä¸­ç§»åŠ¨ç«¯å¼€å‘æŠ€èƒ½å¿…ä¸å¯å°‘ã€‚å½“æˆ‘ä»¬é‡åˆ°ç±»ä¼¼äºè¿™æ ·çš„é—®é¢˜ï¼š</p>
<ul>
<li>ç§»åŠ¨ç«¯ <code>Canvas</code> æ¸²æŸ“å¤±è´¥</li>
<li>å¾®ä¿¡è·å– <code>openId</code> å›è°ƒé¡µä¸åŒ¹é…</li>
<li>å¾®ä¿¡æµè§ˆå™¨æ–‡ä»¶ä¸Šä¼ å¤±è´¥</li>
<li>æ”¯ä»˜å®ï¼Œå¾®ä¿¡ <code>H5</code> æ”¯ä»˜åŸŸåæ ¡éªŒä¸åŒ¹é…</li>
<li>ç”Ÿäº§ç¯å¢ƒ BUGï¼Œæµ‹è¯•ç¯å¢ƒæ— æ³•å¤ç°</li>
<li>å½“åç«¯æ¥å£å¯ç”¨ <code>cors</code> è·¨åŸŸæ—¶ï¼Œæœ¬åœ°ç¯å¢ƒæ— æ³•è®¿é—®</li>
</ul>
<p><code>Chrome</code> æ¨¡æ‹Ÿå™¨å’Œå¾®ä¿¡å¼€å‘è€…å·¥å…·ç­‰éƒ½æ— æ³•å®Œç¾å¤ç°æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>whistle</code> æ¥å®ç°çœŸæœºè°ƒè¯•</p>
<h2>Whistle</h2>
<p><a href="https://wproxy.org/whistle/" target="_blank" rel="noopener noreferrer">whistle</a>ï¼ˆè¯»éŸ³[ËˆwÉªsÉ™l]ï¼Œæ‹¼éŸ³[wÄ“isÇ’u]ï¼‰åŸºäº Node å®ç°çš„è·¨å¹³å° web è°ƒè¯•ä»£ç†å·¥å…·ã€‚</p>
<p>å®ƒçš„ä½œç”¨å¯ä»¥ç†è§£ä¸ºç”¨ Node å¼€ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå°†æˆ‘ä»¬éœ€è¦è°ƒè¯•çš„è®¾å¤‡ä»£ç†åˆ° <code>whistle</code> åï¼Œç”± <code>whistle</code> è¿›è¡Œä»£ç†è¯·æ±‚ã€‚åŒæ—¶ <code>whistle</code> æ”¯æŒç±»ä¼¼äº hosts çš„è½¬å‘è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™æˆ–è€…å†…ç½®çš„ä¸€äº›æŒ‡ä»¤å¯¹æˆ‘ä»¬éœ€è¦è¿›è¡Œä»£ç†çš„åŸŸåè¿›è¡Œè½¬å‘ï¼Œæ·»åŠ æ’ä»¶ç­‰ã€‚</p>
<h3>å®‰è£…å¯åŠ¨</h3>
<p>å®‰è£… <code>whistle</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> whistle <span class="token parameter variable">-g</span>
</code></pre></div><p>å¯åŠ¨ <code>whistle</code>ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>w2 start
</code></pre></div><p>å¯åŠ¨å®Œæˆåï¼Œé»˜è®¤ä¼šåœ¨ <code>localhost:8899</code> ç«¯å£ç›‘å¬ã€‚</p>
<h3>è®¾ç½®ä»£ç†</h3>
<h4>ç§»åŠ¨ç«¯</h4>
<p>ç”µè„‘ä¸æ‰‹æœºè¿æ¥åŒä¸€ wifiï¼Œåœ¨æ‰‹æœºç«¯ wifi ä¸­è®¾ç½®ä»£ç†ä¸ºæ‰‹åŠ¨ï¼Œè¾“å…¥ä»£ç† ipï¼ˆå¯åŠ¨ <code>whistle</code> ååœ¨æ§åˆ¶å°ä¸­æ‰“å°çš„å±€åŸŸç½‘ ipï¼‰ï¼Œç«¯å£å·ä¸º <code>8899</code>ã€‚</p>
<p>ä¿å­˜åç§»åŠ¨ç«¯åˆ™å·²ç»è®¾ç½®å¥½ä»£ç†ï¼Œåœ¨æ‰‹æœºæµè§ˆå™¨ä¸­è®¿é—®äº’è”ç½‘ï¼Œå³å¯ä»¥åœ¨ <code>whistle</code> æ§åˆ¶å°ä¸­æŠ“å–åˆ°ç›¸åº”çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<h4>PC ç«¯</h4>
<p>PC ç«¯æœ‰æ—¶ä¹Ÿéœ€è¦é€šè¿‡ <code>whistle</code> æ§åˆ¶å°è®¾ç½®ä»£ç†ä¿®æ”¹è¯·æ±‚ä¿¡æ¯æˆ–è€…é…ç½® <code>source map</code> æ–‡ä»¶ï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ <code>Proxy switchyOmega</code> æ’ä»¶è®¾ç½®ä»£ç†ã€‚</p>
<p>åœ¨æ‰©å±•å•†åº—ä¸­æœç´¢å®‰è£… <code>Proxy switchyOmega</code> æ’ä»¶ï¼Œä¸‹è½½å®Œæˆåï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ª <code>proxy</code> çš„æƒ…æ™¯æ¨¡å¼ï¼Œè®¾ç½®ä»£ç†æœåŠ¡å™¨ä¸º <code>127.0.0.1</code>ï¼Œç«¯å£å·ä¸º <code>8899</code> ä¿å­˜å¹¶åº”ç”¨é€‰é¡¹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240729163103.png" alt="è®¾ç½®æƒ…æ™¯æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>è®¾ç½®æƒ…æ™¯æ¨¡å¼</figcaption></figure>
<p>è¿™é‡Œè¿˜æ¨èä¿®æ”¹ä¸€ä¸ªé…ç½®ï¼Œå°†é»˜è®¤é…ç½®æ”¹ä¸ºç³»ç»Ÿä»£ç†ï¼Œé¿å…æ—¥å¸¸ä½¿ç”¨æ—¶è¢«ä»£ç†åˆ° <code>whistle</code>ï¼Œæ— æ³•ç§‘å­¦ä¸Šç½‘ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240729163028.png" alt="ä¿®æ”¹é»˜è®¤é…ç½®" tabindex="0" loading="lazy"><figcaption>ä¿®æ”¹é»˜è®¤é…ç½®</figcaption></figure>
<h3>å®‰è£…è¯ä¹¦</h3>
<p>å‚è€ƒ <a href="https://wproxy.org/whistle/webui/https.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a> å³å¯ã€‚</p>
<h2>çœŸæœºè°ƒè¯•</h2>
<p>æ‰“å¼€ <code>whistle</code> æ§åˆ¶å°ï¼Œå·¦ä¾§æœ‰ä¸ª <code>Rules</code>ï¼Œåœ¨è¿™é‡Œé¢å¯ä»¥è¿›è¡Œä¸€äº›è·³è½¬è§„åˆ™çš„åˆ†ç»„ï¼Œé…ç½®ã€‚</p>
<h3>resMerge</h3>
<p>ç”±äºå¤§éƒ¨åˆ† webapp æ˜¯åµŒå…¥åˆ° webview ä¸­ï¼Œå› æ­¤éœ€è¦æ›´æ”¹å“åº”ç»“æœä¸­çš„ <code>webAppUrl</code> è·¯å¾„ã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>https://xxxx resMerge://(webAppUrl=https://localhost:3000/index.html?isWebApp=true)
</code></pre></div><h3>tpl</h3>
<p>tpl åŸºæœ¬åŠŸèƒ½è·Ÿ file ä¸€æ ·å¯ä»¥åšæœ¬åœ°æ›¿æ¢ï¼Œä½† tpl å†…ç½®äº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“ï¼Œå¯ä»¥æŠŠæ–‡ä»¶å†…å®¹é‡Œé¢ <code>{name}</code> æ›¿æ¢è¯·æ±‚å‚æ•°å¯¹åº”çš„å­—æ®µ(å¦‚æœä¸å­˜åœ¨å¯¹åº”çš„è‡ªåŠ¨åˆ™ä¸ä¼šè¿›è¡Œæ›¿æ¢)ï¼Œä¸€èˆ¬å¯ç”¨äº mock jsonp çš„è¯·æ±‚ã€‚</p>
<p>åœ¨ <code>values</code> é¢æ¿ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåå­—ä¸º <code>mockConfig.json</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p>å¯ä»¥ç›´æ¥ä¿®æ”¹è¿”å›ç»“æœï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>https://xxxx tpl://{mockConfig.json}
</code></pre></div><h3>æ³¨å…¥ eruda</h3>
<p>å®‰è£… <code>whistle.inspect</code> æ’ä»¶ï¼Œè¯¥æ’ä»¶å³æˆäº† <a href="https://github.com/liriliri/eruda" target="_blank" rel="noopener noreferrer">eruda</a> ç­‰è°ƒè¯•å·¥å…·ï¼Œç”¨æ¥åœ¨ç§»åŠ¨ç«¯é¡µé¢ä¸Šæ¨¡æ‹Ÿ Chrome å¼€å‘è€…å·¥å…·åŠŸèƒ½çš„æ¨¡å—ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>w2 i whistle.inspect
</code></pre></div><p>é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>https://localhost:3000/index.html whistle.inspect://eruda disable://cache
</code></pre></div><p>è¿™ä¸ªé…ç½®çš„ä½œç”¨æ˜¯å½“è®¿é—®åˆ° <code>localhost:3000</code> æ—¶ï¼Œé¡µé¢ä¼šè‡ªåŠ¨æ³¨å…¥ <code>eruda</code> è°ƒè¯•å·¥å…·ã€‚</p>
<h2>Chrome inspect</h2>
<p>æœ‰äº›æ—¶å€™ï¼Œä½¿ç”¨ <code>whistle</code> æ³¨å…¥è°ƒè¯•å·¥å…·çš„æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Chrome inspect æ¥æ›¿ä»£ã€‚</p>
<h3>å‡†å¤‡å·¥ä½œ</h3>
<p>éœ€è¦çš„å·¥å…·ï¼š</p>
<ul>
<li>PC å®‰è£… Chrome æµè§ˆå™¨</li>
<li>å®‰å“æ‰‹æœº</li>
<li>æ•°æ®çº¿</li>
</ul>
<h3>æ“ä½œæ­¥éª¤</h3>
<p>æ‰“å¼€æ‰‹æœºå¼€å‘è€…é€‰é¡¹ï¼Œå…è®¸ USB è°ƒè¯•ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¸åŒå®‰å“è®¾å¤‡æ‰“å¼€æ–¹å¼ä¸åŒï¼Œæ ¹æ®å“ç‰Œè°·æ­Œæœç´¢æ‰“å¼€æ–¹å¼ã€‚</p>
</div>
<p>è°·æ­Œæµè§ˆå™¨è¾“å…¥ <code>chrome://inspect/</code> æ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œç‚¹å‡» <code>inspect</code> æŒ‰é’®å³å¯è°ƒè¯•ç½‘é¡µã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240821141307.png" alt="inspect" tabindex="0" loading="lazy"><figcaption>inspect</figcaption></figure>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åº”è¯¥åªèƒ½è°ƒè¯• chrome å†…æ ¸çš„æµè§ˆå™¨ã€‚</p>
</div>
]]></content>
    <category term="practice"/>
    <published>2024-07-29T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å¿«é€Ÿå¼€å§‹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/01-quick-start.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/framework/pixi/01-quick-start.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><a href="https://pixijs.com/" target="_blank" rel="noopener noreferrer">PixiJS</a> çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªä½¿ç”¨ WebGLï¼ˆæˆ– Canvasï¼‰æ˜¾ç¤ºå›¾åƒæˆ–å…¶ä»– <strong>2D</strong> å¯è§†åŒ–å†…å®¹çš„å‘ˆç°ç³»ç»Ÿã€‚</p>
<p>å®ƒæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„åœºæ™¯å›¾ï¼ˆè¦å‘ˆç°çš„å¯¹è±¡çš„å±‚æ¬¡ç»“æ„ï¼‰ï¼Œå¹¶æä¾›äº¤äº’æ”¯æŒä»¥å¤„ç†ç‚¹å‡»å’Œè§¦æ‘¸äº‹ä»¶ã€‚</p>
<p>åœ¨ç°ä»£ HTML5 ä¸–ç•Œä¸­ï¼Œå®ƒæ˜¯ Flash çš„å¤©ç„¶æ›¿ä»£å“ï¼Œä½†å´èƒ½æä¾›æ›´å¥½çš„æ€§èƒ½å’Œåƒç´ çº§çš„æ•ˆæœï¼Œè¶…è¶Šäº† Flash æ‰€èƒ½è¾¾åˆ°çš„æ°´å¹³ã€‚</p>
<p>å®ƒéå¸¸é€‚åˆç½‘ç»œæ¸¸æˆã€æ•™è‚²å†…å®¹ã€äº¤äº’å¼å¹¿å‘Šã€æ•°æ®å¯è§†åŒ–......ä»»ä½•åŸºäºç½‘ç»œçš„ã€éœ€è¦å¤æ‚å›¾å½¢çš„åº”ç”¨ç¨‹åºã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p><a href="https://pixijs.com/" target="_blank" rel="noopener noreferrer">PixiJS</a> çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªä½¿ç”¨ WebGLï¼ˆæˆ– Canvasï¼‰æ˜¾ç¤ºå›¾åƒæˆ–å…¶ä»– <strong>2D</strong> å¯è§†åŒ–å†…å®¹çš„å‘ˆç°ç³»ç»Ÿã€‚</p>
<p>å®ƒæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„åœºæ™¯å›¾ï¼ˆè¦å‘ˆç°çš„å¯¹è±¡çš„å±‚æ¬¡ç»“æ„ï¼‰ï¼Œå¹¶æä¾›äº¤äº’æ”¯æŒä»¥å¤„ç†ç‚¹å‡»å’Œè§¦æ‘¸äº‹ä»¶ã€‚</p>
<p>åœ¨ç°ä»£ HTML5 ä¸–ç•Œä¸­ï¼Œå®ƒæ˜¯ Flash çš„å¤©ç„¶æ›¿ä»£å“ï¼Œä½†å´èƒ½æä¾›æ›´å¥½çš„æ€§èƒ½å’Œåƒç´ çº§çš„æ•ˆæœï¼Œè¶…è¶Šäº† Flash æ‰€èƒ½è¾¾åˆ°çš„æ°´å¹³ã€‚</p>
<p>å®ƒéå¸¸é€‚åˆç½‘ç»œæ¸¸æˆã€æ•™è‚²å†…å®¹ã€äº¤äº’å¼å¹¿å‘Šã€æ•°æ®å¯è§†åŒ–......ä»»ä½•åŸºäºç½‘ç»œçš„ã€éœ€è¦å¤æ‚å›¾å½¢çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>ä¸ Cordova å’Œ Electron ç­‰æŠ€æœ¯ç›¸ç»“åˆï¼ŒPixiJS åº”ç”¨ç¨‹åºå¯ä»¥ä½œä¸ºç§»åŠ¨å’Œæ¡Œé¢åº”ç”¨ç¨‹åºåœ¨æµè§ˆå™¨ä¹‹å¤–å‘å¸ƒã€‚</p>
<h2>åˆ›å»º pixi åº”ç”¨</h2>
<p><code>Application</code> æ˜¯ä¸€ä¸ªç®€åŒ– PixiJS å·¥ä½œçš„è¾…åŠ©ç±»ã€‚ å®ƒèƒ½åˆ›å»ºå‘ˆç°å™¨ã€åˆ›å»ºèˆå°å¹¶å¯åŠ¨ä¸€ä¸ªç”¨äºæ›´æ–°çš„ tickerã€‚</p>
<p><code>Application</code> ç±»è¿˜æœ‰ä¸€ä¸ª <code>init</code> æ–¹æ³•ï¼Œå®ƒå°†ä½¿ç”¨ç»™å®šçš„é€‰é¡¹åˆå§‹åŒ–åº”ç”¨ç¨‹åºã€‚å› ä¸º PixiJS ä½¿ç”¨äº† WebGPUï¼Œå› æ­¤è¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://pixijs.download/release/pixi.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello PixiJS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PIXI<span class="token punctuation">.</span>Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240719160224.png" alt="create pixi app" tabindex="0" loading="lazy"><figcaption>create pixi app</figcaption></figure>
<h2>åˆ›å»º Sprite</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€åšçš„åªæ˜¯å‡†å¤‡å·¥ä½œã€‚ æˆ‘ä»¬è¿˜æ²¡æœ‰å‘Šè¯‰ PixiJS ç»˜åˆ¶ä»»ä½•ä¸œè¥¿ã€‚ è®©æˆ‘ä»¬æ·»åŠ ä¸€å¼ è¦æ˜¾ç¤ºçš„å›¾ç‰‡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>åœ¨ PixiJS ä¸­ç»˜åˆ¶å›¾åƒæœ‰å¤šç§æ–¹æ³•ï¼Œä½†æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://pixijs.download/release/docs/scene.Sprite.html" target="_blank" rel="noopener noreferrer">Sprite</a>ã€‚ Sprite æ˜¯ä¸€ç§å®¹å™¨ç±»å‹ï¼Œå®ƒå°è£…äº†åŠ è½½çš„å›¾åƒèµ„æºï¼Œå…è®¸å¯¹å…¶è¿›è¡Œç»˜åˆ¶ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰æ“ä½œã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// load the PNG asynchronously</span>
<span class="token keyword">await</span> <span class="token constant">PIXI</span><span class="token punctuation">.</span>Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'sample.png'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> sprite <span class="token operator">=</span> <span class="token constant">PIXI</span><span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'sample.png'</span><span class="token punctuation">)</span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/sample.png" alt="sample" tabindex="0" loading="lazy"><figcaption>sample</figcaption></figure>
<h2>å°† Sprite æ·»åŠ è‡³ Stage</h2>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°† Sprite æ·»åŠ åˆ° Stage ä¸Šã€‚Stage åªæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ˜¯åœºæ™¯å›¾çš„æ ¹ã€‚Stage å®¹å™¨çš„æ¯ä¸ªå­å®¹å™¨éƒ½å°†åœ¨æ¯ä¸€å¸§ä¸­è¿›è¡Œæ¸²æŸ“ã€‚å°† Sprite æ·»åŠ åˆ° Stage åï¼Œæˆ‘ä»¬å°±å‘Šè¯‰äº† PixiJS çš„æ¸²æŸ“å™¨æˆ‘ä»¬è¦ç»˜åˆ¶å®ƒã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sprite<span class="token punctuation">)</span>
</code></pre></div><h2>æ›´æ–° loop</h2>
<p>è™½ç„¶å¯ä»¥å°† PixiJS ç”¨äºé™æ€å†…å®¹ï¼Œä½†å¯¹äºå¤§å¤šæ•°é¡¹ç›®è€Œè¨€ï¼Œéƒ½å¸Œæœ›æ·»åŠ åŠ¨ç”»ã€‚</p>
<p>ç¤ºä¾‹åº”ç”¨ç¨‹åºå¸Œæœ›æ¯ç§’åœ¨åŒä¸€ä½ç½®å¤šæ¬¡æ¸²æŸ“åŒä¸€ä¸ª Spriteã€‚</p>
<p>è¦ä½¿å›¾åƒç§»åŠ¨ï¼Œæˆ‘ä»¬åªéœ€æ¯å¸§æ›´æ–°ä¸€æ¬¡å±æ€§å³å¯ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦æŒ‚é’©åº”ç”¨ç¨‹åºçš„ <code>ticker</code>ã€‚<code>ticker</code> æ˜¯ä¸€ä¸ª PixiJS å¯¹è±¡ï¼Œæ¯å¸§è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒã€‚</p>
<p>åªéœ€è°ƒç”¨ <code>app.ticker.add(...)</code>ï¼Œç»™å®ƒä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç„¶ååœ¨è¯¥å‡½æ•°ä¸­æ›´æ–°åœºæ™¯ã€‚å®ƒå°†åœ¨æ¯ä¸€å¸§ä¸­è¢«è°ƒç”¨ï¼Œä½ å¯ä»¥ç§»åŠ¨ã€æ—‹è½¬ç­‰ä»»ä½•ä½ æƒ³è¦çš„æ–¹å¼æ¥é©±åŠ¨é¡¹ç›®çš„åŠ¨ç”»ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// Add a variable to count up the seconds our demo has been running</span>
<span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token number">0.0</span>
<span class="token comment">// Tell our application's ticker to run a new callback every frame, passing</span>
<span class="token comment">// in the amount of time that has passed since the last tick</span>
app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ticker</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Add the time to our total elapsed time</span>
  elapsed <span class="token operator">+=</span> ticker<span class="token punctuation">.</span>deltaTime
  <span class="token comment">// Update the sprite's X position based on the cosine of our elapsed time.  We divide</span>
  <span class="token comment">// by 50 to slow the animation down a bit...</span>
  sprite<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100.0</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>elapsed <span class="token operator">/</span> <span class="token number">50.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100.0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2>all done</h2>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://pixijs.download/release/pixi.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token comment">// Create the application helper and add its render target to the page</span>
      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PIXI<span class="token punctuation">.</span>Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>canvas<span class="token punctuation">)</span>

      <span class="token comment">// Create the sprite and add it to the stage</span>
      <span class="token keyword">await</span> <span class="token constant">PIXI</span><span class="token punctuation">.</span>Assets<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'sample.png'</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> sprite <span class="token operator">=</span> <span class="token constant">PIXI</span><span class="token punctuation">.</span>Sprite<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'sample.png'</span><span class="token punctuation">)</span>
      app<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sprite<span class="token punctuation">)</span>

      <span class="token comment">// Add a ticker callback to move the sprite back and forth</span>
      <span class="token keyword">let</span> elapsed <span class="token operator">=</span> <span class="token number">0.0</span>
      app<span class="token punctuation">.</span>ticker<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ticker</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        elapsed <span class="token operator">+=</span> ticker<span class="token punctuation">.</span>deltaTime
        sprite<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100.0</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>elapsed <span class="token operator">/</span> <span class="token number">50.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100.0</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>]]></content>
    <category term="Pixi"/>
    <published>2024-07-19T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ•°æ®åº“ç»“æ„è®¾è®¡</title>
    <id>https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/03-database.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/03-database.html"/>
    <updated>2024-12-17T10:16:46.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Deprecated. å·²æ”¹ç”¨ prisma + Mysql æ•°æ®åº“ã€‚</p>
</div>
<h2>æ•°æ®åº“é€‰æ‹©</h2>
<p>é€‰æ‹©ä½¿ç”¨äº‘æ•°æ®åº“ <a href="https://docs.turso.tech/introduction" target="_blank" rel="noopener noreferrer">turso</a>ã€‚</p>
<p>Turso æ˜¯ä¸€ä¸ªå…¼å®¹ SQLite çš„æ•°æ®åº“ï¼ŒåŸºäº libSQLï¼ˆSQLite çš„å¼€æ”¾è´¡çŒ®åˆ†å‰ï¼‰æ„å»ºã€‚ å®ƒå¯ä»¥å°†æ¯ä¸ªç»„ç»‡çš„æ•°æ®åº“æ‰©å±•åˆ°æ•°åä¸‡ä¸ªï¼Œå¹¶æ”¯æŒå¤åˆ¶åˆ°ä»»ä½•ä½ç½®ï¼ŒåŒ…æ‹¬æ‚¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä»¥å®ç°å¾®ç§’çº§å»¶è¿Ÿè®¿é—®ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Deprecated. å·²æ”¹ç”¨ prisma + Mysql æ•°æ®åº“ã€‚</p>
</div>
<h2>æ•°æ®åº“é€‰æ‹©</h2>
<p>é€‰æ‹©ä½¿ç”¨äº‘æ•°æ®åº“ <a href="https://docs.turso.tech/introduction" target="_blank" rel="noopener noreferrer">turso</a>ã€‚</p>
<p>Turso æ˜¯ä¸€ä¸ªå…¼å®¹ SQLite çš„æ•°æ®åº“ï¼ŒåŸºäº libSQLï¼ˆSQLite çš„å¼€æ”¾è´¡çŒ®åˆ†å‰ï¼‰æ„å»ºã€‚ å®ƒå¯ä»¥å°†æ¯ä¸ªç»„ç»‡çš„æ•°æ®åº“æ‰©å±•åˆ°æ•°åä¸‡ä¸ªï¼Œå¹¶æ”¯æŒå¤åˆ¶åˆ°ä»»ä½•ä½ç½®ï¼ŒåŒ…æ‹¬æ‚¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä»¥å®ç°å¾®ç§’çº§å»¶è¿Ÿè®¿é—®ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> InStatement<span class="token punctuation">,</span> LibsqlError<span class="token punctuation">,</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@libsql/client'</span>

<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TURSO_URL</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
  authToken<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TURSO_AUTH_TOKEN</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2>user</h2>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token string">"user"</span> <span class="token punctuation">(</span>
  ID <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>
  name <span class="token keyword">TEXT</span>
<span class="token punctuation">,</span> password <span class="token keyword">TEXT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>category</h2>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> category <span class="token punctuation">(</span>
id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
name <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
description <span class="token keyword">TEXT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2>commodity</h2>
<div class="language-sql" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> commodity <span class="token punctuation">(</span>
id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
name <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
price <span class="token keyword">REAL</span><span class="token punctuation">,</span>
description <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
category_id <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>category_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> category<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>]]></content>
    <category term="Project"/>
    <published>2024-07-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æœåŠ¡å™¨æ¶æ„è®¾è®¡</title>
    <id>https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/02-server.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/02-server.html"/>
    <updated>2024-12-17T10:16:46.000Z</updated>
    <summary type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Deprecated. å·²æ”¹ç”¨ nest.js æ¡†æ¶ã€‚</p>
</div>
<h2>åˆ†å±‚æ¶æ„</h2>
<h3>route</h3>
<p>åˆ†å‘è·¯ç”±ï¼Œå¦‚ï¼š<code>/category</code>ã€‚åŒ¹é…åçš„è·¯ç”±åŒ…å« <code>controller</code> å’Œ è·¯ç”±ç‰¹å®šçš„ <code>middleware</code>ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Router</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> Route <span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Route</span> <span class="token punctuation">{</span>
  controller<span class="token operator">:</span> Controller<span class="token punctuation">;</span>
  middlewares<span class="token operator">?</span><span class="token operator">:</span> Middleware<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// route-specific middleware</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Deprecated. å·²æ”¹ç”¨ nest.js æ¡†æ¶ã€‚</p>
</div>
<h2>åˆ†å±‚æ¶æ„</h2>
<h3>route</h3>
<p>åˆ†å‘è·¯ç”±ï¼Œå¦‚ï¼š<code>/category</code>ã€‚åŒ¹é…åçš„è·¯ç”±åŒ…å« <code>controller</code> å’Œ è·¯ç”±ç‰¹å®šçš„ <code>middleware</code>ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Router</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> Route <span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Route</span> <span class="token punctuation">{</span>
  controller<span class="token operator">:</span> Controller<span class="token punctuation">;</span>
  middlewares<span class="token operator">?</span><span class="token operator">:</span> Middleware<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// route-specific middleware</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>middleware</h3>
<p>ä¸­é—´ä»¶ï¼Œå¤„ç†è¯·æ±‚ä¸­é—´é€»è¾‘ï¼Œæ¯”å¦‚ï¼š<code>cors</code>ã€<code>auth</code> ç­‰ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Middleware</span> <span class="token operator">=</span> <span class="token punctuation">(</span>req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">,</span> <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>

<span class="token comment">/**
 * Manage the execution order of middleware functions.
 * It allows you to add multiple middleware functions to a queue
 * and execute them sequentially during a request.
 *
 * @export
 * @class MiddlewareManager
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MiddlewareManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">readonly</span> middlewares<span class="token operator">:</span> Middleware<span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">use</span><span class="token punctuation">(</span>func<span class="token operator">:</span> Middleware<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span>req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">runner</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> middleware <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>middlewares<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>middleware<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">middleware</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">runner</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">runner</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»¥ <code>corsMiddleware</code> ä¸ºä¾‹ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> corsMiddleware <span class="token operator">=</span> <span class="token punctuation">(</span>options<span class="token operator">:</span> <span class="token punctuation">{</span> origin<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> methods<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> credentials<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> Middleware <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>origin<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>methods<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type, Authorization'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>credentials<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Handle preflight requests</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">204</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> corsMiddleware
</code></pre></div><h3>controller</h3>
<p>æ§åˆ¶å±‚ï¼Œå¤„ç†è¯·æ±‚å‚æ•°å’Œè¯·æ±‚ä½“æ•°æ®ï¼Œåˆ†å‘ä¸šåŠ¡é€»è¾‘ã€‚ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæä¾› <code>sendResponse</code> å’Œ <code>sendError</code> æ–¹æ³•ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Controller</span> <span class="token operator">=</span> <span class="token punctuation">(</span>req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>

<span class="token keyword">export</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseController</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token function">sendResponse</span><span class="token punctuation">(</span>statusCode<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span>statusCode<span class="token punctuation">)</span>

    <span class="token comment">// handle bigint</span>
    <span class="token keyword">let</span> responseData<span class="token operator">:</span> <span class="token builtin">unknown</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">'bigint'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&lt;=</span> Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span> <span class="token operator">&amp;&amp;</span> data <span class="token operator">&gt;=</span> Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        responseData <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        responseData <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      responseData <span class="token operator">=</span> data
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> response<span class="token operator">:</span> Response <span class="token operator">=</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> statusCode<span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span>
      data<span class="token operator">:</span> responseData
    <span class="token punctuation">}</span>

    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">protected</span> <span class="token function">sendError</span><span class="token punctuation">(</span>statusCode<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span>statusCode<span class="token punctuation">)</span>
    <span class="token keyword">const</span> response<span class="token operator">:</span> Response <span class="token operator">=</span> <span class="token punctuation">{</span>
      code<span class="token operator">:</span> statusCode<span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> error<span class="token operator">:</span> message <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»¥ <code>UserController</code> ä¸ºä¾‹ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">BaseController</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> userService<span class="token operator">:</span> UserService

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">signIn</span><span class="token punctuation">(</span>req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span> res<span class="token operator">:</span> ServerResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token generic-function"><span class="token function">getRequestBody</span><span class="token generic class-name"><span class="token operator">&lt;</span>SignInParams<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>req<span class="token punctuation">)</span>

      <span class="token comment">// TODO: verify parameters.</span>

      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userService<span class="token punctuation">.</span><span class="token function">signIn</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'All time: '</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
      UserController<span class="token punctuation">.</span><span class="token function">sendResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> response<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      UserController<span class="token punctuation">.</span><span class="token function">sendResponse</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Internal Server Error'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
      <span class="token keyword">throw</span> error
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>service</h3>
<p>æœåŠ¡å±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚<code>BaseService</code> ä¸ºæŠ½è±¡åŸºç±»ï¼Œæä¾› <code>db</code> å±æ€§ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseService</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> db<span class="token operator">:</span> <span class="token constant">DB</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>db <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»¥ <code>UserService</code> ä¸ºä¾‹ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseService</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// sign-in</span>
  <span class="token keyword">async</span> <span class="token function">signIn</span><span class="token punctuation">(</span>data<span class="token operator">:</span> SignInParams<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Response<span class="token operator">&lt;</span><span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token string">'SELECT * FROM users WHERE name = ?'</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> sql<span class="token punctuation">,</span> args<span class="token operator">:</span> <span class="token punctuation">[</span>data<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> usersInfo<span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>rows<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token function">Number</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span><span class="token constant">ID</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Check if the user exists.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>usersInfo<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">'Access to the requested resource is unauthorized. Please authenticate.'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Check if the password matches.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>usersInfo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>password <span class="token operator">!==</span> data<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">'Access to the requested resource is unauthorized. Please authenticate.'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// All checks passed, return success message or token</span>
    <span class="token comment">// TODO: generate token.</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> code<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">'Login successful'</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>dao</h3>
<p>æ•°æ®è®¿é—®å±‚ï¼Œå¤„ç†æ•°æ®æŸ¥è¯¢ã€‚æä¾› <code>execute</code> æ–¹æ³•æ‰§è¡Œ <code>sql</code>ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token constant">DB</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> instance<span class="token operator">:</span> <span class="token constant">DB</span>

  <span class="token keyword">private</span> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">DB</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token constant">DB</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">DB</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token constant">DB</span><span class="token punctuation">.</span>instance
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">execute</span><span class="token punctuation">(</span>stmt<span class="token operator">:</span> InStatement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>stmt<span class="token punctuation">)</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Query time: '</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span>
      <span class="token keyword">return</span> res
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">LibsqlError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Execution failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An error occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">DB</span>
</code></pre></div><h2>å…¶ä»–ç»†èŠ‚</h2>
<h3>è¯·æ±‚ä½“å¤„ç†</h3>
<p>ç›®å‰å…è®¸ <code>POST</code> å’Œ <code>PUT</code> è¯·æ±‚æºå¸¦è¯·æ±‚ä½“ã€‚</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> getRequestBody <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">!==</span> <span class="token string">'POST'</span> <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>method <span class="token operator">!==</span> <span class="token string">'PUT'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> postData <span class="token operator">=</span> <span class="token string">''</span>
      req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>chunk<span class="token operator">:</span> Buffer<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        postData <span class="token operator">+=</span> chunk<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>postData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>è·¯å¾„å‚æ•°å¤„ç†</h3>
<p>è·¯ç”±è§„åˆ™ï¼š<code>method</code> + <code>path</code> + <code>query</code>ï¼Œå¦‚ <code>GET/category/:id</code>ã€‚</p>
<p>å…¶ä¸­ <code>path</code> éœ€è¦è¿›è¡Œå‚æ•°å¤„ç†ï¼Œå¦‚ï¼š<code>/category/:id</code>ã€‚å¤„ç†å®Œåå‚æ•°ç±»å‹åº”ä¸º <code>params: Record&lt;string, string&gt;</code>ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å¤šä¸ªå‚æ•°ã€‚</p>
<p>è§£æå®Œæˆåï¼Œ<code>controller</code> ä¸­éœ€è¦æ¥æ”¶ <code>params</code>ï¼Œéœ€è¦å°† <code>params</code> è½¬æ¢ä¸º <code>request.params</code>ã€‚</p>
<p>å…·ä½“é€»è¾‘å¦‚ä¸‹ï¼š</p>
<div class="language-typescript" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">/**
 * Execute route's middleware and controller.
 *
 * @param {CustomIncomingMessage} req
 * @param {ServerResponse} res
 * @param {Route} route
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">execute</span><span class="token punctuation">(</span>
  req<span class="token operator">:</span> CustomIncomingMessage<span class="token punctuation">,</span>
  res<span class="token operator">:</span> ServerResponse<span class="token punctuation">,</span>
  route<span class="token operator">:</span> Route<span class="token punctuation">,</span>
  params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mwManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MiddlewareManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  req<span class="token punctuation">.</span>params <span class="token operator">=</span> params

  <span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">corsMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    origin<span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token string">'GET,HEAD,PUT,PATCH,POST,DELETE'</span><span class="token punctuation">,</span>
    credentials<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  mwManager<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>cors<span class="token punctuation">)</span>

  route<span class="token punctuation">.</span>middlewares<span class="token operator">?.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mwManager<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span>
  mwManager<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>controller<span class="token punctuation">)</span>
  <span class="token keyword">await</span> mwManager<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Matches the provided method and pathname to a route in the Router.
 *
 * @param {string} method - The HTTP method to match.
 * @param {string} pathname - The URL pathname to match.
 * @return {Object} An object containing the matched route and parameters.
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">matchRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span>method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> pathname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> router <span class="token keyword">in</span> Router<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>routeMethod<span class="token punctuation">,</span> <span class="token operator">...</span>routeParts<span class="token punctuation">]</span> <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> routeMethod<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> pathParts <span class="token operator">=</span> pathname<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>routeMethod<span class="token punctuation">,</span> routeParts<span class="token punctuation">,</span> pathParts<span class="token punctuation">,</span> pathname<span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>routeParts<span class="token punctuation">.</span>length <span class="token operator">===</span> pathParts<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">let</span> match <span class="token operator">=</span> <span class="token boolean">true</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> routeParts<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>routeParts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            params<span class="token punctuation">[</span>routeParts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> pathParts<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>routeParts<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> pathParts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            match <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token keyword">break</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> route<span class="token operator">:</span> Router<span class="token punctuation">[</span>router<span class="token punctuation">]</span><span class="token punctuation">,</span> params <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> route<span class="token operator">:</span> notFound<span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <category term="Project"/>
    <published>2024-07-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">rest client æ— æ³•è°ƒè¯• localhost</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/016-rest-client-error.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/016-rest-client-error.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ•…éšœæè¿°</h2>
<p>REST Client æ’ä»¶æ— æ³•è°ƒè¯• localhostã€‚</p>
<ul>
<li>REST Client: v0.25.1</li>
<li>VS code: 1.91.1</li>
</ul>
<p>æœ¬åœ°å¯åŠ¨ node æœåŠ¡ï¼Œä½¿ç”¨ REST Client å‘é€è¯·æ±‚ï¼š</p>
<div class="language-http" data-ext="http" data-title="http"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">http://127.0.0.1:8000/</span> <span class="token http-version property">HTTP/1.1</span></span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>æ•…éšœæè¿°</h2>
<p>REST Client æ’ä»¶æ— æ³•è°ƒè¯• localhostã€‚</p>
<ul>
<li>REST Client: v0.25.1</li>
<li>VS code: 1.91.1</li>
</ul>
<p>æœ¬åœ°å¯åŠ¨ node æœåŠ¡ï¼Œä½¿ç”¨ REST Client å‘é€è¯·æ±‚ï¼š</p>
<div class="language-http" data-ext="http" data-title="http"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">http://127.0.0.1:8000/</span> <span class="token http-version property">HTTP/1.1</span></span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240719143258.png" alt="æŠ¥é”™" tabindex="0" loading="lazy"><figcaption>æŠ¥é”™</figcaption></figure>
<h2>æ’æŸ¥</h2>
<p>åˆæ­¥æ€€ç–‘æ˜¯èµ°äº†ä»£ç†ï¼Œä½†æ˜¯æŸ¥çœ‹ä»£ç†è½¯ä»¶æ—¥å¿—ï¼Œå‘ç°å¹¶æ²¡æœ‰å¯ç–‘è¯·æ±‚èµ°äº†å›½å¤–ä»£ç†ã€‚</p>
<p>æœ€ç»ˆåœ¨ github ä¸­æ‰¾åˆ°äº†ä¸€ä¸ª issue: <a href="https://github.com/Huachao/vscode-restclient/issues/1163" target="_blank" rel="noopener noreferrer">Rest client ceased to work</a>ã€‚</p>
<p>å¹¶åœ¨ä¸‹æ–¹å›ç­”ä¸­æ‰¾åˆ°ï¼š<a href="https://github.com/Huachao/vscode-restclient/issues/1145" target="_blank" rel="noopener noreferrer">ECONNREFUSED - Connection was Rejected</a>ã€‚</p>
<p>å°†ä»£ç æ”¹ä¸ºä»¥ä¸‹å³å¯æˆåŠŸï¼š</p>
<div class="language-http" data-ext="http" data-title="http"><pre class="language-http"><code><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url">http://[::1]:8000/</span> <span class="token http-version property">HTTP/1.1</span></span>
</code></pre></div>]]></content>
    <category term="practice"/>
    <published>2024-07-19T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">dnd-kit è¸©å‘</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/001-dnd-kit.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/001-dnd-kit.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>@dnd-kit - ç”¨äº React çš„è½»é‡çº§ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½ã€å¯è®¿é—®å’Œå¯æ‰©å±•çš„æ‹–æ”¾å·¥å…·åŒ…ã€‚</p>
<h2>Context Provider</h2>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token function-variable function">SortableItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">itemRender</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactElement
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> attributes<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> setNodeRef<span class="token punctuation">,</span> transform<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> props<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    transform<span class="token operator">:</span> <span class="token constant">CSS</span><span class="token punctuation">.</span>Transform<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">,</span>
    transition<span class="token operator">:</span> transition<span class="token operator">!</span><span class="token punctuation">,</span>
    cursor<span class="token operator">:</span> <span class="token string">'move'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mr-2<span class="token punctuation">"</span></span>
      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setNodeRef<span class="token punctuation">}</span></span>
      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token operator">...</span>style <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>attributes<span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>listeners<span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token function">itemRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>@dnd-kit - ç”¨äº React çš„è½»é‡çº§ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½ã€å¯è®¿é—®å’Œå¯æ‰©å±•çš„æ‹–æ”¾å·¥å…·åŒ…ã€‚</p>
<h2>Context Provider</h2>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token keyword">const</span> <span class="token function-variable function">SortableItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">itemRender</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ReactElement
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> attributes<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> setNodeRef<span class="token punctuation">,</span> transform<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token operator">=</span>
    <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> props<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    transform<span class="token operator">:</span> <span class="token constant">CSS</span><span class="token punctuation">.</span>Transform<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">,</span>
    transition<span class="token operator">:</span> transition<span class="token operator">!</span><span class="token punctuation">,</span>
    cursor<span class="token operator">:</span> <span class="token string">'move'</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mr-2<span class="token punctuation">"</span></span>
      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setNodeRef<span class="token punctuation">}</span></span>
      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token operator">...</span>style <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>attributes<span class="token punctuation">}</span></span>
      <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>listeners<span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token function">itemRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>è¸©å‘</h2>
<h3>dnd kit ä¼šå°†é¼ æ ‡ç‚¹å‡»äº‹ä»¶è¯†åˆ«ä¸ºæ‹–æ‹½äº‹ä»¶</h3>
<p><a href="https://github.com/clauderic/dnd-kit/issues/1204" target="_blank" rel="noopener noreferrer">https://github.com/clauderic/dnd-kit/issues/1204</a></p>
<p><a href="https://github.com/clauderic/dnd-kit/issues/893" target="_blank" rel="noopener noreferrer">https://github.com/clauderic/dnd-kit/issues/893</a></p>
<p>éœ€è¦æ³¨å†Œä¸€äº›ä¼ æ„Ÿå™¨ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> sensor <span class="token operator">=</span> <span class="token function">useSensor</span><span class="token punctuation">(</span>PointerSensor<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">activationConstraint</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3>æ¡ä»¶æ‹–æ‹½</h3>
<p>è®©å…ƒç´ åœ¨æŸäº›æ¡ä»¶ä¸‹å…è®¸æ’åºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> attributes<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> setNodeRef<span class="token punctuation">,</span> transform<span class="token punctuation">,</span> transition <span class="token punctuation">}</span> <span class="token operator">=</span>
  <span class="token function">useSortable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> props<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> props<span class="token punctuation">.</span>disabled <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3>video å…ƒç´ æ— æ³•è¢«æ‹–æ‹½</h3>
<p>å¤–å±‚åŒ…è£¹ä¸€ä¸ª <code>div</code>ã€‚</p>
<div class="language-tsx" data-ext="tsx" data-title="tsx"><pre class="language-tsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>videoItem<span class="token punctuation">}</span></span>
  <span class="token attr-name">onMouseEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    videoRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">onMouseLeave</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    videoRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
    <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>videoRef<span class="token punctuation">}</span></span>
    <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>resource<span class="token punctuation">.</span>resourceUrl<span class="token punctuation">}</span></span>
    <span class="token attr-name">controls</span>
    <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">.</span>video<span class="token punctuation">}</span></span>
    <span class="token attr-name">muted</span>
    <span class="token attr-name">loop</span>
  <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>track</span> <span class="token attr-name">kind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>captions<span class="token punctuation">"</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3>æ‹–æ‹½åŠ¨ç”»å¼‚å¸¸</h3>
<p>æ’åºç­–ç•¥</p>
<p>éœ€è¦é€‰æ‹©é»˜è®¤</p>
<h3>æ— é™æ‹–æ‹½å‡ºç°æ»šåŠ¨æ¡</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>modifiers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>restrictToFirstScrollableAncestor<span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><h3>é¼ æ ‡è·Ÿæ‰‹</h3>
<p><a href="https://github.com/clauderic/dnd-kit/issues/122" target="_blank" rel="noopener noreferrer">https://github.com/clauderic/dnd-kit/issues/122</a><br>
<a href="https://github.com/clauderic/dnd-kit/pull/334" target="_blank" rel="noopener noreferrer">https://github.com/clauderic/dnd-kit/pull/334</a></p>
<p><a href="https://github.com/clauderic/dnd-kit/blob/master/stories/components/Draggable/DraggableOverlay.tsx" target="_blank" rel="noopener noreferrer">https://github.com/clauderic/dnd-kit/blob/master/stories/components/Draggable/DraggableOverlay.tsx</a></p>
]]></content>
    <category term="practice"/>
    <published>2023-11-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">è‡ªåŠ¨åˆ‡æ¢ node ç‰ˆæœ¬</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/practice/015-auto-change-node.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/practice/015-auto-change-node.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ç¯å¢ƒå‡†å¤‡</h2>
<ol>
<li>å®‰è£… <code>nvm</code><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div></li>
<li>å®‰è£… <code>oh-my-zsh</code>ï¼š<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="token variable">)</span></span>"</span>
</code></pre></div></li>
</ol>]]></summary>
    <content type="html"><![CDATA[<h2>ç¯å¢ƒå‡†å¤‡</h2>
<ol>
<li>å®‰è£… <code>nvm</code><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.2/install.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div></li>
<li>å®‰è£… <code>oh-my-zsh</code>ï¼š<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="token variable">)</span></span>"</span>
</code></pre></div></li>
</ol>
<h2>é…ç½® <code>.zshrc</code></h2>
<p>åœ¨ <code>.zshrc</code> ä¸‹æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š<code>vi ~/.zshrc</code></p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Load nvm and set up automatic version switching</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_DIR</span><span class="token operator">=</span><span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">${XDG_CONFIG_HOME-}</span>"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">printf</span> %s <span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.nvm"</span> <span class="token operator">||</span> <span class="token builtin class-name">printf</span> %s <span class="token string">"<span class="token variable">${XDG_CONFIG_HOME}</span>/nvm"</span><span class="token variable">)</span></span>"</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>. <span class="token string">"<span class="token variable">$NVM_DIR</span>/nvm.sh"</span> <span class="token comment"># This loads nvm</span>

<span class="token comment"># Enable oh-my-zsh plugins</span>
<span class="token assign-left variable">plugins</span><span class="token operator">=</span><span class="token punctuation">(</span>git z nvm zsh-syntax-highlighting zsh-autosuggestions<span class="token punctuation">)</span>

<span class="token comment"># Load oh-my-zsh</span>
<span class="token builtin class-name">source</span> <span class="token variable">$ZSH</span>/oh-my-zsh.sh

<span class="token comment"># oh-my-zsh nvm plugin settings</span>
zstyle <span class="token string">':omz:plugins:nvm'</span> lazy <span class="token function">yes</span>
zstyle <span class="token string">':omz:plugins:nvm'</span> autoload <span class="token function">yes</span>
zstyle <span class="token string">':omz:plugins:nvm'</span> silent-autoload <span class="token function">yes</span>

<span class="token comment"># Load nvm automatically when changing directories</span>
autoload <span class="token parameter variable">-U</span> add-zsh-hook
<span class="token function-name function">load-nvmrc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-f</span> .nvmrc <span class="token operator">&amp;&amp;</span> <span class="token parameter variable">-r</span> .nvmrc <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    nvm use
  <span class="token keyword">elif</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span>nvm version<span class="token variable">)</span></span> <span class="token operator">!=</span> <span class="token variable"><span class="token variable">$(</span>nvm version default<span class="token variable">)</span></span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    nvm use default
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
add-zsh-hook chpwd load-nvmrc
load-nvmrc
</code></pre></div><p>ä¿å­˜ <code>.zshrc</code> æ–‡ä»¶åï¼Œé‡å¯ç»ˆç«¯æˆ–é‡æ–°åŠ è½½é…ç½®ï¼š<code>source ~/.zshrc</code>ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>oh-my-zsh</code> ä¸­çš„ <code>nvm</code> æä¾›äº†ä¸€äº›å¿«æ·å‘½ä»¤å’Œè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œä½¿å¾—ä½¿ç”¨ nvm (Node Version Manager) æ›´åŠ ä¾¿æ·ã€‚</p>
</div>
<h2>æ·»åŠ  <code>.nvmrc</code></h2>
<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.nvmrc</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º <code>v20.10.0</code>ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/20240718145716.png" alt="auto-change-node" tabindex="0" loading="lazy"><figcaption>auto-change-node</figcaption></figure>
]]></content>
    <category term="practice"/>
    <published>2024-07-18T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å¿«é€Ÿå¼€å§‹</title>
    <id>https://dribble-njr.github.io/blog/blog/backend/database/sql/01-quick-start.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/backend/database/sql/01-quick-start.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>SQL (Structured Query Language:ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€) æ˜¯ç”¨äºç®¡ç†å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>SQL é€šè¿‡ä¸€ç³»åˆ—çš„è¯­å¥å’Œå‘½ä»¤æ¥æ‰§è¡Œæ•°æ®å®šä¹‰ã€æ•°æ®æŸ¥è¯¢ã€æ•°æ®æ“ä½œå’Œæ•°æ®æ§åˆ¶ç­‰åŠŸèƒ½,åŒ…æ‹¬æ•°æ®æ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤ï¼Œæ•°æ®åº“æ¨¡å¼åˆ›å»ºå’Œä¿®æ”¹ï¼Œä»¥åŠæ•°æ®è®¿é—®æ§åˆ¶ã€‚</p>
<h2>SQL æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>SQL æŒ‡ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œå…¨ç§°æ˜¯ Structured Query Languageã€‚</li>
<li>SQL è®©æ‚¨å¯ä»¥è®¿é—®å’Œå¤„ç†æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®æ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤ã€‚</li>
<li>SQL è¯­è¨€é‡‡ç”¨è‹±è¯­å…³é”®è¯ï¼Œä½¿å…¶æ˜“è¯»æ˜“å†™ã€‚</li>
<li>SQL ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰å’Œç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆANSIï¼‰æ ‡å‡†åŒ–ã€‚</li>
<li>SQL æä¾›äº†ä¸°å¯Œçš„æ“ä½œæ•°æ®çš„åŠŸèƒ½ï¼Œä»ç®€å•çš„æŸ¥è¯¢åˆ°å¤æ‚çš„æ•°æ®åº“ç®¡ç†æ“ä½œã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>SQL (Structured Query Language:ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€) æ˜¯ç”¨äºç®¡ç†å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>SQL é€šè¿‡ä¸€ç³»åˆ—çš„è¯­å¥å’Œå‘½ä»¤æ¥æ‰§è¡Œæ•°æ®å®šä¹‰ã€æ•°æ®æŸ¥è¯¢ã€æ•°æ®æ“ä½œå’Œæ•°æ®æ§åˆ¶ç­‰åŠŸèƒ½,åŒ…æ‹¬æ•°æ®æ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤ï¼Œæ•°æ®åº“æ¨¡å¼åˆ›å»ºå’Œä¿®æ”¹ï¼Œä»¥åŠæ•°æ®è®¿é—®æ§åˆ¶ã€‚</p>
<h2>SQL æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>SQL æŒ‡ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œå…¨ç§°æ˜¯ Structured Query Languageã€‚</li>
<li>SQL è®©æ‚¨å¯ä»¥è®¿é—®å’Œå¤„ç†æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®æ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤ã€‚</li>
<li>SQL è¯­è¨€é‡‡ç”¨è‹±è¯­å…³é”®è¯ï¼Œä½¿å…¶æ˜“è¯»æ˜“å†™ã€‚</li>
<li>SQL ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰å’Œç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆANSIï¼‰æ ‡å‡†åŒ–ã€‚</li>
<li>SQL æä¾›äº†ä¸°å¯Œçš„æ“ä½œæ•°æ®çš„åŠŸèƒ½ï¼Œä»ç®€å•çš„æŸ¥è¯¢åˆ°å¤æ‚çš„æ•°æ®åº“ç®¡ç†æ“ä½œã€‚</li>
</ul>
<h2>SQL èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>SQL é¢å‘æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢</li>
<li>SQL å¯ä»æ•°æ®åº“å–å›æ•°æ®</li>
<li>SQL å¯åœ¨æ•°æ®åº“ä¸­æ’å…¥æ–°çš„è®°å½•</li>
<li>SQL å¯æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®</li>
<li>SQL å¯ä»æ•°æ®åº“åˆ é™¤è®°å½•</li>
<li>SQL å¯åˆ›å»ºæ–°æ•°æ®åº“</li>
<li>SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°è¡¨</li>
<li>SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</li>
<li>SQL å¯åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè§†å›¾</li>
<li>SQL å¯ä»¥è®¾ç½®è¡¨ã€å­˜å‚¨è¿‡ç¨‹å’Œè§†å›¾çš„æƒé™</li>
</ul>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>è™½ç„¶ SQL æ˜¯ä¸€é—¨ ANSIï¼ˆAmerican National Standards Institute ç¾å›½å›½å®¶æ ‡å‡†åŒ–ç»„ç»‡ï¼‰æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ç€å¤šç§ä¸åŒç‰ˆæœ¬çš„ SQL è¯­è¨€ã€‚</p>
<p>ç„¶è€Œï¼Œä¸ºäº†ä¸ ANSI æ ‡å‡†ç›¸å…¼å®¹ï¼Œå®ƒä»¬å¿…é¡»ä»¥ç›¸ä¼¼çš„æ–¹å¼å…±åŒåœ°æ¥æ”¯æŒä¸€äº›ä¸»è¦çš„å‘½ä»¤ï¼ˆæ¯”å¦‚ SELECTã€UPDATEã€DELETEã€INSERTã€WHERE ç­‰ç­‰ï¼‰ã€‚</p>
</div>
<h2>SQL å‘å±•å†å²</h2>
<p>ä»¥ä¸‹æ˜¯ SQL å‘å±•å†å²çš„å…³é”®èŠ‚ç‚¹ï¼š</p>
<h3>1970s: èµ·æºä¸æ—©æœŸå‘å±•</h3>
<ol>
<li>1970 å¹´ï¼šåŸƒå¾·åŠ Â·ç§‘å¾·ï¼ˆEdgar F. Coddï¼‰å‘è¡¨äº†ã€ŠA Relational Model of Data for Large Shared Data Banksã€‹è®ºæ–‡ï¼Œæå‡ºäº†å…³ç³»æ•°æ®åº“çš„æ¦‚å¿µï¼Œä¸º SQL çš„å‘å±•å¥ å®šäº†ç†è®ºåŸºç¡€ã€‚</li>
<li>1973 å¹´-1974 å¹´ï¼šIBM çš„ç ”ç©¶äººå‘˜ Donald D. Chamberlin å’Œ Raymond F. Boyce åœ¨ç§‘å¾·çš„ç†è®ºåŸºç¡€ä¸Šå¼€å‘äº†ä¸€ç§åä¸º SEQUELï¼ˆStructured English Query Languageï¼‰çš„è¯­è¨€ï¼Œç”¨äºæ“ä½œå’Œç®¡ç† IBM çš„ System R å…³ç³»æ•°æ®åº“ã€‚</li>
<li>1976 å¹´ï¼šSEQUEL æ›´åä¸º SQLï¼ˆStructured Query Languageï¼‰ã€‚</li>
</ol>
<h3>1980s: æ ‡å‡†åŒ–ä¸å•†ä¸šåŒ–</h3>
<ol start="4">
<li>1981 å¹´ï¼šIBM æ¨å‡ºäº†å•†ç”¨å…³ç³»æ•°æ®åº“ç³»ç»Ÿ SQL/DSï¼ˆDatabase Systemï¼‰å’Œ DB2ï¼ˆDatabase 2ï¼‰ã€‚</li>
<li>1986 å¹´ï¼šç¾å›½å›½å®¶æ ‡å‡†åä¼šï¼ˆANSIï¼‰å‘å¸ƒäº†ç¬¬ä¸€ä¸ª SQL æ ‡å‡† ANSI SQL-86ï¼ˆSQL-87ï¼‰ã€‚</li>
<li>1987 å¹´ï¼šå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰ä¹Ÿé‡‡çº³äº† ANSI SQL-86 ä½œä¸ºå›½é™…æ ‡å‡†ã€‚</li>
</ol>
<h3>1990s: æ‰©å±•ä¸æ”¹è¿›</h3>
<ol start="7">
<li>1992 å¹´ï¼šå‘å¸ƒäº† SQL-92ï¼ˆSQL2ï¼‰æ ‡å‡†ï¼Œæ˜¾è‘—æ‰©å±•äº† SQL è¯­è¨€çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¹æ–°æ•°æ®ç±»å‹ã€åµŒå¥—æŸ¥è¯¢å’Œè¿æ¥çš„æ”¯æŒã€‚</li>
<li>1999 å¹´ï¼šå‘å¸ƒäº† SQL:1999ï¼ˆSQL3ï¼‰æ ‡å‡†ï¼Œå¼•å…¥äº†å¯¹è±¡å…³ç³»æ•°æ®åº“ï¼ˆORDBMSï¼‰ç‰¹æ€§ã€é€’å½’æŸ¥è¯¢ã€è§¦å‘å™¨å’Œç”¨æˆ·å®šä¹‰å‡½æ•°ã€‚</li>
</ol>
<h3>2000s: æŒç»­æ¼”è¿›ä¸æ–°ç‰¹æ€§</h3>
<ol start="9">
<li>2003 å¹´ï¼šå‘å¸ƒäº† SQL:2003 æ ‡å‡†ï¼Œå¼•å…¥äº† XML ç›¸å…³ç‰¹æ€§å’Œçª—å£å‡½æ•°ã€‚</li>
<li>2006 å¹´ï¼šå‘å¸ƒäº† SQL:2006 æ ‡å‡†ï¼Œä¸»è¦å¢å¼ºäº†å¯¹ XML çš„æ”¯æŒã€‚</li>
<li>2008 å¹´ï¼šå‘å¸ƒäº† SQL:2008 æ ‡å‡†ï¼Œè¿›ä¸€æ­¥æ”¹è¿›äº†è¯­æ³•å’Œæ€§èƒ½ä¼˜åŒ–ã€‚</li>
</ol>
<h3>2010s: æ–°åŠŸèƒ½ä¸å¤§æ•°æ®æ”¯æŒ</h3>
<ol start="12">
<li>2011 å¹´ï¼šå‘å¸ƒäº† SQL:2011 æ ‡å‡†ï¼Œå¢åŠ äº†å¯¹æ—¶é—´æ•°æ®ç±»å‹å’Œæ—¶é—´æ—…è¡Œï¼ˆtemporal dataï¼‰çš„æ”¯æŒã€‚</li>
<li>2016 å¹´ï¼šå‘å¸ƒäº† SQL:2016 æ ‡å‡†ï¼Œå¼•å…¥äº† JSON æ•°æ®ç±»å‹å’Œç›¸å…³æ“ä½œå‡½æ•°ï¼Œé€‚åº”äº† NoSQL æ•°æ®åº“å’Œå¤§æ•°æ®å¤„ç†éœ€æ±‚ã€‚</li>
</ol>
<h3>2020s: ç°ä»£åŒ–ä¸æ ‡å‡†æ›´æ–°</h3>
<ol start="14">
<li>2023 å¹´ï¼šæœ€æ–°çš„ SQL æ ‡å‡†æŒç»­æ”¹è¿›ï¼Œå¢åŠ äº†å¯¹æ›´ç°ä»£åŒ–çš„æ•°æ®åº“éœ€æ±‚å’Œç‰¹æ€§çš„æ”¯æŒã€‚</li>
</ol>
<h2>æ€»ç»“</h2>
<p>SQL ä»ä¸€ç§åŸºäºå…³ç³»æ¨¡å‹çš„æŸ¥è¯¢è¯­è¨€å‘å±•æˆä¸ºç°ä»£æ•°æ®åº“ç®¡ç†çš„æ ¸å¿ƒè¯­è¨€ï¼Œå…¶æ ‡å‡†åœ¨ä¸æ–­æ¼”è¿›å’Œæ‰©å±•ã€‚</p>
<p>å„å¤§æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ MySQLã€PostgreSQLã€SQLiteã€SQL Serverã€Oracle ç­‰ï¼‰åœ¨éµå¾ª SQL æ ‡å‡†çš„åŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†è‡ªèº«çš„æ‰©å±•å’Œä¼˜åŒ–ï¼Œä½¿ SQL æˆä¸ºæ•°æ®æ“ä½œå’Œç®¡ç†çš„å¼ºå¤§å·¥å…·ã€‚</p>
<p>SQL çš„å‘å±•ä¸ä»…ä½“ç°äº†æŠ€æœ¯çš„è¿›æ­¥ï¼Œä¹Ÿåæ˜ äº†æ•°æ®ç®¡ç†éœ€æ±‚çš„å˜åŒ–å’Œå¢é•¿ã€‚</p>
]]></content>
    <category term="database"/>
    <published>2024-07-17T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ä¿®æ”¹æäº¤</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pro-git/06-change-commit.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pro-git/06-change-commit.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>ä¿®æ”¹æäº¤ä¿¡æ¯</h2>
<p>åœ¨ Git ä¸­ï¼Œä¿®æ”¹æäº¤æ˜¯é€šè¿‡ <code>git commit --amend</code> å‘½ä»¤æ¥å®Œæˆçš„ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> commit <span class="token parameter variable">--amend</span>
</code></pre></div><p>æ­¤æ—¶å°±èƒ½å‡ºç°ä¸€ä¸ªäº¤äº’å¼çš„ä¿®æ”¹æäº¤çª—å£ï¼Œå¯ä»¥ä¿®æ”¹æäº¤ä¿¡æ¯ï¼Œæ·»åŠ æ–‡ä»¶ï¼Œæˆ–è€…åˆ é™¤æ–‡ä»¶ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<h2>ä¿®æ”¹æäº¤ä¿¡æ¯</h2>
<p>åœ¨ Git ä¸­ï¼Œä¿®æ”¹æäº¤æ˜¯é€šè¿‡ <code>git commit --amend</code> å‘½ä»¤æ¥å®Œæˆçš„ã€‚</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> commit <span class="token parameter variable">--amend</span>
</code></pre></div><p>æ­¤æ—¶å°±èƒ½å‡ºç°ä¸€ä¸ªäº¤äº’å¼çš„ä¿®æ”¹æäº¤çª—å£ï¼Œå¯ä»¥ä¿®æ”¹æäº¤ä¿¡æ¯ï¼Œæ·»åŠ æ–‡ä»¶ï¼Œæˆ–è€…åˆ é™¤æ–‡ä»¶ã€‚</p>
<h2>ä¿®æ”¹ä½œè€…ä¿¡æ¯</h2>
<p>ç”±äºæŸæ¬¡æäº¤æ—¶ä¸å°å¿ƒå°† <code>git user</code> æ”¹æˆäº†å…¶ä»–è´¦æˆ·ï¼Œåœ¨åç»­ <code>commit</code> æ—¶æäº¤äº†é”™è¯¯çš„ç”¨æˆ·ä¿¡æ¯ï¼Œéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼š<code>git rebase -i &lt;commit-hash&gt;</code>ã€‚</p>
<p>æ„ä¸ºä»å½“å‰ <code>commit</code> åçš„æ‰€æœ‰æäº¤ã€‚å°† <code>pick</code> æ”¹ä¸º <code>edit</code>ï¼Œå¹¶ä½¿ç”¨ <code>git commit --amend --author="Author Name &lt;email&gt;"</code> ä¿®æ”¹ç”¨æˆ·ã€‚</p>
<p>æ»¡æ„åä½¿ç”¨ <code>git rebase --continue</code> å…³é—­æœ¬æ¬¡ä¿®æ”¹ã€‚</p>
]]></content>
    <category term="READING"/>
    <published>2024-07-10T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ‰‹å†™ new æ“ä½œç¬¦</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/014-implement-new.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/014-implement-new.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><code>new</code> æ“ä½œç¬¦çš„å®ç°è¿‡ç¨‹ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li>
<li>å°†ç©ºå¯¹è±¡çš„éšå¼åŸå‹ <code>[[prototype]]</code> èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å¯¹è±¡ï¼›</li>
<li>è®©æ„é€ å‡½æ•°çš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼›</li>
<li>åˆ¤æ–­æ„é€ å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹ã€‚</li>
</ol>
<p>é‚£ä¹ˆå…·ä½“å®ç°å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">newOperator</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> constructor <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'type error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡ä½œä¸ºå®ƒçš„åŸå‹</span>
  <span class="token keyword">const</span> instance <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// æ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç </span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
  <span class="token comment">// åˆ¤æ–­è¿”å›å€¼çš„ç±»å‹</span>
  <span class="token keyword">let</span> flag <span class="token operator">=</span> res <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> flag <span class="token operator">?</span> res <span class="token operator">:</span> instance
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">newOperator</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// Person { name: 'wang', age: 18 }</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p><code>new</code> æ“ä½œç¬¦çš„å®ç°è¿‡ç¨‹ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li>
<li>å°†ç©ºå¯¹è±¡çš„éšå¼åŸå‹ <code>[[prototype]]</code> èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å¯¹è±¡ï¼›</li>
<li>è®©æ„é€ å‡½æ•°çš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼›</li>
<li>åˆ¤æ–­æ„é€ å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹ã€‚</li>
</ol>
<p>é‚£ä¹ˆå…·ä½“å®ç°å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">newOperator</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> constructor <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'type error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡ä½œä¸ºå®ƒçš„åŸå‹</span>
  <span class="token keyword">const</span> instance <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// æ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç </span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
  <span class="token comment">// åˆ¤æ–­è¿”å›å€¼çš„ç±»å‹</span>
  <span class="token keyword">let</span> flag <span class="token operator">=</span> res <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> flag <span class="token operator">?</span> res <span class="token operator">:</span> instance
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">newOperator</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// Person { name: 'wang', age: 18 }</span>
</code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2022-08-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç±»</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/013-class.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/013-class.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>å£°æ˜</h2>
<p>ä¸å‡½æ•°ç±»å‹ç›¸ä¼¼ï¼Œå®šä¹‰ç±»ä¹Ÿæœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼šç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä½¿ç”¨ <code>class</code> å…³é”®å­—åŠ å¤§æ‹¬å·ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// ç±»å£°æ˜</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// ç±»è¡¨è¾¾å¼</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>å£°æ˜</h2>
<p>ä¸å‡½æ•°ç±»å‹ç›¸ä¼¼ï¼Œå®šä¹‰ç±»ä¹Ÿæœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼šç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä½¿ç”¨ <code>class</code> å…³é”®å­—åŠ å¤§æ‹¬å·ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// ç±»å£°æ˜</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// ç±»è¡¨è¾¾å¼</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div class="hint-container info">
<p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p>
<p>ä¸å‡½æ•°å£°æ˜ä¸åŒï¼š</p>
<ol>
<li>ç±»å£°æ˜ä¸ä¼šè¢«æå‡ã€‚</li>
<li>å‡½æ•°å—å‡½æ•°ä½œç”¨åŸŸé™åˆ¶ï¼Œè€Œç±»å—å—ä½œç”¨åŸŸé™åˆ¶ã€‚</li>
</ol>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">FunctionDeclaration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">ClassDeclaration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>FunctionDeclaration<span class="token punctuation">)</span> <span class="token comment">// FunctionDeclaration() {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ClassDeclaration<span class="token punctuation">)</span> <span class="token comment">// ReferenceError: ClassDeclaration is not defined</span>
</code></pre></div></div>
<h2>ç±»æ„é€ å‡½æ•°</h2>
<p>ç±»æ„é€ å‡½æ•°æ˜¯ç±»çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œé€šè¿‡ <code>new</code> å…³é”®å­—åˆ›å»ºç±»çš„å®ä¾‹æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°çš„åç§°å¿…é¡»æ˜¯ <code>constructor</code>ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰æ„é€ å‡½æ•°ï¼Œä¼šé»˜è®¤æ·»åŠ ä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ <code>new</code> è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œã€‚</p>
<ol>
<li>åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ªæ–°å¯¹è±¡å†…éƒ¨çš„ <code>[[Prototype]]</code> æŒ‡é’ˆè¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ã€‚</li>
<li>æ„é€ å‡½æ•°å†…éƒ¨çš„ <code>this</code> è¢«èµ‹å€¼ä¸ºè¿™ä¸ªæ–°å¯¹è±¡ï¼ˆå³ <code>this</code> æŒ‡å‘æ–°å¯¹è±¡ï¼‰ã€‚</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ã€‚</li>
<li>å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™ï¼Œè¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡ã€‚</li>
</ol>
<h2>å®ä¾‹ã€åŸå‹å’Œç±»æˆå‘˜</h2>
<h3>å®ä¾‹æˆå‘˜</h3>
<p>æ¯æ¬¡é€šè¿‡ <code>new</code> è°ƒç”¨ç±»æ ‡è¯†ç¬¦æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œç±»æ„é€ å‡½æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä¸ºæ–°åˆ›å»ºçš„å®ä¾‹ï¼ˆthisï¼‰æ·»åŠ ã€Œè‡ªæœ‰ã€å±æ€§ã€‚</p>
<h3>åŸå‹æ–¹æ³•ä¸è®¿é—®å™¨</h3>
<p>ä¸ºäº†åœ¨å®ä¾‹é—´å…±äº«æ–¹æ³•ï¼Œç±»å®šä¹‰è¯­æ³•æŠŠåœ¨ç±»å—ä¸­å®šä¹‰çš„æ–¹æ³•ä½œä¸ºåŸå‹æ–¹æ³•ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>

  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥æŠŠæ–¹æ³•å®šä¹‰åœ¨ç±»æ„é€ å‡½æ•°ä¸­æˆ–è€…ç±»å—ä¸­ï¼Œä½†ä¸èƒ½åœ¨ç±»å—ä¸­ç»™åŸå‹æ·»åŠ åŸå§‹å€¼æˆ–å¯¹è±¡ä½œä¸ºæˆå‘˜æ•°æ®ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Jake'</span>
<span class="token punctuation">}</span>
<span class="token comment">// Uncaught SyntaxError: Unexpected token</span>
</code></pre></div><p>ç±»æ–¹æ³•ç­‰åŒäºå¯¹è±¡å±æ€§ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²ã€ç¬¦å·æˆ–è®¡ç®—çš„å€¼ä½œä¸ºé”®ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> symbolKey <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'symbolKey'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">stringKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'invoked stringKey'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span>symbolKey<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'invoked symbolKey'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">[</span><span class="token string">'computed'</span> <span class="token operator">+</span> <span class="token string">'Key'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'invoked computedKey'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">stringKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// invoked stringKey</span>
p<span class="token punctuation">[</span>symbolKey<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// invoked symbolKey</span>
p<span class="token punctuation">.</span><span class="token function">computedKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// invoked computedKey</span>
</code></pre></div><p>ç±»å®šä¹‰ä¹Ÿæ”¯æŒè·å–å’Œè®¾ç½®è®¿é—®å™¨ã€‚è¯­æ³•ä¸è¡Œä¸ºè·Ÿæ™®é€šå¯¹è±¡ä¸€æ ·ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name_ <span class="token operator">=</span> newName
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name_
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Jake'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Jake</span>
</code></pre></div><h3>é™æ€æˆå‘˜</h3>
<p>ç±»å®šä¹‰æ”¯æŒé™æ€æˆå‘˜ï¼Œè¿™äº›æˆå‘˜æ˜¯ç±»æœ¬èº«çš„å±æ€§ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„å±æ€§ã€‚</p>
<p>é™æ€æˆå‘˜éå¸¸é€‚åˆä½œä¸ºå·¥å…·å‡½æ•°æˆ–è€…å·¥å‚å‡½æ•°ã€‚é™æ€æˆå‘˜å¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼Œè€Œä¸éœ€è¦å®ä¾‹åŒ–ç±»ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å•ä¾‹æ¨¡å¼å°±ä½¿ç”¨äº†é™æ€æˆå‘˜ã€‚</p>
</div>
<h2>ç»§æ‰¿</h2>
<h3>åŸºç¡€</h3>
<p>ç±»ç»§æ‰¿æ˜¯é€šè¿‡ <code>extends</code> å…³é”®å­—å®ç°çš„ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰å®ä¾‹æˆå‘˜ã€åŸå‹æ–¹æ³•å’Œé™æ€æˆå‘˜ã€‚ä¸ä»…å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿æ™®é€šçš„æ„é€ å‡½æ•°ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// ç»§æ‰¿ç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token keyword">instanceof</span> <span class="token class-name">Bus</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b <span class="token keyword">instanceof</span> <span class="token class-name">Vehicle</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// ç»§æ‰¿æ™®é€šæ„é€ å‡½æ•°</span>
<span class="token keyword">class</span> <span class="token class-name">Engineer</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Engineer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">Engineer</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3>æ„é€ å‡½æ•°ã€<code>HomeObject</code> å’Œ <code>super()</code></h3>
<p>å­ç±»æ„é€ å‡½æ•°å¿…é¡»è°ƒç”¨ <code>super()</code>ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚<code>super()</code> å¿…é¡»åœ¨ä½¿ç”¨ <code>this</code> ä¹‹å‰è°ƒç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hasEngine <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸è¦åœ¨è°ƒç”¨ super() ä¹‹å‰å¼•ç”¨ thisï¼Œå¦åˆ™ä¼šæŠ›å‡º ReferenceError</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç›¸å½“äº super.constructor()</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Vehicle</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// Bus { hasEngine: true }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨é™æ€æ–¹æ³•ä¸­å¯ä»¥é€šè¿‡ <code>super</code> è°ƒç”¨ç»§æ‰¿çš„ç±»ä¸Šå®šä¹‰çš„é™æ€æ–¹æ³•ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'vehicle'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Bus<span class="token punctuation">.</span><span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// vehicle</span>
</code></pre></div><h3>æŠ½è±¡åŸºç±»</h3>
<p>æœ‰æ—¶å€™å¯èƒ½éœ€è¦å®šä¹‰è¿™æ ·ä¸€ä¸ªç±»ï¼Œå®ƒå¯ä¾›å…¶ä»–ç±»ç»§æ‰¿ï¼Œä½†æœ¬èº«ä¸ä¼šè¢«å®ä¾‹åŒ–ã€‚è™½ç„¶ ECMAScript æ²¡æœ‰ä¸“é—¨æ”¯æŒè¿™ç§ç±»çš„è¯­æ³• ï¼Œä½†é€šè¿‡ <code>new.target</code> ä¹Ÿå¾ˆå®¹æ˜“å®ç°ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>TypeScript å¯ä»¥ä½¿ç”¨ <code>abstract</code> å…³é”®å­—æ¥å®šä¹‰æŠ½è±¡åŸºç±»ã€‚</p>
</div>
<p><code>new.target</code> ä¿å­˜é€šè¿‡ <code>new</code> å…³é”®å­—è°ƒç”¨çš„ç±»æˆ–å‡½æ•°ã€‚é€šè¿‡åœ¨å®ä¾‹åŒ–æ—¶æ£€æµ‹ <code>new.target</code> æ˜¯ä¸æ˜¯æŠ½è±¡åŸºç±»ï¼Œå¯ä»¥é˜»æ­¢å¯¹æŠ½è±¡åŸºç±»çš„å®ä¾‹åŒ–ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Vehicle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Vehicle cannot be directly instantiated'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ´¾ç”Ÿç±»</span>
<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// class Bus {}</span>
<span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// class Vehicle {}</span>
<span class="token comment">// Error: Vehicle cannot be directly instantiated</span>
</code></pre></div><p>å¦å¤–ï¼Œé€šè¿‡åœ¨æŠ½è±¡åŸºç±»æ„é€ å‡½æ•°ä¸­è¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥è¦æ±‚æ´¾ç”Ÿç±»å¿…é¡»å®šä¹‰æŸä¸ªæ–¹æ³•ã€‚å› ä¸ºåŸå‹æ–¹æ³•åœ¨è°ƒç”¨ç±»æ„é€ å‡½æ•°ä¹‹å‰å°±å·²ç»å­˜åœ¨äº†ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ <code>this</code> å…³é”®å­—æ¥æ£€æŸ¥ç›¸åº”çš„æ–¹æ³•ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>drive <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'drive method must be implemented'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>ç±»æ··å…¥</h3>
<p>ç±»æ··å…¥æ˜¯ä¸€ç§å°†å¤šä¸ªç±»çš„åŠŸèƒ½ç»„åˆåˆ°ä¸€ä¸ªç±»ä¸­çš„æŠ€æœ¯ã€‚é€šè¿‡å°†å¤šä¸ªç±»çš„åŸå‹æ–¹æ³•å¤åˆ¶åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥å®ç°ç±»ä¼¼å¤šé‡ç»§æ‰¿çš„æ•ˆæœã€‚</p>
<p>æ··å…¥æ¨¡å¼å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­è¿ç¼€å¤šä¸ªæ··å…¥å…ƒç´ æ¥å®ç°ï¼Œè¿™ä¸ªè¡¨è¾¾å¼æœ€ç»ˆä¼šè§£æä¸ºä¸€ä¸ªå¯ä»¥è¢«ç»§æ‰¿çš„ç±»ã€‚å¦‚æœ Person ç±»éœ€è¦ç»„åˆ Aã€Bã€Cï¼Œåˆ™éœ€è¦æŸç§æœºåˆ¶å®ç° B ç»§æ‰¿ Aï¼ŒC ç»§æ‰¿ Bï¼Œè€Œ Person å†ç»§æ‰¿ Cï¼Œä»è€ŒæŠŠ Aã€Bã€C ç»„åˆåˆ°è¿™ä¸ªè¶…ç±»ä¸­ã€‚å®ç°è¿™ç§æ¨¡å¼æœ‰ä¸åŒçš„ç­–ç•¥ã€‚</p>
<p>ä¸€ä¸ªç­–ç•¥æ˜¯å®šä¹‰ä¸€ç»„ã€Œå¯åµŒå¥—ã€çš„å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°åˆ†åˆ«æ¥æ”¶ä¸€ä¸ªè¶…ç±»ä½œä¸ºå‚æ•°ï¼Œè€Œå°†æ··å…¥ç±»å®šä¹‰ä¸ºè¿™ä¸ªå‚æ•°çš„å­ç±»ï¼Œå¹¶è¿”å›è¿™ä¸ªç±»ã€‚è¿™äº›ç»„åˆå‡½æ•°å¯ä»¥è¿ç¼€è°ƒç”¨ï¼Œæœ€ç»ˆç»„åˆæˆè¶…ç±»è¡¨è¾¾å¼ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">FooMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">BarMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">BazMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">FooMixin</span><span class="token punctuation">(</span><span class="token function">BarMixin</span><span class="token punctuation">(</span><span class="token function">BazMixin</span><span class="token punctuation">(</span>Vehicle<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// foo</span>
b<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bar</span>
b<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// baz</span>
</code></pre></div><p>é€šè¿‡å†™ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå¯ä»¥æŠŠåµŒå¥—è°ƒç”¨å±•å¼€ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">FooMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">BarMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">BazMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">{</span>
    <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token parameter">BaseClass<span class="token punctuation">,</span> <span class="token operator">...</span>Mixins</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Mixins<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">current</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">)</span><span class="token punctuation">,</span>
    BaseClass
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">mix</span><span class="token punctuation">(</span>Vehicle<span class="token punctuation">,</span> FooMixin<span class="token punctuation">,</span> BarMixin<span class="token punctuation">,</span> BazMixin<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// foo</span>
b<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bar</span>
b<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// baz</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å¾ˆå¤š JavaScript æ¡†æ¶ï¼ˆç‰¹åˆ«æ˜¯ Reactï¼‰å·²ç»æŠ›å¼ƒæ··å…¥æ¨¡å¼ï¼Œè½¬å‘äº†ç»„åˆæ¨¡å¼ï¼ˆæŠŠæ–¹æ³•æå–åˆ°ç‹¬ç«‹çš„ç±»å’Œè¾…åŠ©å¯¹è±¡ä¸­ï¼Œç„¶åæŠŠå®ƒä»¬ç»„åˆèµ·æ¥ï¼Œä½†ä¸ä½¿ç”¨ç»§æ‰¿ï¼‰ã€‚</p>
<p>è¿™åæ˜ äº†é‚£ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è½¯ä»¶è®¾è®¡åŸåˆ™ï¼šã€Œç»„åˆèƒœè¿‡ç»§æ‰¿ï¼ˆcomposition over inheritanceï¼‰ã€‚ã€è¿™ä¸ªè®¾è®¡åŸåˆ™è¢«å¾ˆå¤šäººéµå¾ªï¼Œåœ¨ä»£ç è®¾è®¡ä¸­èƒ½æä¾›æå¤§çš„çµæ´»æ€§ã€‚</p>
</div>
]]></content>
    <category term="JavaScript"/>
    <published>2024-06-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å®å¼¯ä¸æŠ˜</title>
    <id>https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/05-work-around.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/reading/pragmatic-programmer/05-work-around.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å°½é‡ç¼–å†™å®½æ¾çµæ´»çš„ä»£ç ï¼Œå¢å¼ºä»£ç çš„å¥å£®æ€§ã€‚</p>
<p>æœ‰ä¸€ä¸ªä¿æŒçµæ´»æ€§çš„å¥½æ–¹æ³•ï¼Œé‚£å°±æ˜¯ç¼–å†™æ›´å°‘çš„ä»£ç ã€‚ä¿®æ”¹ä»£ç å¯èƒ½ä¼šå¼•å…¥æ–°çš„ Bug</p>
<h2>è§£è€¦</h2>
<p>ä»£ç è€¦åˆä¼šå¯¼è‡´ã€Œä¸€æ”¹éƒ½æ”¹ã€ã€‚</p>
<ul>
<li>è§£è€¦è®©æ”¹å˜ä»£ç æ›´å®¹æ˜“ï¼›</li>
<li>é¿å…å…¨å±€æ•°æ®ã€‚</li>
</ul>
<h2>åœ¨ç°å®ä¸–ç•ŒæŠ›çƒæ‚è€</h2>
<p>åˆ©ç”¨ä¸‹é¢å››ç§ç­–ç•¥ç¼–å†™æ›´å¥½çš„ç¨‹åºï¼š</p>
<ol>
<li>æœ‰é™çŠ¶æ€æœº</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>å‘å¸ƒ/è®¢é˜…</li>
<li>å“åº”å¼ç¼–ç¨‹ä¸æµ</li>
</ol>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å“åº”å¼ç¼–ç¨‹ç›¸å…³å­¦ä¹ èµ„æ–™ï¼š</p>
<ul>
<li><a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754" target="_blank" rel="noopener noreferrer">The introduction to Reactive Programming you've been missing</a></li>
<li><a href="https://rxjs.dev/" target="_blank" rel="noopener noreferrer">Rxjs</a></li>
<li><a href="https://rxjs-cn.github.io/learn-rxjs-operators/" target="_blank" rel="noopener noreferrer">å­¦ä¹  rxjs æ“ä½œç¬¦</a></li>
<li><a href="https://www.learnrxjs.io/" target="_blank" rel="noopener noreferrer">learn rxjs</a></li>
<li><a href="https://rxmarbles.com/" target="_blank" rel="noopener noreferrer">rxmarbles</a></li>
<li><a href="https://rxjs.dev/operator-decision-tree" target="_blank" rel="noopener noreferrer">rxjs æ“ä½œå†³å®šæ ‘</a></li>
</ul>
</div>]]></summary>
    <content type="html"><![CDATA[<p>å°½é‡ç¼–å†™å®½æ¾çµæ´»çš„ä»£ç ï¼Œå¢å¼ºä»£ç çš„å¥å£®æ€§ã€‚</p>
<p>æœ‰ä¸€ä¸ªä¿æŒçµæ´»æ€§çš„å¥½æ–¹æ³•ï¼Œé‚£å°±æ˜¯ç¼–å†™æ›´å°‘çš„ä»£ç ã€‚ä¿®æ”¹ä»£ç å¯èƒ½ä¼šå¼•å…¥æ–°çš„ Bug</p>
<h2>è§£è€¦</h2>
<p>ä»£ç è€¦åˆä¼šå¯¼è‡´ã€Œä¸€æ”¹éƒ½æ”¹ã€ã€‚</p>
<ul>
<li>è§£è€¦è®©æ”¹å˜ä»£ç æ›´å®¹æ˜“ï¼›</li>
<li>é¿å…å…¨å±€æ•°æ®ã€‚</li>
</ul>
<h2>åœ¨ç°å®ä¸–ç•ŒæŠ›çƒæ‚è€</h2>
<p>åˆ©ç”¨ä¸‹é¢å››ç§ç­–ç•¥ç¼–å†™æ›´å¥½çš„ç¨‹åºï¼š</p>
<ol>
<li>æœ‰é™çŠ¶æ€æœº</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>å‘å¸ƒ/è®¢é˜…</li>
<li>å“åº”å¼ç¼–ç¨‹ä¸æµ</li>
</ol>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å“åº”å¼ç¼–ç¨‹ç›¸å…³å­¦ä¹ èµ„æ–™ï¼š</p>
<ul>
<li><a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754" target="_blank" rel="noopener noreferrer">The introduction to Reactive Programming you've been missing</a></li>
<li><a href="https://rxjs.dev/" target="_blank" rel="noopener noreferrer">Rxjs</a></li>
<li><a href="https://rxjs-cn.github.io/learn-rxjs-operators/" target="_blank" rel="noopener noreferrer">å­¦ä¹  rxjs æ“ä½œç¬¦</a></li>
<li><a href="https://www.learnrxjs.io/" target="_blank" rel="noopener noreferrer">learn rxjs</a></li>
<li><a href="https://rxmarbles.com/" target="_blank" rel="noopener noreferrer">rxmarbles</a></li>
<li><a href="https://rxjs.dev/operator-decision-tree" target="_blank" rel="noopener noreferrer">rxjs æ“ä½œå†³å®šæ ‘</a></li>
</ul>
</div>
<h2>å˜æ¢å¼ç¼–ç¨‹</h2>
<p>æŠŠç¨‹åºè§†ä¸ºä»è¾“å…¥åˆ°è¾“å‡ºçš„ä¸€ä¸ªå˜æ¢ã€‚</p>
<ul>
<li>ç¼–ç¨‹è°ˆçš„æ˜¯ä»£ç ï¼Œä½†ç¨‹åºè°ˆçš„æ˜¯æ•°æ®ï¼›</li>
<li>å°†ä»£ç çœ‹ä½œæ˜¯ä¸€ç³»åˆ—çš„å˜æ¢ã€‚</li>
</ul>
<h2>ç»§æ‰¿ç¨</h2>
<p>ç»§æ‰¿å°±æ˜¯è€¦åˆã€‚</p>
<p>æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ¥å£ï¼šå°½é‡ä½¿ç”¨æ¥å£æ¥è¡¨è¾¾å¤šæ€</li>
<li>å§”æ‰˜</li>
<li><code>mixin</code> ä¸ç‰¹å¾</li>
</ul>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>æ‰€ä»¥ Reactã€Vue éƒ½èµ°å‘äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ</p>
</div>
<h2>é…ç½®</h2>
<p>ä½¿ç”¨å¤–éƒ¨é…ç½®å‚æ•°åŒ–åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ <code>json</code>, <code>yml</code> ç­‰ã€‚</p>
]]></content>
    <category term="READING"/>
    <published>2024-04-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç»§æ‰¿</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/012-extends.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/012-extends.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è®¨è®ºæœ€å¤šçš„è¯é¢˜ã€‚å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€éƒ½æ”¯æŒä¸¤ç§ç»§æ‰¿ï¼šæ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ã€‚</p>
<p>å‰è€…åªç»§æ‰¿æ–¹æ³•ç­¾åï¼Œåè€…ç»§æ‰¿å®é™…çš„æ–¹æ³•ã€‚æ¥å£ç»§æ‰¿åœ¨ ECMAScript ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå‡½æ•°æ²¡æœ‰ç­¾åã€‚å®ç°ç»§æ‰¿æ˜¯ ECMAScript å”¯ä¸€æ”¯æŒçš„ç»§æ‰¿æ–¹å¼ï¼Œè€Œè¿™ä¸»è¦æ˜¯é€šè¿‡åŸå‹é“¾å®ç°çš„ã€‚</p>
<h2>åŸå‹é“¾</h2>
<p>åŸå‹é“¾æ˜¯ ECMAScript ä¸­çš„ä¸»è¦ç»§æ‰¿æ–¹å¼ï¼Œå½“åŸå‹æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªåŸå‹çš„å®ä¾‹å°±æŒ‡å‘äº†å¦ä¸€ä¸ªåŸå‹ï¼Œè¿™æ ·å®ä¾‹å’ŒåŸå‹å°±ç»„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»: å…¬å…±å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'wang'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' eating~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»: ç‰¹æœ‰å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">studying</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' studying~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 'wang'</span>
stu<span class="token punctuation">.</span><span class="token function">eating</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wang eating~</span>
stu<span class="token punctuation">.</span><span class="token function">studying</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wang studying~</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>ç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è®¨è®ºæœ€å¤šçš„è¯é¢˜ã€‚å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€éƒ½æ”¯æŒä¸¤ç§ç»§æ‰¿ï¼šæ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ã€‚</p>
<p>å‰è€…åªç»§æ‰¿æ–¹æ³•ç­¾åï¼Œåè€…ç»§æ‰¿å®é™…çš„æ–¹æ³•ã€‚æ¥å£ç»§æ‰¿åœ¨ ECMAScript ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå‡½æ•°æ²¡æœ‰ç­¾åã€‚å®ç°ç»§æ‰¿æ˜¯ ECMAScript å”¯ä¸€æ”¯æŒçš„ç»§æ‰¿æ–¹å¼ï¼Œè€Œè¿™ä¸»è¦æ˜¯é€šè¿‡åŸå‹é“¾å®ç°çš„ã€‚</p>
<h2>åŸå‹é“¾</h2>
<p>åŸå‹é“¾æ˜¯ ECMAScript ä¸­çš„ä¸»è¦ç»§æ‰¿æ–¹å¼ï¼Œå½“åŸå‹æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªåŸå‹çš„å®ä¾‹å°±æŒ‡å‘äº†å¦ä¸€ä¸ªåŸå‹ï¼Œè¿™æ ·å®ä¾‹å’ŒåŸå‹å°±ç»„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»: å…¬å…±å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'wang'</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' eating~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»: ç‰¹æœ‰å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">studying</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' studying~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 'wang'</span>
stu<span class="token punctuation">.</span><span class="token function">eating</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wang eating~</span>
stu<span class="token punctuation">.</span><span class="token function">studying</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wang studying~</span>
</code></pre></div><p>ä½¿ç”¨åŸå‹é“¾å®ç°ç»§æ‰¿å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œç„¶è€Œå®ƒè¿˜æœ‰è‡ªå·±çš„å¼Šç«¯ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// åŸå‹é“¾å®ç°ç»§æ‰¿çš„å¼Šç«¯:</span>
<span class="token comment">// 1.ç¬¬ä¸€ä¸ªå¼Šç«¯: æ‰“å° stu å¯¹è±¡, ç»§æ‰¿çš„å±æ€§æ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¹¶ä¸”å¯¹è±¡æ ‡è¯†ä¹Ÿæœ‰é—®é¢˜</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// Person { sno: 111 }</span>

<span class="token comment">// 2.ç¬¬äºŒä¸ªå¼Šç«¯: ä¿®æ”¹å¼•ç”¨å€¼æ—¶ä¼šäº’ç›¸å½±å“</span>
<span class="token keyword">const</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

stu1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'kobe'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// ['kobe']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// ['kobe']</span>

<span class="token comment">// 3.ç¬¬ä¸‰ä¸ªå¼Šç«¯: åœ¨å‰é¢å®ç°ç±»çš„è¿‡ç¨‹ä¸­éƒ½æ²¡æœ‰ä¼ é€’å‚æ•°</span>
<span class="token keyword">const</span> stu3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'lilei'</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu3<span class="token punctuation">)</span> <span class="token comment">// Person { sno: 111 }</span>
</code></pre></div><div class="hint-container note">
<p class="hint-container-title">æ³¨</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å¼•ç”¨ç±»å‹éƒ½ç»§æ‰¿è‡ª <code>Object</code>ï¼Œä»»ä½•å‡½æ•°çš„é»˜è®¤åŸå‹éƒ½æ˜¯ä¸€ä¸ª <code>Object</code> çš„å®ä¾‹ã€‚</p>
</div>
<h2>ç›—ç”¨æ„é€ å‡½æ•°</h2>
<p>ä¸ºäº†è§£å†³åŸå‹é“¾ç»§æ‰¿é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ã€Œç›—ç”¨æ„é€ å‡½æ•°ã€ã€‚åŸºæœ¬æ€è·¯å¾ˆç®€å•ï¼šåœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚å¯ä»¥ä½¿ç”¨ <code>apply()</code> å’Œ <code>call()</code> æ–¹æ³•ä»¥æ–°åˆ›å»ºçš„å¯¹è±¡ä¸ºä¸Šä¸‹æ–‡æ‰§è¡Œæ„é€ å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»: å…¬å…±å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»: ç‰¹æœ‰å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> sno</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç»§æ‰¿å±æ€§</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'kobe'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span>

<span class="token comment">// è§£å†³åŸå‹é“¾å®ç°ç»§æ‰¿çš„å¼Šç«¯</span>
<span class="token comment">// 1. ç¬¬ä¸€ä¸ªå¼Šç«¯: æ‰“å°stuå¯¹è±¡, ç»§æ‰¿çš„å±æ€§æ˜¯çœ‹ä¸åˆ°çš„ï¼Œå¹¶ä¸”å¯¹è±¡æ ‡è¯†ä¹Ÿæœ‰é—®é¢˜</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// Student { name: 'wang', age: 18, friends: [ 'kobe' ], sno: 111 }</span>

<span class="token comment">// 2.ç¬¬äºŒä¸ªå¼Šç«¯: ä¿®æ”¹å¼•ç”¨å€¼æ—¶ä¼šäº’ç›¸å½±å“</span>
<span class="token keyword">const</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'li lei'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'kobe'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'james'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">)</span>

stu1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'lucy'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// ['li lei', 'lucy']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// ['james']</span>

<span class="token comment">// // 3.ç¬¬ä¸‰ä¸ªå¼Šç«¯: åœ¨å‰é¢å®ç°ç±»çš„è¿‡ç¨‹ä¸­éƒ½æ²¡æœ‰ä¼ é€’å‚æ•°</span>
<span class="token keyword">const</span> stu3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'li lei'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">113</span><span class="token punctuation">)</span>
</code></pre></div><p>ç„¶è€Œï¼Œå€Ÿç”¨æ„é€ å‡½æ•°ä¹Ÿæ˜¯æœ‰å¼Šç«¯ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰æ–¹æ³•ï¼Œå‡½æ•°ä¸èƒ½é‡ç”¨ï¼›</li>
<li>è€Œä¸”ï¼Œå­ç±»ä¹Ÿä¸èƒ½è®¿é—®çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œå› ä¸ºä»–æ²¡æœ‰åƒåŸå‹é“¾ç»§æ‰¿ä¸€æ ·å»ºç«‹äº†å®ä¾‹ä¸çˆ¶ç±»åŸå‹å¯¹è±¡çš„è¿æ¥ï¼Œå› æ­¤æ‰€æœ‰ç±»å‹éƒ½åªèƒ½ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼ã€‚</li>
</ul>
<h2>ç»„åˆç»§æ‰¿</h2>
<p>æ—¢ç„¶åŸå‹é“¾ç»§æ‰¿å¯ä»¥å®ç°ç»§æ‰¿æ–¹æ³•ï¼Œè€Œç›—ç”¨æ„é€ å‡½æ•°å¯ä»¥è§£å†³å¼•ç”¨å€¼ã€å¯¹è±¡æ ‡è¯†å’Œä¼ é€’å‚æ•°çš„é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ç»„åˆåŸå‹é“¾ç»§æ‰¿å’Œç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿ã€‚åŸºæœ¬çš„æ€è·¯æ˜¯ä½¿ç”¨åŸå‹é“¾ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œè€Œé€šè¿‡ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»: å…¬å…±å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' eating~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»: ç‰¹æœ‰å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> sno</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token comment">// åŸå‹é“¾ç»§æ‰¿æ–¹æ³•</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ç»„åˆç»§æ‰¿å¼¥è¡¥äº†åŸå‹é“¾å’Œç›—ç”¨æ„é€ å‡½æ•°çš„ä¸è¶³ï¼Œæ˜¯ JavaScript ä¸­ä½¿ç”¨æœ€å¤šçš„ç»§æ‰¿æ¨¡å¼ã€‚è€Œä¸”ç»„åˆç»§æ‰¿ä¹Ÿä¿ç•™äº† <code>instanceof</code> æ“ä½œç¬¦å’Œ <code>isPrototypeOf()</code> æ–¹æ³•è¯†åˆ«åˆæˆå¯¹è±¡çš„èƒ½åŠ›ã€‚</p>
<h2>å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿</h2>
<p>ç»„åˆç»§æ‰¿å¼¥è¡¥äº†åŸå‹é“¾å’Œç›—ç”¨æ„é€ å‡½æ•°çš„ä¸è¶³ï¼Œå®ƒä½¿ç”¨ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œä½¿ç”¨åŸå‹é“¾ç»§æ‰¿æ–¹æ³•ã€‚ä½†æ˜¯å®ƒå­˜åœ¨æ•ˆç‡é—®é¢˜ï¼Œå³çˆ¶ç±»æ„é€ å‡½æ•°ä¼šè°ƒç”¨ä¸¤æ¬¡ï¼šä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»åŸå‹æ—¶è°ƒç”¨ï¼Œä¸€æ¬¡æ˜¯åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»: å…¬å…±å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' eating~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»: ç‰¹æœ‰å±æ€§å’Œæ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> sno</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">)</span> <span class="token comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ Person()</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token comment">// åŸå‹é“¾ç»§æ‰¿æ–¹æ³•</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ Person()</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student
</code></pre></div><p>åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ Person() åï¼ŒStudent.prototype ä¸Šä¼šæœ‰ <code>name</code>, <code>age</code>, <code>friends</code> è¿™ä¸‰ä¸ªå±æ€§ï¼Œå®ƒä»¬æœ¬æ¥æ˜¯ Person çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œç„¶è€Œç°åœ¨å´æŒ‚è½½åˆ°äº† Student å­ç±»çš„åŸå‹å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// Person {</span>
<span class="token comment">//   name: undefined,</span>
<span class="token comment">//   age: undefined,</span>
<span class="token comment">//   friends: undefined,</span>
<span class="token comment">//   constructor: [Function: Student]</span>
<span class="token comment">// }</span>
</code></pre></div><p>è€Œå¦‚æœåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨ç¬¬äºŒæ¬¡ Person()ï¼Œè¿™ä¸€æ¬¡ä¼šåœ¨å¯¹è±¡ä¸Šåˆ›å»ºå®ä¾‹å±æ€§ <code>name</code>, <code>age</code>, <code>friends</code>, <code>sno</code>ï¼Œå‰é¢ä¸‰ä¸ªå±æ€§ä¼šé®è”½åŸå‹ä¸Šçš„åŒåå±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// Student { name: 'wang', age: 18, friends: [], sno: 111 }</span>
</code></pre></div><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æœ‰ä¸¤ç»„ <code>name</code>, <code>age</code>, <code>friends</code> å±æ€§ï¼Œä¸€ç»„åœ¨å®ä¾‹ä¸Šï¼Œè€Œå¦ä¸€ç»„åœ¨ <code>Student</code> çš„åŸå‹ä¸Šã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å‡ºåœ¨è°ƒç”¨äº†çˆ¶ç±»æ„é€ å‡½æ•°ç»™å­ç±»åŸå‹èµ‹å€¼ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ä¸ç›´æ¥è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å‘¢ï¼Ÿ</p>
<p>æœ‰çš„ï¼Œé‚£å°±æ˜¯åŸå‹å¼ç»§æ‰¿å’Œå¯„ç”Ÿå¼ç»§æ‰¿ã€‚</p>
<h3>åŸå‹å¼ç»§æ‰¿</h3>
<p>2006 å¹´ï¼ŒDouglas Crockford å†™äº†ä¸€ç¯‡æ–‡ç« ï¼šã€ŠJavaScript ä¸­çš„åŸå‹å¼ç»§æ‰¿ã€‹ï¼ˆâ€œPrototypal Inheritance in JavaScriptâ€ï¼‰ã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä¸€ç§ä¸æ¶‰åŠä¸¥æ ¼æ„ä¹‰ä¸Šæ„é€ å‡½æ•°çš„ç»§æ‰¿æ–¹æ³•ã€‚ä»–çš„å‡ºå‘ç‚¹æ˜¯å³ä½¿ä¸è‡ªå®šä¹‰ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡åŸå‹å®ç°å¯¹è±¡ä¹‹é—´çš„ä¿¡æ¯å…±äº«ã€‚æ–‡ç« æœ€ç»ˆç»™å‡ºäº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ä¸ª <code>object()</code> å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ„é€ å‡½æ•°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡èµ‹å€¼ç»™è¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ï¼Œç„¶åè¿”å›è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼ŒES5 å¢åŠ  <code>Object.create()</code> æ–¹æ³•ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä½œä¸ºæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡ï¼Œä»¥åŠç»™æ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡ï¼ˆç¬¬äºŒä¸ªå¯é€‰ï¼‰ã€‚ä»¥è¿™ç§æ–¹å¼æ·»åŠ çš„å±æ€§ä¼šé®è”½åŸå‹å¯¹è±¡ä¸Šçš„åŒåå±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Shelby'</span><span class="token punctuation">,</span> <span class="token string">'Court'</span><span class="token punctuation">,</span> <span class="token string">'Van'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> anotherPerson <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'Greg'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>anotherPerson<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// "Greg"</span>
</code></pre></div><p>å±æ€§ä¸­åŒ…å«çš„å¼•ç”¨å€¼å§‹ç»ˆä¼šåœ¨ç›¸å…³å¯¹è±¡ä¸­å…±äº«ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Shelby'</span><span class="token punctuation">,</span> <span class="token string">'Court'</span><span class="token punctuation">,</span> <span class="token string">'Van'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> anotherPerson <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'Greg'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
anotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'kobe'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> yetAnotherPerson <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'wang'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yetAnotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// ["Shelby", "Court", "Van", "kobe"]</span>
</code></pre></div><h3>å¯„ç”Ÿå¼ç»§æ‰¿</h3>
<p>ä¸åŸå‹å¼ç»§æ‰¿æ¯”è¾ƒæ¥è¿‘çš„ä¸€ç§ç»§æ‰¿æ–¹å¼æ˜¯å¯„ç”Ÿå¼ç»§æ‰¿ï¼Œä¹Ÿæ˜¯ Crockford é¦–å€¡çš„ä¸€ç§æ¨¡å¼ã€‚å¯„ç”Ÿå¼ç»§æ‰¿èƒŒåçš„æ€è·¯ç±»ä¼¼äºå¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ï¼šåˆ›å»ºä¸€ä¸ªå®ç°ç»§æ‰¿çš„å‡½æ•°ï¼Œä»¥æŸç§æ–¹å¼å¢å¼ºå¯¹è±¡ï¼Œç„¶åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createAnother</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä»–çš„åŸå‹ä¸º original</span>
  clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä»¥æŸç§æ–¹å¼å¢å¼ºå¯¹è±¡</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> clone <span class="token comment">// è¿”å›è¿™ä¸ªå¯¹è±¡</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯„ç”Ÿå¼ç»§æ‰¿åŒæ ·é€‚åˆä¸»è¦å…³æ³¨å¯¹è±¡ï¼Œä¸åœ¨ä¹ç±»å‹å’Œæ„é€ å‡½æ•°çš„åœºæ™¯ã€‚ç„¶è€Œå’Œæ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ¨¡å¼ä¸€æ ·ï¼Œå®ƒä¼šå¯¼è‡´å‡½æ•°éš¾ä»¥é‡ç”¨ã€‚</p>
<h3>å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿</h3>
<p>å‰é¢å·²ç»æåˆ°ï¼Œç»„åˆç»§æ‰¿çš„ç¼ºé™·åœ¨äºè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œä¼šå¯¼è‡´å­ç±»å®ä¾‹å’Œå­ç±»åŸå‹ä¸Šå­˜åœ¨ä¸¤ç»„åŒåå±æ€§ã€‚</p>
<p>é‚£ä¹ˆå¯ä»¥é€šè¿‡å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿çˆ¶ç±»åŸå‹ï¼Œç„¶åè®²è¿”å›çš„æ–°å¯¹è±¡èµ‹å€¼ç»™å­ç±»åŸå‹ï¼ŒåŸºæœ¬æ¨¡å¼å¦‚ä¸‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// åˆ›å»ºå¯¹è±¡</span>
  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType <span class="token comment">// å¢å¼ºå¯¹è±¡</span>
  subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype <span class="token comment">// èµ‹å€¼å¯¹è±¡</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªç»§æ‰¿çˆ¶ç±»åŸå‹çš„å¯¹è±¡ã€‚ç„¶åï¼Œç»™è¿”å›çš„ <code>prototype</code> å¯¹è±¡è®¾ç½® <code>constructor</code> å±æ€§ï¼Œè§£å†³ç”±äºé‡å†™åŸå‹å¯¼è‡´é»˜è®¤ <code>constructor</code> ä¸¢å¤±çš„é—®é¢˜ã€‚æœ€åå°†æ–°åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»å‹çš„åŸå‹ã€‚</p>
<p>æ¥ä¸‹æ¥è°ƒç”¨è¿™ä¸ªæ ¸å¿ƒç»§æ‰¿å‡½æ•°ï¼Œå³å¯è§£å†³ç»„åˆç»§æ‰¿çš„é—®é¢˜ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç±»</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eating</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' eating~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å­ç±»</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">,</span> sno</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›—ç”¨æ„é€ å‡½æ•°</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sno <span class="token operator">=</span> <span class="token number">111</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯„ç”Ÿå¼ç»§æ‰¿</span>
<span class="token function">inheritPrototype</span><span class="token punctuation">(</span>Student<span class="token punctuation">,</span> Person<span class="token punctuation">)</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">studying</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">' studying~'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿å³ä½¿ç”¨ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§ï¼Œä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿é¿å…è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
]]></content>
    <category term="JavaScript"/>
    <published>2022-08-25T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åˆ›å»ºå¯¹è±¡</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/011-create-object.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/011-create-object.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ä½¿ç”¨ <code>class</code> æ—¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºç±»å’Œç»§æ‰¿ï¼Œç„¶è€Œåœ¨ ES6 ä¹‹å‰çš„è§„èŒƒä¸­ï¼Œæ˜¯ä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿æ¨¡å¼ï¼Œè€Œ <code>class</code> ä»…ä»…æ˜¯å®ƒä»¬çš„è¯­æ³•ç³–ã€‚å› æ­¤åœ¨äº†è§£ ES6 <code>class</code> ä¹‹å‰ï¼Œæœ‰å¿…è¦äº†è§£ä»¥å‰æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿çš„æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹çœ‹åœ¨ JavaScript ä¸­æ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ã€‚</p>
<h2>å·¥å‚æ¨¡å¼</h2>
<p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•è¿”å›æƒ³è¦çš„å¯¹è±¡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  o<span class="token punctuation">.</span>name <span class="token operator">=</span> name
  o<span class="token punctuation">.</span>age <span class="token operator">=</span> age
  o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// { name: 'wang', age: 18, sayName: [Function (anonymous)] }</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ä½¿ç”¨ <code>class</code> æ—¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºç±»å’Œç»§æ‰¿ï¼Œç„¶è€Œåœ¨ ES6 ä¹‹å‰çš„è§„èŒƒä¸­ï¼Œæ˜¯ä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿æ¨¡å¼ï¼Œè€Œ <code>class</code> ä»…ä»…æ˜¯å®ƒä»¬çš„è¯­æ³•ç³–ã€‚å› æ­¤åœ¨äº†è§£ ES6 <code>class</code> ä¹‹å‰ï¼Œæœ‰å¿…è¦äº†è§£ä»¥å‰æ¨¡æ‹Ÿç±»å’Œç»§æ‰¿çš„æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹çœ‹åœ¨ JavaScript ä¸­æ˜¯å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ã€‚</p>
<h2>å·¥å‚æ¨¡å¼</h2>
<p>å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å·¥å‚æ–¹æ³•è¿”å›æƒ³è¦çš„å¯¹è±¡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  o<span class="token punctuation">.</span>name <span class="token operator">=</span> name
  o<span class="token punctuation">.</span>age <span class="token operator">=</span> age
  o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// { name: 'wang', age: 18, sayName: [Function (anonymous)] }</span>
</code></pre></div><p>å·¥å‚æ¨¡å¼è™½ç„¶å¯ä»¥è§£å†³åˆ›å»ºå¤šä¸ªç±»ä¼¼å¯¹è±¡çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒåˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰æ ‡è¯†ã€‚</p>
<h2>æ„é€ å‡½æ•°æ¨¡å¼</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œä»»ä½•å‡½æ•°åªè¦ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦è°ƒç”¨å°±æ˜¯æ„é€ å‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°å°±æ˜¯æ™®é€šå‡½æ•°ã€‚</p>
<p>æ„é€ å‡½æ•°ä¹Ÿç§°æ„é€ å™¨ï¼ˆ<code>constructor</code>ï¼‰ï¼Œæ˜¯åˆ›å»ºå¯¹è±¡æ—¶ä¼šè°ƒç”¨çš„å‡½æ•°ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ç®­å¤´å‡½æ•°ä¸èƒ½ä½¿ç”¨ <code>new</code> è°ƒç”¨ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'hou'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span> <span class="token comment">// Person { name: 'wang', age: 18, sayName: [Function (anonymous)] }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span> <span class="token comment">// Person { name: 'hou', age: 18, sayName: [Function (anonymous)] }</span>
</code></pre></div><p>ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå®ƒ <strong>æ‰“å°å‡ºäº†å¯¹è±¡æ ‡è¯†</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒè§£å†³äº†å·¥å‚æ¨¡å¼æ²¡æœ‰å¯¹è±¡æ ‡è¯†çš„é—®é¢˜ã€‚</p>
<p><strong>æ„é€ å‡½æ•°å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p>
<p>é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹ <code>new</code> æ“ä½œçš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li>
<li>å°†ç©ºå¯¹è±¡çš„åŸå‹ï¼ˆ<code>[[prototype]]</code> å±æ€§ï¼‰èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å¯¹è±¡ï¼›</li>
<li>è®©æ„é€ å‡½æ•°çš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼›</li>
<li>åˆ¤æ–­æ„é€ å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹ã€‚</li>
</ol>
<p>æ³¨æ„åˆ°ç¬¬ä¸‰æ­¥ï¼Œæ„é€ å‡½æ•°çš„é—®é¢˜åœ¨äºå®šä¹‰çš„æ–¹æ³•ä¼šåœ¨æ¯ä¸ªå®ä¾‹ä¸Šéƒ½åˆ›å»ºä¸€æ¬¡ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æŠŠå‡½æ•°å®šä¹‰è½¬ç§»åˆ°æ„é€ å‡½æ•°å¤–éƒ¨ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">=</span> sayName
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'hou'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½†æ˜¯å¦‚æœè¿™ä¸ªå¯¹è±¡éœ€è¦å¤šä¸ªæ–¹æ³•ï¼Œå°±è¦åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šå®šä¹‰å¤šä¸ªå‡½æ•°ï¼Œè¿™ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡åŸå‹æ¨¡å‹æ¥è§£å†³ã€‚</p>
<h2>åŸå‹æ¨¡å¼</h2>
<p>åœ¨äº†è§£åŸå‹æ¨¡å¼çš„å…·ä½“è¿‡ç¨‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹éšå¼åŸå‹å’Œæ˜¾ç¤ºåŸå‹çš„æ¦‚å¿µã€‚</p>
<h3>éšå¼åŸå‹å’Œæ˜¾ç¤ºåŸå‹</h3>
<h4>éšå¼åŸå‹ï¼ˆImplicit Prototypeï¼‰</h4>
<p>æ¯ä¸ª JavaScript ã€Œå¯¹è±¡ã€éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å…¶åŸå‹å¯¹è±¡çš„å†…éƒ¨é“¾æ¥ï¼Œè¿™ä¸ªé“¾æ¥å°±æ˜¯ <strong>éšå¼åŸå‹</strong>ã€‚</p>
<p>å½“è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼ŒJavaScript å¼•æ“å°±ä¼šæ²¿ç€ <strong>éšå¼åŸå‹é“¾</strong> ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„å±æ€§æˆ–è€…åˆ°è¾¾åŸå‹é“¾çš„é¡¶ç«¯ï¼ˆå³ <code>Object.prototype</code>ï¼‰ã€‚</p>
<p>æ¯ä¸ª <strong>å¯¹è±¡</strong> éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½®å±æ€§ <code>[[prototype]]</code>ï¼Œè¿™ä¸ªç‰¹æ®Šçš„å¯¹è±¡æŒ‡å‘å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚æ—©æœŸçš„ ECMA æ²¡æœ‰è§„èŒƒå¦‚ä½•å»æŸ¥çœ‹ <code>[[prototype]]</code>ï¼Œå› æ­¤æµè§ˆå™¨ç»™å¯¹è±¡æä¾›ä¸€ä¸ª <code>__proto__</code> å±æ€§æ¥æŸ¥çœ‹è¿™ä¸ªå±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">=</span> sayName
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token comment">// æŸ¥çœ‹å¯¹è±¡éšå¼åŸå‹</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// {}</span>
</code></pre></div><p>ES5 ä¹‹åæä¾›äº† <code>Object.getPrototypeOf()</code> æŸ¥çœ‹ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// æŸ¥çœ‹å¯¹è±¡éšå¼åŸå‹</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {}</span>
</code></pre></div><h4>æ˜¾å¼åŸå‹</h4>
<p>å‡½æ•°ä½œä¸ºå¯¹è±¡ï¼Œä¹Ÿæ‹¥æœ‰éšå¼åŸå‹ <code>[[prototype]]</code> å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "function () {...}"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>æ­¤å¤–ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <code>prototype</code> å±æ€§ï¼Œç§°ä¸ºå‡½æ•°çš„ <strong>æ˜¾å¼åŸå‹</strong>ã€‚è¿™ä¸ªå±æ€§æŒ‡å‘åŸå‹å¯¹è±¡ï¼ŒåŒ…å«åº”è¯¥ç”±ç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚æ‰€æœ‰åŸå‹å¯¹è±¡è‡ªåŠ¨è·å¾—ä¸€ä¸ªåä¸º <code>constructor</code> çš„å±æ€§ï¼ŒæŒ‡å›ä¸ä¹‹å…³è”çš„æ„é€ å‡½æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {</span>
<span class="token comment">//   constructor: {</span>
<span class="token comment">//     value: [Function: foo], // åŸå‹å¯¹è±¡çš„æ„é€ å‡½æ•°æŒ‡å›ä¸ä¹‹å…³è”çš„æ„é€ å‡½æ•°</span>
<span class="token comment">//     writable: true,</span>
<span class="token comment">//     enumerable: false,</span>
<span class="token comment">//     configurable: true</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div><h3>åŸå‹æ¨¡å¼å…·ä½“å®ç°è¿‡ç¨‹</h3>
<p>äº†è§£äº†éšå¼åŸå‹å’Œæ˜¾å¼åŸå‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹çœ‹åŸå‹æ¨¡å¼å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„äº†ã€‚</p>
<p>JavaScript æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª <strong>æ˜¾å¼åŸå‹</strong> <code>prototype</code> å±æ€§ï¼ˆè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«åº”è¯¥ç”±ç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå°†éœ€è¦å…±äº«çš„å‡½æ•°æˆ–å±æ€§æ”¾åœ¨è¿™ä¸ªåŸå‹å¯¹è±¡ä¸Šï¼Œè€Œæ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ï¼Œå°±ä¼šé€šè¿‡å®ƒçš„ <strong>éšå¼åŸå‹ <code>__proto__</code></strong> é¡ºç€åŸå‹é“¾å¾€ä¸Šæ‰¾ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„è§£å†³æ„é€ å‡½æ•°æ¨¡å¼æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸçš„é—®é¢˜ã€‚</p>
<p>è®©æˆ‘ä»¬å›å¿†ä¸€ä¸‹å‰é¢ <code>new</code> å…³é”®å­—çš„æ­¥éª¤æ—¶ï¼š</p>
<ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›</li>
<li>å°†ç©ºå¯¹è±¡çš„åŸå‹ï¼ˆ<code>[[prototype]]</code> å±æ€§ï¼‰èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ <code>prototype</code> å¯¹è±¡ï¼›</li>
<li>è®©æ„é€ å‡½æ•°çš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼›</li>
<li>åˆ¤æ–­æ„é€ å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹ã€‚</li>
</ol>
<p>å…¶ä¸­ç¬¬ 2 æ­¥å°±æ˜¯ï¼š<strong>æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ä¼šè¢«èµ‹å€¼ç»™æ–°å¯¹è±¡çš„éšå¼åŸå‹</strong>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'wang'</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// wang</span>
</code></pre></div><p>ä¸Šé¢å®šä¹‰åŸå‹æ—¶è¯­æ³•æœ‰ç‚¹å†—ä½™ï¼Œå› æ­¤å¸¸ç”¨å¯¹è±¡å­—é¢é‡ç›´æ¥é‡å†™å‡½æ•°åŸå‹ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'wang'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ constructor å±æ€§ä¸å¯æšä¸¾</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'constructor'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> Person
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3>åŸå‹æ¨¡å¼å­˜åœ¨çš„é—®é¢˜</h3>
<p>åŸå‹æ¨¡å¼æ˜¯å®ç°æ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹çš„æ¨¡å¼ï¼Œæ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹çš„æ„é€ å‡½æ•°ï¼ˆåŒ…æ‹¬ <code>Object</code>ã€<code>Array</code>ã€<code>String</code> ç­‰ï¼‰éƒ½åœ¨åŸå‹ä¸Šå®šä¹‰äº†å®ä¾‹æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬æ‰èƒ½è°ƒç”¨é‚£äº›æ–¹æ³•ã€‚</p>
<p>ä½†åŸå‹æ¨¡å¼ä¹Ÿæœ‰å®ƒçš„é—®é¢˜ï¼š</p>
<ul>
<li>å¼±åŒ–äº†å‘æ„é€ å‡½æ•°ä¼ é€’åˆå§‹åŒ–å‚æ•°çš„èƒ½åŠ›ï¼Œä¼šå¯¼è‡´æ‰€æœ‰å®ä¾‹é»˜è®¤éƒ½å–å¾—ç›¸åŒçš„å±æ€§å€¼ï¼›</li>
<li>åŸå‹ä¸Šçš„å¼•ç”¨å±æ€§æ˜¯åœ¨å®ä¾‹é—´å…±äº«çš„ï¼Œå› æ­¤ä¿®æ”¹ä¸€ä¸ªä¼šå½±å“å…¶ä»–å®ä¾‹ã€‚</li>
</ul>
<p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">constructor</span><span class="token operator">:</span> Person<span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'wang'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'neymar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ constructor å±æ€§ä¸å¯æšä¸¾</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'constructor'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> Person
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 1. æ— æ³•å‘æ„é€ å‡½æ•°ä¼ å‚</span>
<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

person1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'messi'</span><span class="token punctuation">)</span>

<span class="token comment">// 2. åŸå‹ä¸Šçš„å¼•ç”¨å±æ€§åœ¨å®ä¾‹é—´å…±äº«</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// [ 'neymar', 'messi' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// [ 'neymar', 'messi' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>friends <span class="token operator">===</span> person2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>æ­¤æ—¶åœ¨ 1 å¤„æ— æ³•å‘æ„é€ å‡½æ•°ä¼ å‚ï¼Œè€Œä¸”åœ¨ 2 å¤„ä¿®æ”¹ <code>person1.friends</code> ä¹Ÿä¼šå½±å“åˆ° <code>person2</code> å®ä¾‹ï¼Œå› ä¸ºä»–ä»¬æŒ‡å‘çš„åŸå‹ä¸­çš„åŒä¸€ä¸ªåœ°å€ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ <strong>ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼</strong>ã€‚</p>
<h2>ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼</h2>
<p>é¦–å…ˆæ¥å›å¿†ä¸€ä¸‹æ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼å„è‡ªçš„é—®é¢˜ï¼š</p>
<ul>
<li>æ„é€ å‡½æ•°æ¨¡å¼ï¼šå¦‚æœè¿™ä¸ªå¯¹è±¡éœ€è¦å¤šä¸ªæ–¹æ³•ï¼Œå°±è¦åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šå®šä¹‰å¤šä¸ªå‡½æ•°ï¼Œä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li>åŸå‹æ¨¡å¼ï¼šå¼±åŒ–äº†å‘æ„é€ å‡½æ•°ä¼ é€’åˆå§‹åŒ–å‚æ•°çš„èƒ½åŠ›ï¼Œå¼•ç”¨å±æ€§ä¼šå­˜åœ¨å…±äº«é—®é¢˜ã€‚</li>
</ul>
<p>æ—¢ç„¶ä»–ä»¬åˆ†å¼€ä½¿ç”¨éƒ½ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ç»„åˆä½¿ç”¨è¿™ä¸¤ç§æ¨¡å¼ï¼š<strong>é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡åŸå‹å¯¹è±¡å®ç°æ–¹æ³•çš„å¤ç”¨</strong>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">constructor</span><span class="token operator">:</span> Person<span class="token punctuation">,</span>
  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ constructor å±æ€§ä¸å¯æšä¸¾</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">'constructor'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> Person
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'neymar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'hou'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'messi'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

person1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'hou'</span><span class="token punctuation">)</span>
person2<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// [ 'neymar', 'hou' ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span> <span class="token comment">// [ 'messi', 'wang' ]</span>
</code></pre></div><p>æ­¤æ—¶ä¸ä»…å¯ä»¥ä¼ é€’åˆå§‹åŒ–å‚æ•°ï¼Œè€Œä¸”ä¿®æ”¹å„è‡ªçš„ <code>friends</code> å±æ€§éƒ½äº’ä¸å½±å“ã€‚</p>
<h2>æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯ JavaScript ä¸­åˆ›å»ºå¯¹è±¡çš„å››ç§ä¸»è¦æ–¹å¼ï¼ŒåŒ…æ‹¬å·¥å‚æ¨¡å¼ã€æ„é€ å‡½æ•°æ¨¡å¼ã€åŸå‹æ¨¡å¼åŠç»„åˆä½¿ç”¨æ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ã€‚è®©æˆ‘ä»¬æ¥å›å¿†ä¸€ä¸‹å‰é¢ä¸‰ç§å„è‡ªçš„ç¼ºç‚¹ï¼š</p>
<ul>
<li>å·¥å‚æ¨¡å¼ï¼šæ— æ³•è§£å†³å¯¹è±¡æ ‡è¯†é—®é¢˜ï¼›</li>
<li>æ„é€ å‡½æ•°æ¨¡å¼ï¼šå¯¹è±¡éœ€è¦å¤šä¸ªæ–¹æ³•ï¼Œå°±è¦åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šå®šä¹‰å¤šä¸ªå‡½æ•°ï¼Œè¿™ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li>åŸå‹æ¨¡å¼ï¼šå¼±åŒ–äº†å‘æ„é€ å‡½æ•°ä¼ é€’åˆå§‹åŒ–å‚æ•°çš„èƒ½åŠ›ï¼Œå¼•ç”¨å±æ€§ä¼šå­˜åœ¨å…±äº«é—®é¢˜ã€‚</li>
</ul>
]]></content>
    <category term="JavaScript"/>
    <published>2022-08-25T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åˆå§‹åŒ–é¡¹ç›®</title>
    <id>https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/01-init.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/01-init.html"/>
    <updated>2024-12-17T10:16:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æŠ€æœ¯æ–¹æ¡ˆé€‰å‹</h2>
<h3>Flutter vs React Native</h3>
<p>ç›®å‰ï¼Œ<a href="https://flutter.dev/" target="_blank" rel="noopener noreferrer">Flutter</a> å’Œ <a href="https://reactnative.dev/" target="_blank" rel="noopener noreferrer">React Native</a> æ˜¯æœ€æµè¡Œçš„è·¨ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è€ƒè™‘åˆ° Flutter ä½¿ç”¨ <code>dart</code> è¯­è¨€ï¼Œè€Œ React Native ä½¿ç”¨ <code>js</code>ï¼Œå­¦ä¹ æˆæœ¬ç›¸å¯¹è€Œè¨€è¾ƒå°‘ï¼Œå› æ­¤å†³å®šä½¿ç”¨ React Nativeã€‚</p>]]></summary>
    <content type="html"><![CDATA[<h2>æŠ€æœ¯æ–¹æ¡ˆé€‰å‹</h2>
<h3>Flutter vs React Native</h3>
<p>ç›®å‰ï¼Œ<a href="https://flutter.dev/" target="_blank" rel="noopener noreferrer">Flutter</a> å’Œ <a href="https://reactnative.dev/" target="_blank" rel="noopener noreferrer">React Native</a> æ˜¯æœ€æµè¡Œçš„è·¨ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è€ƒè™‘åˆ° Flutter ä½¿ç”¨ <code>dart</code> è¯­è¨€ï¼Œè€Œ React Native ä½¿ç”¨ <code>js</code>ï¼Œå­¦ä¹ æˆæœ¬ç›¸å¯¹è€Œè¨€è¾ƒå°‘ï¼Œå› æ­¤å†³å®šä½¿ç”¨ React Nativeã€‚</p>
<ul>
<li><a href="https://www.thedroidsonroids.com/blog/flutter-vs-react-native-comparison" target="_blank" rel="noopener noreferrer">Flutter vs. React Native â€“ Which is Better for Your Project in 2024?</a></li>
<li><a href="https://www.thedroidsonroids.com/blog/top-cross-platform-app-development-frameworks" target="_blank" rel="noopener noreferrer">4 Most Popular Cross-Platform App Development Frameworks for 2024</a></li>
</ul>
<h3>Expo Go vs React Native CLI</h3>
<p>å¦‚æœæ‚¨æ˜¯ç§»åŠ¨å¼€å‘çš„æ–°æ‰‹ï¼Œæœ€ç®€å•çš„å…¥é—¨æ–¹æ³•å°±æ˜¯ä½¿ç”¨ Expo Goã€‚Expo æ˜¯ä¸€å¥—å›´ç»• React Native æ„å»ºçš„å·¥å…·å’ŒæœåŠ¡ï¼Œè™½ç„¶å®ƒæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä½†ç›®å‰ä¸æˆ‘ä»¬æœ€ç›¸å…³çš„åŠŸèƒ½æ˜¯å®ƒèƒ½è®©ä½ åœ¨å‡ åˆ†é’Ÿå†…ç¼–å†™å‡ºä¸€ä¸ª React Native åº”ç”¨ç¨‹åºã€‚æ‚¨åªéœ€è¦ä¸€ä¸ªæœ€æ–°ç‰ˆæœ¬çš„ Node.js å’Œä¸€éƒ¨æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ã€‚</p>
<p>å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ç§»åŠ¨å¼€å‘ï¼Œä½ å¯èƒ½æƒ³ä½¿ç”¨ React Native CLIã€‚å®ƒéœ€è¦ Xcode æˆ– Android Studio æ‰èƒ½å¼€å§‹ä½¿ç”¨ã€‚å¦‚æœä½ å·²ç»å®‰è£…äº†è¿™äº›å·¥å…·ä¹‹ä¸€ï¼Œåº”è¯¥å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹è¿è¡Œã€‚å¦‚æœæ²¡æœ‰å®‰è£…è¿™äº›å·¥å…·ï¼Œåˆ™éœ€è¦èŠ±è´¹å¤§çº¦ä¸€ä¸ªå°æ—¶è¿›è¡Œå®‰è£…å’Œé…ç½®ã€‚</p>
<p>è€ƒè™‘åˆ°å¿«é€Ÿå®ç°ä¸€ä¸ª MVPï¼Œæœ€ç»ˆé€‰æ‹©äº† Expoã€‚</p>
<h3>Next or Node</h3>
<p>æœ€åˆï¼Œè€ƒè™‘ä½¿ç”¨ Expo ä¸ Next.js ç»“åˆçš„æ–¹æ¡ˆæ¥å®ç°å‰åç«¯ä¸åˆ†ç¦»çš„å…¨æ ˆé¡¹ç›®ã€‚ç„¶è€Œï¼Œ<a href="https://docs.expo.dev/guides/using-nextjs/" target="_blank" rel="noopener noreferrer">Expo å®˜æ–¹</a> æåˆ° Next.js åªèƒ½ç”¨äº Expo for Webï¼Œæ— æ³•å®ç°è·¨ç«¯éœ€æ±‚ã€‚</p>
<p>å› æ­¤ç¡®å®šä½¿ç”¨ Expo + Node.js + Monorepo çš„æ–¹æ¡ˆï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>Deprecated. å·²æ”¹ç”¨ nest.js æ¡†æ¶ã€‚</p>
</div>
<h2>Monorepo æ­å»º</h2>
<p>æœ€åˆä½¿ç”¨ <code>pnpm</code> workspaces æ­å»º Monorepo é¡¹ç›®ï¼Œç„¶è€Œå®‰è£…ä¾èµ–åå¯åŠ¨æŠ¥é”™ï¼š</p>
<ul>
<li><a href="https://github.com/expo/expo/issues/22413" target="_blank" rel="noopener noreferrer">Pnpm not working with Expo</a></li>
<li><a href="https://github.com/pnpm/pnpm/issues/4286" target="_blank" rel="noopener noreferrer">[bug] - Pnpm not working with expo</a></li>
</ul>
<p>æŸ¥è¯¢åˆ°ä¸Šè¿°ä¸¤ä¸ª issue åï¼Œåœ¨ç›®å½•ä¸­æ·»åŠ  <code>.npmrc</code> æ–‡ä»¶åé‡æ–°å®‰è£…ä¾èµ–é¡¹ç›®å¯åŠ¨æˆåŠŸã€‚</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>node-linker=hoisted
</code></pre></div><p>è€ƒè™‘åˆ°å¯èƒ½è¿˜ä¼šé‡åˆ°å…¶ä»–å…¼å®¹é—®é¢˜ï¼Œæœ€ç»ˆé€‰æ‹©å®˜æ–¹æ¨èçš„ <code>yarn 1.x</code> workspacesã€‚</p>
<p>ç›®å½•ç»“æ„è®¾è®¡å¦‚ä¸‹ï¼š</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>- apps
  - mobile
  - server
- packages
  - types
- package.json
</code></pre></div><h3>init mobile</h3>
<p>ä»¥ä¸‹æŒ‰ç…§ <a href="https://docs.expo.dev/guides/monorepos/" target="_blank" rel="noopener noreferrer">Work with monorepos</a> æ­å»ºé¡¹ç›®ã€‚</p>
<p>åœ¨ imperial-kitchen æ–‡ä»¶å¤¹ä¸­ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ– <code>expo</code> é¡¹ç›®</p>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>npx create-expo-app apps/mobile
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä½¿ç”¨ expo routerï¼Œå¿…é¡»æ·»åŠ ç¯å¢ƒå˜é‡ï¼š<code>EXPO_USE_METRO_WORKSPACE_ROOT=1</code></p>
</div>
<h3>init server</h3>
<p>åç«¯æœåŠ¡é€‰æ‹©ä½¿ç”¨åŸç”Ÿ <code>node</code> å¼€å‘ï¼Œè¯¦è§ ã€‚</p>
<h3>é…ç½® lint</h3>
<p>é…ç½® <code>eslint</code>ã€<code>prettier</code>ã€<code>commitlint</code> å’Œ <code>husky</code>ã€‚</p>
]]></content>
    <category term="Project"/>
    <published>2024-05-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">Imperial Kitchen å¾¡è†³æˆ¿</title>
    <id>https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/</id>
    <link href="https://dribble-njr.github.io/blog/blog/project/imperial-kitchen/"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ° Imperial Kitchen å¾¡è†³æˆ¿é¡¹ç›®ï¼é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/dribble-njr/imperial-kitchen.git%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/dribble-njr/imperial-kitchen.gitã€‚</a></p>
<h2>é¡¹ç›®ç®€ä»‹</h2>
<p>Imperial Kitchen å¾¡è†³æˆ¿æ˜¯ä¸€ä¸ªå®¶åº­å¨æˆ¿çš„ç‚¹èœåº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©æ–¹ä¾¿å¿«æ·åœ°é€‰æ‹©èœå“å¹¶ä¸‹å•ã€‚</p>
<h2>äº§å“åŠŸèƒ½è®¾è®¡</h2>
<h3>è§’è‰²è®¾è®¡</h3>]]></summary>
    <content type="html"><![CDATA[<p>æ¬¢è¿æ¥åˆ° Imperial Kitchen å¾¡è†³æˆ¿é¡¹ç›®ï¼é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/dribble-njr/imperial-kitchen.git%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/dribble-njr/imperial-kitchen.gitã€‚</a></p>
<h2>é¡¹ç›®ç®€ä»‹</h2>
<p>Imperial Kitchen å¾¡è†³æˆ¿æ˜¯ä¸€ä¸ªå®¶åº­å¨æˆ¿çš„ç‚¹èœåº”ç”¨ï¼Œæ—¨åœ¨å¸®åŠ©æ–¹ä¾¿å¿«æ·åœ°é€‰æ‹©èœå“å¹¶ä¸‹å•ã€‚</p>
<h2>äº§å“åŠŸèƒ½è®¾è®¡</h2>
<h3>è§’è‰²è®¾è®¡</h3>
<p>å®¶åº­æˆå‘˜ï¼š</p>
<ul>
<li>ç‚¹èœï¼šæŸ¥çœ‹èœå“èœå•ï¼Œé€‰æ‹©èœå“ä¸‹å•ã€‚</li>
<li>æŸ¥çœ‹è®¢å•çŠ¶æ€ï¼šå¯ä»¥æŸ¥çœ‹è‡ªå·±ç‚¹çš„èœæ˜¯å¦è¢«æ¥å—ï¼Œæ­£åœ¨åšï¼Œè¿˜æ˜¯å·²ç»åšå¥½ã€‚</li>
<li>è¯„ä»·ï¼šå¯ä»¥å¯¹å·²ç»å®Œæˆçš„èœå“è¿›è¡Œè¯„ä»·å’Œåé¦ˆã€‚</li>
</ul>
<p>ç®¡ç†å‘˜ï¼ˆå¨å¸ˆï¼‰ï¼š</p>
<ul>
<li>èœå•ç®¡ç†ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤èœå“ä¿¡æ¯ï¼ˆåç§°ã€ä»·æ ¼ã€æè¿°ã€å›¾ç‰‡ç­‰ï¼‰ã€‚</li>
<li>æ¥æ”¶è®¢å•ï¼šå®¶åº­æˆå‘˜ç‚¹èœåï¼Œç®¡ç†å‘˜å¯ä»¥æ¥å—æˆ–æ‹’ç»è®¢å•ã€‚</li>
<li>åˆ¶ä½œè¿›åº¦ï¼šç®¡ç†å‘˜å¯ä»¥æ›´æ–°æ¯ä¸ªè®¢å•çš„è¿›åº¦ï¼ˆå¦‚ã€Œå·²æ¥å—ã€ã€ã€Œæ­£åœ¨åšã€ã€ã€Œå·²å®Œæˆã€ç­‰ï¼‰ã€‚</li>
<li>èœå“è¯„ä»·ç®¡ç†ï¼šæŸ¥çœ‹å’Œç®¡ç†ç”¨æˆ·çš„è¯„ä»·ã€‚</li>
</ul>
<h3>åŠŸèƒ½æ¨¡å—</h3>
<h4>ç”¨æˆ·ç®¡ç†</h4>
<ul>
<li>ç™»å½•/æ³¨å†Œï¼šå®¶åº­æˆå‘˜å’Œç®¡ç†å‘˜éœ€è¦ç™»å½•ã€‚å¯ä»¥é€šè¿‡ç®€å•çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæˆ–è€…åŸºäºå®¶åº­é‚€è¯·ç æ¥æ³¨å†Œã€‚</li>
<li>æƒé™ç®¡ç†ï¼šå®¶åº­æˆå‘˜çš„æƒé™æ˜¯ç‚¹èœã€æŸ¥çœ‹å’Œè¯„ä»·ï¼›ç®¡ç†å‘˜åˆ™å¯ä»¥ç®¡ç†èœå“å’Œè®¢å•ã€‚</li>
</ul>
<h4>èœå•ç®¡ç†</h4>
<ul>
<li>æŸ¥çœ‹èœå•ï¼šå®¶åº­æˆå‘˜å¯ä»¥çœ‹åˆ°å½“å‰çš„å¯é€‰èœå“ï¼Œå¸¦æœ‰è¯¦ç»†ä¿¡æ¯å’Œå›¾ç‰‡ã€‚</li>
<li>æ·»åŠ èœå“ï¼ˆç®¡ç†å‘˜ï¼‰ï¼šç®¡ç†å‘˜å¯ä»¥åœ¨åå°æ·»åŠ æ–°èœå“ï¼Œå¡«å†™èœå“çš„åç§°ã€å›¾ç‰‡ã€æè¿°ã€ä»·æ ¼ç­‰ã€‚</li>
<li>ç¼–è¾‘/åˆ é™¤èœå“ï¼ˆç®¡ç†å‘˜ï¼‰ï¼šç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤å·²æœ‰èœå“ï¼Œä¿æŒèœå•çš„å®æ—¶æ›´æ–°ã€‚</li>
</ul>
<h4>è®¢å•ç³»ç»Ÿ</h4>
<ul>
<li>ä¸‹å•ï¼ˆå®¶åº­æˆå‘˜ï¼‰ï¼šå®¶åº­æˆå‘˜å¯ä»¥ä»èœå•ä¸­é€‰æ‹©èœå“å¹¶æäº¤è®¢å•ã€‚</li>
<li>è®¢å•çŠ¶æ€æ›´æ–°ï¼ˆç®¡ç†å‘˜ï¼‰ï¼šç®¡ç†å‘˜åœ¨æ¥æ”¶åˆ°è®¢å•åï¼Œå¯ä»¥æ›´æ–°çŠ¶æ€ï¼ˆæ¥å—ã€åˆ¶ä½œä¸­ã€å®Œæˆç­‰ï¼‰ã€‚</li>
<li>è®¢å•å†å²ï¼šå®¶åº­æˆå‘˜å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„å†å²è®¢å•å’ŒçŠ¶æ€ï¼Œç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„è®¢å•è®°å½•ã€‚</li>
</ul>
<h4>èœå“è¯„ä»·</h4>
<ul>
<li>ç”¨æˆ·è¯„ä»·ï¼šå®¶åº­æˆå‘˜å¯ä»¥å¯¹å·²ç»å®Œæˆçš„èœå“è¿›è¡Œè¯„ä»·ï¼Œå†™ä¸‹åé¦ˆå¹¶æ‰“åˆ†ã€‚</li>
<li>è¯„ä»·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰ï¼šç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹è¯„ä»·ï¼Œæ”¹è¿›èœå“ã€‚</li>
</ul>
<h3>æ ¸å¿ƒæµç¨‹</h3>
<ol>
<li>å®¶åº­æˆå‘˜ç™»å½•å¹¶æŸ¥çœ‹èœå•ã€‚</li>
<li>å®¶åº­æˆå‘˜é€‰æ‹©èœå“å¹¶æäº¤è®¢å•ã€‚</li>
<li>ç®¡ç†å‘˜åœ¨åå°æŸ¥çœ‹è®¢å•ï¼Œå¹¶æ›´æ–°è®¢å•çŠ¶æ€ã€‚</li>
<li>å®¶åº­æˆå‘˜å¯ä»¥æŸ¥çœ‹è®¢å•çŠ¶æ€å˜åŒ–ã€‚</li>
<li>è®¢å•å®Œæˆåï¼Œå®¶åº­æˆå‘˜å¯ä»¥å¯¹èœå“è¿›è¡Œè¯„ä»·ã€‚</li>
</ol>
<h3>åç»­å¯ä»¥æ‰©å±•çš„åŠŸèƒ½</h3>
<ul>
<li>é€šçŸ¥åŠŸèƒ½ï¼šå½“è®¢å•çŠ¶æ€æ›´æ–°æ—¶ï¼Œå‘å®¶åº­æˆå‘˜å‘é€æ¨é€é€šçŸ¥ã€‚</li>
<li>ä¸ªæ€§åŒ–æ¨èï¼šæ ¹æ®ç”¨æˆ·å†å²ç‚¹èœè®°å½•ï¼Œæ¨èä»–ä»¬å¯èƒ½å–œæ¬¢çš„èœå“ã€‚</li>
<li>å¤šå®¶åº­æ”¯æŒï¼šå¦‚æœæœ‰å¤šä¸ªå®¶åº­ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥æ‰©å±•ä¸ºå¤šäººå…±äº«çš„å®¶åº­è´¦æˆ·ã€‚</li>
</ul>
<h2>æŠ€æœ¯æ ˆ</h2>
<ul>
<li>å‰ç«¯ï¼šä½¿ç”¨ <code>Expo</code> å’Œ <code>React Native</code> å¼€å‘ç§»åŠ¨ç«¯åº”ç”¨ã€‚</li>
<li>åç«¯ï¼šä½¿ç”¨ <code>Node.js</code> å’Œ <code>Express</code> å¼€å‘æœåŠ¡å™¨ç«¯æ¥å£ã€‚</li>
<li>æ•°æ®åº“ï¼šä½¿ç”¨ <code>MongoDB</code> å­˜å‚¨èœå“å’Œè®¢å•ä¿¡æ¯ã€‚</li>
<li>å…¶ä»–å·¥å…·ï¼šä½¿ç”¨ <code>TypeScript</code> ç¼–å†™ä»£ç ï¼Œä½¿ç”¨ <code>yarn workspace</code> ç®¡ç†å¤šåŒ…é¡¹ç›®ã€‚</li>
</ul>
<h2>ä½¿ç”¨è¯´æ˜</h2>
<ol>
<li>å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/your-username/imperial-kitchen.git
</code></pre></div><ol start="2">
<li>å®‰è£…ä¾èµ–ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> imperial-kitchen
<span class="token function">yarn</span> <span class="token function">install</span>
</code></pre></div><ol start="3">
<li>å¯åŠ¨å‰ç«¯åº”ç”¨ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> workspace mobile start
</code></pre></div><ol start="4">
<li>å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼š</li>
</ol>
<div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> workspace server start
</code></pre></div><h2>è´¡çŒ®</h2>
<p>æ¬¢è¿è´¡çŒ®ä»£ç ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°äº†é—®é¢˜ï¼Œè¯·åœ¨ GitHub ä¸Šæå‡ºé—®é¢˜æˆ–æäº¤æ‹‰å–è¯·æ±‚ã€‚</p>
]]></content>
    <category term="Project"/>
    <published>2024-05-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å¯¹è±¡å±æ€§</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/010-object-property.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/010-object-property.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡æ˜¯ä¸€ç»„å±æ€§çš„ã€Œæ— åºé›†åˆã€ï¼Œç”±é”®å€¼å¯¹ç»„æˆã€‚åˆ›å»ºå¯¹è±¡å…±æœ‰ä¸¤ç§æ–¹å¼ï¼šå­—é¢é‡å’Œ <code>new</code>ã€‚ä¸€èˆ¬å¼€å‘ä¸­ä¸ºäº†æ–¹ä¾¿é€šå¸¸ä½¿ç”¨å­—é¢é‡æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>å¯¹è±¡ä¸­çš„å±æ€§æœ‰ä¸€äº›å†…éƒ¨ç‰¹æ€§ï¼Œè¿™äº›å†…éƒ¨ç‰¹æ€§çš„åç§°ä¼šç”¨ä¸¤ä¸ªä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œå¦‚ <code>[[Enumerable]]</code>ï¼Œæ ¹æ®å†…éƒ¨ç‰¹æ€§çš„ä¸åŒï¼Œå¯ä»¥å°†å±æ€§åˆ†ä¸º <strong>æ•°æ®å±æ€§</strong> å’Œ <strong>è®¿é—®å™¨å±æ€§</strong>ã€‚</p>
<h2>æ•°æ®å±æ€§</h2>
<p>æ•°æ®å±æ€§ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯åŒ…å«ä¸€ä¸ªå€¼çš„å±æ€§ï¼Œæ•°æ®å±æ€§ä¸€å…±ä»¥ä¸‹å››ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li><code>[[Configurable]]</code>ï¼šå±æ€§æ˜¯å¦å¯é…ç½®ï¼šæ˜¯å¦å¯ä»¥ <code>delete</code> åˆ é™¤ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹ç‰¹æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æ”¹æˆè®¿é—®å™¨å±æ€§ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Enumerable]]</code>ï¼šå±æ€§æ˜¯å¦å¯ä»¥æšä¸¾ï¼ˆä½¿ç”¨ <code>for-in</code>ï¼‰ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Writable]]</code>ï¼šå±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Value]]</code>ï¼šå±æ€§çš„å€¼ã€‚é»˜è®¤ä¸º <code>undefined</code>ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡æ˜¯ä¸€ç»„å±æ€§çš„ã€Œæ— åºé›†åˆã€ï¼Œç”±é”®å€¼å¯¹ç»„æˆã€‚åˆ›å»ºå¯¹è±¡å…±æœ‰ä¸¤ç§æ–¹å¼ï¼šå­—é¢é‡å’Œ <code>new</code>ã€‚ä¸€èˆ¬å¼€å‘ä¸­ä¸ºäº†æ–¹ä¾¿é€šå¸¸ä½¿ç”¨å­—é¢é‡æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>å¯¹è±¡ä¸­çš„å±æ€§æœ‰ä¸€äº›å†…éƒ¨ç‰¹æ€§ï¼Œè¿™äº›å†…éƒ¨ç‰¹æ€§çš„åç§°ä¼šç”¨ä¸¤ä¸ªä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œå¦‚ <code>[[Enumerable]]</code>ï¼Œæ ¹æ®å†…éƒ¨ç‰¹æ€§çš„ä¸åŒï¼Œå¯ä»¥å°†å±æ€§åˆ†ä¸º <strong>æ•°æ®å±æ€§</strong> å’Œ <strong>è®¿é—®å™¨å±æ€§</strong>ã€‚</p>
<h2>æ•°æ®å±æ€§</h2>
<p>æ•°æ®å±æ€§ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯åŒ…å«ä¸€ä¸ªå€¼çš„å±æ€§ï¼Œæ•°æ®å±æ€§ä¸€å…±ä»¥ä¸‹å››ä¸ªç‰¹æ€§ï¼š</p>
<ul>
<li><code>[[Configurable]]</code>ï¼šå±æ€§æ˜¯å¦å¯é…ç½®ï¼šæ˜¯å¦å¯ä»¥ <code>delete</code> åˆ é™¤ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹ç‰¹æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æ”¹æˆè®¿é—®å™¨å±æ€§ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Enumerable]]</code>ï¼šå±æ€§æ˜¯å¦å¯ä»¥æšä¸¾ï¼ˆä½¿ç”¨ <code>for-in</code>ï¼‰ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Writable]]</code>ï¼šå±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Value]]</code>ï¼šå±æ€§çš„å€¼ã€‚é»˜è®¤ä¸º <code>undefined</code>ã€‚</li>
</ul>
<p>ä½¿ç”¨å­—é¢é‡æˆ– <code>new</code> æ“ä½œç¬¦å®šä¹‰å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°±æ˜¯ä¸€ä¸ªæ•°æ®å±æ€§ã€‚å‰ä¸‰ä¸ªç‰¹æ€§éƒ½é»˜è®¤ä¸º <code>true</code>ï¼Œè€Œ <code>[[value]]</code> åˆ™ä¸ºæŒ‡å®šçš„å€¼ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ <code>Object.getOwnPropertyDescriptor()</code> æŸ¥çœ‹å±æ€§çš„æè¿°ç¬¦ï¼Œä»–æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºéœ€è¦æŸ¥çœ‹æè¿°ç¬¦çš„å±æ€§ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'wang'</span> <span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {</span>
<span class="token comment">//   value: 'wang',</span>
<span class="token comment">//   writable: true,</span>
<span class="token comment">//   enumerable: true,</span>
<span class="token comment">//   configurable: true</span>
<span class="token comment">// }</span>
</code></pre></div><p>å¦å¤–é™¤äº†ä½¿ç”¨å­—é¢é‡å£°æ˜å±æ€§ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>Object.defineProperty()</code> å®šä¹‰å±æ€§ï¼ŒåŒæ—¶å®šä¹‰å¤šä¸ªå±æ€§åˆ™å¯ä»¥ä½¿ç”¨ <code>Object.defineProperties()</code>ï¼Œ</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨è°ƒç”¨ <code>Object.defineProperty()</code> æ—¶ï¼Œ<code>configurable</code>ã€<code>enumerable</code> å’Œ <code>writable</code> çš„å€¼å¦‚æœä¸æŒ‡å®šï¼Œåˆ™éƒ½é»˜è®¤ä¸º <code>false</code>ã€‚</p>
<p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°è¯•åˆ é™¤ä¸å¯é…ç½®å±æ€§ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå°è¯•ä¿®æ”¹åªè¯»å±æ€§ä¹Ÿä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'wang'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {</span>
<span class="token comment">//   value: 'wang',</span>
<span class="token comment">//   writable: false,</span>
<span class="token comment">//   enumerable: false,</span>
<span class="token comment">//   configurable: false</span>
<span class="token comment">// }</span>
</code></pre></div><h2>è®¿é—®å™¨å±æ€§</h2>
<p>è®¿é—®å™¨å±æ€§ä¸åŒ…å«å€¼ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ª <code>getter()</code> å‡½æ•°å’Œä¸€ä¸ª <code>setter()</code> å‡½æ•°ã€‚åœ¨å†™å…¥è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨è®¾ç½®ï¼ˆ<code>setter()</code>ï¼‰å‡½æ•°ï¼Œåœ¨è¯»å–æ—¶ï¼Œä¼šè°ƒç”¨è·å–ï¼ˆ<code>getter()</code>ï¼‰å‡½æ•°ã€‚å®ƒä¸€å…±åŒ…æ‹¬å››ç§ç‰¹æ€§ï¼š</p>
<ul>
<li><code>[[Configurable]]</code>ï¼šå±æ€§æ˜¯å¦å¯é…ç½®ï¼šæ˜¯å¦å¯ä»¥ <code>delete</code>ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹ç‰¹æ€§ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥æ”¹æˆæ•°æ®å±æ€§ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Enumerable]]</code>ï¼šå±æ€§æ˜¯å¦å¯ä»¥æšä¸¾ã€‚é»˜è®¤ä¸º <code>true</code>ã€‚</li>
<li><code>[[Get]]</code>ï¼šè·å–å‡½æ•°ï¼Œè¯»å–å±æ€§æ—¶è°ƒç”¨ã€‚é»˜è®¤ä¸º <code>undefined</code>ã€‚</li>
<li><code>[[Set]]</code>ï¼šè®¾ç½®å‡½æ•°ï¼Œå†™å…¥å±æ€§æ—¶è°ƒç”¨ã€‚é»˜è®¤ä¸º <code>undefined</code>ã€‚</li>
</ul>
<p>è®¿é—®å™¨å±æ€§ <strong>åªèƒ½</strong> é€šè¿‡ <code>Object.defineProperty()</code> æˆ– <code>Object.defineProperties()</code> å®šä¹‰ï¼š</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>åœ¨è°ƒç”¨ <code>Object.defineProperty()</code> æ—¶ï¼Œ<code>configurable</code> å’Œ <code>enumerable</code> çš„å€¼å¦‚æœä¸æŒ‡å®šï¼Œåˆ™éƒ½é»˜è®¤ä¸º <code>false</code>ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¼ªç§æœ‰æˆå‘˜ year_ å’Œå…¬å…±æˆå‘˜ edition</span>
<span class="token keyword">let</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">year_</span><span class="token operator">:</span> <span class="token number">2017</span><span class="token punctuation">,</span>
  <span class="token literal-property property">edition</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span> <span class="token string">'year'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>year_
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">&gt;</span> <span class="token number">2017</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>year_ <span class="token operator">=</span> newValue
      <span class="token keyword">this</span><span class="token punctuation">.</span>edition <span class="token operator">+=</span> newValue <span class="token operator">-</span> <span class="token number">2017</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// è®¾ç½®æ—¶ï¼Œä¼šè°ƒç”¨ setter å‡½æ•°</span>
book<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token number">2018</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>edition<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token comment">// è¯»å–æ—¶ï¼Œä¼šè°ƒç”¨ getter å‡½æ•°</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>year_<span class="token punctuation">)</span> <span class="token comment">// 2018</span>

<span class="token comment">// configurable å’Œ enumerable çš„å€¼å¦‚æœä¸æŒ‡å®šï¼Œåˆ™éƒ½é»˜è®¤ä¸º false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span> <span class="token string">'year'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {</span>
<span class="token comment">//   get: [Function: get],</span>
<span class="token comment">//   set: [Function: set],</span>
<span class="token comment">//   enumerable: false,</span>
<span class="token comment">//   configurable: false</span>
<span class="token comment">// }</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>Vue ä¸­çš„è®¡ç®—å±æ€§å°±æ˜¯è®¿é—®å™¨å±æ€§ä¸­çš„ <code>getter()</code> å’Œ <code>setter</code>ã€‚</p>
</div>
]]></content>
    <category term="JavaScript"/>
    <published>2022-08-25T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">é›†åˆå¼•ç”¨ç±»å‹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/008-collection-reference-type.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/008-collection-reference-type.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2><code>Object</code></h2>
<p>åˆ›å»ºæ–¹å¼ï¼š</p>
<ul>
<li>æ„é€ å‡½æ•°ï¼›</li>
<li>å¯¹è±¡å­—é¢é‡ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Nicholas'</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span>

<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2><code>Object</code></h2>
<p>åˆ›å»ºæ–¹å¼ï¼š</p>
<ul>
<li>æ„é€ å‡½æ•°ï¼›</li>
<li>å¯¹è±¡å­—é¢é‡ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Nicholas'</span>
person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span>

<span class="token keyword">let</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•ä¸­ï¼Œå±æ€§åå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Nicholas'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
  <span class="token number">5</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>æ•°å€¼å±æ€§ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p>
</div>
<h2><code>Array</code></h2>
<p>ECMAScript æ•°ç»„çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªæ§½ä½å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°æ®ã€‚</li>
<li>æ•°ç»„é•¿åº¦æ˜¯åŠ¨æ€å¤§å°çš„ï¼Œä¼šéšç€æ•°æ®æ·»åŠ è€Œè‡ªåŠ¨å¢é•¿ã€‚</li>
</ul>
<h3>åˆ›å»ºæ–¹å¼</h3>
<p>åˆ›å»ºæ–¹å¼å…±æœ‰å››ç§ï¼š</p>
<ul>
<li>æ„é€ å‡½æ•°ï¼›</li>
<li>å­—é¢é‡ï¼›</li>
<li><code>Array.from()</code>ï¼›</li>
<li><code>Array.of()</code>ã€‚</li>
</ul>
<p><code>from()</code> ç”¨äºå°†  è½¬æ¢ä¸ºæ•°ç»„å®ä¾‹ï¼Œè€Œ <code>of()</code> ç”¨äºå°†ä¸€ç»„å‚æ•°è½¬æ¢ä¸ºæ•°ç»„å®ä¾‹ã€‚</p>

<h3>æ•°ç»„ç©ºä½</h3>
<p>ä½¿ç”¨æ•°ç»„å­—é¢é‡åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸²é€—å·æ¥åˆ›å»ºç©ºä½ã€‚</p>
<p>ES6 æ–°å¢çš„æ–¹æ³•å’Œè¿­ä»£å™¨ä¸æ—©æœŸ ECMAScript ç‰ˆæœ¬ä¸­å­˜åœ¨çš„æ–¹æ³•è¡Œä¸ºä¸åŒã€‚ES6 æ–°å¢æ–¹æ³•æ™®éå°†è¿™äº›ç©ºä½å½“æˆå­˜åœ¨çš„å…ƒç´ ï¼Œåªä¸è¿‡å€¼ä¸º <code>undefined</code>ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> option <span class="token keyword">of</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// false</span>
<span class="token comment">// true</span>
<span class="token comment">// true</span>
<span class="token comment">// true</span>
<span class="token comment">// false</span>
</code></pre></div><p>ES6 ä¹‹å‰çš„æ–¹æ³•åˆ™ä¼šå¿½ç•¥è¿™ä¸ªç©ºä½ï¼Œä½†å…·ä½“çš„è¡Œä¸ºä¹Ÿä¼šå› æ–¹æ³•è€Œå¼‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment">// map() ä¼šè·³è¿‡ç©ºä½ç½®</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [6, undefined, undefined, undefined, 6]</span>
<span class="token comment">// join() è§†ç©ºä½ç½®ä¸ºç©ºå­—ç¬¦ä¸²</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "1</span></code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2024-04-19T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">ç±»æ•°ç»„å¯¹è±¡</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/009-array-like-object.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/009-array-like-object.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ¦‚å¿µ</h2>
<p>åœ¨ Javascript é‡Œï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒæ‹¥æœ‰ <code>length</code> å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§ï¼Œè¢«ç§°ä¸ºç±»æ•°ç»„å¯¹è±¡ã€‚å¸¸è§çš„ç±»æ•°ç»„å¯¹è±¡æœ‰ <code>arguments</code> å’Œ DOM æ–¹æ³•è¿”å›çš„ç»“æœã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// arguments å¯¹è±¡</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arguments
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// Arguments(3) [1, 2, 3, callee: Æ’, Symbol(Symbol.iterator): Æ’]</span>

<span class="token comment">// DOM æ–¹æ³•è¿”å›çš„ç»“æœ</span>
document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span> <span class="token comment">// HTMLCollection(3) [img, img, img]</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<h2>æ¦‚å¿µ</h2>
<p>åœ¨ Javascript é‡Œï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒæ‹¥æœ‰ <code>length</code> å±æ€§å’Œè‹¥å¹²ç´¢å¼•å±æ€§ï¼Œè¢«ç§°ä¸ºç±»æ•°ç»„å¯¹è±¡ã€‚å¸¸è§çš„ç±»æ•°ç»„å¯¹è±¡æœ‰ <code>arguments</code> å’Œ DOM æ–¹æ³•è¿”å›çš„ç»“æœã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arrLike <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// arguments å¯¹è±¡</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arguments
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// Arguments(3) [1, 2, 3, callee: Æ’, Symbol(Symbol.iterator): Æ’]</span>

<span class="token comment">// DOM æ–¹æ³•è¿”å›çš„ç»“æœ</span>
document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span> <span class="token comment">// HTMLCollection(3) [img, img, img]</span>
</code></pre></div><p>ç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„ç±»ä¼¼ä¹‹å¤„åœ¨äºï¼šè®¿é—®ã€èµ‹å€¼ã€è·å–é•¿åº¦çš„æ“ä½œä¸æ•°ç»„ä¸€è‡´ï¼Œå› æ­¤å«åšç±»æ•°ç»„å¯¹è±¡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// name</span>
arrLike<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'wang'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre></div><h2>ä½¿ç”¨æ•°ç»„æ–¹æ³•</h2>
<p>ç±»æ•°ç»„å¯¹è±¡ä¸èƒ½ <strong>ç›´æ¥è°ƒç”¨</strong> æ•°ç»„çš„æ–¹æ³•ï¼Œå¦‚æœæƒ³ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ <code>call()</code> æˆ– <code>apply</code> é—´æ¥è°ƒç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>arrLike<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'hobby'</span><span class="token punctuation">)</span> <span class="token comment">// Uncaught TypeError: arrLike.push is not a function</span>

<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">,</span> <span class="token string">'hobby'</span><span class="token punctuation">)</span> <span class="token comment">// { '0': 'name', '1': 'age', '2':  'hobby', length: 3 }</span>
</code></pre></div><p>å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†ä½¿æ“ä½œæ–¹ä¾¿ï¼Œé€šå¸¸å…ˆå°†ç±»æ•°ç»„å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„å¯¹è±¡ï¼Œé€šå¸¸ä½¿ç”¨ <code>Array.from()</code> è¿›è¡Œè½¬æ¢ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// call è°ƒç”¨ slice</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">)</span>

<span class="token comment">// call è°ƒç”¨ splice</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// apply è°ƒç”¨ concat</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arrLike<span class="token punctuation">)</span>

<span class="token comment">// Array.from</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arrLike<span class="token punctuation">)</span>

<span class="token comment">// å±•å¼€è¿ç®—ç¬¦</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arrLike<span class="token punctuation">]</span>
</code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2022-08-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å¯¹è±¡è½¬æ¢æ–¹æ³•</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/006-toString-toLocalString-valueOf.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/006-toString-toLocalString-valueOf.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>Object åŸå‹ä¸Šæœ‰ä¸‰ä¸ªæ–¹æ³• <code>toString()</code>ã€<code>toLocalString</code>ã€<code>valueOf()</code> å¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶è€Œå¯¹äºä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨è¿™å‡ ç§æ–¹æ³•ä¼šæœ‰ä¸åŒçš„è¡Œä¸ºã€‚</p>
<h2><code>toString()</code></h2>
<p><code>toString()</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œ<code>toString()</code> æ–¹æ³•ä¼šè¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">123</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "123"</span>

<span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "true"</span>

<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Hello'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "Hello"</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>Object åŸå‹ä¸Šæœ‰ä¸‰ä¸ªæ–¹æ³• <code>toString()</code>ã€<code>toLocalString</code>ã€<code>valueOf()</code> å¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶è€Œå¯¹äºä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨è¿™å‡ ç§æ–¹æ³•ä¼šæœ‰ä¸åŒçš„è¡Œä¸ºã€‚</p>
<h2><code>toString()</code></h2>
<p><code>toString()</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œ<code>toString()</code> æ–¹æ³•ä¼šè¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">123</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "123"</span>

<span class="token keyword">const</span> bool <span class="token operator">=</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "true"</span>

<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Hello'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º "Hello"</span>
</code></pre></div><h2><code>toLocaleString()</code></h2>
<p><code>toLocaleString()</code> æ–¹æ³•ä¸ <code>toString()</code> ç±»ä¼¼ï¼Œä½†å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæœ¬åœ°åŒ–ï¼ˆå³ä¸ç”¨æˆ·æœ¬åœ°æ–‡åŒ–ç›¸å…³çš„ï¼‰çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p>
<p>è¿™æ„å‘³ç€è¿”å›çš„å­—ç¬¦ä¸²å¯èƒ½æ ¹æ®ç”¨æˆ·çš„åœ°åŒºè®¾ç½®è€Œæœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚ä½¿ç”¨ä¸åŒçš„æ—¥æœŸæ ¼å¼ã€æ•°å­—æ ¼å¼ç­‰ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºæœ¬åœ°åŒ–çš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²</span>
</code></pre></div><h2><code>valueOf()</code></h2>
<p><code>valueOf()</code> æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå§‹å€¼ã€‚å¯¹äºå¤§å¤šæ•°å¯¹è±¡æ¥è¯´ï¼Œ<code>valueOf()</code> æ–¹æ³•è¿”å›çš„å€¼ä¸å¯¹è±¡æœ¬èº«æ˜¯ç›¸åŒçš„ï¼Œä½†å¯ä»¥é€šè¿‡é‡å†™è¿™ä¸ªæ–¹æ³•æ¥æ”¹å˜è¿”å›çš„å€¼ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">123</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º 123</span>
</code></pre></div><h2>è‡ªåŠ¨è°ƒç”¨é¡ºåº</h2>
<p>åœ¨ JavaScript å†…éƒ¨ï¼Œå½“éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶ï¼ˆæ¯”å¦‚åœ¨ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—ã€å­—ç¬¦ä¸²æ‹¼æ¥ç­‰æƒ…å†µä¸‹ï¼‰ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡çš„ <code>valueOf()</code> å’Œ <code>toString()</code> æ–¹æ³•æ¥è·å–åŸå§‹å€¼ã€‚å®ƒä»¬çš„è°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>å¦‚æœå¯¹è±¡å…·æœ‰ <code>valueOf()</code> æ–¹æ³•ä¸”è¿”å›çš„æ˜¯åŸå§‹å€¼ï¼ˆéå¯¹è±¡ï¼‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨è¯¥å€¼ã€‚</li>
<li>å¦‚æœå¯¹è±¡æ²¡æœ‰ <code>valueOf()</code> æ–¹æ³•ï¼Œæˆ–è€… <code>valueOf()</code> è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨å¯¹è±¡çš„ <code>toString()</code> æ–¹æ³•ã€‚</li>
<li>å¦‚æœå¯¹è±¡æ²¡æœ‰ <code>toString()</code> æ–¹æ³•ï¼Œæˆ–è€… <code>toString()</code> è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šæŠ›å‡º TypeError é”™è¯¯ã€‚</li>
</ol>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p><code>valueOf()</code> å’Œ <code>toString()</code> æ–¹æ³•åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¯èƒ½ä¼šæœ‰ä¸åŒçš„è¡¨ç°ï¼Œå…·ä½“å–å†³äº JavaScript å¼•æ“çš„å®ç°å’Œè°ƒç”¨æ–¹å¼ã€‚</p>
</div>
<h2>æ€»ç»“</h2>
<p>è¿™ä¸‰ç§æ–¹æ³•ç”¨äºè·å¾—å¯¹è±¡çš„å­—ç¬¦ä¸²æˆ–åŸå§‹å€¼ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹ä¼šè¢« JavaScript å¼•æ“è‡ªåŠ¨è°ƒç”¨ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>toString()</code> ç”¨äºå°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚</li>
<li><code>toLocaleString()</code> è¿”å›ä¸€ä¸ªæœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li>
<li><code>valueOf()</code> è¿”å›å¯¹è±¡çš„åŸå§‹å€¼ã€‚</li>
</ul>
]]></content>
    <category term="JavaScript"/>
    <published>2024-04-18T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åŸºæœ¬å¼•ç”¨ç±»å‹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/007-basic-reference-type.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/007-basic-reference-type.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å¼•ç”¨å€¼ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰æ˜¯æŸä¸ªç‰¹å®š <strong>å¼•ç”¨ç±»å‹</strong> çš„å®ä¾‹ã€‚</p>
<p>æ–°å¯¹è±¡é€šè¿‡ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦åè·Ÿä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰æ¥åˆ›å»ºã€‚æ„é€ å‡½æ•°å°±æ˜¯ç”¨æ¥åˆ›å»ºæ–°å¯¹è±¡çš„å‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>]]></summary>
    <content type="html"><![CDATA[<p>å¼•ç”¨å€¼ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰æ˜¯æŸä¸ªç‰¹å®š <strong>å¼•ç”¨ç±»å‹</strong> çš„å®ä¾‹ã€‚</p>
<p>æ–°å¯¹è±¡é€šè¿‡ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦åè·Ÿä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰æ¥åˆ›å»ºã€‚æ„é€ å‡½æ•°å°±æ˜¯ç”¨æ¥åˆ›å»ºæ–°å¯¹è±¡çš„å‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™è¡Œä»£ç ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™è¡Œä»£ç åˆ›å»ºäº†å¼•ç”¨ç±»å‹ <code>Date</code> çš„ä¸€ä¸ªæ–°å®ä¾‹ï¼Œå¹¶å°†å®ƒä¿å­˜åœ¨å˜é‡ <code>now</code> ä¸­ã€‚<code>Date()</code> åœ¨è¿™é‡Œå°±æ˜¯æ„é€ å‡½æ•°ï¼Œå®ƒè´Ÿè´£åˆ›å»ºä¸€ä¸ªåªæœ‰é»˜è®¤å±æ€§å’Œæ–¹æ³•çš„ç®€å•å¯¹è±¡ã€‚</p>
<p>ECMAScript æä¾›äº†å¾ˆå¤šåƒ <code>Date</code> è¿™æ ·çš„åŸç”Ÿå¼•ç”¨ç±»å‹ï¼Œå¸®åŠ©å¼€å‘è€…å®ç°å¸¸è§çš„ä»»åŠ¡ã€‚</p>
<h2><code>Date</code></h2>
<p><code>Date</code> ç±»å‹å°†æ—¥æœŸä¿å­˜ä¸ºè‡ªåè°ƒä¸–ç•Œæ—¶ï¼ˆUTCï¼ŒUniversal Time Coordinatedï¼‰æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œï¼ˆé›¶æ—¶ï¼‰è‡³ä»Šæ‰€ç»è¿‡çš„æ¯«ç§’æ•°ã€‚</p>
<p>è¦åˆ›å»ºæ—¥æœŸå¯¹è±¡ï¼Œå°±ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ <code>Date</code> æ„é€ å‡½æ•°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨ä¸ç»™ <code>Date</code> æ„é€ å‡½æ•°ä¼ å‚æ•°çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºçš„å¯¹è±¡å°†ä¿å­˜å½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚è¦åŸºäºå…¶ä»–æ—¥æœŸå’Œæ—¶é—´åˆ›å»ºæ—¥æœŸå¯¹è±¡ï¼Œå¿…é¡»ä¼ å…¥å…¶æ¯«ç§’è¡¨ç¤ºï¼ˆUNIX çºªå…ƒ 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä¹‹åçš„æ¯«ç§’æ•°ï¼‰ã€‚</p>
<p>ä¸ºäº†å¾—åˆ°è¿™ä¸ªæ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<ul>
<li><code>Date.parse()</code></li>
<li><code>Date.UTC()</code></li>
</ul>
<h3><code>Date.parse()</code> å’Œ <code>Date.UTC()</code></h3>
<h4><code>Date.parse()</code></h4>
<p><code>Date.parse()</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²å‚æ•°ï¼Œå°è¯•å°†è¿™ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºè¡¨ç¤ºè¯¥æ—¥æœŸçš„æ¯«ç§’æ•°ï¼ˆæœ¬åœ°æ—¶é—´ï¼‰ã€‚</p>
<p>æ”¯æŒä¸‹åˆ—æ—¥æœŸæ ¼å¼ï¼š</p>
<ul>
<li>ã€Œæœˆ/æ—¥/å¹´ã€ï¼Œå¦‚ <code>"5/23/2019"</code>ï¼›</li>
<li>ã€Œæœˆå æ—¥, å¹´ã€ï¼Œå¦‚ <code>"May 23, 2019"</code>ï¼›</li>
<li>ã€Œå‘¨å‡  æœˆå æ—¥ å¹´ æ—¶:åˆ†:ç§’ æ—¶åŒºã€ï¼Œå¦‚ <code>"Tue May 23 2019 00:00:00 GMT-0700"</code>ï¼›</li>
<li>ISO 8601 æ‰©å±•æ ¼å¼ã€ŒYYYY-MM-DDTHH:mm:ss.sssZã€ï¼Œå¦‚ <code>"2019-05-23T00:00:00"</code>ï¼ˆåªé€‚ç”¨äºå…¼å®¹ ES5 çš„å®ç°ï¼‰ã€‚</li>
</ul>
<p>å¦‚æœä¼ ç»™ <code>Date.parse()</code> çš„å­—ç¬¦ä¸²å¹¶ä¸è¡¨ç¤ºæ—¥æœŸï¼Œåˆ™è¯¥æ–¹æ³•ä¼šè¿”å› <code>NaN</code>ã€‚</p>
<p>å¦‚æœç›´æ¥æŠŠè¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²ä¼ ç»™ <code>Date</code> æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆ <code>Date</code> ä¼šåœ¨åå°è°ƒç”¨ <code>Date.parse()</code>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> someDate1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'May 23, 2019'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> someDate2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'May 23, 2019'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™ä¸¤è¡Œä»£ç å¾—åˆ°çš„æ—¥æœŸå¯¹è±¡ç›¸åŒã€‚</p>
<h4><code>Date.UTC()</code></h4>
<p><code>Date.UTC()</code> æ–¹æ³•ä¹Ÿè¿”å›æ—¥æœŸçš„æ¯«ç§’è¡¨ç¤ºï¼ˆUTC æ—¶é—´ï¼‰ï¼Œå‚æ•°æ˜¯ã€Œå¹´ã€é›¶èµ·ç‚¹æœˆæ•°ï¼ˆ1 æœˆæ˜¯ 0ï¼Œ2 æœˆæ˜¯ 1ï¼Œä»¥æ­¤ç±»æ¨ï¼‰ã€æ—¥ï¼ˆ1 ~ 31ï¼‰ã€æ—¶ï¼ˆ0 ~ 23ï¼‰ã€åˆ†ã€ç§’å’Œæ¯«ç§’ã€ã€‚</p>
<p>è¿™äº›å‚æ•°ä¸­ï¼Œåªæœ‰å‰ä¸¤ä¸ªï¼ˆå¹´å’Œæœˆï¼‰æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸æä¾›æ—¥ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º 1 æ—¥ã€‚å…¶ä»–å‚æ•°çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// GMT æ—¶é—´ 2000 å¹´ 1 æœˆ 1 æ—¥é›¶ç‚¹</span>
<span class="token keyword">let</span> y2k <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2000-01-01T00:00:00.000Z</span>
<span class="token comment">// GMT æ—¶é—´ 2005 å¹´ 5 æœˆ 5 æ—¥ä¸‹åˆ 5 ç‚¹ 55 åˆ† 55 ç§’</span>
<span class="token keyword">let</span> allFives <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2005</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2005-05-05T17:55:55.000Z</span>
</code></pre></div><p>ä¸ <code>Date.parse()</code> ä¸€æ ·ï¼Œ<code>Date.UTC()</code> ä¹Ÿä¼šè¢« <code>Date</code> æ„é€ å‡½æ•°éšå¼è°ƒç”¨ï¼Œä½†æœ‰ä¸€ä¸ªåŒºåˆ«ï¼šè¿™ç§æƒ…å†µä¸‹åˆ›å»ºçš„æ˜¯æœ¬åœ°æ—¥æœŸï¼Œä¸æ˜¯ <code>GMT</code> æ—¥æœŸã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// æœ¬åœ°æ—¶é—´ï¼ˆåŒ—äº¬ï¼‰ä¸ºï¼šUTC + 8ï¼Œå› æ­¤ä¼šç›¸å·® 8 * 60 * 60 * 1000 = 28800000</span>
<span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 28800000</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">JS ä¸­çš„æ—¶é—´</p>
<p>ä¸åŒæ—¶é—´æ¦‚å¿µï¼Œè¯¦è§ <a href="https://juejin.cn/post/7063118893115670536" target="_blank" rel="noopener noreferrer">GMTã€UTCã€æ—¶åŒºã€JavaScript Date æ€»ç»“</a>ã€‚</p>
</div>
<h4>å¯¹æ¯”</h4>
<p><code>Date.UTC()</code> æ—¥æœŸæŒ‡çš„æ˜¯åœ¨æ²¡æœ‰æ—¶åŒºåå·®çš„æƒ…å†µä¸‹(å°†æ—¥æœŸè½¬æ¢ä¸º GMT æ—¶é—´)çš„æ—¥æœŸå€¼ã€‚</p>
<p><code>Date.parse()</code> æ–¹æ³•æ˜¯åŸºäºæœ¬åœ°æ—¶åŒºå»ºç«‹çš„ï¼Œè€Œ <code>Date.UTC()</code> æ–¹æ³•æ˜¯åŸºäºæ— æ—¶åŒºåå·®å»ºç«‹çš„ã€‚</p>
<p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯¹ä¸¤ä¸ªæ–¹æ³•ä¼ å…¥ç›¸åŒçš„æ—¶é—´ï¼Œæˆ‘ä»¬ä¼šå‘ç° <code>Date.UTC()</code> æ–¹æ³•å¾—åˆ°çš„æ¯«ç§’æ•°ç›¸å¯¹äº <code>Date.parse()</code> æ–¹æ³•å¾—åˆ°çš„æ¯«ç§’æ•°ä¼šå¤šå…«ä¸ªå°æ—¶çš„æ¯«ç§’æ•°(è¿™é‡Œçš„æœ¬åœ°æ—¶åŒºæŒ‡çš„æ˜¯åŒ—äº¬æ—¶é—´)ã€‚</p>
<h3>ç»§æ‰¿çš„æ–¹æ³•</h3>
<p><code>Date</code> ç±»å‹é‡å†™äº† <code>toLocaleString()</code>ã€<code>toString()</code> å’Œ <code>valueOf()</code> æ–¹æ³•ã€‚</p>
<p><code>Date</code> ç±»å‹çš„ <code>toLocaleString()</code> æ–¹æ³•è¿”å›ä¸æµè§ˆå™¨è¿è¡Œçš„æœ¬åœ°ç¯å¢ƒä¸€è‡´çš„æ—¥æœŸå’Œæ—¶é—´ã€‚</p>
<p><code>toString()</code> æ–¹æ³•é€šå¸¸è¿”å›å¸¦æ—¶åŒºä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œæ—¶é—´ä¹Ÿæ˜¯ä»¥ 24 å°æ—¶åˆ¶ï¼ˆ0~23ï¼‰è¡¨ç¤ºçš„ã€‚</p>
<p><code>valueOf()</code> æ–¹æ³•ä¸è¿”å›åŸå§‹å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›æ—¥æœŸçš„æ¯«ç§’æ•°ã€‚å› æ­¤ï¼Œæ“ä½œç¬¦ï¼ˆå¦‚å°äºå·å’Œå¤§äºå·ï¼‰å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒè¿”å›çš„å€¼ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 2019 å¹´ 1 æœˆ 1 æ—¥</span>
<span class="token keyword">let</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 2019 å¹´ 2 æœˆ 1 æ—¥</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date1 <span class="token operator">&lt;</span> date2<span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date1 <span class="token operator">&gt;</span> date2<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å½“éœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶ï¼ˆæ¯”å¦‚åœ¨ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—ã€å­—ç¬¦ä¸²æ‹¼æ¥ç­‰æƒ…å†µä¸‹ï¼‰ï¼Œä¼š  å¯¹è±¡çš„ <code>valueOf()</code> å’Œ <code>toString()</code> æ–¹æ³•æ¥è·å–åŸå§‹å€¼ã€‚</p>
</div>
<h3>æ—¥æœŸæ ¼å¼åŒ–æ–¹æ³•</h3>
<p><code>Date</code> ç±»å‹æœ‰å‡ ä¸ªä¸“é—¨ç”¨äºæ ¼å¼åŒ–æ—¥æœŸçš„æ–¹æ³•ï¼Œå®ƒä»¬éƒ½ä¼šè¿”å›å­—ç¬¦ä¸²ï¼š</p>
<ul>
<li><code>toDateString()</code> æ˜¾ç¤ºæ—¥æœŸä¸­çš„å‘¨å‡ ã€æœˆã€æ—¥ã€å¹´ï¼ˆæ ¼å¼ç‰¹å®šäºå®ç°ï¼‰ï¼›</li>
<li><code>toTimeString()</code> æ˜¾ç¤ºæ—¥æœŸä¸­çš„æ—¶ã€åˆ†ã€ç§’å’Œæ—¶åŒºï¼ˆæ ¼å¼ç‰¹å®šäºå®ç°ï¼‰ï¼›</li>
<li><code>toLocaleDateString()</code> æ˜¾ç¤ºæ—¥æœŸä¸­çš„å‘¨å‡ ã€æœˆã€æ—¥ã€å¹´ï¼ˆæ ¼å¼ç‰¹å®šäºå®ç°å’Œåœ°åŒºï¼‰ï¼›</li>
<li><code>toLocaleTimeString()</code> æ˜¾ç¤ºæ—¥æœŸä¸­çš„æ—¶ã€åˆ†ã€ç§’ï¼ˆæ ¼å¼ç‰¹å®šäºå®ç°å’Œåœ°åŒºï¼‰ï¼›</li>
<li><code>toUTCString()</code> æ˜¾ç¤ºå®Œæ•´çš„ UTC æ—¥æœŸï¼ˆæ ¼å¼ç‰¹å®šäºå®ç°ï¼‰ã€‚</li>
</ul>
<p>è¿™äº›æ–¹æ³•çš„è¾“å‡ºä¸ <code>toLocaleString()</code> å’Œ <code>toString()</code> ä¸€æ ·ï¼Œä¼šå› æµè§ˆå™¨è€Œå¼‚ã€‚å› æ­¤ä¸èƒ½ç”¨äºåœ¨<br>
ç”¨æˆ·ç•Œé¢ä¸Šä¸€è‡´åœ°æ˜¾ç¤ºæ—¥æœŸã€‚</p>
<h2><code>RegExp</code></h2>
<p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æ¨¡å¼åŒ¹é…å·¥å…·ï¼Œç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ã€åŒ¹é…å’Œæ›¿æ¢ç‰¹å®šçš„æ–‡æœ¬ã€‚ECMAScript é€šè¿‡ <code>RegExp</code> ç±»å‹æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼ç”±æ¨¡å¼å’Œæ ‡è®°ç»„æˆï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> expression <span class="token operator">=</span> <span class="token operator">/</span>pattern<span class="token operator">/</span>flags<span class="token punctuation">;</span>
</code></pre></div><p>patternï¼ˆæ¨¡å¼ï¼‰å¯ä»¥æ˜¯ä»»ä½•ç®€å•æˆ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬å­—ç¬¦ç±»ã€é™å®šç¬¦ã€åˆ†ç»„ã€å‘å‰æŸ¥æ‰¾å’Œåå‘å¼•ç”¨ã€‚æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å¸¦é›¶ä¸ªæˆ–å¤šä¸ª flagsï¼ˆæ ‡è®°ï¼‰ï¼Œç”¨äºæ§åˆ¶æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚</p>
<p>ä¸‹é¢ç»™å‡ºäº†è¡¨ç¤ºåŒ¹é…æ¨¡å¼çš„æ ‡è®°ã€‚</p>
<ul>
<li><code>g</code>ï¼šå…¨å±€æ¨¡å¼ï¼Œè¡¨ç¤ºæŸ¥æ‰¾å­—ç¬¦ä¸²çš„å…¨éƒ¨å†…å®¹ï¼Œè€Œä¸æ˜¯æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„å†…å®¹å°±ç»“æŸã€‚</li>
<li><code>i</code>ï¼šä¸åŒºåˆ†å¤§å°å†™ï¼Œè¡¨ç¤ºåœ¨æŸ¥æ‰¾åŒ¹é…æ—¶å¿½ç•¥ <code>pattern</code> å’Œå­—ç¬¦ä¸²çš„å¤§å°å†™ã€‚</li>
<li><code>m</code>ï¼šå¤šè¡Œæ¨¡å¼ï¼Œè¡¨ç¤ºæŸ¥æ‰¾åˆ°ä¸€è¡Œæ–‡æœ¬æœ«å°¾æ—¶ä¼šç»§ç»­æŸ¥æ‰¾ã€‚</li>
<li><code>y</code>ï¼šç²˜é™„æ¨¡å¼ï¼Œè¡¨ç¤ºåªæŸ¥æ‰¾ä» <code>lastIndex</code> å¼€å§‹åŠä¹‹åçš„å­—ç¬¦ä¸²ã€‚</li>
<li><code>u</code>ï¼šUnicode æ¨¡å¼ï¼Œå¯ç”¨ Unicode åŒ¹é…ã€‚</li>
<li><code>s</code>ï¼šdotAll æ¨¡å¼ï¼Œè¡¨ç¤ºå…ƒå­—ç¬¦ <code>.</code> åŒ¹é…ä»»ä½•å­—ç¬¦ï¼ˆåŒ…æ‹¬ <code>\n</code> æˆ– <code>\r</code>ï¼‰ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰"at"</span>
<span class="token keyword">let</span> pattern1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
<span class="token comment">// åŒ¹é…ç¬¬ä¸€ä¸ª"bat"æˆ–"cat"ï¼Œå¿½ç•¥å¤§å°å†™</span>
<span class="token keyword">let</span> pattern2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[bc]at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
<span class="token comment">// åŒ¹é…æ‰€æœ‰ä»¥"at"ç»“å°¾çš„ä¸‰å­—ç¬¦ç»„åˆï¼Œå¿½ç•¥å¤§å°å†™</span>
<span class="token keyword">let</span> pattern3 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span>
</code></pre></div><h3>å®ä¾‹å±æ€§</h3>
<p>é€šè¿‡å®ä¾‹å±æ€§å¯ä»¥å…¨é¢äº†è§£æ­£åˆ™è¡¨è¾¾å¼çš„ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ä½¿ç”¨çš„å¹¶ä¸å¤šï¼Œå› ä¸ºä»æ¨¡å¼ä¸­å¯ä»¥ç›´æ¥çœ‹å‡ºã€‚</p>
<ul>
<li><code>lastIndex</code>ï¼šè¡¨ç¤ºåœ¨æºå­—ç¬¦ä¸²ä¸­ä¸‹ä¸€æ¬¡æœç´¢çš„å¼€å§‹ä½ç½®ã€‚</li>
</ul>
<h3>å®ä¾‹æ–¹æ³•</h3>
<h4><code>exec()</code></h4>
<p><code>exec()</code> æ–¹æ³•åœ¨ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²ä¸­æ‰§è¡Œä¸€ä¸ªæœç´¢åŒ¹é…ã€‚è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„æˆ– <code>null</code>ã€‚</p>
<p>è¿”å›çš„æ•°ç»„è™½ç„¶æ˜¯ Array çš„å®ä¾‹ï¼Œä½†åŒ…å«ä¸¤ä¸ªé¢å¤–çš„å±æ€§ï¼š<code>index</code> å’Œ <code>input</code>ã€‚<code>index</code> æ˜¯å­—ç¬¦ä¸²ä¸­åŒ¹é…æ¨¡å¼çš„èµ·å§‹ä½ç½®ï¼Œ<code>input</code> æ˜¯è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> regex1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">foo*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
<span class="token keyword">const</span> str1 <span class="token operator">=</span> <span class="token string">'table football, foosball'</span>
<span class="token keyword">let</span> array1

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>array1 <span class="token operator">=</span> regex1<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Found </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>array1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. Next starts at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>regex1<span class="token punctuation">.</span>lastIndex<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// Expected output: "Found foo. Next starts at 9."</span>
  <span class="token comment">// Expected output: "Found foo. Next starts at 19."</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">'mom and dad and baby'</span>
<span class="token keyword">let</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mom( and dad( and baby)?)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span>
<span class="token keyword">let</span> matches <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">.</span>input<span class="token punctuation">)</span> <span class="token comment">// "mom and dad and baby"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// "mom and dad and baby"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// " and dad and baby"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// " and baby"</span>
</code></pre></div><h4><code>test()</code></h4>
<p><code>test()</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ã€‚å¦‚æœè¾“å…¥çš„æ–‡æœ¬ä¸æ¨¡å¼åŒ¹é…ï¼Œåˆ™å‚æ•°è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºåªæƒ³æµ‹è¯•æ¨¡å¼æ˜¯å¦åŒ¹é…ï¼Œè€Œä¸éœ€è¦å®é™…åŒ¹é…å†…å®¹çš„æƒ…å†µã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">'000-00-0000'</span>
<span class="token keyword">let</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}-\d{2}-\d{4}</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The pattern was matched.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>ç»§æ‰¿çš„æ–¹æ³•</h3>
<p><code>RegExp</code> ä¹Ÿç»§æ‰¿äº† <code>Object</code> ä¸Šçš„ <code>valueOf()</code>, <code>toString()</code>, <code>toLocalString()</code> ä¸‰ä¸ªæ–¹æ³•ã€‚</p>
<p>æ— è®ºæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Œ<code>toLocaleString()</code> å’Œ <code>toString()</code> éƒ½è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„å­—é¢é‡è¡¨ç¤ºã€‚æ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\[bc\\]at'</span><span class="token punctuation">,</span> <span class="token string">'gi'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// /\[bc\]at/gi</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pattern<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// /\[bc\]at/gi</span>
</code></pre></div><p>è¿™é‡Œçš„æ¨¡å¼æ˜¯é€šè¿‡ <code>RegExp</code> æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œä½† <code>toLocaleString()</code> å’Œ <code>toString()</code> è¿”å›çš„éƒ½æ˜¯å…¶å­—é¢é‡çš„å½¢å¼ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„ <code>valueOf()</code> æ–¹æ³•è¿”å›æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ã€‚</p>
</div>
<h2>åŸå§‹å€¼åŒ…è£…ç±»å‹</h2>
<p>ä¸ºäº†æ–¹ä¾¿æ“ä½œåŸå§‹å€¼ï¼ŒECMAScript æä¾›äº† 3 ç§ç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ï¼š<code>Boolean</code>ã€<code>Number</code> å’Œ <code>String</code>ã€‚</p>
<p>æ¯å½“ç”¨åˆ°æŸä¸ªåŸå§‹å€¼çš„æ–¹æ³•æˆ–å±æ€§æ—¶ï¼Œåå°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”åŸå§‹åŒ…è£…ç±»å‹çš„å¯¹è±¡ï¼Œä»è€Œæš´éœ²å‡ºæ“ä½œåŸå§‹å€¼çš„å„ç§æ–¹æ³•ã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token string">'some text'</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>å½“ç¬¬äºŒè¡Œè®¿é—® <code>s1</code> æ—¶ï¼Œæ˜¯ä»¥è¯»æ¨¡å¼è®¿é—®çš„ï¼Œä¹Ÿå°±æ˜¯è¦ä»å†…å­˜ä¸­è¯»å–å˜é‡ä¿å­˜çš„å€¼ã€‚</p>
<p>åœ¨ä»¥è¯»æ¨¡å¼è®¿é—®å­—ç¬¦ä¸²å€¼çš„ä»»ä½•æ—¶å€™ï¼Œåå°éƒ½ä¼šæ‰§è¡Œä»¥ä¸‹ 3 æ­¥ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>String</code> ç±»å‹çš„å®ä¾‹ï¼›</li>
<li>è°ƒç”¨å®ä¾‹ä¸Šçš„ç‰¹å®šæ–¹æ³•ï¼›</li>
<li>é”€æ¯å®ä¾‹ã€‚</li>
</ol>
<p>ç›¸å½“äºä¸‹é¢è¡Œä¸ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
s1 <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre></div><p>å¼•ç”¨ç±»å‹ä¸åŸå§‹å€¼åŒ…è£…ç±»å‹çš„ä¸»è¦åŒºåˆ«åœ¨äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨é€šè¿‡ <code>new</code> å®ä¾‹åŒ–å¼•ç”¨ç±»å‹åï¼Œå¾—åˆ°çš„å®ä¾‹ä¼šåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶è¢«é”€æ¯ï¼Œè€Œè‡ªåŠ¨åˆ›å»ºçš„åŸå§‹å€¼åŒ…è£…å¯¹è±¡åˆ™åªå­˜åœ¨äºè®¿é—®å®ƒçš„é‚£è¡Œä»£ç æ‰§è¡ŒæœŸé—´ã€‚</p>
<p>è¿™æ„å‘³ç€ä¸èƒ½åœ¨è¿è¡Œæ—¶ç»™åŸå§‹å€¼æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token string">'some text'</span>
s1<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre></div><p>è¿™é‡Œçš„ç¬¬äºŒè¡Œä»£ç å°è¯•ç»™å­—ç¬¦ä¸² <code>s1</code> æ·»åŠ äº†ä¸€ä¸ª <code>color</code> å±æ€§ã€‚å¯æ˜¯ï¼Œç¬¬ä¸‰è¡Œä»£ç è®¿é—® <code>color</code> å±æ€§æ—¶ï¼Œå®ƒå´ä¸è§äº†ã€‚</p>
<p>åŸå› å°±æ˜¯ç¬¬äºŒè¡Œä»£ç è¿è¡Œæ—¶ä¼šä¸´æ—¶åˆ›å»ºä¸€ä¸ª <code>String</code> å¯¹è±¡ï¼Œè€Œå½“ç¬¬ä¸‰è¡Œä»£ç æ‰§è¡Œæ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å·²ç»è¢«é”€æ¯äº†ã€‚å®é™…ä¸Šï¼Œç¬¬ä¸‰è¡Œä»£ç åœ¨è¿™é‡Œåˆ›å»ºäº†è‡ªå·±çš„ <code>String</code> å¯¹è±¡ï¼Œä½†è¿™ä¸ªå¯¹è±¡æ²¡æœ‰ <code>color</code> å±æ€§ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä¸Šè¿°ä»£ç åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼š<code>TypeError: Cannot create property 'color' on string 'some text'</code>ã€‚</p>
</div>
<p>å¦å¤–ï¼Œ<code>Object</code> æ„é€ å‡½æ•°ä½œä¸ºä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œèƒ½å¤Ÿæ ¹æ®ä¼ å…¥å€¼çš„ç±»å‹è¿”å›ç›¸åº”åŸå§‹å€¼åŒ…è£…ç±»å‹çš„å®ä¾‹ã€‚æ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>æ³¨æ„ï¼Œä½¿ç”¨ new è°ƒç”¨åŸå§‹å€¼åŒ…è£…ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œä¸è°ƒç”¨åŒåçš„è½¬å‹å‡½æ•°å¹¶ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token string">'25'</span>
<span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// è½¬å‹å‡½æ•°</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> number<span class="token punctuation">)</span> <span class="token comment">// "number"</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// æ„é€ å‡½æ•°</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span> <span class="token comment">// "object"</span>
</code></pre></div></div>
<h3><code>Boolean</code></h3>
<p><code>Boolean</code> çš„å®ä¾‹ä¼šé‡å†™ <code>valueOf()</code> æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å€¼ <code>true</code> æˆ– <code>false</code>ã€‚<code>toString()</code> æ–¹æ³•è¢«è°ƒç”¨æ—¶ä¹Ÿä¼šè¢«è¦†ç›–ï¼Œè¿”å›å­—ç¬¦ä¸² <code>"true"</code> æˆ– <code>"false"</code>ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>æ°¸è¿œä¸è¦æ˜¾ç¤ºä½¿ç”¨ <code>Boolean</code> å¯¹è±¡ã€‚</p>
</div>
<h3><code>Number</code></h3>
<p>ä¸ <code>Boolean</code> ç±»å‹ä¸€æ ·ï¼Œ<code>Number</code> ç±»å‹é‡å†™äº† <code>valueOf()</code>ã€<code>toLocaleString()</code> å’Œ <code>toString()</code> æ–¹æ³•ã€‚<code>valueOf()</code> æ–¹æ³•è¿”å› <code>Number</code> å¯¹è±¡è¡¨ç¤ºçš„åŸå§‹æ•°å€¼ï¼Œå¦å¤–ä¸¤ä¸ªæ–¹æ³•è¿”å›æ•°å€¼å­—ç¬¦ä¸²ã€‚</p>
<p><code>toString()</code> æ–¹æ³•å¯é€‰åœ°æ¥æ”¶ä¸€ä¸ªè¡¨ç¤ºåŸºæ•°çš„å‚æ•°ï¼Œå¹¶è¿”å›ç›¸åº”åŸºæ•°å½¢å¼çš„æ•°å€¼å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "10"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "1010"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "12"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "10"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "a"</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä¸å»ºè®®ç›´æ¥å®ä¾‹åŒ– <code>Number</code> å¯¹è±¡ã€‚</p>
</div>
<h4><code>toFixed()</code></h4>
<p>è¿”å›åŒ…å«æŒ‡å®šå°æ•°ç‚¹ä½æ•°çš„æ•°å€¼å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "10.00"</span>
</code></pre></div><h4><code>toExponential()</code></h4>
<p>è¿”å›ä»¥ç§‘å­¦è®°æ•°æ³•ï¼ˆä¹Ÿç§°ä¸ºæŒ‡æ•°è®°æ•°æ³•ï¼‰è¡¨ç¤ºçš„æ•°å€¼å­—ç¬¦ä¸²ã€‚<code>toExponential()</code> ä¹Ÿæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»“æœä¸­å°æ•°çš„ä½æ•°ã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "1.0e+1"</span>
</code></pre></div><h4><code>toPrecision()</code></h4>
<p>ä¼šæ ¹æ®æƒ…å†µè¿”å›æœ€åˆç†çš„è¾“å‡ºç»“æœï¼Œå¯èƒ½æ˜¯å›ºå®šé•¿åº¦ï¼Œä¹Ÿå¯èƒ½æ˜¯ç§‘å­¦è®°æ•°æ³•å½¢å¼ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»“æœä¸­æ•°å­—çš„æ€»ä½æ•°ï¼ˆä¸åŒ…å«æŒ‡æ•°ï¼‰ã€‚æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">99</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "1e+2"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "99"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "99.0"</span>
</code></pre></div><h4><code>isInteger()</code></h4>
<p>ES6 æ–°å¢äº† <code>Number.isInteger()</code> æ–¹æ³•ï¼Œç”¨äºè¾¨åˆ«ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¿å­˜ä¸ºæ•´æ•°ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1.01</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3><code>String</code></h3>
<p>3 ä¸ªç»§æ‰¿çš„æ–¹æ³• <code>valueOf()</code>ã€<code>toLocaleString()</code> å’Œ <code>toString()</code> éƒ½è¿”å›å¯¹è±¡çš„åŸå§‹å­—ç¬¦ä¸²å€¼ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p><code>String</code> ç±»å‹æ–¹æ³•è¾ƒå¤šï¼Œå¯ä»¥æŸ¥çœ‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener noreferrer">MDN String</a>ï¼Œä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ã€‚</p>
</div>
<h4><code>concat()</code></h4>
<p>ç”¨äºå°†ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> stringValue <span class="token operator">=</span> <span class="token string">'hello '</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> stringValue<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// "hello world"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">)</span> <span class="token comment">// "hello"</span>
</code></pre></div><p>è™½ç„¶ <code>concat()</code> æ–¹æ³•å¯ä»¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†æ›´å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨åŠ å·æ“ä½œç¬¦ <code>+</code>ã€‚è€Œä¸”å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºæ‹¼æ¥å¤šä¸ªå­—ç¬¦ä¸²æ¥è¯´ï¼Œä½¿ç”¨ã€Œæ¨¡ç‰ˆå­—ç¬¦ä¸²ã€æ›´æ–¹ä¾¿ã€‚</p>
<h4><code>slice()</code>, <code>substring()</code></h4>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ–¹æ³• <code>substr()</code>ï¼Œä½†æ˜¯å·²ä¸å†æ¨èä½¿ç”¨è¯¥ç‰¹æ€§ã€‚</p>
</div>
<ul>
<li><code>slice(start[, end])</code>ï¼šè¿”å› <code>[start, end)</code> ä¹‹é—´çš„å…ƒç´ ï¼Œè‹¥ <code>end</code> æœªæŒ‡å®šï¼Œåˆ™é»˜è®¤åˆ°æœ«å°¾æ‰€æœ‰å…ƒç´ ï¼›</li>
<li><code>substring(start[, end])</code>ï¼šè¿”å› <code>[start, end)</code> ä¹‹é—´çš„å…ƒç´ ï¼Œè‹¥ <code>end</code> æœªæŒ‡å®šï¼Œåˆ™é»˜è®¤åˆ°æœ«å°¾æ‰€æœ‰å…ƒç´ ï¼›</li>
</ul>
<p>äºŒè€…åœ¨å‚æ•°éƒ½ä¸ºæ­£æ•°æ—¶ï¼Œæ•ˆæœä¸€è‡´ï¼Œä½†æ˜¯å®ƒä»¬å¯¹è´Ÿæ•°çš„å¤„ç†ä¸ä¸€æ ·ï¼Œä¸‹é¢çœ‹çœ‹ä¾‹å­ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å‚æ•°ä¸ºæ­£æ•°</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Hello world'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "ello world"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "ello"</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "ello world"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "ello"</span>
</code></pre></div><p>å¯¹è´Ÿå€¼çš„å¤„ç†å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>slice(start[, end])</code>ï¼šæ‰€æœ‰è´Ÿå€¼ä¸å­—ç¬¦ä¸²é•¿åº¦ç›¸åŠ ï¼›</li>
<li><code>substring(start[, end])</code>ï¼šæ‰€æœ‰è´Ÿå€¼ç½® 0ï¼Œè‹¥ <code>start</code> å¤§äº <code>end</code>ï¼Œåˆ™ä¼šå°†äºŒè€…è°ƒæ¢ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// å‚æ•°ä¸ºè´Ÿæ•°</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'Hello world'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// str.slice(8) "rld"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// str.slice(3, 7) "lo w"</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// str.substring(0) "hello world"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// str.substring(3, 0) -&gt; str.substring(0, 3) "hel"</span>
</code></pre></div><div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>ä¸ºäº†å‡å°‘å¿ƒæ™ºè´Ÿæ‹…ï¼Œç»™æ‰€æœ‰å‚æ•°ç½®ä¸ºæ­£æ•°å³å¯ã€‚</p>
</div>
<h4><code>indexOf()</code>, <code>lastIndexOf()</code></h4>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ä»å­—ç¬¦ä¸²ä¸­æœç´¢ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä½ç½®ï¼ˆå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™è¿”å› <code>-1</code>ï¼‰ã€‚</p>
<p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼Œ<code>indexOf()</code> æ–¹æ³•ä»å­—ç¬¦ä¸²å¼€å¤´å¼€å§‹æŸ¥æ‰¾å­å­—ç¬¦ä¸²ï¼Œè€Œ <code>lastIndexOf()</code> æ–¹æ³•ä»å­—ç¬¦ä¸²æœ«å°¾å¼€å§‹æŸ¥æ‰¾å­å­—ç¬¦ä¸²ã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> stringValue <span class="token operator">=</span> <span class="token string">'hello world'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
</code></pre></div><h4><code>startsWith()</code>, <code>endsWith()</code>, <code>includes()</code></h4>
<p>è¿™äº›æ–¹æ³•éƒ½ä¼šä»å­—ç¬¦ä¸²ä¸­æœç´¢ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦åŒ…å«çš„å¸ƒå°”å€¼ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼Œ<code>startsWith()</code> æ£€æŸ¥å¼€å§‹äºç´¢å¼• <code>0</code> çš„åŒ¹é…é¡¹ï¼Œ<code>endsWith()</code> æ£€æŸ¥å¼€å§‹äºç´¢å¼• <code>(string.length - substring.length)</code> çš„åŒ¹é…é¡¹ï¼Œè€Œ <code>includes()</code> æ£€æŸ¥æ•´ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'foo bar baz'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'baz'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'qux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2024-04-17T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ‰§è¡Œä¸Šä¸‹æ–‡</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/005-execution-context.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/005-execution-context.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰æ˜¯ JavaScript ä»£ç æ‰§è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼Œä¸€å…±æœ‰ä¸‰ç§ä¸åŒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆGlobal Execution Context, GECï¼‰ï¼šæœ€åŸºæœ¬çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨ä¸€å¼€å§‹å°±ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼šåˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå°† <code>this</code> æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼›ä¸€ä¸ª JavaScript ç¨‹åºåªæœ‰ä¸€ä¸ª GECï¼›æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ <code>window</code>ï¼Œåœ¨ Node ç¯å¢ƒä¸­å…¨å±€å¯¹è±¡æ˜¯ <code>global</code>ï¼›</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆFunction Execution Context, FECï¼‰ï¼šå‡½æ•°åªæœ‰åœ¨è°ƒç”¨æ—¶æ‰ä¼šäº§ç”Ÿä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼›</li>
<li>Eval æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆEval Execution Context, EECï¼‰ï¼š<code>eval</code> å‡½æ•°æ‰§è¡Œæ—¶äº§ç”Ÿçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<h2>æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰æ˜¯ JavaScript ä»£ç æ‰§è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼Œä¸€å…±æœ‰ä¸‰ç§ä¸åŒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆGlobal Execution Context, GECï¼‰ï¼šæœ€åŸºæœ¬çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨ä¸€å¼€å§‹å°±ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼šåˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå°† <code>this</code> æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼›ä¸€ä¸ª JavaScript ç¨‹åºåªæœ‰ä¸€ä¸ª GECï¼›æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ <code>window</code>ï¼Œåœ¨ Node ç¯å¢ƒä¸­å…¨å±€å¯¹è±¡æ˜¯ <code>global</code>ï¼›</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆFunction Execution Context, FECï¼‰ï¼šå‡½æ•°åªæœ‰åœ¨è°ƒç”¨æ—¶æ‰ä¼šäº§ç”Ÿä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼›</li>
<li>Eval æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆEval Execution Context, EECï¼‰ï¼š<code>eval</code> å‡½æ•°æ‰§è¡Œæ—¶äº§ç”Ÿçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">/* global execution context */</span>
<span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// FEC of baz</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">3</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// FEC of bar</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">//2</span>
  <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// GEC</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token comment">/* global execution context */</span>
</code></pre></div><ol>
<li>å½“ç¨‹åºæ‰§è¡Œæ—¶ï¼Œé¦–å…ˆ JS å¼•æ“ä¼šåˆ›å»ºä¸€ä¸ª GECï¼Œä¸åœ¨å‡½æ•°å†…çš„ä»£ç éƒ½æ˜¯ GEC çš„ä¸€éƒ¨åˆ†ï¼›</li>
<li>å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºå¯¹åº”çš„ FECï¼Œå‡½æ•°å†…éƒ¨çš„ä»£ç ä¼šé©¬ä¸Šæ‰§è¡Œï¼›</li>
<li><strong>æ¯ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰è‡ªå·±çš„å˜é‡ç¯å¢ƒ</strong>ï¼Œå› æ­¤å°½ç®¡ <code>foo</code> è¢«å£°æ˜äº†ä¸‰æ¬¡ï¼Œä½†å› ä¸ºå®ƒä»¬åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œå› æ­¤å®ƒä»¬æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å½±å“ï¼›</li>
</ol>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/example1.png" alt="example" tabindex="0" loading="lazy"><figcaption>example</figcaption></figure>
<h2>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h2>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution Context Stackï¼‰ä¹Ÿå«è°ƒç”¨æ ˆã€‚</p>
<p>å½“ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒJS å¼•æ“ä¼šåˆ›å»º <strong>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</strong>ï¼Œå¹¶å°†å®ƒå‹å…¥å½“å‰è°ƒç”¨æ ˆã€‚æ¯å½“å‡½æ•°è°ƒç”¨æ—¶ï¼ŒJS å¼•æ“ä¼šåˆ›å»ºå¯¹åº”çš„å‡½æ•°ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†å®ƒå‹å…¥æ ˆé¡¶ï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œåˆ™ä¼šå°†è¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»è°ƒç”¨æ ˆå¼¹å‡ºã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'global execution context'</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo æ­£åœ¨æ‰§è¡Œ'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo ç»“æŸæ‰§è¡Œ'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar æ­£åœ¨æ‰§è¡Œ'</span><span class="token punctuation">)</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar ç»“æŸæ‰§è¡Œ'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz æ­£åœ¨æ‰§è¡Œ'</span><span class="token punctuation">)</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'baz ç»“æŸæ‰§è¡Œ'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'program successfully executed'</span><span class="token punctuation">)</span>

<span class="token comment">// global execution context</span>
<span class="token comment">// baz æ­£åœ¨æ‰§è¡Œ</span>
<span class="token comment">// bar æ­£åœ¨æ‰§è¡Œ</span>
<span class="token comment">// foo æ­£åœ¨æ‰§è¡Œ</span>
<span class="token comment">// foo ç»“æŸæ‰§è¡Œ</span>
<span class="token comment">// bar ç»“æŸæ‰§è¡Œ</span>
<span class="token comment">// baz ç»“æŸæ‰§è¡Œ</span>
<span class="token comment">// program successfully executed</span>
</code></pre></div><p>ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/example2.png" alt="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" tabindex="0" loading="lazy"><figcaption>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</figcaption></figure>
<h2>ES3 ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>ä¸Šé¢ä»å®è§‚è§’åº¦åˆ†æäº† JavaScript æ‰§è¡Œæœºåˆ¶ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„è¯¦ç»†å†…å®¹ã€‚</p>
<h3>å˜é‡å¯¹è±¡ï¼ˆvariable object, VOï¼‰</h3>
<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰ä¸€ä¸ªå­˜å‚¨å˜é‡çš„å¯¹è±¡ï¼Œç§°ä¸ºå˜é‡å¯¹è±¡ï¼ŒåŒ…å«å½“å‰å‡½æ•°å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€å‚æ•°ã€‚</p>
<ol>
<li>æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡çš„å‚æ•°åˆ—è¡¨ï¼Œå°† VO ä¸­çš„ <code>arguments</code> å±æ€§èµ‹å€¼ä¸º <code>Arguments</code> å¯¹è±¡ï¼›</li>
<li>æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‡½æ•°å£°æ˜ï¼Œæ¯æ£€æŸ¥åˆ°ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œåˆ™åœ¨ VO ä¸­ä»¥å‡½æ•°åå»ºç«‹ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘å‡½æ•°æ‰€åœ¨çš„å†…å­˜åœ°å€ï¼›</li>
<li>æ£€æŸ¥æ‰€æœ‰ <code>var</code> å˜é‡å£°æ˜ï¼Œä¸ºå…¶èµ‹å€¼ã€‚</li>
</ol>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>è¿™ä¸ªæ“ä½œå°±æ˜¯å˜é‡æå‡ï¼Œä½†æ˜¯å‡½æ•°å£°æ˜ä¼šæ¯” <code>var</code> å£°æ˜æ›´åŠ é å‰ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"baz"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> v1<span class="token punctuation">;</span>
  <span class="token keyword">var</span> v2 <span class="token operator">=</span> <span class="token string">"v2"</span>
<span class="token punctuation">}</span>

<span class="token function">baz</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">VO</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">arguments</span><span class="token operator">:</span> Arguments Object<span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">0x111</span> Function<span class="token punctuation">,</span>
  <span class="token literal-property property">v1</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">v2</span><span class="token operator">:</span> <span class="token string">"v2"</span>
<span class="token punctuation">}</span>
</code></pre></div><h3>æ´»åŠ¨å¯¹è±¡ï¼ˆactivation object, AOï¼‰</h3>
<p>å½“å‡½æ•°è¿›å…¥æ‰§è¡Œé˜¶æ®µæ—¶ï¼Œå˜é‡å¯¹è±¡åˆ™ä¼šå˜æˆä¸€ä¸ªæ´»åŠ¨å¯¹è±¡ï¼Œèƒ½è®¿é—®åˆ°å…¶ä¸­çš„å„ç§å±æ€§ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>å˜é‡å¯¹è±¡å’Œæ´»åŠ¨å¯¹è±¡å°±æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œåªæ˜¯å¤„äºä¸åŒæ—¶æœŸè€Œå·²ã€‚</p>
</div>
<h3>ä½œç”¨åŸŸé“¾ï¼ˆscope chainï¼‰</h3>
<p>ä½œç”¨åŸŸé“¾ç”±å½“å‰ AO å’Œçˆ¶çº§ VO ç»„æˆã€‚å½“å‡½æ•°åˆ›å»ºæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªåä¸º <code>[[scope]]</code> çš„å†…éƒ¨å±æ€§ä¿å­˜æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡åˆ°å…¶ä¸­ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>Scope <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">AO</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>Scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½œç”¨åŸŸé“¾å†³å®šäº†å„çº§ä¸Šä¸‹æ–‡çš„ä»£ç åœ¨è®¿é—®å˜é‡å’Œå‡½æ•°æ—¶çš„é¡ºåºï¼Œåœ¨æœç´¢å˜é‡æ—¶ä¼šä»æœ€å‰ç«¯å¼€å§‹æŸ¥æ‰¾ï¼Œç„¶åé€çº§å¾€åï¼Œç›´åˆ°æ‰¾åˆ°å˜é‡ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> color <span class="token operator">=</span> <span class="token string">'blue'</span>
<span class="token keyword">function</span> <span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>color <span class="token operator">===</span> <span class="token string">'blue'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    color <span class="token operator">=</span> <span class="token string">'red'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    color <span class="token operator">=</span> <span class="token string">'blue'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">changeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™é‡Œç”±äºä½œç”¨åŸŸé“¾å°±å¯ä»¥è®¿é—®åˆ° <code>color</code> å˜é‡ï¼Œè¿™é‡Œ <code>changeColor</code> çš„ä½œç”¨åŸŸé“¾åŒ…å«ä¸¤ä¸ªå¯¹è±¡ï¼Œè‡ªèº«çš„æ´»åŠ¨å¯¹è±¡å’Œå…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ã€‚</p>
<h3><code>this</code></h3>
<p>æ‰§è¡Œä¸Šä¸‹æ–‡çš„æœ€åä¸€ä¸ªéƒ¨åˆ†ä¸ºå½“å‰å‡½æ•°çš„è°ƒç”¨è€…ï¼Œå…³äº <code>this</code> çš„å„ç§é—®é¢˜ï¼Œè§ ã€‚</p>
<h2>ES5 ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡</h2>
<p>ES5 ä¸­å»é™¤äº† ES3 é‡Œå˜é‡å¯¹è±¡å’Œæ´»åŠ¨å¯¹è±¡ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰å’Œå˜é‡ç¯å¢ƒï¼ˆVariable Environmentï¼‰ã€‚</p>
<p>ES5 ä¸­çš„è¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒå’Œ ES3 ä¸­çš„å˜é‡ç¯å¢ƒæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åˆ†æˆäº†ä¸¤éƒ¨åˆ†è€Œå·²ã€‚å…¶ä¸­è¯æ³•ç¯å¢ƒç»‘å®šçš„æ˜¯ <code>let</code>ã€<code>const</code> å£°æ˜çš„å˜é‡ï¼Œè€Œå˜é‡ç¯å¢ƒç»‘å®šçš„æ˜¯ <code>var</code> å£°æ˜çš„å€¼ã€‚</p>
<h2>é¢è¯•é¢˜</h2>
<h3>é¢è¯•é¢˜ä¸€</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">100</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  n <span class="token operator">=</span> <span class="token number">200</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 200</span>
</code></pre></div><p><code>foo()</code> å†…çš„ <code>n</code> ä¼šé€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®åˆ°å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ <code>n</code>ï¼Œå› æ­¤ä¼šæ‰“å° <code>200</code>ã€‚</p>
<h3>é¢è¯•é¢˜äºŒ</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">200</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment">// 200</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">100</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”±äºå˜é‡æå‡ï¼Œé¦–å…ˆè¾“å‡º <code>undefined</code>ï¼Œç„¶åè¾“å‡º <code>200</code>ã€‚</p>
<h3>é¢è¯•é¢˜ä¸‰</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
  <span class="token keyword">return</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">200</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è™½ç„¶ <code>a = 200</code> ä¸ä¼šæ‰§è¡Œï¼Œä½†æ˜¯ä¼šè¢«å˜é‡æå‡ã€‚</p>
<h3>é¢è¯•é¢˜å››</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token comment">// =&gt; è½¬æˆä¸‹é¢çš„ä¸¤è¡Œä»£ç </span>
  <span class="token comment">// var a = 10</span>
  <span class="token comment">// b = 10</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// a is not undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div><h3>é¢è¯•é¢˜äº”</h3>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">1</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// 123</span>
  foo <span class="token operator">=</span> <span class="token number">234</span>
<span class="token punctuation">}</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><p>è¿è¡Œ <code>bar</code> å‡½æ•°çš„æ—¶å€™å°† <code>123</code> æ•°å­—ä½œä¸ºå®å‚ä¼ å…¥ï¼Œæ‰€ä»¥æ“ä½œçš„è¿˜æ˜¯æœ¬åœ°ä½œç”¨åŸŸçš„ <code>foo</code>ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://dev.to/ahmedtahir/what-is-the-execution-context-execution-stack-scope-chain-in-js-26nc" target="_blank" rel="noopener noreferrer">What is the Execution Context, Execution Stack &amp; Scope Chain in JS - DEV Community</a></li>
<li><a href="https://juejin.cn/post/6844904158957404167" target="_blank" rel="noopener noreferrer">é¢è¯•å®˜ï¼šè¯´è¯´æ‰§è¡Œä¸Šä¸‹æ–‡å§ - æ˜é‡‘ (juejin.cn)</a></li>
</ul>
]]></content>
    <category term="JavaScript"/>
    <published>2022-04-21T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åŸå§‹å€¼å’Œå¼•ç”¨å€¼</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/004-primitive-value-reference-value.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/004-primitive-value-reference-value.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<h2>æŒ‰å€¼è®¿é—®å’ŒæŒ‰å¼•ç”¨è®¿é—®</h2>
<p>ECMAScript å˜é‡å¯ä»¥åŒ…å«ä¸¤ç§ä¸åŒç±»å‹çš„æ•°æ®ï¼šåŸå§‹å€¼å’Œå¼•ç”¨å€¼ã€‚åŸå§‹å€¼ï¼ˆprimitive valueï¼‰å°±æ˜¯æœ€ç®€å•çš„æ•°æ®ï¼Œå¼•ç”¨å€¼ï¼ˆreference valueï¼‰åˆ™æ˜¯ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚</p>
<p>åœ¨æŠŠä¸€ä¸ªå€¼èµ‹ç»™å˜é‡æ—¶ï¼ŒJavaScript å¼•æ“å¿…é¡»ç¡®å®šè¿™ä¸ªå€¼æ˜¯åŸå§‹å€¼è¿˜æ˜¯å¼•ç”¨å€¼ã€‚</p>
<p>ä¿å­˜åŸå§‹å€¼çš„å˜é‡æ˜¯ <strong>æŒ‰å€¼</strong>ï¼ˆby valueï¼‰è®¿é—®çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ“ä½œçš„å°±æ˜¯å­˜å‚¨åœ¨å˜é‡ä¸­çš„å®é™…å€¼ã€‚å¼•ç”¨å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ã€‚</p>
<p>ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒJavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä½ç½®ï¼Œå› æ­¤ä¹Ÿå°±ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡æ‰€åœ¨çš„å†…å­˜ç©ºé—´ã€‚åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ“ä½œçš„æ˜¯å¯¹è¯¥å¯¹è±¡çš„ <strong>å¼•ç”¨</strong>ï¼ˆreferenceï¼‰è€Œéå®é™…çš„å¯¹è±¡æœ¬èº«ã€‚ä¸ºæ­¤ï¼Œä¿å­˜å¼•ç”¨å€¼çš„å˜é‡æ˜¯ <strong>æŒ‰å¼•ç”¨</strong>ï¼ˆby referenceï¼‰è®¿é—®çš„ã€‚</p>]]></summary>
    <content type="html"><![CDATA[<h2>æŒ‰å€¼è®¿é—®å’ŒæŒ‰å¼•ç”¨è®¿é—®</h2>
<p>ECMAScript å˜é‡å¯ä»¥åŒ…å«ä¸¤ç§ä¸åŒç±»å‹çš„æ•°æ®ï¼šåŸå§‹å€¼å’Œå¼•ç”¨å€¼ã€‚åŸå§‹å€¼ï¼ˆprimitive valueï¼‰å°±æ˜¯æœ€ç®€å•çš„æ•°æ®ï¼Œå¼•ç”¨å€¼ï¼ˆreference valueï¼‰åˆ™æ˜¯ç”±å¤šä¸ªå€¼æ„æˆçš„å¯¹è±¡ã€‚</p>
<p>åœ¨æŠŠä¸€ä¸ªå€¼èµ‹ç»™å˜é‡æ—¶ï¼ŒJavaScript å¼•æ“å¿…é¡»ç¡®å®šè¿™ä¸ªå€¼æ˜¯åŸå§‹å€¼è¿˜æ˜¯å¼•ç”¨å€¼ã€‚</p>
<p>ä¿å­˜åŸå§‹å€¼çš„å˜é‡æ˜¯ <strong>æŒ‰å€¼</strong>ï¼ˆby valueï¼‰è®¿é—®çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ“ä½œçš„å°±æ˜¯å­˜å‚¨åœ¨å˜é‡ä¸­çš„å®é™…å€¼ã€‚å¼•ç”¨å€¼æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„å¯¹è±¡ã€‚</p>
<p>ä¸å…¶ä»–è¯­è¨€ä¸åŒï¼ŒJavaScript ä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ä½ç½®ï¼Œå› æ­¤ä¹Ÿå°±ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡æ‰€åœ¨çš„å†…å­˜ç©ºé—´ã€‚åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ“ä½œçš„æ˜¯å¯¹è¯¥å¯¹è±¡çš„ <strong>å¼•ç”¨</strong>ï¼ˆreferenceï¼‰è€Œéå®é™…çš„å¯¹è±¡æœ¬èº«ã€‚ä¸ºæ­¤ï¼Œä¿å­˜å¼•ç”¨å€¼çš„å˜é‡æ˜¯ <strong>æŒ‰å¼•ç”¨</strong>ï¼ˆby referenceï¼‰è®¿é—®çš„ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/V8-stack-heap.png" alt="æŒ‰å€¼è®¿é—®å’ŒæŒ‰å¼•ç”¨è®¿é—®" tabindex="0" loading="lazy"><figcaption>æŒ‰å€¼è®¿é—®å’ŒæŒ‰å¼•ç”¨è®¿é—®</figcaption></figure>
<h2>ä¼ é€’å‚æ•°</h2>
<p>ECMAScript ä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚è¿™æ„å‘³ç€å‡½æ•°å¤–çš„å€¼ä¼šè¢«å¤åˆ¶åˆ°å‡½æ•°å†…éƒ¨çš„å‚æ•°ä¸­ï¼Œå°±åƒä»ä¸€ä¸ªå˜é‡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå˜é‡ä¸€æ ·ã€‚</p>
<p>å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œé‚£ä¹ˆå°±è·ŸåŸå§‹å€¼å˜é‡çš„å¤åˆ¶ä¸€æ ·ï¼Œå¦‚æœæ˜¯å¼•ç”¨å€¼ï¼Œé‚£ä¹ˆå°±è·Ÿå¼•ç”¨å€¼å˜é‡çš„å¤åˆ¶ä¸€æ ·ã€‚</p>
<div class="hint-container warning">
<p class="hint-container-title">æ³¨æ„</p>
<p>å˜é‡æœ‰æŒ‰å€¼å’ŒæŒ‰å¼•ç”¨è®¿é—®ï¼Œè€Œä¼ å‚åˆ™åªæœ‰æŒ‰å€¼ä¼ é€’ã€‚</p>
</div>
<p>åœ¨æŒ‰å€¼ä¼ é€’å‚æ•°æ—¶ï¼Œå€¼ä¼šè¢«å¤åˆ¶åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ˆå³ä¸€ä¸ªå‘½åå‚æ•°ï¼Œ<code>arguments</code> å¯¹è±¡ä¸­çš„ä¸€ä¸ªæ§½ä½ï¼‰ã€‚æ¥çœ‹å‡ ä¸ªä¾‹å­ã€‚</p>
<p><strong>å‚æ•°ä¸ºåŸºæœ¬ç±»å‹</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  value <span class="token operator">=</span> <span class="token number">2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º: 2</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//è¾“å‡º: 1</span>
</code></pre></div><div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>a: 1
foo:
  - value: 1
</code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå£°æ˜äº†ä¸€ä¸ªå˜é‡ <code>a</code>ï¼ŒæŠŠå®ƒä¼ å…¥ <code>foo</code> å‡½æ•°ï¼Œå‡½æ•°ä¸­æˆ‘ä»¬æ”¹å˜äº† <code>value</code> çš„å€¼ï¼Œä½†åœ¨å‡½æ•°å¤– <code>a</code> çš„å€¼æ²¡æœ‰æ”¹å˜ã€‚</p>
<p>å› ä¸ºåŸºæœ¬ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œæ”¹å˜çš„åªæ˜¯ <code>value</code> è¿™ä¸ªæ‹·è´å‰¯æœ¬çš„å€¼ï¼Œå¯¹åŸå€¼æ²¡æœ‰å½±å“ã€‚</p>
<p><strong>å‚æ•°ä¸ºå¼•ç”¨ç±»å‹</strong></p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  o<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º: 2</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º: 2</span>
</code></pre></div><div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>obj: 0x01 -&gt; { a: 1 }
foo:          |
  - 0: 0x01 -&gt;
</code></pre></div><p>åœ¨è¿™é‡Œï¼Œå£°æ˜äº†ä¸€ä¸ªå¯¹è±¡ <code>obj</code>ï¼ŒæŠŠå®ƒä¼ å…¥ <code>foo</code> å‡½æ•°èµ‹å€¼ä¸º <code>o</code>ï¼Œæ­¤æ—¶ <code>o</code> ä¸å¤–éƒ¨å®šä¹‰çš„ <code>obj</code> çš„å€¼ä¸ºåŒä¸€ä¸ªå†…å­˜åœ°å€ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>å‡½æ•°ä¸­æ”¹å˜äº† <code>o</code> çš„ <code>a</code> å±æ€§çš„å€¼ï¼ˆæŒ‰å¼•ç”¨è®¿é—®ï¼‰ï¼Œç„¶åå¯ä»¥çœ‹åˆ°åœ¨å‡½æ•°å¤– <code>obj.a</code> çš„å€¼ä¹Ÿè¢«æ”¹å˜äº†ã€‚</p>
<p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  o <span class="token operator">=</span> <span class="token number">2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºï¼š2</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºï¼š1</span>
</code></pre></div><div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>obj: 0x01 -&gt; { value: 1 }
foo:          |
  - o: 0x01 -&gt;
</code></pre></div><p>è¿™é‡Œä¹Ÿå£°æ˜äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸åŒçš„æ˜¯ï¼Œ<code>foo</code> å‡½æ•°ç›´æ¥ä¿®æ”¹äº† <code>o</code> çš„å€¼ï¼Œå°†å†…å­˜åœ°å€å˜ä¸ºä¸€ä¸ªæ™®é€šåŸå§‹å€¼ <code>2</code>ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰å¯¹å¤–éƒ¨çš„ <code>obj</code> åœ°å€è¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤ <code>console.log(obj.value)</code> ä»ç„¶æ‰“å° <code>1</code>ã€‚</p>
]]></content>
    <category term="JavaScript"/>
    <published>2024-04-16T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æµè§ˆå™¨æ¸²æŸ“åŸç†</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/browser/01-how-browser-rendering-works.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/browser/01-how-browser-rendering-works.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>æµè§ˆå™¨æ¸²æŸ“ä¸»è¦æ˜¯ä¾é æµè§ˆå™¨å†…æ ¸ä¹Ÿå°±æ˜¯æµè§ˆå™¨æ¸²æŸ“å¼•æ“ï¼Œå®ƒé€šè¿‡ä¸€ç³»åˆ—çš„è§£æå°† HTML æ–‡æ¡£æ¸²æŸ“åœ¨æµè§ˆå™¨ä¸Šã€‚</p>
<h2>ä¸»è¦æµç¨‹</h2>
<p>æ¸²æŸ“å¼•æ“ä¼šä»ç½‘ç»œå±‚ä¸­è·å–å°†è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œä¸»è¦çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/1-webkitflow.png" alt="webkit-flow" tabindex="0" loading="lazy"><figcaption>webkit-flow</figcaption></figure>]]></summary>
    <content type="html"><![CDATA[<p>æµè§ˆå™¨æ¸²æŸ“ä¸»è¦æ˜¯ä¾é æµè§ˆå™¨å†…æ ¸ä¹Ÿå°±æ˜¯æµè§ˆå™¨æ¸²æŸ“å¼•æ“ï¼Œå®ƒé€šè¿‡ä¸€ç³»åˆ—çš„è§£æå°† HTML æ–‡æ¡£æ¸²æŸ“åœ¨æµè§ˆå™¨ä¸Šã€‚</p>
<h2>ä¸»è¦æµç¨‹</h2>
<p>æ¸²æŸ“å¼•æ“ä¼šä»ç½‘ç»œå±‚ä¸­è·å–å°†è¦æ¸²æŸ“çš„æ–‡æ¡£ï¼Œä¸»è¦çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/1-webkitflow.png" alt="webkit-flow" tabindex="0" loading="lazy"><figcaption>webkit-flow</figcaption></figure>
<ol>
<li>é¦–å…ˆæµè§ˆå™¨ä¼šè§£æ HTML æ–‡æ¡£ï¼Œå°† HTML è§£ææˆ DOM æ ‘ï¼›CSS æ ·å¼è¡¨ä¹Ÿä¼šåœ¨åŒæ—¶è¿›è¡ŒåŠ è½½ï¼Œç”Ÿæˆæ ·å¼è§„åˆ™ï¼›è€Œ JavaScript ä¼šé€šè¿‡ DOM API å’Œ CSSOM API æ¥æ“ä½œ DOM Tree å’Œ Style Rulesã€‚</li>
<li>è§£æå®Œæˆåï¼Œæ¸²æŸ“å¼•æ“ä¼šé€šè¿‡ DOM Tree å’Œ Style Rules åˆ›é€  Render Treeï¼Œæ­¤æ—¶ä¼šè®¡ç®—å„ä¸ª DOM åœ¨æµè§ˆå™¨ä¸Šçš„å…·ä½“åæ ‡ã€‚</li>
<li>æœ€åæ¸²æŸ“å¼•æ“éå†æ•´ä¸ª Render Treeï¼Œç”± UI åç«¯å±‚ç»˜åˆ¶ã€‚</li>
</ol>
<p>æ•´ä¸ªæ¸²æŸ“è¿‡ç¨‹ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ã€‚ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“å°†å°½å¿«åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå†…å®¹ã€‚åœ¨å¼€å§‹æ„ä»¶å’Œæ¸²æŸ“ Render Tree ä¹‹å‰ï¼Œå®ƒä¸ä¼šç­‰åˆ°æ‰€æœ‰ HTML éƒ½è¢«è§£æã€‚åœ¨éƒ¨åˆ†å†…å®¹è¢«æ¸²æŸ“çš„åŒæ—¶ï¼Œæ¸²æŸ“å¼•æ“ä¼šç»§ç»­å‘æœåŠ¡å™¨è¯·æ±‚å‰©ä¸‹çš„å†…å®¹ã€‚</p>
<h2>HTML è§£æå™¨</h2>
<p>HTML è§£æå™¨çš„ä½œç”¨æ˜¯å°† HTML è§£ææˆ DOM æ ‘ï¼š</p>
<div class="language-html" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example.png<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/2-dom-tree.png" alt="dom-tree" tabindex="0" loading="lazy"><figcaption>dom-tree</figcaption></figure>
<p>HTML è§£æç®—æ³•åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ ‡è®°åŒ–ï¼šè¯æ³•åˆ†æï¼Œå°†è¾“å…¥è§£æä¸ºæ ‡è®°ã€‚HTML æ ‡è®°åŒ…æ‹¬å¼€å§‹æ ‡è®°ã€ç»“æŸæ ‡è®°ã€å±æ€§åç§°å’Œå±æ€§å€¼ã€‚æ ‡è®°å™¨è¯†åˆ« tokenï¼Œå°†å®ƒä¼ é€’ç»™æ ‘æ„é€ å™¨ï¼Œç„¶åæ¥å—ä¸‹ä¸€ä¸ªå­—ç¬¦ä»¥è¯†åˆ«ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œç›´åˆ°è¾“å…¥çš„ç»“æŸã€‚</li>
<li>æ ‘æ„å»ºï¼šæ„å»ºæˆ DOM æ ‘ã€‚</li>
</ol>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/3-html-parse.png" alt="html-parse" tabindex="0" loading="lazy"><figcaption>html-parse</figcaption></figure>
<h2>CSS è§£æå™¨</h2>
<p>è§£æå™¨éƒ½ä¼šå°† CSS æ–‡ä»¶è§£ææˆ StyleSheet å¯¹è±¡ï¼Œä¸”æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å« CSS è§„åˆ™ã€‚CSS è§„åˆ™å¯¹è±¡åˆ™åŒ…å«é€‰æ‹©å™¨å’Œå£°æ˜å¯¹è±¡ï¼Œä»¥åŠå…¶ä»–ä¸ CSS è¯­æ³•å¯¹åº”çš„å¯¹è±¡ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/4-css-parse.png" alt="css-parse" tabindex="0" loading="lazy"><figcaption>css-parse</figcaption></figure>
<h2>Render Tree</h2>
<p>åœ¨ DOM æ ‘æ„å»ºçš„åŒæ—¶ï¼Œæµè§ˆå™¨è¿˜ä¼šæ„å»ºå¦ä¸€ä¸ªæ ‘ç»“æ„ï¼šå‘ˆç°æ ‘ã€‚è¿™æ˜¯ç”±å¯è§†åŒ–å…ƒç´ æŒ‰ç…§å…¶æ˜¾ç¤ºé¡ºåºè€Œç»„æˆçš„æ ‘ï¼Œä¹Ÿæ˜¯æ–‡æ¡£çš„å¯è§†åŒ–è¡¨ç¤ºã€‚å®ƒçš„ä½œç”¨æ˜¯è®©æ‚¨æŒ‰ç…§æ­£ç¡®çš„é¡ºåºç»˜åˆ¶å†…å®¹ã€‚</p>
<p>Render Tree å’Œ DOM Tree å¹¶ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œéå¯è§†åŒ–çš„ DOM å…ƒç´ ä¸ä¼šæ’å…¥å‘ˆç°æ ‘ä¸­ï¼Œä¾‹å¦‚ <code>head</code> å…ƒç´ ã€‚å¦‚æœå…ƒç´ çš„ <code>display</code> å±æ€§å€¼ä¸º <code>none</code>ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šæ˜¾ç¤ºåœ¨å‘ˆç°æ ‘ä¸­ï¼ˆä½†æ˜¯ <code>visibility</code> å±æ€§å€¼ä¸º <code>hidden</code> çš„å…ƒç´ ä»ä¼šæ˜¾ç¤ºï¼‰ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/5-render-tree.png" alt="render-tree" tabindex="0" loading="lazy"><figcaption>render-tree</figcaption></figure>
<p>æ¥ä¸‹æ¥æµè§ˆå™¨éœ€è¦åšçš„å°±æ˜¯è®¡ç®—æ ·å¼ï¼Œå°†æ¯ä¸€ä¸ª Render å¯¹è±¡çš„å¯è§†åŒ–å±æ€§è®¡ç®—ï¼ˆæ ¹æ®ä¸€ç³»åˆ—è§„åˆ™ï¼Œå¦‚å±‚å æ€§ã€é€‰æ‹©å™¨æƒé‡ç­‰ï¼‰å‡ºæ¥ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸åŒ…å«ä½ç½®å’Œå¤§å°ä¿¡æ¯ã€‚è®¡ç®—è¿™äº›å€¼çš„è¿‡ç¨‹å«åšå¸ƒå±€æˆ–å›æµã€‚</p>
<p>æ€»ä¹‹ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ¸²æŸ“å¼•æ“å·²ç»ç»å†äº†ä¸€ç³»åˆ—çš„å·¥ä½œï¼Œå¯ä»¥å°†é¡µé¢å±•ç¤ºåˆ°æµè§ˆå™¨ä¸Šäº†ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ol>
<li><a href="https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#The_order_of_processing_scripts_and_style_sheets" target="_blank" rel="noopener noreferrer">How Browsers Work: Behind the scenes of modern web browsers - HTML5 Rocks</a></li>
<li><a href="https://coolshell.cn/articles/9666.html" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨çš„æ¸²æŸ“åŸç†ç®€ä»‹</a></li>
<li><a href="https://zh.wiki.hancel.org/wiki/JavaScript%E5%BC%95%E6%93%8E" target="_blank" rel="noopener noreferrer">JavaScript å¼•æ“ - ç»´åŸºç™¾ç§‘</a></li>
<li><a href="https://zh.m.wikipedia.org/wiki/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨å¼•æ“ - ç»´åŸºç™¾ç§‘</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1679313" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨å†…æ ¸åŠåˆ†ç±» - è…¾è®¯äº‘ç¤¾åŒº</a></li>
</ol>
]]></content>
    <category term="browser"/>
    <published>2021-12-16T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">V8 å¼•æ“</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/browser/02-V8.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/browser/02-V8.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åœ¨ JavaScript å¼•æ“ä¸­ï¼ŒV8 æ— ç–‘æ˜¯æœ€æµè¡Œçš„ï¼ŒChrome ä¸ Node.js éƒ½ä½¿ç”¨äº† V8 å¼•æ“ã€‚</p>
<p>V8 ç”±å¾ˆå¤šå­æ¨¡å—æ„æˆï¼Œæœ‰å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<ul>
<li>Parserï¼šè§£æå™¨ï¼Œè´Ÿè´£å°† JavaScript ä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Tree, ASTï¼‰ï¼›</li>
<li>Ignitionï¼šè§£é‡Šå™¨ï¼ˆinterpreterï¼‰ï¼Œè´Ÿè´£å°† AST è½¬æ¢ä¸ºå­—èŠ‚ç ï¼ˆBytecodeï¼‰å¹¶æ‰§è¡Œï¼›åŒæ—¶æ”¶é›† TurboFan ä¼˜åŒ–ç¼–è¯‘æ‰€éœ€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å‡½æ•°å‚æ•°çš„ç±»å‹ï¼›</li>
<li>TurboFanï¼šç¼–è¯‘å™¨ï¼ˆcompilerï¼‰ï¼Œåˆ©ç”¨ Ignition æ‰€æ”¶é›†çš„ä¿¡æ¯ï¼Œå°†å­—èŠ‚ç è½¬æ¢ä¸ºä¼˜åŒ–çš„æœºå™¨ç ï¼›</li>
<li>Orinocoï¼šåƒåœ¾å›æ”¶ï¼ˆgarbage collectorï¼‰ï¼Œè´Ÿè´£å°†ç¨‹åºä¸å†éœ€è¦çš„å†…å­˜ç©ºé—´å›æ”¶ã€‚</li>
</ul>]]></summary>
    <content type="html"><![CDATA[<p>åœ¨ JavaScript å¼•æ“ä¸­ï¼ŒV8 æ— ç–‘æ˜¯æœ€æµè¡Œçš„ï¼ŒChrome ä¸ Node.js éƒ½ä½¿ç”¨äº† V8 å¼•æ“ã€‚</p>
<p>V8 ç”±å¾ˆå¤šå­æ¨¡å—æ„æˆï¼Œæœ‰å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<ul>
<li>Parserï¼šè§£æå™¨ï¼Œè´Ÿè´£å°† JavaScript ä»£ç è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Tree, ASTï¼‰ï¼›</li>
<li>Ignitionï¼šè§£é‡Šå™¨ï¼ˆinterpreterï¼‰ï¼Œè´Ÿè´£å°† AST è½¬æ¢ä¸ºå­—èŠ‚ç ï¼ˆBytecodeï¼‰å¹¶æ‰§è¡Œï¼›åŒæ—¶æ”¶é›† TurboFan ä¼˜åŒ–ç¼–è¯‘æ‰€éœ€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å‡½æ•°å‚æ•°çš„ç±»å‹ï¼›</li>
<li>TurboFanï¼šç¼–è¯‘å™¨ï¼ˆcompilerï¼‰ï¼Œåˆ©ç”¨ Ignition æ‰€æ”¶é›†çš„ä¿¡æ¯ï¼Œå°†å­—èŠ‚ç è½¬æ¢ä¸ºä¼˜åŒ–çš„æœºå™¨ç ï¼›</li>
<li>Orinocoï¼šåƒåœ¾å›æ”¶ï¼ˆgarbage collectorï¼‰ï¼Œè´Ÿè´£å°†ç¨‹åºä¸å†éœ€è¦çš„å†…å­˜ç©ºé—´å›æ”¶ã€‚</li>
</ul>
<p>ä¸‹é¢è¿™å¼ å›¾æ˜¯ V8 ç°æœ‰çš„å·¥ä½œæµç¨‹ï¼Œéå¸¸é‡è¦ï¼Œåœ¨åé¢é˜…è¯»çš„æ—¶å€™å¯ä»¥ç¿»ä¸Šæ¥çœ‹çœ‹ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/v8-work-flow.webp" alt="v8-work-flow" tabindex="0" loading="lazy"><figcaption>v8-work-flow</figcaption></figure>
<h2>Parser</h2>
<p>ä¸ºäº†è®© V8 èƒ½å¤Ÿç†è§£ JavaScript ä»£ç ï¼Œå¿…é¡»å…ˆå°†æºç é€šè¿‡ <strong>Parser</strong> è§£ææˆæŠ½è±¡è¯­æ³•æ ‘â€”â€”ä»£è¡¨ç¨‹åºç»“æ„çš„ä¸€ç³»åˆ—å¯¹è±¡ã€‚ç„¶åæŠ½è±¡è¯­æ³•æ ‘ä¼šè¢« <strong>Ignition</strong> ç¼–è¯‘æˆå­—èŠ‚ç ã€‚è¿™ä¸¤ä¸ªé˜¶æ®µæ˜¯ V8 å¼•æ“æ€§èƒ½çš„å…³é”®ã€‚</p>
<p>ä¸‹å›¾æ˜¯ Parser çš„å·¥ä½œæµç¨‹ï¼š</p>
<img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/parser.svg" style="background-color: #fff">
<p>æ•´ä¸ªæµç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚</p>
<ul>
<li><strong>è¯æ³•åˆ†æ</strong>ï¼šscanner ä»æˆ‘ä»¬ç¼–å†™çš„ JavaScript ä»£ç ä¸­ç”Ÿæˆä¸€ç³»åˆ—çš„ tokensã€‚è€Œ tokens æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…·æœ‰å•ä¸€è¯­ä¹‰çš„å­—ç¬¦ç»„æˆçš„å—ï¼šå­—ç¬¦ä¸²ã€æ ‡è¯†ç¬¦ã€è¿ç®—ç¬¦ <code>++</code> ç­‰ã€‚</li>
<li><strong>è¯­æ³•åˆ†æ</strong>ï¼šè¯­æ³•åˆ†æçš„è¾“å…¥å°±æ˜¯è¯æ³•åˆ†æçš„è¾“å‡ºï¼ˆå³ tokensï¼‰ï¼Œè¾“å‡ºæ˜¯ AST æŠ½è±¡è¯­æ³•æ ‘ã€‚å½“ç¨‹åºå‡ºç°è¯­æ³•é”™è¯¯çš„æ—¶å€™ï¼ŒV8 ä¼šåœ¨è¯­æ³•åˆ†æé˜¶æ®µæŠ›å‡ºå¼‚å¸¸ã€‚</li>
</ul>
<p>V8 ä¸ºäº†æå‡ scanner æ€§èƒ½ï¼Œåˆåšäº† <strong>å»¶è¿Ÿè§£æ</strong>ï¼ˆlazy parsingï¼‰çš„ä¼˜åŒ–ï¼Œä¸€äº›ä¸ä¼šç”¨åˆ°å‡½æ•°å¹¶ä¸ä¼šè¢«é©¬ä¸Šç¼–è¯‘ï¼Œä»–ä»¬ä¼šè¢« PreParser å¤„ç†ï¼Œå½“ä»¥åè°ƒç”¨ä¸€ä¸ª <code>preparsed</code> å‡½æ•°æ—¶ï¼Œå®ƒä¼šæ ¹æ®éœ€è¦è¿›è¡Œå®Œå…¨è§£æå’Œç¼–è¯‘ã€‚</p>
<h2>Ignition</h2>
<p>å½“ Parser å°†ä»£ç è§£ææˆ AST è¾“å…¥ç»™ Ignitionï¼ŒIgnition ä¼šå°† AST è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œåˆ†ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>å‡½æ•°åªå£°æ˜è€Œä¸è°ƒç”¨ï¼Œåˆ™ Ignition ä¸ä¼šåšä»»ä½•æ“ä½œï¼›</li>
<li>å¦‚æœå‡½æ•°åªè°ƒç”¨ä¸€æ¬¡ï¼Œåˆ™ Ignition ä¼šè§£é‡Šå­—èŠ‚ç å¹¶æ‰§è¡Œã€‚ä¸‹é¢æ¥çœ‹çœ‹ä¾‹å­ï¼›</li>
<li>å¦‚æœå‡½æ•°è°ƒç”¨å¤šæ¬¡ï¼Œåˆ™ Ignition ä¼šæ”¶é›† TurboFan ä¼˜åŒ–æ‰€éœ€çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚å‡½æ•°å‚æ•°çš„ç±»å‹ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ul>
<p>ä¸‹é¢æ¥çœ‹çœ‹ä¾‹å­ã€‚</p>
<ol>
<li>
<p>åªæ˜¯å£°æ˜å‡½æ•° <code>add</code>ï¼Œä½†æ˜¯æ²¡æœ‰è°ƒç”¨ï¼Œåˆ™ Ignition ä¸ä¼šåšä»»ä½•è½¬æ¢ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div></li>
<li>
<p>å£°æ˜åç¬¬ä¸€æ¬¡è°ƒç”¨ <code>add</code> å‡½æ•°ï¼ŒIgnition ä¼šæŠŠå®ƒç¼–è¯‘æˆå­—èŠ‚ç æ‰§è¡Œã€‚åˆ°è¿™ä¸ªæ—¶å€™ï¼ŒJavaScript ä»£ç å°±å·²ç»æ‰§è¡Œå®Œæˆäº†ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div></li>
<li>
<p>ä½†æ˜¯å¦‚æœå‘ç°æœ‰<strong>çƒ­ç‚¹å‡½æ•°</strong>ï¼ˆå³ä¸€ä¸ªå‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨ï¼‰ï¼ŒIgnition å°±ä¼šæ”¶é›† <code>add</code> å‡½æ•°çš„å„ç§å‚æ•°ç±»å‹ï¼Œä¸º TurboFan çš„ä¼˜åŒ–æä¾›æ”¯æŒã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// è°ƒç”¨å¤šæ¬¡ï¼Œæ ‡è®°æˆçƒ­ç‚¹å‡½æ•°ï¼Œæ”¶é›†å„ç§ä¿¡æ¯</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div></li>
</ol>
<h2>TurboFan</h2>
<p>TurboFan æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†å­—èŠ‚ç ç¼–è¯‘ä¸º CPU å¯ä»¥ç›´æ¥æ‰§è¡Œçš„æœºå™¨ç ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå°±ä¼šè¢«æ ‡è®°ä¸º<strong>çƒ­ç‚¹å‡½æ•°</strong>ï¼Œé‚£ä¹ˆå°±ä¼šç»è¿‡ TurboFan è½¬æ¢æˆä¼˜åŒ–çš„æœºå™¨ç ï¼Œæé«˜ä»£ç çš„æ‰§è¡Œæ€§èƒ½ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token function">OptimizeFunctionOnNextCall</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>V8 çš„ <code>%OptimizeFunctionOnNextCall</code> å¯ä»¥ç›´æ¥æŒ‡å®šä¼˜åŒ–å“ªä¸ªå‡½æ•°ï¼Œå®ƒæ ¹æ®ä¸Šæ¬¡è°ƒç”¨çš„å‚æ•°åé¦ˆä¼˜åŒ– <code>add</code> å‡½æ•°ï¼Œå¾ˆæ˜æ˜¾è¿™æ¬¡çš„åé¦ˆæ˜¯æ•´å‹æ•°ï¼Œæ‰€ä»¥ TurboFan ä¼šæ ¹æ®å‚æ•°æ˜¯æ•´å‹æ•°è¿›è¡Œä¼˜åŒ–ç›´æ¥ç”Ÿæˆæœºå™¨ç ï¼Œä¸‹æ¬¡å‡½æ•°è°ƒç”¨ç›´æ¥è°ƒç”¨ä¼˜åŒ–å¥½çš„æœºå™¨ç ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœºå™¨ç å®é™…ä¸Šä¹Ÿä¼šè¢«è¿˜åŸä¸ºå­—èŠ‚ç ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœåç»­æ‰§è¡Œå‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œç±»å‹å‘ç”Ÿäº†å˜åŒ–ï¼ˆæ¯”å¦‚ <code>add</code> å‡½æ•°åŸæ¥æ‰§è¡Œçš„æ˜¯ <code>number</code> ç±»å‹ï¼Œåæ¥æ‰§è¡Œå˜æˆäº† <code>string</code> ç±»å‹ï¼‰ï¼Œä¹‹å‰ä¼˜åŒ–çš„æœºå™¨ç å¹¶ä¸èƒ½æ­£ç¡®çš„å¤„ç†è¿ç®—ï¼Œå°±ä¼šé€†å‘çš„è½¬æ¢æˆå­—èŠ‚ç ã€‚è¿™ä¸ªå°±æ˜¯æœ€ä¸Šé¢é‚£ä¸ªå›¾è¿˜æœ‰ä¸ª <code>Deoptimization</code> çš„åŸå› ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
</code></pre></div><blockquote>
<p>åˆ°æ­¤ï¼ŒV8 å¼•æ“çš„å·¥ä½œæµç¨‹å°±å·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ç»†ç©¶é‡Œé¢çš„æ‰§è¡Œç»†èŠ‚ï¼Œåªæ˜¯å¤§æ¦‚åœ°äº†è§£äº†å·¥ä½œæµç¨‹ï¼Œç­‰ä»¥åèƒ½å®Œå…¨çœ‹æ‡‚å®˜æ–¹æ–‡ç« äº†å†å›æ¥æ›´æ–°ã€‚</p>
</blockquote>
<h2>å‚è€ƒé“¾æ¥</h2>
<ol>
<li><a href="https://zh.wikipedia.org/wiki/JavaScript%E5%BC%95%E6%93%8E" target="_blank" rel="noopener noreferrer">JavaScript å¼•æ“ - ç»´åŸºç™¾ç§‘</a></li>
<li><a href="https://blog.fundebug.com/2019/07/16/how-does-v8-work/" target="_blank" rel="noopener noreferrer">JavaScript æ·±å…¥æµ…å‡ºç¬¬ 4 è¯¾ï¼šV8 å¼•æ“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</a></li>
<li><a href="https://v8.dev/blog/scanner" target="_blank" rel="noopener noreferrer">Blazingly fast parsing, part 1: optimizing the scanner</a></li>
<li><a href="https://v8.dev/blog/preparser" target="_blank" rel="noopener noreferrer">Blazingly fast parsing, part 2: lazy parsing Â· V8</a></li>
<li><a href="https://v8.dev/blog/ignition-interpreter" target="_blank" rel="noopener noreferrer">Firing up the Ignition interpreter Â· V8</a></li>
<li><a href="https://mp.weixin.qq.com/s/t__Jqzg1rbTlsCHXKMwh6A" target="_blank" rel="noopener noreferrer">JavaScript å¼•æ“ V8 æ‰§è¡Œæµç¨‹æ¦‚è¿°</a></li>
</ol>
]]></content>
    <category term="browser"/>
    <published>2022-01-13T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">å†…å­˜ç®¡ç†</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/browser/03-memory-management.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/browser/03-memory-management.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>åƒ Cã€C++ ç­‰ç¼–ç¨‹è¯­è¨€éƒ½éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œåœ¨åˆ›å»ºå˜é‡æ—¶éœ€è¦ç”³è¯·ï¼ˆ<code>malloc()</code>ï¼‰ï¼Œä¸éœ€è¦ç”¨äº†ä¹‹ååœ¨é‡Šæ”¾å†…å­˜ç©ºé—´ï¼ˆ<code>free()</code>ï¼‰ã€‚è€Œ JavaScriptã€Javaã€Python ç­‰éƒ½æ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œåœ¨åˆ›å»ºå˜é‡æ—¶è‡ªåŠ¨åˆ†é…å†…å­˜ï¼Œè€Œåœ¨ä¸ä½¿ç”¨åè‡ªåŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾çš„è¿‡ç¨‹ç§°ä¸º <strong>åƒåœ¾å›æ”¶</strong>ã€‚</p>
<p>è™½ç„¶ä¸åŒè¯­è¨€ç®¡ç†å†…å­˜çš„æ–¹å¼ä¸åŒï¼Œä½†æ˜¯å†…å­˜å£°æ˜å‘¨æœŸæ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼š</p>
<ol>
<li>åˆ†é…ä½ æ‰€éœ€è¦çš„å†…å­˜</li>
<li>ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ï¼ˆè¯»ã€å†™ï¼‰</li>
<li>ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾</li>
</ol>
]]></summary>
    <content type="html"><![CDATA[<p>åƒ Cã€C++ ç­‰ç¼–ç¨‹è¯­è¨€éƒ½éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œåœ¨åˆ›å»ºå˜é‡æ—¶éœ€è¦ç”³è¯·ï¼ˆ<code>malloc()</code>ï¼‰ï¼Œä¸éœ€è¦ç”¨äº†ä¹‹ååœ¨é‡Šæ”¾å†…å­˜ç©ºé—´ï¼ˆ<code>free()</code>ï¼‰ã€‚è€Œ JavaScriptã€Javaã€Python ç­‰éƒ½æ˜¯è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œåœ¨åˆ›å»ºå˜é‡æ—¶è‡ªåŠ¨åˆ†é…å†…å­˜ï¼Œè€Œåœ¨ä¸ä½¿ç”¨åè‡ªåŠ¨é‡Šæ”¾ï¼Œé‡Šæ”¾çš„è¿‡ç¨‹ç§°ä¸º <strong>åƒåœ¾å›æ”¶</strong>ã€‚</p>
<p>è™½ç„¶ä¸åŒè¯­è¨€ç®¡ç†å†…å­˜çš„æ–¹å¼ä¸åŒï¼Œä½†æ˜¯å†…å­˜å£°æ˜å‘¨æœŸæ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼š</p>
<ol>
<li>åˆ†é…ä½ æ‰€éœ€è¦çš„å†…å­˜</li>
<li>ä½¿ç”¨åˆ†é…åˆ°çš„å†…å­˜ï¼ˆè¯»ã€å†™ï¼‰</li>
<li>ä¸éœ€è¦æ—¶å°†å…¶é‡Šæ”¾</li>
</ol>
<p>ç¬¬äºŒæ­¥çš„ä½¿ç”¨å†…å­˜å°±å¾ˆå¸¸è§äº†ï¼Œæˆ‘ä»¬å†™çš„ä»£ç å°±æ˜¯è¿™ä¸€æ­¥ï¼Œå› æ­¤è¿™é‡Œä»‹ç»ç¬¬ä¸€æ­¥å’Œç¬¬ä¸‰æ­¥çš„åŸºæœ¬å†…å®¹ã€‚</p>
<h2>åˆ†é…å†…å­˜ç©ºé—´</h2>
<p>ç°åœ¨æ¥çœ‹çœ‹ V8 å¼•æ“æ˜¯å¦‚ä½•ç»™ä¸åŒå˜é‡åˆ†é…å†…å­˜çš„ã€‚</p>
<p>V8 ä¸»è¦æœ‰ä¸‰ç§å†…å­˜ç©ºé—´ï¼š</p>
<ul>
<li>ä»£ç ç©ºé—´ï¼šä¸»è¦å­˜å‚¨å¯æ‰§è¡Œä»£ç ï¼›</li>
<li>æ ˆç©ºé—´ï¼šJavaScript å¯¹äº <strong>åŸºæœ¬æ•°æ®ç±»å‹</strong> å†…å­˜çš„åˆ†é…ä¼šåœ¨æ‰§è¡Œæ—¶ç›´æ¥åœ¨æ ˆç©ºé—´è¿›è¡Œåˆ†é…ï¼›</li>
<li>å †ç©ºé—´ï¼šJavaScript å¯¹äº <strong>å¤æ‚æ•°æ®ç±»å‹</strong> å†…å­˜çš„åˆ†é…ä¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå¹¶ä¸”å°†è¿™å—ç©ºé—´çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰è¿”å›ç»™å˜é‡å¼•ç”¨ï¼ˆå­˜æ”¾åœ¨æ ˆç©ºé—´ï¼‰ã€‚</li>
</ul>
<p>ä¸‹é¢çœ‹çœ‹ä¾‹å­ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'heap'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>å½“ä»£ç æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œæ ˆåº•æ˜¯ <code>a</code>ï¼Œæ ˆé¡¶æ˜¯ <code>b</code>ï¼Œæ­¤æ—¶ <code>b</code> çš„å€¼æ˜¯ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆä¼šåœ¨å †ç©ºé—´ä¸­ä¸ºè¿™ä¸ªæ•°æ®åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œå¹¶æŠŠ <code>b</code> çš„å˜é‡å€¼èµ‹å€¼ä¸ºè¿™ä¸ªç©ºé—´çš„åœ°å€ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/V8-stack-heap.png" alt="V8-stack-heap" tabindex="0" loading="lazy"><figcaption>V8-stack-heap</figcaption></figure>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦å°†å¤æ‚æ•°æ®ç±»å‹æ”¾åœ¨å †ç©ºé—´ï¼Œè€Œä¸æ˜¯ä¸€èµ·æ”¾åœ¨æ ˆç©ºé—´å‘¢ï¼Ÿ</p>
<p>å› ä¸º V8 å¼•æ“éœ€è¦ç”¨æ ˆæ¥ç»´æŠ¤ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œå¦‚æœæ ˆç©ºé—´åˆ†é…çš„å†…å­˜è¿‡å¤§ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡ï¼Œä»è€Œå¯¼è‡´ä»£ç æ‰§è¡Œé€Ÿåº¦è¿‡æ…¢ã€‚</p>
<p>å› æ­¤ï¼Œæ ˆç©ºé—´ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå ç”¨ç©ºé—´å°ï¼‰ï¼Œè€Œåƒå¤æ‚æ•°æ®ç±»å‹ï¼Œå› ä¸ºä»–ä»¬çš„å ç”¨ç©ºé—´ä¸€èˆ¬è¾ƒå¤§ï¼Œå› æ­¤ä¼šè¢«å­˜æ”¾åœ¨å †ç©ºé—´ä¸­ã€‚</p>
<h2>å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•</h2>
<p>äº†è§£äº†å¦‚ä½•åˆ†é…ä¸åŒå˜é‡çš„å†…å­˜åï¼Œç¬¬äºŒæ­¥çš„è¯»å†™å…¶å®å·²ç»åŒ…å«åœ¨ä»£ç é‡Œäº†ï¼Œæœ€å…³é”®çš„ä¸€æ­¥å°±æ˜¯å¦‚ä½•å°†ä¸å†éœ€è¦çš„ <strong>å†…å­˜å›æ”¶</strong>ã€‚</p>
<p>åœ¨æ•´ä¸ªåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å›°éš¾çš„åœ°æ–¹åœ¨äºå¦‚ä½•æ‰¾åˆ°ã€Œå“ªäº›è¢«åˆ†é…çš„å†…å­˜ç¡®å®å·²ç»ä¸å†éœ€è¦äº†ã€ï¼Œè€Œè¿™ä¸ªæ­¥éª¤æ²¡æœ‰ä»»ä½•ç®—æ³•å¯ä»¥å‡†ç¡®çš„åˆ¤æ–­ï¼Œåªæ˜¯ä¸€ä¸ªè¿‘ä¼¼çš„è¿‡ç¨‹ã€‚</p>
<p>ä¸‹é¢å…ˆä»‹ç»å‡ ç§å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå†ä»‹ç» V8 çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<h3>å¼•ç”¨è®¡æ•°ç®—æ³•</h3>
<p>è¿™æ˜¯æœ€åˆçº§çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚æ­¤ç®—æ³•æŠŠã€Œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦ã€ç®€åŒ–å®šä¹‰ä¸ºã€Œå¯¹è±¡æœ‰æ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨åˆ°å®ƒã€ã€‚å½“ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨æŒ‡å‘å®ƒæ—¶ï¼Œå®ƒçš„å¼•ç”¨æ•°å°±ä¼š <code>+1</code>ï¼›å½“æ²¡æœ‰å¼•ç”¨æ—¶ï¼Œå³å¼•ç”¨æ•°ä¸º <code>0</code>ï¼Œè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«é”€æ¯äº†ã€‚</p>
<p>ä½†æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯æ˜¯ä¼šäº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  o<span class="token punctuation">.</span>a <span class="token operator">=</span> o2 <span class="token comment">// o å¼•ç”¨ o2</span>
  o2<span class="token punctuation">.</span>a <span class="token operator">=</span> o <span class="token comment">// o2 å¼•ç”¨ o</span>

  <span class="token keyword">return</span> <span class="token string">'azerty'</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>åœ¨æ‰§è¡Œ <code>f()</code> æ—¶ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡å¹¶ç›¸äº’å¼•ç”¨ã€‚å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œä¼šç¦»å¼€å‡½æ•°ä½œç”¨åŸŸï¼Œå› æ­¤å®ƒä»¬å·²ç»æ²¡æœ‰ç”¨äº†ï¼ŒæŒ‰ç…§å¸¸ç†æ¥è¯´åº”è¯¥è¢«é”€æ¯ã€‚ä½†æ˜¯å› ä¸ºå®ƒä»¬è‡³å°‘éƒ½æœ‰ä¸€æ¬¡å¼•ç”¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„éœ²ã€‚</p>
<h3>æ ‡è®°æ¸…é™¤ç®—æ³•</h3>
<p>è¿™ä¸ªç®—æ³•æŠŠã€Œå¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦ã€ç®€åŒ–å®šä¹‰ä¸ºã€Œå¯¹è±¡æ˜¯å¦å¯ä»¥è·å¾—ã€ï¼Œç®€ç§°ã€Œå¯è¾¾æ€§ã€ã€‚</p>
<p>è¿™ä¸ªç®—æ³•å‡å®šè®¾ç½®ä¸€ä¸ªå«åšæ ¹ï¼ˆrootï¼‰çš„å¯¹è±¡ï¼ˆåœ¨ Javascript é‡Œï¼Œæ ¹æ˜¯å…¨å±€å¯¹è±¡ï¼‰ã€‚åƒåœ¾å›æ”¶å™¨å°†å®šæœŸä»æ ¹å¼€å§‹ï¼Œæ‰¾æ‰€æœ‰ä»æ ¹å¼€å§‹å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰¾è¿™äº›å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ã€‚</p>
<img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/mark-clear.png" style="background-color: #fff">
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œ<code>g</code> å’Œ <code>h</code> å¯¹è±¡äº’ç›¸å¼•ç”¨ï¼Œå¦‚æœé‡‡ç”¨ <strong>å¼•ç”¨è®¡æ•°ç®—æ³•</strong>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å°†ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚ä½†æ˜¯ä½¿ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œå› ä¸ºæ ¹å¯¹è±¡æ²¡æœ‰å¯¹å®ƒä»¬å¼•ç”¨ï¼Œå› æ­¤ä¼šè¢«åƒåœ¾å›æ”¶ã€‚è¿™æ ·ï¼Œå¾ªç¯å¼•ç”¨çš„é—®é¢˜å°±ä¸å­˜åœ¨äº†ã€‚</p>
<h2>V8 åƒåœ¾å›æ”¶æœºåˆ¶</h2>
<p>åœ¨è¿‡å»å‡ å¹´ï¼ŒV8 åƒåœ¾å›æ”¶å‘ç”Ÿäº†å¾ˆå¤šå˜åŒ–ã€‚ä»¥å‰çš„åƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªè¿ç»­çš„è¿‡ç¨‹ï¼Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ä¼šæš‚åœå…¶ä»–æ´»åŠ¨ï¼ˆå…¨åœé¡¿ï¼Œstop-the-worldï¼‰ï¼Œè€Œç°åœ¨ V8 çš„åƒåœ¾å›æ”¶å™¨è½¬å˜æˆäº†å…·æœ‰ <strong>å¢é‡å›é€€</strong> çš„ <strong>å¹¶è¡Œ</strong>ã€<strong>å¹¶å‘</strong> åƒåœ¾å›æ”¶å™¨ã€‚</p>
<p>ä»»ä½•åƒåœ¾å›æ”¶å™¨éƒ½ä¼šæ‰§è¡Œä¸‹é¢å‡ ä¸ªåŸºæœ¬ä»»åŠ¡ï¼š</p>
<ol>
<li>
<p><strong>æ ‡è®°</strong> æ´»åŠ¨å¯¹è±¡å’Œéæ´»åŠ¨å¯¹è±¡</p>
</li>
<li>
<p><strong>å›æ”¶æˆ–è€…é‡æ’</strong> éæ´»åŠ¨å¯¹è±¡å æ®çš„å†…å­˜</p>
</li>
<li>
<p><strong>åˆå¹¶æˆ–è€…æ•´ç†</strong> å†…å­˜ï¼ˆå¯é€‰ï¼‰</p>
</li>
</ol>
<p>è¿™äº›ä»»åŠ¡å¯ä»¥æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ä»»æ„äº¤é”™æ‰§è¡Œã€‚ä¸€ç§ç›´æ¥çš„æ–¹æ³•æ˜¯æš‚åœ JavaScript æ‰§è¡Œï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸ŠæŒ‰é¡ºåºæ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸»çº¿ç¨‹å‡ºç°å¡é¡¿å’Œå»¶è¿Ÿé—®é¢˜ï¼Œå¹¶é™ä½ç¨‹åºååé‡ã€‚</p>
<h3>V8 å†…å­˜é™åˆ¶</h3>
<p>åœ¨ä»‹ç» V8 åƒåœ¾å›æ”¶æœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ¢è®¨ä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦åƒåœ¾å›æ”¶ã€‚</p>
<ul>
<li>å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå°±ä¼šåˆ†é…å¤§é‡å†…å­˜</li>
<li>åœ¨ V8 ä¸­é™åˆ¶ 64 ä½çš„æœºå™¨å¤§çº¦ 1.4GBï¼Œ32 ä½æœºå™¨å¤§çº¦ä¸º 0.7GB</li>
<li>æ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œæ ˆå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ï¼Œè€Œå †å†…å­˜ï¼Œåˆ™ç”± V8 å¼•æ“è¿›è¡Œé‡Šæ”¾</li>
</ul>
<h3>åˆ†ä»£å †å¸ƒå±€</h3>
<p>V8 ä¸­çš„å †è¢«åˆ†æˆä¸åŒçš„åŒºåŸŸï¼Œç§°ä¸ºä»£ï¼šåˆ†ä¸ºæ–°ç”Ÿä»£ï¼ˆè¿›ä¸€æ­¥åˆ†ä¸º <code>nursery</code> å’Œ <code>intermediate</code>ï¼‰ï¼Œå’Œä¸€ä¸ªè€ç”Ÿä»£ã€‚å¯¹è±¡é¦–å…ˆè¢«åˆ†é…åˆ° <code>nursery</code>ã€‚å¦‚æœå®ƒä»¬åœ¨ä¸‹ä¸€ä¸ª GC ä¸­å¹¸å­˜ä¸‹æ¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æŠŠå®ƒä»¬ç§»åŠ¨åˆ° <code>intermediate</code> å­ä»£ï¼Œå¦‚æœå†ç»è¿‡ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶è¿™ä¸ªå¯¹è±¡ä»ç„¶å­˜æ´»ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£ï¼ˆè¿™ä¸ªç­–ç•¥ç§°ä¸º <strong>å¯¹è±¡æ™‹å‡ç­–ç•¥</strong>ï¼‰ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/generations.svg" alt="generations" tabindex="0" loading="lazy"><figcaption>generations</figcaption></figure>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>åœ¨åƒåœ¾å›æ”¶ä¸­æœ‰ä¸€ä¸ªé‡è¦çš„æœ¯è¯­ï¼šã€Œä»£é™…å‡è¯´ã€ï¼ŒæŒ‡å¤§å¤šæ•°å¯¹è±¡åœ¨æ–°ç”Ÿä»£å°±ä¼šè¢«å›æ”¶ã€‚ä»åƒåœ¾å›æ”¶çš„è§’åº¦æ¥çœ‹ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡ä¸€ç»åˆ†é…ä¹‹åå°±å‡ ä¹é©¬ä¸Šå˜æˆä¸å¯è¾¾çŠ¶æ€ã€‚</p>
</div>
<p>æ ¹æ® V8 å †ä¸­åˆ†ä¸ºä¸åŒçš„åŒºåŸŸï¼Œå¯ä»¥å®¹æ˜“åœ°æƒ³åˆ° V8 æœ‰ä¸¤ä¸ªä¸åŒçš„åƒåœ¾å›æ”¶å™¨ï¼šæ¸…ç†æ–°ç”ŸåŒºçš„å‰¯åƒåœ¾å›æ”¶å™¨å’Œæ¸…ç†è€ç”ŸåŒºçš„ä¸»åƒåœ¾å›æ”¶å™¨ã€‚</p>
<p>ä¸‹é¢å°±ä¸€ä¸€ä»‹ç» V8 ä¸­çš„ä¸¤ä¸ªåƒåœ¾å›æ”¶å™¨ã€‚</p>
<h3>å‰¯åƒåœ¾å›æ”¶å™¨â€”â€”æ¸…é“å¤«ï¼ˆScavengeï¼‰</h3>
<p>å‰¯åƒåœ¾å›æ”¶å™¨ï¼ˆScavengerï¼‰ä»æ–°ç”Ÿä»£ä¸­å›æ”¶åƒåœ¾ã€‚</p>
<p>åœ¨æ¸…ç†æ—¶ï¼Œåˆå§‹çš„ç©ºé—²åŒºåŸŸç§°ä¹‹ä¸º <code>To-Space</code>ï¼Œå¤åˆ¶å¯¹è±¡è¿‡æ¥çš„åŒºåŸŸç§°ä¹‹ä¸º <code>From-Space</code>ï¼›åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ¯ä¸€ä¸ªå¯¹è±¡åœ¨æ¸…ç†çš„æ—¶å€™å­˜æ´»äº†ä¸‹æ¥ï¼Œé‚£æˆ‘ä»¬å°±è¦ä» <code>From-Space</code> å¤åˆ¶æ¯ä¸€ä¸ªå¯¹è±¡åˆ° <code>To-Space</code> ä¸­ã€‚</p>
<p>æ¸…é™¤æ­¥éª¤ï¼ˆEvacuationï¼‰ä¼šå°†æ‰€æœ‰çš„æ´»åŠ¨å¯¹è±¡ç§»åŠ¨åˆ°è¿ç»­çš„ä¸€å—å†…å­˜ä¸­ï¼Œå¹¶ä¸”æ ‡è®°å®ƒä»¬ï¼ˆå›¾ä¸­çš„å°åœ†åœˆï¼Œä»£è¡¨å·²ç»ç»å†è¿‡ä¸€æ¬¡ GCï¼‰ï¼›ç„¶åä¼šå°†ä¸¤å—å†…å­˜ç©ºé—´äº’æ¢ï¼Œå³æŠŠ <code>To-Space</code> å˜æˆ <code>From-Space</code>ï¼Œ<code>From-Space</code> å˜æˆ <code>To-Space</code>ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/Scavenge-1.svg" alt="Scavenge-1" tabindex="0" loading="lazy"><figcaption>Scavenge-1</figcaption></figure>
<p>å¦‚æœä»…ä»…æ˜¯å‡­å€Ÿè¿™ä¸€ç­–ç•¥ï¼Œæˆ‘ä»¬å°±ä¼šå¾ˆå¿«çš„è€—å°½æ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´ï¼›ä¸ºäº†æ–°ç”Ÿä»£çš„å†…å­˜ç©ºé—´ä¸è¢«è€—å°½ï¼Œåœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠæ´»åŠ¨å¯¹è±¡ç§»åŠ¨ï¼ˆevacuateï¼‰åˆ°è€ç”Ÿä»£ï¼Œè€Œä¸æ˜¯ <code>To-Space</code>ã€‚</p>
<p>åœ¨ä¸‹å›¾ä¸­ï¼Œä¸¤å—å†…å­˜ç©ºé—´å·²ç»äº’æ¢ï¼Œè€Œä¸” <code>From-Space</code> åˆæœ‰ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå‡å®šè¿™ä¸ªå¯¹è±¡åœ¨ç¬¬ä¸€æ¬¡ GC æ—¶å­˜æ´»äº†ä¸‹æ¥ï¼Œé‚£ä¹ˆå®ƒå°†è¢«å¤åˆ¶åˆ° <code>To-Space</code> ä¸­ã€‚è€Œ <code>From-Space</code> ä¸­å·²ç»ç»å†è¿‡ä¸€æ¬¡ GC çš„å¯¹è±¡ï¼ˆé€šè¿‡è¿™ä¸ªå°åœ†åœˆçš„æ ‡è®°å¾—çŸ¥ï¼‰ï¼Œå‡å¦‚å®ƒä»¬åˆå­˜æ´»ä¸‹æ¥ï¼Œåˆ™ä¼šè¢«å¤åˆ¶åˆ°è€ç”ŸåŒºï¼ˆ<strong>å¯¹è±¡æ™‹å‡ç­–ç•¥</strong>ï¼‰ã€‚</p>
<p>Scavenge çš„æœ€åä¸€æ­¥æ˜¯æŠŠç§»åŠ¨åçš„å¯¹è±¡çš„æŒ‡é’ˆåœ°å€æ›´æ–°ï¼Œæ¯ä¸€ä¸ªè¢«å¤åˆ¶å¯¹è±¡éƒ½ä¼šç•™ä¸‹ä¸€ä¸ªè½¬å‘åœ°å€ï¼ˆforwarding-addressï¼‰ï¼Œç”¨äºæ›´æ–°æŒ‡é’ˆä»¥æŒ‡å‘æ–°çš„åœ°å€ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/Scavenge-2.svg" alt="Scavenge-2" tabindex="0" loading="lazy"><figcaption>Scavenge-2</figcaption></figure>
<p>åœ¨å‰¯åƒåœ¾å›æ”¶å™¨å›æ”¶è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šæ‰§è¡Œäº†ä¸‰ä¸ªæ­¥éª¤ï¼šæ ‡è®°ã€æ¸…é™¤å’ŒæŒ‡é’ˆæ›´æ–°ã€‚</p>
<h3>ä¸»åƒåœ¾å›æ”¶å™¨ â€”â€” å…¨é‡æ ‡è®°å’Œæ•´ç†ï¼ˆFull Mark-Compactï¼‰</h3>
<p>ä¸»åƒåœ¾å›æ”¶å™¨ä»æ•´ä¸ªå †ï¼ˆheapï¼‰ä¸­æ”¶é›†åƒåœ¾ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/three-phases.svg" alt="three-phases" tabindex="0" loading="lazy"><figcaption>three-phases</figcaption></figure>
<p>æ ‡è®°é˜¶æ®µæ˜¯åˆ©ç”¨å¯¹è±¡çš„å¯è¾¾æ€§ç¡®å®šå¯¹è±¡æ˜¯å¦æ´»è·ƒã€‚ä»åˆå§‹çš„æ ¹å¯¹è±¡å¼€å§‹ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªæŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆï¼Œå°†å…¶æ ‡è®°ä¸ºå¯è®¿é—®çš„ï¼ŒåŒæ—¶è·Ÿè¸ªå¯¹è±¡ä¸­æ¯ä¸€ä¸ªå±æ€§çš„æŒ‡é’ˆã€‚æ•´ä¸ªè¿‡ç¨‹é€’å½’è¿›è¡Œï¼Œç›´åˆ°æ ‡è®°åˆ°è¿è¡Œæ—¶æ¯ä¸€ä¸ªå¯è®¿é—®çš„å¯¹è±¡ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/marking.png" alt="marking" width="50%" height="50%" tabindex="0" loading="lazy"><figcaption>marking</figcaption></figure>
<p>æ¸…é™¤é˜¶æ®µå°†éæ´»åŠ¨å¯¹è±¡è¿›è¡Œæ¸…é™¤ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/sweeping.png" alt="sweeping" width="50%" height="50%" tabindex="0" loading="lazy"><figcaption>sweeping</figcaption></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œé¢‘ç¹å›æ”¶å¯¹è±¡åï¼Œå†…å­˜ä¸­å°±ä¼šå­˜åœ¨å¤§é‡ä¸è¿ç»­ç©ºé—´ï¼Œæˆ‘ä»¬æŠŠè¿™äº›ä¸è¿ç»­çš„å†…å­˜ç©ºé—´ç§°ä¸ºå†…å­˜ç¢ç‰‡ã€‚å½“å†…å­˜ä¸­å‡ºç°äº†å¤§é‡çš„å†…å­˜ç¢ç‰‡ä¹‹åï¼Œå¦‚æœéœ€è¦åˆ†é…è¾ƒå¤§è¿ç»­å†…å­˜çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å†…å­˜ä¸è¶³çš„æƒ…å†µã€‚æ‰€ä»¥æœ€åä¸€æ­¥éœ€è¦æ•´ç†è¿™äº›å†…å­˜ç¢ç‰‡ï¼Œä½†è¿™æ­¥å…¶å®æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºæœ‰çš„åƒåœ¾å›æ”¶å™¨ä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/compaction.png" alt="compaction" width="50%" height="50%" tabindex="0" loading="lazy"><figcaption>compaction</figcaption></figure>
<h2>Orinoco</h2>
<p>Orinoco æ˜¯ V8 åƒåœ¾å›æ”¶å™¨é¡¹ç›®çš„ä»£å·ï¼Œå®ƒåˆ©ç”¨æœ€æ–°çš„å’Œæœ€å¥½çš„åƒåœ¾å›æ”¶æŠ€æœ¯æ¥é™ä½ä¸»çº¿ç¨‹æŒ‚èµ·çš„æ—¶é—´ï¼Œ æ¯”å¦‚ï¼šå¹¶è¡Œï¼ˆparallelï¼‰åƒåœ¾å›æ”¶ï¼Œå¢é‡ï¼ˆincrementalï¼‰åƒåœ¾å›æ”¶å’Œå¹¶å‘ï¼ˆconcurrentï¼‰åƒåœ¾å›æ”¶ã€‚</p>
<p>2011 å¹´ï¼ŒV8 ä» stop-the-world æ ‡è®°åˆ‡æ¢åˆ°å¢é‡æ ‡è®°ã€‚</p>
<p>2018 å¹´ï¼ŒGC æŠ€æœ¯åˆæœ‰äº†ä¸€ä¸ªé‡å¤§çªç ´ï¼Œè¿™é¡¹æŠ€æœ¯åä¸ºå¹¶å‘æ ‡è®°ã€‚åœ¨ Chrome 64 å’Œ Node.js v10 ä¸­å·²å¯ç”¨ï¼Œå®ƒå°†æ ‡è®°æ—¶é—´ç¼©çŸ­äº† 60%~70%ã€‚è¿˜æœ‰å¹¶è¡ŒæŠ€æœ¯ï¼Œå®ƒå°†æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶æ—¶é—´ç¼©çŸ­äº† 20%~50%ã€‚</p>
<h3>å¹¶è¡Œåƒåœ¾å›æ”¶ï¼ˆParallelï¼‰</h3>
<p>å¹¶è¡Œæ˜¯ä¸»çº¿ç¨‹å’ŒååŠ©çº¿ç¨‹åŒæ—¶æ‰§è¡ŒåŒæ ·çš„å·¥ä½œï¼Œä½†æ˜¯è¿™ä»ç„¶æ˜¯ä¸€ç§ <code>stop-the-world</code> çš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œä½†æ˜¯åƒåœ¾å›æ”¶å…¨åœé¡¿æ—¶é—´ç­‰äºæ€»æ—¶é—´é™¤ä»¥å‚ä¸çš„çº¿ç¨‹æ•°é‡ï¼ˆåŠ ä¸Šä¸€äº›åŒæ­¥å¼€é”€ï¼‰ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/parallel.svg" alt="parallel" tabindex="0" loading="lazy"><figcaption>parallel</figcaption></figure>
<h3>å¢é‡åƒåœ¾å›æ”¶ï¼ˆIncrementalï¼‰</h3>
<p>å¢é‡å¼åƒåœ¾å›æ”¶æ˜¯ä¸»çº¿ç¨‹é—´æ­‡æ€§çš„å»åšå°‘é‡çš„åƒåœ¾å›æ”¶çš„æ–¹å¼ã€‚åŒæ—¶è®©åƒåœ¾å›æ”¶å’Œ JavaScript åº”ç”¨é€»è¾‘äº¤æ›¿è¿›è¡Œï¼Œè¿™æ„å‘³ç€å †çš„çŠ¶æ€å¯èƒ½å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ä¹‹å‰çš„å¢é‡å›æ”¶å·¥ä½œå®Œå…¨æ— æ•ˆã€‚</p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºå¹¶æ²¡æœ‰å‡å°‘ä¸»çº¿ç¨‹æš‚åœçš„æ€»æ—¶é—´ï¼ˆäº‹å®ä¸Šï¼Œé€šå¸¸ä¼šç•¥å¾®å¢åŠ ï¼‰ã€‚é€šè¿‡å…è®¸ JavaScript é—´æ­‡æ‰§è¡Œï¼ŒåŒæ—¶ä¹Ÿé—´æ­‡æ€§åœ°å»åšåƒåœ¾å›æ”¶å·¥ä½œï¼Œåº”ç”¨ç¨‹åºä»ç„¶å¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥æˆ–è€…æ‰§è¡ŒåŠ¨ç”»çš„æ—¶å€™å¾—åˆ°åŠæ—¶çš„å“åº”ã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/incremental.svg" alt="incremental" tabindex="0" loading="lazy"><figcaption>incremental</figcaption></figure>
<h3>å¹¶å‘åƒåœ¾å›æ”¶ï¼ˆConcurrentï¼‰</h3>
<p>å¹¶å‘æ˜¯ä¸»çº¿ç¨‹æŒç»­æ‰§è¡Œ JavaScriptï¼Œè€Œè¾…åŠ©çº¿ç¨‹å®Œå…¨åœ¨åå°æ‰§è¡Œåƒåœ¾å›æ”¶ã€‚è¿™ç§æ–¹å¼æ˜¯è¿™ä¸‰ç§æŠ€æœ¯ä¸­æœ€éš¾çš„ä¸€ç§ï¼šJavaScript å †é‡Œé¢çš„å†…å®¹éšæ—¶éƒ½æœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œä½¿ä¹‹å‰åšçš„å·¥ä½œå®Œå…¨æ— æ•ˆï¼Œä¸»çº¿ç¨‹å’Œè¾…åŠ©çº¿ç¨‹ææœ‰å¯èƒ½åœ¨åŒä¸€æ—¶é—´å»æ›´æ”¹åŒä¸€ä¸ªå¯¹è±¡ã€‚è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œä¸»çº¿ç¨‹ä¸ä¼šè¢«æŒ‚èµ·ï¼ŒJavaScript å¯ä»¥è‡ªç”±åœ°æ‰§è¡Œã€‚</p>
<figure><img src="https://raw.githubusercontent.com/dribble-njr/typora-njr/master/img/concurrent.svg" alt="concurrent" tabindex="0" loading="lazy"><figcaption>concurrent</figcaption></figure>
<h2>æ€»ç»“</h2>
<p>é¦–å…ˆä»‹ç»äº†å†…å­˜ç®¡ç†çš„ä¸€èˆ¬æµç¨‹ï¼Œåˆ†ä¸ºä¸‰å¤§æ­¥ï¼šåˆ†é…ã€ä½¿ç”¨ã€é‡Šæ”¾ã€‚</p>
<p>ç„¶åæ˜¯ V8 å¦‚ä½•åˆ†é…å†…å­˜ï¼šåŸºæœ¬æ•°æ®ç±»å‹å­˜æ”¾åœ¨æ ˆç©ºé—´ï¼Œå¤æ‚æ•°æ®ç±»å‹å­˜æ”¾åœ¨å †ç©ºé—´ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚</p>
<p>æ¥ç€åˆä»‹ç»äº†å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œä¸»è¦åŒ…æ‹¬å¼•ç”¨è®¡æ•°æ³•å’Œæ ‡è®°æ¸…é™¤æ³•ã€‚</p>
<p>æœ€åä»‹ç»äº† V8 çš„åƒåœ¾å›æ”¶æœºåˆ¶ä»¥åŠåšå‡ºçš„ä¼˜åŒ–ã€‚</p>
<h2>å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://v8.dev/blog/trash-talk" target="_blank" rel="noopener noreferrer">Trash talk: the Orinoco garbage collector Â· V8</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Memory_Management" target="_blank" rel="noopener noreferrer">å†…å­˜ç®¡ç† - JavaScript | MDN (mozilla.org)</a></li>
<li><a href="https://time.geekbang.org/column/article/129596" target="_blank" rel="noopener noreferrer">12 | æ ˆç©ºé—´å’Œå †ç©ºé—´ï¼šæ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/6844904016325902344" target="_blank" rel="noopener noreferrer">ä¸€æ–‡ææ‡‚ V8 å¼•æ“çš„åƒåœ¾å›æ”¶</a></li>
<li><a href="https://www.nodejs.red/#/nodejs/memory?id=v8%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6" target="_blank" rel="noopener noreferrer">Memory å†…å­˜ç®¡ç†å’Œ V8 åƒåœ¾å›æ”¶æœºåˆ¶ (nodejs.red)</a></li>
</ul>
]]></content>
    <category term="browser"/>
    <published>2022-01-13T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">è·¨åŸŸ</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/browser/04-cross-domain.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/browser/04-cross-domain.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>è·¨åŸŸæ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œåè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä¸ä¸€è‡´å³ä¼šé€ æˆè·¨åŸŸé—®é¢˜ã€‚</p>
<h2>CORS</h2>
<p>ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚</p>
<h3>ç®€å•è¯·æ±‚</h3>
<p>è¯·æ±‚æ–¹æ³•ï¼š</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
<p>è¯·æ±‚å¤´ï¼š</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID</li>
<li>Content-Type</li>
</ul>
<p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´ä¿¡æ¯å¢åŠ ä¸€ä¸ª origin å­—æ®µï¼Œè¯¥å­—æ®µç”¨æ¥è¯´æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼šåè®®+ç«¯å£+åŸŸåã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>è·¨åŸŸæ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œåè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä¸ä¸€è‡´å³ä¼šé€ æˆè·¨åŸŸé—®é¢˜ã€‚</p>
<h2>CORS</h2>
<p>ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚</p>
<h3>ç®€å•è¯·æ±‚</h3>
<p>è¯·æ±‚æ–¹æ³•ï¼š</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
<p>è¯·æ±‚å¤´ï¼š</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID</li>
<li>Content-Type</li>
</ul>
<p>å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåœ¨è¯·æ±‚å¤´ä¿¡æ¯å¢åŠ ä¸€ä¸ª origin å­—æ®µï¼Œè¯¥å­—æ®µç”¨æ¥è¯´æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼šåè®®+ç«¯å£+åŸŸåã€‚</p>
<p>æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼æ¥å†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ï¼Œå¦‚æœ origin æŒ‡å®šçš„æºåœ¨å…è®¸èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨å°±è¿”å›å¦‚ä¸‹å“åº”å¤´ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>Access-Control-Allow-Origin: http://api.bob.com å’Œ origin ä¸€è‡´
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: FooBar
Content-Type: text/html; charset=utf-8
</code></pre></div><p>æœåŠ¡å™¨è‡³å°‘è®¾ç½® Access-Control-Allow-Originã€‚</p>
<h3>éç®€å•è¯·æ±‚</h3>
<p>éœ€è¦è¿›è¡Œ options é¢„æ£€è¯·æ±‚ã€‚</p>
<p>è¯·æ±‚å¤´</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>Access-Control-Request-Method å¿…é¡»
Access-Control-Request-Headers é€—å·åˆ†éš”ç¬¦ï¼ŒæŒ‡å®šè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µ
</code></pre></div><p>å“åº”å¤´ï¼š</p>
<div class="language-text" data-ext="text" data-title="text"><pre class="language-text"><code>Access-Control-Allow-Origin: http://api.bob.com å’Œ origin ä¸€è‡´
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: FooBar
Access-Control-Max-Age: 1728000 æœ¬æ¬¡é¢„æ£€çš„æœ‰æ•ˆæœŸï¼Œç§’
</code></pre></div>]]></content>
    <category term="browser"/>
    <published>2022-05-06T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">è¾“å…¥ URL åå‘ç”Ÿäº†ä»€ä¹ˆ</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/browser/05-what-happens-after-entering-the-URL.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/browser/05-what-happens-after-entering-the-URL.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>å…ˆçœ‹çœ‹å¤§è‡´æµç¨‹ï¼š</p>
<ol>
<li>ç”Ÿæˆ HTTP è¯·æ±‚æ¶ˆæ¯ï¼šå½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹ URL è¿›è¡Œè§£æï¼›ç„¶åæµè§ˆå™¨ä¼šæ ¹æ®ç½‘å€çš„å«ä¹‰æ¥ç”Ÿæˆè¯·æ±‚æ¶ˆæ¯ï¼›</li>
<li>å‘ DNS æœåŠ¡å™¨æŸ¥è¯¢ Web æœåŠ¡å™¨çš„ IP åœ°å€ï¼šè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆåï¼Œæµè§ˆå™¨å‘ DNS æœåŠ¡å™¨æŸ¥è¯¢åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œç„¶åå§”æ‰˜æ“ä½œç³»ç»Ÿï¼ˆæµè§ˆå™¨æœ¬èº«å¹¶æ²¡æœ‰ç½‘ç»œé€šè®¯çš„èƒ½åŠ›ï¼‰å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li>
<li>å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯ï¼šæŸ¥è¯¢åˆ° IP åœ°å€ä¹‹åï¼Œæµè§ˆå™¨å°±å¯ä»¥å°†æ¶ˆæ¯å§”æ‰˜ç»™æ“ä½œç³»ç»Ÿçš„åè®®æ ˆï¼ˆTCP/IPï¼‰å‘é€ç»™æœåŠ¡å™¨ã€‚</li>
<li>æ•°å­—ä¿¡æ¯è½¬æ¢ä¸ºç”µä¿¡å·ï¼šé€šè¿‡åè®®æ ˆå°†æ•°æ®å˜æˆç½‘ç»œåŒ…åï¼Œç½‘å¡è´Ÿè´£å°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºç”µä¿¡å·ã€‚</li>
</ol>]]></summary>
    <content type="html"><![CDATA[<p>å…ˆçœ‹çœ‹å¤§è‡´æµç¨‹ï¼š</p>
<ol>
<li>ç”Ÿæˆ HTTP è¯·æ±‚æ¶ˆæ¯ï¼šå½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼Œæµè§ˆå™¨å°±ä¼šå¯¹ URL è¿›è¡Œè§£æï¼›ç„¶åæµè§ˆå™¨ä¼šæ ¹æ®ç½‘å€çš„å«ä¹‰æ¥ç”Ÿæˆè¯·æ±‚æ¶ˆæ¯ï¼›</li>
<li>å‘ DNS æœåŠ¡å™¨æŸ¥è¯¢ Web æœåŠ¡å™¨çš„ IP åœ°å€ï¼šè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆåï¼Œæµè§ˆå™¨å‘ DNS æœåŠ¡å™¨æŸ¥è¯¢åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œç„¶åå§”æ‰˜æ“ä½œç³»ç»Ÿï¼ˆæµè§ˆå™¨æœ¬èº«å¹¶æ²¡æœ‰ç½‘ç»œé€šè®¯çš„èƒ½åŠ›ï¼‰å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</li>
<li>å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯ï¼šæŸ¥è¯¢åˆ° IP åœ°å€ä¹‹åï¼Œæµè§ˆå™¨å°±å¯ä»¥å°†æ¶ˆæ¯å§”æ‰˜ç»™æ“ä½œç³»ç»Ÿçš„åè®®æ ˆï¼ˆTCP/IPï¼‰å‘é€ç»™æœåŠ¡å™¨ã€‚</li>
<li>æ•°å­—ä¿¡æ¯è½¬æ¢ä¸ºç”µä¿¡å·ï¼šé€šè¿‡åè®®æ ˆå°†æ•°æ®å˜æˆç½‘ç»œåŒ…åï¼Œç½‘å¡è´Ÿè´£å°†æ•°å­—ä¿¡å·è½¬æ¢ä¸ºç”µä¿¡å·ã€‚</li>
</ol>
<h2>ç”Ÿæˆ HTTP è¯·æ±‚æ¶ˆæ¯</h2>
<p>æµè§ˆå™¨è¦åšçš„ç¬¬ä¸€æ­¥å·¥ä½œå°±æ˜¯å¯¹ URL è¿›è¡Œè§£æï¼Œä»è€Œç”Ÿæˆå‘é€ç»™ Web æœåŠ¡å™¨çš„è¯·æ±‚æ¶ˆæ¯ã€‚</p>
<img src="/assets/image/computer-science/networking/010/parse-url.png" alt="Webæµè§ˆå™¨è§£æURL" style="zoom:60%;">
<h3>çœç•¥æ–‡ä»¶åçš„æƒ…å†µ</h3>
<ol>
<li>
<p><a href="http://www.lab.glasscom.com/dir/" target="_blank" rel="noopener noreferrer">http://www.lab.glasscom.com/dir/</a></p>
<p>ä»¥ <code>/</code> ç»“å°¾ä»£è¡¨è®¿é—®é»˜è®¤æ–‡ä»¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ <code>index.html</code> æˆ–è€… <code>default.htm</code> ä¹‹ç±»çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><a href="http://www.lab.glasscom.com" target="_blank" rel="noopener noreferrer">http://www.lab.glasscom.com</a></p>
<p>çœç•¥ç»“å°¾çš„ <code>/</code> ç¬¦ï¼Œä»£è¡¨è®¿é—®æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹çš„é»˜è®¤æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ <code>index.html</code> æˆ–è€… <code>default.htm</code>ã€‚</p>
</li>
<li>
<p><a href="http://www.lab.glasscom.com/whatisthis" target="_blank" rel="noopener noreferrer">http://www.lab.glasscom.com/whatisthis</a></p>
<p>å¦‚æœ Web æœåŠ¡å™¨ä¸Šå­˜åœ¨å whatisthis çš„æ–‡ä»¶ï¼Œåˆ™ä½œä¸ºæ–‡ä»¶åæ¥å¤„ç†ï¼›å¦‚æœå­˜åœ¨åä¸º whatisthis çš„ç›®å½•ï¼Œåˆ™ä½œä¸ºç›®å½•åæ¥å¤„ã€‚</p>
</li>
</ol>
<h3>ç”Ÿæˆè¯·æ±‚æ¶ˆæ¯</h3>
<p>å¯¹ URL è¿›è¡Œè§£æä¹‹åï¼Œæµè§ˆå™¨ç¡®å®šäº† Web æœåŠ¡å™¨å’Œæ–‡ä»¶åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ ¹æ®è¿™äº›ä¿¡æ¯æ¥ç”Ÿæˆ HTTP è¯·æ±‚æ¶ˆæ¯äº†ã€‚</p>
<img src="/assets/image/computer-science/networking/010/message.png" alt="æ¶ˆæ¯æ ¼å¼" style="zoom:60%;">
<h2>å‘ DNS æœåŠ¡å™¨æŸ¥è¯¢åŸŸå IP åœ°å€</h2>
<p>æµè§ˆå™¨è§£æå®Œ URL å¹¶ç”Ÿæˆè¯·æ±‚æ¶ˆæ¯åï¼Œéœ€è¦å§”æ‰˜æ“ä½œç³»ç»Ÿå‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ¶ˆæ¯ã€‚</p>
<p>ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œè¿˜éœ€è¦çŸ¥é“æœåŠ¡å™¨åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚å› æ­¤éœ€è¦ä½¿ç”¨ DNS æœåŠ¡å™¨æŸ¥è¯¢ IP åœ°å€ã€‚</p>
<p>DNS æœåŠ¡å™¨ä¿å­˜äº†åŸŸåå’Œ IP çš„å¯¹åº”å…³ç³»ã€‚</p>
<p>åŸŸåä¸­ç”¨ <code>.</code> æ¥åˆ†éš”ï¼Œæ¯”å¦‚ <code>www.lab.glasscom.com.</code>ï¼Œè¶Šå¾€å³å±‚çº§è¶Šé«˜ï¼Œæœ€åçš„ä¸€ä¸ªç‚¹ä»£è¡¨æ ¹åŸŸåï¼Œä¸€èˆ¬å¯ä»¥çœç•¥ã€‚</p>
<p>æ ¹åŸŸçš„æœåŠ¡å™¨ä¿¡æ¯ä¿å­˜åœ¨äº’è”ç½‘ä¸­çš„æ‰€æœ‰ DNS æœåŠ¡å™¨ä¸­ï¼Œè¿™æ ·ä»»æ„ä¸€å°æœåŠ¡å™¨éƒ½å¯ä»¥æ‰¾åˆ°å¹¶è®¿é—®æ ¹æœåŠ¡å™¨ï¼Œä»è€Œæ‰¾åˆ°å…¶å®ƒæœåŠ¡å™¨ã€‚</p>
<figure><img src="/assets/image/computer-science/networking/010/DNS.png" alt="DNS" tabindex="0" loading="lazy"><figcaption>DNS</figcaption></figure>
<h2>åè®®æ ˆ</h2>
<p>é€šè¿‡ DNS è·å–åˆ°æœåŠ¡å™¨çš„ IP åœ°å€åï¼Œæµè§ˆå™¨å°±å¯ä»¥é€šè¿‡ socket åº“æŠŠ HTTP æŠ¥æ–‡çš„ä¼ è¾“å·¥ä½œå§”æ‰˜ç»™æ“ä½œç³»ç»Ÿä¸­çš„<strong>åè®®æ ˆ</strong>ã€‚</p>
<figure><img src="/assets/image/computer-science/networking/010/TCP-IP.png" alt="å®¢æˆ·ç«¯" tabindex="0" loading="lazy"><figcaption>å®¢æˆ·ç«¯</figcaption></figure>
<p>å…¶ä¸­åº”ç”¨ç¨‹åºå½“ç„¶ä¸ºåº”ç”¨å±‚ï¼Œåè®®æ ˆä¸­çš„ TCP/UDP ä¸ºä¼ è¾“å±‚ï¼Œä»–ä»¬ä¼šæ¥æ”¶åº”ç”¨ç¨‹åºçš„å§”æ‰˜æ‰§è¡Œæ”¶å‘æ•°æ®çš„æ“ä½œã€‚</p>
<blockquote>
<p>åƒæµè§ˆå™¨ã€é‚®ä»¶ç­‰ä¸€èˆ¬çš„åº”ç”¨ç¨‹åºéƒ½æ˜¯ä½¿ç”¨ TCP æ”¶å‘æ•°æ®çš„ï¼Œè€Œåƒ DNS æŸ¥è¯¢ç­‰æ”¶å‘è¾ƒçŸ­çš„æ§åˆ¶æ•°æ®çš„æ—¶å€™åˆ™ä½¿ç”¨ UDPã€‚</p>
</blockquote>
<p>åœ¨ä¼ é€æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šåˆ‡åˆ†æˆä¸€ä¸ªä¸ªç½‘ç»œåŒ…ï¼Œè€Œ IP åè®®ä¸ºç½‘ç»œå±‚ï¼Œè´Ÿè´£æ§åˆ¶ç½‘ç»œåŒ…çš„å‘ç»™é€šä¿¡å¯¹è±¡ã€‚</p>
<p>IP ä¸­è¿˜åŒ…æ‹¬ ICMP åè®®å’Œ ARP åè®®ã€‚ICMP ç”¨äºå‘ŠçŸ¥ç½‘ç»œåŒ…ä¼ è¾“è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯åŠå„ç§æ§åˆ¶æ¶ˆæ¯ï¼ŒARP ç”¨äºæ ¹æ® IP åœ°å€æŸ¥è¯¢ç›¸åº”çš„ MAC åœ°å€ã€‚</p>
<h2>ç½‘å¡</h2>
]]></content>
    <category term="browser"/>
    <published>2021-12-11T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">åˆ¤æ–­æ•°æ®ç±»å‹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/003-judge-type.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/003-judge-type.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p><code>ECMAScript</code> æœ‰ 8 ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆ 7 ç§åŸå§‹ç±»å‹å’Œ 1 ç§å¼•ç”¨ç±»å‹ï¼‰ã€‚</p>
<ul>
<li>åŸå§‹ç±»å‹ï¼š<code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code>ã€<code>BigInt</code>ï¼›</li>
<li>å¼•ç”¨ç±»å‹ï¼š<code>Object</code>ã€‚</li>
</ul>
<p>ä¸‹é¢ä»‹ç»å‡ ç§åˆ¤æ–­å˜é‡æ•°æ®ç±»å‹çš„å‡ ç§æ–¹æ³•ã€‚</p>
<h2><code>typeof</code></h2>]]></summary>
    <content type="html"><![CDATA[<p><code>ECMAScript</code> æœ‰ 8 ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆ 7 ç§åŸå§‹ç±»å‹å’Œ 1 ç§å¼•ç”¨ç±»å‹ï¼‰ã€‚</p>
<ul>
<li>åŸå§‹ç±»å‹ï¼š<code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code>ã€<code>BigInt</code>ï¼›</li>
<li>å¼•ç”¨ç±»å‹ï¼š<code>Object</code>ã€‚</li>
</ul>
<p>ä¸‹é¢ä»‹ç»å‡ ç§åˆ¤æ–­å˜é‡æ•°æ®ç±»å‹çš„å‡ ç§æ–¹æ³•ã€‚</p>
<h2><code>typeof</code></h2>
<p>ç”¨æ¥è¿”å›æ“ä½œæ•°ç±»å‹çš„å­—ç¬¦ä¸²ã€‚è¯­æ³•ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">typeof</span> operand
</code></pre></div><p>ä½†æ˜¯ç”±äº JavaScript è®¾è®¡çš„ç¼ºé™·ï¼Œ<code>typeof</code> åŸºæœ¬ä¸Šä¸èƒ½å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚å®ƒåªæœ‰ä¸€ä¸ªå®é™…åº”ç”¨åœºæ™¯ï¼š<strong>æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å·²ç»å®šä¹‰æˆ–è€…æ˜¯å¦å·²ç»èµ‹å€¼</strong>ã€‚</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤ <code>null</code> å¤–ï¼Œå‡å¯ä»¥è¿”å›æ­£ç¡®ç»“æœï¼›</li>
<li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œé™¤ <code>function</code> å¤–ï¼Œä¸€å¾‹è¿”å› <code>"object"</code>ï¼›</li>
<li>å¯¹äº <code>null</code>ï¼Œè¿”å› <code>"object"</code> ç±»å‹ï¼›</li>
<li>å¯¹äº <code>function</code>ï¼Œè¿”å› <code>"function"</code>ï¼›</li>
<li>å¯¹äº <code>array</code>, è¿”å› <code>"object"</code>ã€‚</li>
</ul>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token comment">// "object"ï¼Œå¾—ä¸åˆ°æƒ³è¦çš„å€¼</span>
<span class="token keyword">typeof</span> fn <span class="token comment">// "function"</span>
</code></pre></div><p>æ€»ä¹‹ï¼Œæ•°ç»„ã€å¯¹è±¡ã€<code>null</code> éƒ½ä¼šè¿”å› <code>object</code>ï¼Œå…¶ä»–éƒ½èƒ½åˆ¤æ–­æ­£ç¡®ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">ä¸ºä»€ä¹ˆ `typeof null` è¿”å› `object`</p>
<p>ç”±äº JavaScript ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œæ‰€æœ‰å€¼éƒ½å­˜åœ¨ 32 ä½å•å…ƒä¸­ï¼Œæ¯ä¸ªå•å…ƒåŒ…å«ä¸€ä¸ªå°çš„ç±»å‹æ ‡ç­¾ä»¥åŠå­˜å‚¨çš„çœŸå®å€¼ï¼Œ<code>object</code> çš„ç±»å‹æ ‡ç­¾æ˜¯ <code>000</code>ï¼Œè€Œ <code>null</code> çš„ç±»å‹æ ‡ç­¾ä¹Ÿæ˜¯ <code>000</code>ï¼Œå› æ­¤ä½¿ç”¨ <code>typeof</code> åˆ¤æ–­ <code>null</code> ä¼šè¢«åˆ¤å®šä¸º <code>object</code>ã€‚</p>
<ul>
<li><code>000</code>ï¼šå¯¹è±¡ï¼›</li>
<li><code>001</code>: æ•´æ•°ï¼›</li>
<li><code>010</code>ï¼šæµ®ç‚¹æ•°ï¼›</li>
<li><code>100</code>ï¼šå­—ç¬¦ä¸²ï¼›</li>
<li><code>110</code>ï¼šå¸ƒå°”ã€‚</li>
</ul>
</div>
<h2><code>instanceof</code></h2>
<p>ç”¨æ¥æ£€æµ‹æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œè¿”å›å¸ƒå°”å€¼ã€‚è¯­æ³•ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code>object <span class="token keyword">instanceof</span> <span class="token class-name">constructor</span>
</code></pre></div><p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯¹äº <strong>å­—é¢é‡å£°æ˜</strong> çš„ <code>Number</code>ã€<code>BigInt</code>ã€<code>String</code>ã€<code>Boolean</code>ã€<code>Symbol</code> éƒ½ä¼šè¿”å› <code>false</code>ï¼›</li>
<li><strong>åªèƒ½æ­£ç¡®åˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹</strong>ï¼›</li>
<li>åªè¦åœ¨å½“å‰å®ä¾‹çš„åŸå‹é“¾ä¸Šï¼Œæ£€æµ‹ç»“æœå‡ä¸º <code>true</code>ï¼›</li>
</ul>
<p>åŸç†ï¼šéå†å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ <code>__proto__</code>ï¼Œç›´åˆ°æ‰¾åˆ°æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ã€‚</p>
<div class="hint-container tip">
<p class="hint-container-title">æç¤º</p>
<p>ä¸åŒç¯å¢ƒå¯¹ <code>__proto__</code> çš„å®ç°ä¸åŒï¼Œè€Œä¸” Web æ ‡å‡†å·²ç»åˆ é™¤è¯¥ç‰¹æ€§ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è¡¨ç¤ºæ–¹ä¾¿ï¼Œå¼€å‘ä¸­éœ€è¦ä½¿ç”¨ <code>Object.getPrototypeOf()</code> è·å–åŸå‹å¯¹è±¡ã€‚</p>
</div>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myInstanceOf</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨ ES5 ä¸­ï¼Œå¦‚æœ Object.getPrototypeOf å‚æ•°ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹</span>
  <span class="token comment">// å°†æŠ›å‡ºä¸€ä¸ªTypeErrorå¼‚å¸¸ã€‚åœ¨ ES2015 ä¸­ï¼Œå‚æ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºä¸€ä¸ª Objectã€‚</span>
  <span class="token comment">// å› æ­¤éœ€æå‰åˆ¤æ–­æ˜¯å¦ä¸ºå¼•ç”¨ç±»å‹</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> left <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>

  <span class="token comment">// right å¿…é¡»æ˜¯å‡½æ•°ï¼Œå‡½æ•°æ‰æœ‰ prototype</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> constructor <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'The "constructor" parameter must be a function.'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹</span>
  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2>ç®€å•å®ç°</h2>
<p>å¦‚æœåªéœ€è¦å‡†ç¡®åˆ¤æ–­å…­ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŒæ—¶åˆèƒ½å¤Ÿå‡†ç¡®åŒºåˆ†æ•°æ®ç±»å‹æ˜¯ <code>null</code>ã€<code>array</code>ã€è¿˜æ˜¯ <code>object</code> å°±è¶³å¤Ÿçš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">superTypeof</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">typeof</span> val

  <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res <span class="token operator">=</span> <span class="token string">'null'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res <span class="token operator">=</span> <span class="token string">'array'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre></div><h2><code>Object.prototype.toString.call(obj)</code></h2>
<p>å½“ <code>Array.isArray()</code> ä¸å¯ç”¨æ—¶ï¼Œæœ‰å¦‚ä¸‹çš„è¡¥ä¸ï¼Œå› æ­¤æ›´æ¨èä½¿ç”¨ <code>Object.prototype.toString.call(obj)</code> æ£€æµ‹æ•°æ®ç±»å‹ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span>isArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Array<span class="token punctuation">.</span><span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[Object Array]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœéœ€è¦åˆ¤æ–­æ‰€æœ‰ç±»å‹ï¼Œé‚£ä¹ˆå¯ä»¥è°ƒç”¨å¯¹è±¡åŸå‹ä¸­çš„ <code>toString()</code> æ–¹æ³•ï¼Œ<code>Object.prototype.toString.call(obj)</code>ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">_getClass</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'null'</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>]]></content>
    <category term="JavaScript"/>
    <published>2022-05-02T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="text">æ•°æ®ç±»å‹</title>
    <id>https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/002-types.html</id>
    <link href="https://dribble-njr.github.io/blog/blog/frontend/basic/javascript/002-types.html"/>
    <updated>2024-11-06T15:43:46.000Z</updated>
    <summary type="html"><![CDATA[<p>ECMAScript æœ‰ 7 ç§ç®€å•æ•°æ®ç±»å‹ï¼ˆä¹Ÿç§°ä¸ºåŸå§‹ç±»å‹ï¼‰ï¼š<code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code> å’Œ <code>BigInt</code>ã€‚</p>
<p><code>Symbol</code>ï¼ˆç¬¦å·ï¼‰æ˜¯ ES6 æ–°å¢çš„ï¼Œ<code>BigInt</code> æ˜¯ ES10 æ–°å¢ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§å¤æ‚æ•°æ®ç±»å‹å« <code>Object</code>ï¼ˆå¯¹è±¡ï¼‰ã€‚<code>Object</code> æ˜¯ä¸€ç§ <strong>æ— åº</strong> é”®å€¼å¯¹çš„é›†åˆã€‚</p>]]></summary>
    <content type="html"><![CDATA[<p>ECMAScript æœ‰ 7 ç§ç®€å•æ•°æ®ç±»å‹ï¼ˆä¹Ÿç§°ä¸ºåŸå§‹ç±»å‹ï¼‰ï¼š<code>Undefined</code>ã€<code>Null</code>ã€<code>Boolean</code>ã€<code>Number</code>ã€<code>String</code>ã€<code>Symbol</code> å’Œ <code>BigInt</code>ã€‚</p>
<p><code>Symbol</code>ï¼ˆç¬¦å·ï¼‰æ˜¯ ES6 æ–°å¢çš„ï¼Œ<code>BigInt</code> æ˜¯ ES10 æ–°å¢ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§å¤æ‚æ•°æ®ç±»å‹å« <code>Object</code>ï¼ˆå¯¹è±¡ï¼‰ã€‚<code>Object</code> æ˜¯ä¸€ç§ <strong>æ— åº</strong> é”®å€¼å¯¹çš„é›†åˆã€‚</p>
<p>ä¸åŒçš„æ•°æ®å­˜æ”¾åœ¨ä¸åŒçš„ç©ºé—´ä¸­ï¼š</p>
<ul>
<li>æ ˆç©ºé—´ï¼šJavaScript å¯¹äº <strong>åŸºæœ¬æ•°æ®ç±»å‹</strong> å†…å­˜çš„åˆ†é…ä¼šåœ¨æ‰§è¡Œæ—¶ç›´æ¥åœ¨æ ˆç©ºé—´è¿›è¡Œåˆ†é…ï¼›</li>
<li>å †ç©ºé—´ï¼šJavaScript å¯¹äº <strong>å¤æ‚æ•°æ®ç±»å‹</strong> å†…å­˜çš„åˆ†é…ä¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå¹¶ä¸”å°†è¿™å—ç©ºé—´çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰è¿”å›ç»™å˜é‡å¼•ç”¨ï¼ˆå­˜æ”¾åœ¨æ ˆç©ºé—´ï¼‰ã€‚</li>
</ul>
<p>è¿™ä¹ˆåšçš„åŸå› æ˜¯  éœ€è¦ç”¨æ ˆæ¥ç»´æŠ¤ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸Šä¸‹æ–‡çš„çŠ¶æ€ï¼Œå¦‚æœæ ˆç©ºé—´åˆ†é…çš„å†…å­˜è¿‡å¤§ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ•ˆç‡ï¼Œä»è€Œå¯¼è‡´ä»£ç æ‰§è¡Œé€Ÿåº¦è¿‡æ…¢ã€‚</p>
<p>å› æ­¤ï¼Œæ ˆç©ºé—´ä¸ä¼šè®¾ç½®å¤ªå¤§ï¼Œä¸»è¦ç”¨æ¥å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå ç”¨ç©ºé—´å°ï¼‰ï¼Œè€Œåƒå¤æ‚æ•°æ®ç±»å‹ï¼Œå› ä¸ºä»–ä»¬çš„å ç”¨ç©ºé—´ä¸€èˆ¬è¾ƒå¤§ï¼Œå› æ­¤ä¼šè¢«å­˜æ”¾åœ¨å †ç©ºé—´ä¸­ã€‚</p>
<h2><code>Undefined</code></h2>
<p>è¯¥ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³ <code>undefined</code>ï¼Œå½“æ—¶ç”¨ <code>var</code>ã€<code>let</code> æ²¡æœ‰åˆå§‹åŒ–æ—¶ï¼Œå°±ç›¸å½“äºç»™å˜é‡èµ‹å€¼ä¸ºäº† <code>undefined</code>ã€‚</p>
<h2><code>Null</code></h2>
<p>è¯¥ç±»å‹åŒæ ·åªæœ‰ä¸€ä¸ªå€¼ <code>null</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆï¼Œå› æ­¤ä½¿ç”¨ <code>typeof</code> æ“ä½œç¬¦åˆ¤æ–­ä¼šè¿”å› <code>object</code>ã€‚</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> car <span class="token operator">=</span> <span class="token keyword">null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span> <span class="token comment">// 'object'</span>
</code></pre></div><p>åœ¨å®šä¹‰å°†æ¥è¦ä¿å­˜å¯¹è±¡å€¼çš„å˜é‡æ—¶ï¼Œå»ºè®®ä½¿ç”¨ <code>null</code> æ¥åˆå§‹åŒ–ï¼Œä¸è¦ä½¿ç”¨å…¶ä»–å€¼ï¼ˆå¦‚ <code>undefined</code>ï¼‰ã€‚</p>
<p>è¿™æ ·ï¼Œåªè¦æ£€æŸ¥è¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸æ˜¯ <code>null</code> å°±å¯ä»¥çŸ¥é“è¿™ä¸ªå˜é‡æ˜¯å¦åœ¨åæ¥è¢«é‡æ–°èµ‹äºˆäº†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>car <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// car æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
<span class="token punctuation">}</span>
</code></pre></div><h2><code>Boolean</code></h2>
<p>å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå­—é¢å€¼ï¼š<code>true</code> å’Œ <code>false</code>ã€‚</p>
<p>è™½ç„¶å¸ƒå°”å€¼åªæœ‰ä¸¤ä¸ªï¼Œä½†æ‰€æœ‰å…¶ä»– ECMAScript ç±»å‹çš„å€¼éƒ½æœ‰ç›¸åº”å¸ƒå°”å€¼çš„ç­‰ä»·å½¢å¼ã€‚è¦å°†ä¸€ä¸ªå…¶ä»–ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼Œå¯ä»¥è°ƒç”¨ç‰¹å®šçš„ <code>Boolean()</code> è½¬å‹å‡½æ•°ï¼š</p>
<div class="language-javascript" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">'Hello world!'</span>
<span class="token keyword">let</span> messageAsBoolean <span class="token operator">=</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
</code></pre></div><p>è½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼š</p>
<p>| æ•°æ®ç±»å‹  | è½¬æ¢ä¸º <code>true</code> çš„å€¼     | è½¬æ¢ä¸º <code>false</code> çš„å€¼ |<br>
|</p>
]]></content>
    <category term="JavaScript"/>
    <published>2024-04-14T00:00:00.000Z</published>
  </entry>
</feed>